{"version":3,"sources":["webpack:///main.js","webpack:///webpack/bootstrap 2bdb529e7aa78df1527a","webpack:///./src/atom/main.js","webpack:///./src/atom/editor-tools/editor-tools.js","webpack:///external \"path\"","webpack:///./src/atom/core/atomWrapper.js","webpack:///./src/atom/editor-tools/details-view.js","webpack:///external \"atom-ui-lib\"","webpack:///./src/atom/util/ScrollViewUI.js","webpack:///external \"atom-space-pen-views\"","webpack:///./src/atom/editor-tools/details.js","webpack:///./src/atom/editor-tools/detailElements.js","webpack:///external \"underscore\"","webpack:///./src/atom/dialogs/assist-utils.js","webpack:///external \"fs\"","webpack:///./src/atom/core/linter-ui.js","webpack:///./src/atom/util/unit.js","webpack:///external \"basarat-text-buffer\"","webpack:///./src/atom/core/editorManager.js","webpack:///external \"raml-language-server\"","webpack:///./src/atom/editor-tools/reconciler.js","webpack:///external \"promise-polyfill\"","webpack:///./src/atom/editor-tools/outline-view.js","webpack:///./src/atom/core/markOccurences.js","webpack:///./src/atom/quick-commands/quick-commands.js","webpack:///./src/atom/quick-commands/quick-commands-ui.js","webpack:///./src/atom/quick-commands/code-commands.js","webpack:///./src/atom/suggestion/provider.js","webpack:///./src/atom/core/patchElements.js","webpack:///external \"atom\"","webpack:///./src/atom/quick-commands/command-manager.js","webpack:///./src/atom/context-menu/contextMenu.js","webpack:///./src/atom/context-menu/contextMenuImpl.js","webpack:///external \"mkdirp\"","webpack:///./src/atom/context-menu/actionUIManager.js","webpack:///./src/atom/context-menu/actions/completeBody/ui.js","webpack:///./src/atom/context-menu/actions/newMethod/ui.js","webpack:///./src/atom/context-menu/actions/simpleAction/ui.js","webpack:///external \"atom-package-deps\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","package_entry_point","editorTools","quickCommands","provider","decl","linterUI","patchElements","CompositeDisposable","commandManager","contextMenu","contextMenuImpl","activate","state","install","then","subscriptions","add","atom","commands","api-workbench:editor-tools","initEditorTools","api-workbench:go-to-definition","gotoDeclaration","api-workbench:find-usages","findUsages","api-workbench:rename","renameRAMLElement","api-workbench:new-project","newProject","doPatch","initialize","registerCommands","initializeActionBasedMenu","getProvider","provideLinter","consumeLinter","linterApi","initEditorObservers","deactivate","dispose","config","grammars","type","default","openConsoleInSplitPane","display","manager","EditorManager","editorToolsStatus","opened","aquireManager","doSplit","value","dir","SplitDirections","RIGHT","newPane","BOTTOM","workspace","getActivePane","splitDown","TOP","splitUp","LEFT","splitLeft","splitRight","addItem","Object","defineProperty","path","detailsView","outlineView","ramlServer","markOccurrences","_this","this","_initialized","updateCount","outlineCount","_cleanOutline","performanceDebug","fire","placeholder","window","markOccurrencesReconciler","Reconciler","getNodeClientConnection","onDidChangeActivePaneItem","e","updateEverything","observeTextEditors","editor","onDidDestroy","getPath","documentClosed","onDidChangeCursorPosition","event","cursorChanged","newBufferPosition","addAutoCloseListener","addListenersForStructure","prototype","console","log","currentEditor","getCurrentEditor","getCurrentPosition","currentPosition","clearOccurences","schedule","MarkOccurrenceRunnable","buffer","getBuffer","pos","characterIndexForPosition","getCursorBufferPosition","positionChanged","unitPath","internalScheduleUpdateViews","count","setTimeout","updateViews","scheduleViewsUpdate","internalScheduleOutlineUpdate","updateOutline","scheduleOutlineUpdate","onDidDestroyPane","evt","edcount","getPaneItems","filter","undefined","length","global","cleanCache","paneForItem","_view","destroy","_details","getOrCreateView","RamlOutline","setUnit","getDetails","DETAILS_SUPPORT","RamlDetails","updateDetails","update","reparseAST","_path","isETPane","pane","items","getItems","indexOf","aw","fpane","setViewsDisplayStyle","visible","element","style","isRaml","editorPath","extName","extname","getActiveTextEditor","patched","addListenersToEditor","positionUpdated","cedit","onDidChange","x","addListenersOnMove","onStructureReport","report","categoryNames","categoryName","structure","push","categoryNamesString","join","debug","movingPane","onDidAddPaneItem","item","moveItemToPane","setActiveItem","setText","text","isFromEdgeRow","currentRow","row","previousRow","getLastRow","ds","Date","getMilliseconds","show","d1","newPosition","require","open","pathsToOpen","Workspace","callback","addModalPanel","arg","getActiveEditor","addRightPanel","args","CommandManager","selector","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","hasOwnProperty","__","constructor","create","UI","SC","details","reconciler_1","_super","allowStructureChanges","disposables","addClass","connection","onDetailsReport","reconciler","getTitle","attached","innerHTML","_children","container","vc","addChild","ui","appendChild","setResource","detailsNode","context","wasSchema","schemaView","displayEmpty","updateDetailsPanel","clear","_unitPath","_position","oldItem","detach","position","force","uri","localModel","getLatestVersion","latestVersion","version","Scrollable","SpacePenViews","content","v","div","class","tabindex","caption","scroll","top","left","scrollTop","scrollLeft","size","bottom","clientHeight","right","clientWidth","changed","refresh","setParent","_parent","removeChild","child","doRender","innerRenderUI","selfRender","document","createElement","html","start","forEach","el","renderUI","parent","children","isAttached","ScrollView","detailsReport","panel","updateTextOnDone","cfg","l","styles","emitter","handlersByEventName","sadd","concat","sremove","schange","cfgCh","addGrammar","updateGrammar","emptyGrammarListeners","nullGrammar","rend","empty","detailElements","buildItem","render","toFocus","field","getActualField","focus","getModel","setCursorBufferPosition","focusedPosition","focusedPropertyName","errLabel","h3","applyStyling","TextClasses","WARNING","setStyle","margin","Error","nodes","Api","properties","actions","Resource","Method","DataElement","Response","filterOut","isUpdateModelRunnable","runnable","getUri","dialog","root","TopLevelNode","_i","_a","title","_b","_c","childOfChild","buildItemInCategory","CheckBoxField","valueText","JSONSchemaField","XMLSchemaField","MarkdownField","options","SelectBox","SimpleMultiEditor","LowLevelTreeField","StructuredField","TypeDisplayItem","TypeSelectBox","ExampleField","XMLExampleField","PropertyEditorInfo","addItemToCategory","lastSelectedCaption","_","assistUtils","inRender","UpdateModelRunnable","newValue","cancelled","run","Promise","resolve","changeDetailValue","conflicts","other","cancel","isCanceled","Item","_title","description","listeners","needsSeparateLabel","addListener","r","removeListener","i","setDescription","desc","setTitle","t","name","setError","clearErrors","WrapPanel","setCaption","Category","apply","arguments","plainChildren","categories","it","rr","section","createSection","_result","showDescription","descriptionLabel","label","contributeTop","wrappedChild","createWrappedChild","subCategories","cats","remap","newCats","showHeader","Section","pnl","Panel","TabFolder","tf","Icon","NONE","firstLabel","ep","setOnSelected","selectedComponent","subCategoryByNameOrCreate","find","rs","errorLabel","BUG","ERROR","hc","setDisplay","result","_options","_panel","n","tabsCount","get","header","setSelectedIndex","documentation","INBOX","SUBTLE","CheckBox2","setLabelWidth","CheckBox","outlineNode","rendered","oldValue","fromEditorToModel","fld","getBinding","detailsChangeRunnable","changedDocuments","applyChangedDocuments","gotoPosition","toLocalValue","inputValue","toUIValue","fromModelToEditor","set","createField","texfField","trim","MarkdownFieldUI","onchange","setMini","setGrammar","setLabelHeight","setRequired","AtomEditorElement","XMLField","JSONField","select","SelectField","setOptions","TreeField","renderer","node","CIRCUIT_BOARD","HIGHLIGHT","SUCCESS","getChildren","viewer","treeViewer","setInput","tm","createRAMLFile","baseUri","sample","raml1","apiLines","typesLines","resourceLines","NewProjectDialog","splitOnLines","lines","match","cleanEmptyLines","activeEditor","bufferPos","positionForCharacterIndex","setSelectedBufferRange","end","offset","openDeclaration","locations","p1","range","p2","revalidate","relint","getEditorByUriOrPath","changedDocuments_1","changedDocument","oldContents","getText","fs","readFileSync","toString","newText","textEdits","textEditProcessor","applyDocumentEdits","writeFileSync","findCurrentName","contents","stopCharacters","beginning","currentOffset","currentChar","charAt","found","stopCharacters_1","stopChar","stopCharacters_2","substring","currentName","prompt","newName","rename","findUsagesImpl","findReferences","sv","SearchResultView","addBottomPanel","apititle","_raml1","_defStructure","_createSampleResource","sourceValue","generateDefaultProjectParentFolder","fdUtils","getHome","extraContent","s","validateProjectLocation","toValidate","errorStatus","parentDirectory","dirname","existsSync","okStatus","validateTitle","zz","BOOK","pad","LayoutType","BLOCK","statusLabel","slf","CustomField","code","StatusCode","projectLocationInput","addValidator","st","setIcon","message","titleStatusLabel","titleStatusMessage","titleTextField","status","r1","checkBox","setValue","getValue","r2","r3","buttonBar","setPercentWidth","button","ButtonSizes","NORMAL","ButtonHighlights","NO_HIGHLIGHT","onOk","createIfNotExist","ps","mkdirSync","load","SEARCH","view","list","location","res","a","y","SMALL","PRIMARY","editorManager","toggleEditorTools","emit","oldText","linter","isRAMLUnit","unitUtils","tabWarnings","textEditor","tab","filePath","trace","column","postPocessError","error","buffers","reject","readFile","err","data","TextBuffer","clientConnection","debugDetail","traceErrors","tracePromises","map","traceError","all","findAndRemoveExpectedReports","versionLimit","expectedValidationReports","reportExpected","expectedVersion","runValidationSheduleUpdater","documentChanged","latestRecievedReport","issues","lint","promise","errors","promises","tabs","combErrors","warnings","grammarScopes","scope","lintOnFly","raml_language_server_1","original","JSON","parse","stringify","newKey","tr","mes","ms","ValidationReportExpected","onValidationReport","pointOfViewUri","expectedReports","expectedReports_1","expectedReport","man","PromiseConstructor","logger","timeout","waitingList","runningList","addToWaitingList","removeFromWaitingList","currentlyRunning","findConflictingInRunningList","addToRunningList","removeFromRunningList","current","index","splice","fullStructurePath","model","simpleTree","input","selectionListener","opener","HLRenderer","setBasicLabelFunction","setKeyProvider","key","addSelectionListener","createTree","resourcesModel","StructureCategories","ResourcesCategory","typesModel","SchemasAndTypesCategory","traitsModel","ResourceTypesAndTraitsCategory","otherModel","OtherCategory","outline","selectionChanged","schemas","types","folder","selectedTab","selection","getSelection","elements","SelectionChangedEvent","customizePanel","_rs","sender","_viewers","getNodePType","category","setSelection","_selectedNode","structurePromise","getStructure","catch","attach","_isAttached","$this","$","outerHTML","forEachViewer","command","HLNodeType","iconNameToIconEnum","iconName","textHighlightNameToTextClass","highlightName","icon","DASH","highLight","textStyle","typeText","ARROW_SMALL_LEFT","markOccurences","occurences","layer","getOccurencesLayer","occurence","markBufferRange","decorateMarkerLayer","layerId","occurencesLayerId","getMarkerLayer","addMarkerLayer","getMarkOccurrencesPath","ranges","bufferRanges","runSynchronously","otherPath","cm","showCommands","cc","registerQuickCommands","et","qcui","QuickCommand","priority","when","registerAsAtomCommand","target","atomCommand","disposed","unregister","SelectListView","register","cmd","qcmd","atomTarget","predicate","joinedCommands","commandId","getDynamicCommands","currentCommand","keys","sort","aspv","_confirmed","filterKey","getFilterKey","viewForItem","hide","confirmed","getSelectedItemView","storeFocusedElement","setItems","focusFilterEditor","onDidInsertSuggestion","triggerPosition","suggestion","annotation","txt","newPos","insert","replacementPrefix","extra","getSuggestions","request","bufferPosition","disableForSelector","filterSuggestions","inclusionPriority","excludeLowerPriority","oldRegister","registerElement","proto","oldAttachedCallback","attachedCallback","parentElement","addCommand","callBack","tag","listCommands","disposable","commandInfo","commandIdToCommandInfo","tagCommands","tagToCommands","deleteUnmanagedCommand","registeredCommands","selectorBasedListenersByCommandName","deleteManagedCommand","infoIndex","currentInfo","deleteCommandsByTag","commandName","initialized","packages","activatePackage","listener","prePanelDisplay","listenersArray","didDispatch","sequenceNumber","registerContributor","contributor","contributors","DYNAMIC_COMMAND_TAG","contributorId","calculationStarted","calculateItems","calculationFinished","originalShowForEvent","showForEvent","preMenuDisplay","postMenuDisplay","calculateMenuItemsTree","treeRoots","nodeSets","cleanExistingSets","itemSet","findOrCreateItemSet","menuItem","constructAtomMenuItem","submenu","onClick","childMenuItem","existingSet","itemSets","currentSet","DYNAMIC_SET_TAG","specificity","usedSelectors","existingSets","addMenuItem","shouldDisplay","deleteMenuItems","deleteMenuItem","contributorPromises","contributorItems","addItemsTreeNode","roots","currentList","catIndex","currentSegment","existingNode","ContextMenuItemNode","leafNode","onClickHandler","action","executeContextAction","changes","_loop_1","change","editorFound_1","getTextEditors","mkdirp","sync","pathModule","changes_1","editorContextMenuContributor","calculateEditorContextActions","currentActions","handleActionUI","configureServerActions","actionBasedMenuInitialized","onDisplayActionUI","uiDisplayRequest","actionUI","actionUIManager","getUICode","IDE","uilibsModule","UIBuilder","uiBuilder","initialUIState","setServerConfiguration","actionsConfiguration","enableUIActions","nameOverride","actionID","completeBodyUI","newMethodUI","simpleActionUi","generateSchema","mediaType","generator","JsonSchemaGenerator","obj","schemaObject","schemaString","FillBodyDialog","getResult","sch","pass","property","valueType","detectType","isArray","passArray","passObject","registerProperty","propName","array","needXML","needJSON","jsexample","xmlexample","xmlschema","jsschema","resultPromise","updateButtons","createButton","setDisabled","em","HighLightClasses","createTextSection","te","lang","hs","setId","ts","_dialog","onDone","stretch","_dialog2","isPrimary","highlight","reverse","_closeDialog","addStatusListener","_dialogPanels","eventListener","height","body","getComputedStyle","parseFloat","overflowY","addEventListener","mdp","removeEventListener","pop","newMethod","inputState","method","mdesc","methodDescriptions","cdesc","statusCodeDescriptions","NO_RESPONCE","NO_RESPONCE_BT","bodyType","mdescLabel","LabelField","cdescLabel","methodSelect","responseSelect","responseTypeSelect","typeOfValue","realBodyType","bodyTypeSelect","bodyTypeOfValue","actualType","bodyTypeString","__ret","typeValues","isSchema","responseSection","savedResolve","savedReject","CODE","initialState","isParentNull","canceled","detailsTree","simpleModalDialog"],"mappings":"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","file":"main.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../typings/main.d.ts\" />\n\tvar editorTools = __webpack_require__(1);\n\tvar quickCommands = __webpack_require__(22);\n\tvar provider = __webpack_require__(25);\n\tvar decl = __webpack_require__(11);\n\tvar linterUI = __webpack_require__(13);\n\tvar patchElements = __webpack_require__(26);\n\tvar CompositeDisposable = __webpack_require__(27).CompositeDisposable;\n\t// import sharedASTInitializer = require(\"./shared-ast-initializer\")\n\tvar commandManager = __webpack_require__(28);\n\tvar contextMenu = __webpack_require__(29);\n\t// import quickFixActions = require(\"./context-menu/quickFix\")\n\t// import actions = require(\"./context-menu/actions\")\n\tvar contextMenuImpl = __webpack_require__(30);\n\tvar package_entry_point;\n\t(function (package_entry_point) {\n\t    var subscriptions = new CompositeDisposable();\n\t    function activate(state) {\n\t        __webpack_require__(36).install('api-workbench', true)\n\t            .then(function () {\n\t            subscriptions.add(atom.commands.add('atom-workspace', {\n\t                /*'api-workbench:popular-apis': apiList.showPopularApis,*/\n\t                'api-workbench:editor-tools': editorTools.initEditorTools,\n\t                /*'api-workbench:console': Console.toggle,*/\n\t                'api-workbench:go-to-definition': decl.gotoDeclaration,\n\t                'api-workbench:find-usages': decl.findUsages,\n\t                /*'api-workbench:quick-outline':quickOutline.show,\n\t                'api-workbench:quick-commands': quickCommands.showCommands,*/\n\t                'api-workbench:rename': decl.renameRAMLElement,\n\t                'api-workbench:new-project': decl.newProject,\n\t            }));\n\t            //subscriptions.add(atom.workspace.addOpener(Console.opener))\n\t            ////subscriptions.add(atom.workspace.addOpener(RamlScriptReport.opener))\n\t            patchElements.doPatch();\n\t            commandManager.initialize();\n\t            contextMenu.initialize();\n\t            // sharedASTInitializer.initialize()\n\t            quickCommands.registerCommands();\n\t            // quickFixActions.initialize()\n\t            // actions.register();\n\t            editorTools.initEditorTools();\n\t            contextMenuImpl.initializeActionBasedMenu('atom-text-editor[data-grammar=\"source raml\"],.raml-outline');\n\t        });\n\t    }\n\t    package_entry_point.activate = activate;\n\t    function getProvider() {\n\t        return provider;\n\t    }\n\t    package_entry_point.getProvider = getProvider;\n\t    function provideLinter() {\n\t        return linterUI;\n\t    }\n\t    package_entry_point.provideLinter = provideLinter;\n\t    function consumeLinter(linterApi) {\n\t        subscriptions.add(linterUI.initEditorObservers(linterApi));\n\t    }\n\t    package_entry_point.consumeLinter = consumeLinter;\n\t    function deactivate() {\n\t        subscriptions.dispose();\n\t    }\n\t    package_entry_point.deactivate = deactivate;\n\t    package_entry_point.config = {\n\t        grammars: {\n\t            type: 'array',\n\t            default: [\n\t                'source.raml'\n\t            ]\n\t        },\n\t        openConsoleInSplitPane: {\n\t            type: 'boolean',\n\t            default: true\n\t        }\n\t    };\n\t})(package_entry_point || (package_entry_point = {}));\n\tmodule.exports = package_entry_point;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLGdEQUFnRDtBQUtoRCx5REFBeUQ7QUFDekQsK0RBQWlFO0FBQ2pFLGdEQUFnRDtBQUVoRCw2Q0FBNkM7QUFDN0MsMkNBQTJDO0FBQzNDLG9EQUFvRDtBQUNwRCxJQUFJLG1CQUFtQixHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQztBQUM5RCxvRUFBb0U7QUFDcEUsaUVBQW1FO0FBQ25FLHdEQUEwRDtBQUMxRCw4REFBOEQ7QUFDOUQscURBQXFEO0FBQ3JELGdFQUFrRTtBQUVsRSxJQUFPLG1CQUFtQixDQXFFekI7QUFyRUQsV0FBTyxtQkFBbUI7SUFFdEIsSUFBSSxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsRUFBRSxDQUFBO0lBRTdDLGtCQUEwQixLQUFLO1FBQzNCLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDO2FBQ3RELElBQUksQ0FBQztZQUNGLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2xELDBEQUEwRDtnQkFDMUQsNEJBQTRCLEVBQUMsV0FBVyxDQUFDLGVBQWU7Z0JBQ3hELDRDQUE0QztnQkFDNUMsZ0NBQWdDLEVBQUMsSUFBSSxDQUFDLGVBQWU7Z0JBQ3JELDJCQUEyQixFQUFDLElBQUksQ0FBQyxVQUFVO2dCQUMzQzs2RUFDNkQ7Z0JBQzdELHNCQUFzQixFQUFDLElBQUksQ0FBQyxpQkFBaUI7Z0JBQzdDLDJCQUEyQixFQUFDLElBQUksQ0FBQyxVQUFVO2FBRzlDLENBQUMsQ0FBQyxDQUFBO1lBRUgsNkRBQTZEO1lBQzdELHdFQUF3RTtZQUV4RSxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFeEIsY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUFBO1lBQzNCLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQTtZQUN4QixvQ0FBb0M7WUFFcEMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUE7WUFDaEMsK0JBQStCO1lBQy9CLHNCQUFzQjtZQUV0QixXQUFXLENBQUMsZUFBZSxFQUFFLENBQUE7WUFFN0IsZUFBZSxDQUFDLHlCQUF5QixDQUFDLDREQUE0RCxDQUFDLENBQUE7UUFDM0csQ0FBQyxDQUFDLENBQUE7SUFDVixDQUFDO0lBbENlLDRCQUFRLFdBa0N2QixDQUFBO0lBR0Q7UUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ3BCLENBQUM7SUFGZSwrQkFBVyxjQUUxQixDQUFBO0lBRUQ7UUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ3BCLENBQUM7SUFGZSxpQ0FBYSxnQkFFNUIsQ0FBQTtJQUVELHVCQUE4QixTQUFTO1FBQ25DLGFBQWEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUZlLGlDQUFhLGdCQUU1QixDQUFBO0lBRUQ7UUFDSSxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDM0IsQ0FBQztJQUZlLDhCQUFVLGFBRXpCLENBQUE7SUFFVSwwQkFBTSxHQUFHO1FBQ2hCLFFBQVEsRUFBRTtZQUNOLElBQUksRUFBRSxPQUFPO1lBQ2IsT0FBTyxFQUFFO2dCQUNMLGFBQWE7YUFDaEI7U0FDSjtRQUNELHNCQUFzQixFQUFFO1lBQ3BCLElBQUksRUFBRSxTQUFTO1lBQ2YsT0FBTyxFQUFFLElBQUk7U0FDaEI7S0FDSixDQUFBO0FBQ0wsQ0FBQyxFQXJFTSxtQkFBbUIsS0FBbkIsbUJBQW1CLFFBcUV6QjtBQUNELGlCQUFRLG1CQUFtQixDQUFBIiwiZmlsZSI6InNyYy9hdG9tL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG4vLyBpbXBvcnQgQ29uc29sZSA9IHJlcXVpcmUoJy4vY29uc29sZS9pbmRleCcpO1xuaW1wb3J0IGFwaUxpc3QgPSByZXF1aXJlKCcuL3BvcHVsYXItYXBpcy9wb3B1bGFyLWFwaXMnKTtcbmltcG9ydCBqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcbmltcG9ydCBlZGl0b3JUb29scz1yZXF1aXJlKCcuL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHMnKVxuaW1wb3J0IHF1aWNrQ29tbWFuZHMgPSByZXF1aXJlKCcuL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzJylcbmltcG9ydCBwcm92aWRlcj1yZXF1aXJlKFwiLi9zdWdnZXN0aW9uL3Byb3ZpZGVyXCIpXG5pbXBvcnQgcXVpY2tPdXRsaW5lPXJlcXVpcmUoXCIuL3F1aWNrLW91dGxpbmUvcXVpY2stb3V0bGluZVwiKVxuaW1wb3J0IGRlY2w9cmVxdWlyZShcIi4vZGlhbG9ncy9hc3Npc3QtdXRpbHNcIilcbmltcG9ydCBsaW50ZXJVST1yZXF1aXJlKFwiLi9jb3JlL2xpbnRlci11aVwiKVxuaW1wb3J0IHBhdGNoRWxlbWVudHM9cmVxdWlyZShcIi4vY29yZS9wYXRjaEVsZW1lbnRzXCIpXG52YXIgQ29tcG9zaXRlRGlzcG9zYWJsZSA9IHJlcXVpcmUoJ2F0b20nKS5Db21wb3NpdGVEaXNwb3NhYmxlO1xuLy8gaW1wb3J0IHNoYXJlZEFTVEluaXRpYWxpemVyID0gcmVxdWlyZShcIi4vc2hhcmVkLWFzdC1pbml0aWFsaXplclwiKVxuaW1wb3J0IGNvbW1hbmRNYW5hZ2VyID0gcmVxdWlyZShcIi4vcXVpY2stY29tbWFuZHMvY29tbWFuZC1tYW5hZ2VyXCIpXG5pbXBvcnQgY29udGV4dE1lbnUgPSByZXF1aXJlKFwiLi9jb250ZXh0LW1lbnUvY29udGV4dE1lbnVcIilcbi8vIGltcG9ydCBxdWlja0ZpeEFjdGlvbnMgPSByZXF1aXJlKFwiLi9jb250ZXh0LW1lbnUvcXVpY2tGaXhcIilcbi8vIGltcG9ydCBhY3Rpb25zID0gcmVxdWlyZShcIi4vY29udGV4dC1tZW51L2FjdGlvbnNcIilcbmltcG9ydCBjb250ZXh0TWVudUltcGwgPSByZXF1aXJlKFwiLi9jb250ZXh0LW1lbnUvY29udGV4dE1lbnVJbXBsXCIpXG5cbm1vZHVsZSBwYWNrYWdlX2VudHJ5X3BvaW50IHtcblxuICAgIHZhciBzdWJzY3JpcHRpb25zID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlIChzdGF0ZSkge1xuICAgICAgICByZXF1aXJlKCdhdG9tLXBhY2thZ2UtZGVwcycpLmluc3RhbGwoJ2FwaS13b3JrYmVuY2gnLCB0cnVlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuYWRkKGF0b20uY29tbWFuZHMuYWRkKCdhdG9tLXdvcmtzcGFjZScsIHtcbiAgICAgICAgICAgICAgICAgICAgLyonYXBpLXdvcmtiZW5jaDpwb3B1bGFyLWFwaXMnOiBhcGlMaXN0LnNob3dQb3B1bGFyQXBpcywqL1xuICAgICAgICAgICAgICAgICAgICAnYXBpLXdvcmtiZW5jaDplZGl0b3ItdG9vbHMnOmVkaXRvclRvb2xzLmluaXRFZGl0b3JUb29scyxcbiAgICAgICAgICAgICAgICAgICAgLyonYXBpLXdvcmtiZW5jaDpjb25zb2xlJzogQ29uc29sZS50b2dnbGUsKi9cbiAgICAgICAgICAgICAgICAgICAgJ2FwaS13b3JrYmVuY2g6Z28tdG8tZGVmaW5pdGlvbic6ZGVjbC5nb3RvRGVjbGFyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICdhcGktd29ya2JlbmNoOmZpbmQtdXNhZ2VzJzpkZWNsLmZpbmRVc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIC8qJ2FwaS13b3JrYmVuY2g6cXVpY2stb3V0bGluZSc6cXVpY2tPdXRsaW5lLnNob3csXG4gICAgICAgICAgICAgICAgICAgICdhcGktd29ya2JlbmNoOnF1aWNrLWNvbW1hbmRzJzogcXVpY2tDb21tYW5kcy5zaG93Q29tbWFuZHMsKi9cbiAgICAgICAgICAgICAgICAgICAgJ2FwaS13b3JrYmVuY2g6cmVuYW1lJzpkZWNsLnJlbmFtZVJBTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAnYXBpLXdvcmtiZW5jaDpuZXctcHJvamVjdCc6ZGVjbC5uZXdQcm9qZWN0LFxuICAgICAgICAgICAgICAgICAgICAvKidhcGktd29ya2JlbmNoOnNlbGVjdC1ub2RlJzpkZWNsLnNlbGVjdCwqL1xuICAgICAgICAgICAgICAgICAgICAvKidhcGktd29ya2JlbmNoOnJldmFsaWRhdGUnOmRlY2wucmV2YWxpZGF0ZSovXG4gICAgICAgICAgICAgICAgfSkpXG5cbiAgICAgICAgICAgICAgICAvL3N1YnNjcmlwdGlvbnMuYWRkKGF0b20ud29ya3NwYWNlLmFkZE9wZW5lcihDb25zb2xlLm9wZW5lcikpXG4gICAgICAgICAgICAgICAgLy8vL3N1YnNjcmlwdGlvbnMuYWRkKGF0b20ud29ya3NwYWNlLmFkZE9wZW5lcihSYW1sU2NyaXB0UmVwb3J0Lm9wZW5lcikpXG5cbiAgICAgICAgICAgICAgICBwYXRjaEVsZW1lbnRzLmRvUGF0Y2goKTtcblxuICAgICAgICAgICAgICAgIGNvbW1hbmRNYW5hZ2VyLmluaXRpYWxpemUoKVxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmluaXRpYWxpemUoKVxuICAgICAgICAgICAgICAgIC8vIHNoYXJlZEFTVEluaXRpYWxpemVyLmluaXRpYWxpemUoKVxuXG4gICAgICAgICAgICAgICAgcXVpY2tDb21tYW5kcy5yZWdpc3RlckNvbW1hbmRzKClcbiAgICAgICAgICAgICAgICAvLyBxdWlja0ZpeEFjdGlvbnMuaW5pdGlhbGl6ZSgpXG4gICAgICAgICAgICAgICAgLy8gYWN0aW9ucy5yZWdpc3RlcigpO1xuXG4gICAgICAgICAgICAgICAgZWRpdG9yVG9vbHMuaW5pdEVkaXRvclRvb2xzKClcblxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51SW1wbC5pbml0aWFsaXplQWN0aW9uQmFzZWRNZW51KCdhdG9tLXRleHQtZWRpdG9yW2RhdGEtZ3JhbW1hcj1cInNvdXJjZSByYW1sXCJdLC5yYW1sLW91dGxpbmUnKVxuICAgICAgICAgICAgfSlcbiAgICB9XG5cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlcigpe1xuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVMaW50ZXIoKXtcbiAgICAgICAgcmV0dXJuIGxpbnRlclVJO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjb25zdW1lTGludGVyKGxpbnRlckFwaSkge1xuICAgICAgICBzdWJzY3JpcHRpb25zLmFkZChsaW50ZXJVSS5pbml0RWRpdG9yT2JzZXJ2ZXJzKGxpbnRlckFwaSkpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlKCl7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMuZGlzcG9zZSgpXG4gICAgfVxuXG4gICAgZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgICAgIGdyYW1tYXJzOiB7XG4gICAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgICAgZGVmYXVsdDogW1xuICAgICAgICAgICAgICAgICdzb3VyY2UucmFtbCdcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgb3BlbkNvbnNvbGVJblNwbGl0UGFuZToge1xuICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0ID1wYWNrYWdlX2VudHJ5X3BvaW50XG4iXX0=\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar path = __webpack_require__(2);\n\tvar atom = __webpack_require__(3);\n\tvar detailsView = __webpack_require__(4);\n\tvar outlineView = __webpack_require__(20);\n\tvar ramlServer = __webpack_require__(17);\n\tvar markOccurrences = __webpack_require__(21);\n\tvar _bmc = 0;\n\tfunction benchmark(func) {\n\t    var t0 = new Date().getTime();\n\t    if (_bmc != 0 && func)\n\t        console.log(func + \" took \" + (t0 - _bmc) + \" miliseconds.\");\n\t    _bmc = t0;\n\t}\n\tvar EditorManager = /** @class */ (function () {\n\t    function EditorManager(display) {\n\t        if (display === void 0) { display = true; }\n\t        var _this = this;\n\t        this._initialized = false;\n\t        this.opened = false;\n\t        this.updateCount = 0;\n\t        this.outlineCount = 0;\n\t        this._cleanOutline = false;\n\t        this.performanceDebug = true;\n\t        this.fire = true;\n\t        this.placeholder = false;\n\t        manager = window[\"manager\"] = this;\n\t        this.markOccurrencesReconciler = new ramlServer.Reconciler(ramlServer.getNodeClientConnection(), 200);\n\t        atom.workspace.onDidChangeActivePaneItem(function (e) { return _this.updateEverything(display); });\n\t        atom.workspace.observeTextEditors(function (editor) {\n\t            editor.onDidDestroy(function () {\n\t                var path = editor.getPath();\n\t                ramlServer.getNodeClientConnection().documentClosed(path);\n\t            });\n\t            editor.onDidChangeCursorPosition(function (event) { return _this.cursorChanged(editor, event.newBufferPosition); });\n\t        });\n\t        this.updateEverything(display);\n\t        this.addAutoCloseListener();\n\t        this.addListenersForStructure();\n\t    }\n\t    EditorManager.prototype.getPath = function () {\n\t        console.log(\"ETM::GetPath\");\n\t        return this.currentEditor ? this.currentEditor.getPath() : null;\n\t    };\n\t    EditorManager.prototype.getCurrentEditor = function () { return this.currentEditor; };\n\t    EditorManager.prototype.getCurrentPosition = function () {\n\t        return this.currentPosition;\n\t    };\n\t    EditorManager.prototype.cursorChanged = function (editor, newBufferPosition) {\n\t        markOccurrences.clearOccurences(editor);\n\t        this.markOccurrencesReconciler.schedule(new markOccurrences.MarkOccurrenceRunnable(editor, newBufferPosition));\n\t        var buffer = editor.getBuffer();\n\t        var pos = buffer.characterIndexForPosition(editor.getCursorBufferPosition());\n\t        ramlServer.getNodeClientConnection().positionChanged(manager.unitPath, pos);\n\t        this.currentPosition = pos;\n\t    };\n\t    EditorManager.prototype.internalScheduleUpdateViews = function (count) {\n\t        var _this = this;\n\t        this.updateCount = count;\n\t        setTimeout(function () {\n\t            if (_this.updateCount == count) {\n\t                _this.updateViews();\n\t            }\n\t        }, 500);\n\t    };\n\t    EditorManager.prototype.scheduleViewsUpdate = function () {\n\t        if (this.fire) {\n\t            this.internalScheduleUpdateViews(this.updateCount + 1);\n\t        }\n\t    };\n\t    EditorManager.prototype.internalScheduleOutlineUpdate = function (count) {\n\t        var _this = this;\n\t        this.outlineCount = count;\n\t        setTimeout(function () {\n\t            if (_this.outlineCount == count) {\n\t                _this.updateOutline();\n\t            }\n\t        }, 500);\n\t    };\n\t    EditorManager.prototype.scheduleOutlineUpdate = function () {\n\t        this.internalScheduleOutlineUpdate(this.outlineCount + 1);\n\t    };\n\t    EditorManager.prototype.addAutoCloseListener = function () {\n\t        var _this = this;\n\t        atom.workspace.onDidDestroyPane(function (evt) {\n\t            try {\n\t                var edcount = atom.workspace.getPaneItems().filter(function (e) {\n\t                    return e['softTabs'] != undefined;\n\t                }).length;\n\t                if (edcount == 0) {\n\t                    // this.ast=null;\n\t                    // this.unit=null;\n\t                    // this._currentNode=null;\n\t                    _this.currentEditor = null;\n\t                    if (global.cleanCache) {\n\t                        global.cleanCache();\n\t                    }\n\t                    if (atom.workspace.paneForItem(_this._view))\n\t                        atom.workspace.paneForItem(_this._view).destroy();\n\t                    if (atom.workspace.paneForItem(_this._details))\n\t                        atom.workspace.paneForItem(_this._details).destroy();\n\t                    _this.opened = false;\n\t                }\n\t            }\n\t            catch (e) {\n\t                //TODO REMOVE IT LATER WE NEED TO BE PRETy DEFENSIVE AT THIS MOMENT\n\t                console.log(e);\n\t            }\n\t        });\n\t    };\n\t    EditorManager.prototype.getOrCreateView = function () {\n\t        if (!this._view) {\n\t            this._view = new outlineView.RamlOutline();\n\t            if (this.unitPath) {\n\t                this._view.setUnit(this.unitPath);\n\t            }\n\t            // if (this.ast){\n\t            //     this._view.setUnit(this.ast);\n\t            // }\n\t        }\n\t        return this._view;\n\t    };\n\t    EditorManager.prototype.getDetails = function () {\n\t        if (!EditorManager.DETAILS_SUPPORT)\n\t            return null;\n\t        if (!this._details)\n\t            this._details = new detailsView.RamlDetails();\n\t        return this._details;\n\t    };\n\t    EditorManager.prototype.updateDetails = function () {\n\t        this.getDetails().update();\n\t    };\n\t    EditorManager.prototype.reparseAST = function () {\n\t        if (this.currentEditor) {\n\t            var _path = this.currentEditor.getPath();\n\t            var bf = this.currentEditor.getBuffer();\n\t            this.unitPath = _path;\n\t            // var prj = project.createProject(path.dirname(_path));\n\t            // var unit = prj.setCachedUnitContent(path.basename(_path), this.currentEditor.getBuffer().getText());\n\t            //\n\t            // unit.project().addTextChangeListener(delta=>{\n\t            //     if (delta.unit!=unit){\n\t            //         return;\n\t            //     }\n\t            //     var cm=delta.offset;\n\t            //     var end=delta.replacementLength;\n\t            //     var text=delta.text;\n\t            //     var buffer=(<atom.IBuffer>this.currentEditor.getBuffer());\n\t            //     var start=buffer.positionForCharacterIndex(cm);\n\t            //     var endPosition=buffer.positionForCharacterIndex(cm+end);\n\t            //     try {\n\t            //         this.fire=false;\n\t            //         (<any>buffer).setTextInRange({start: start, end: endPosition}, text);\n\t            //         this.scheduleOutlineUpdate();\n\t            //     } finally{\n\t            //         this.fire=true;\n\t            //     }\n\t            // });\n\t            // this.ast = unit.highLevel();\n\t            // this.unit = unit;\n\t        }\n\t    };\n\t    EditorManager.prototype.isETPane = function (pane) {\n\t        if (!this._view) {\n\t            return;\n\t        }\n\t        var items = pane.getItems();\n\t        return ((EditorManager.DETAILS_SUPPORT && items.indexOf(this.getDetails()) >= 0)\n\t            || items.indexOf(this._view) >= 0);\n\t    };\n\t    EditorManager.prototype.display = function () {\n\t        console.log(\"ETM::Display\");\n\t        var aw = atom.workspace;\n\t        var fpane = atom.workspace.paneForItem(this.getCurrentEditor());\n\t        if (!fpane)\n\t            return;\n\t        if (!aw.paneForItem(this.getOrCreateView()))\n\t            doSplit(this.getOrCreateView());\n\t        if (EditorManager.DETAILS_SUPPORT) {\n\t            if (!aw.paneForItem(manager.getDetails()))\n\t                doSplit(this.getDetails(), SplitDirections.BOTTOM);\n\t        }\n\t        this.opened = true;\n\t    };\n\t    // updateText(node?: ll.ILowLevelASTNode) {\n\t    //     this.fire = false;\n\t    //     var editor = this.currentEditor;\n\t    //     var pos = node ? editor.getBuffer().positionForCharacterIndex(node.start()) : null;\n\t    //     editor.setText(this.unit.contents());\n\t    //     this.fire = true;\n\t    //     if (pos) (<any>editor).setCursorBufferPosition(pos);\n\t    // }\n\t    // selectNode(hnode: hl.IHighLevelNode) {\n\t    //     var node = hnode.lowLevel();\n\t    //     if (!node) return;\n\t    //     var editor = this.currentEditor;\n\t    //     if (!editor) return;\n\t    //     var pos = node ? editor.getBuffer().positionForCharacterIndex(node.start()) : null;\n\t    //     if (pos) (<any>editor).setCursorBufferPosition(pos);\n\t    // }\n\t    EditorManager.prototype.setViewsDisplayStyle = function (visible) {\n\t        if (this._details && this._details.element) {\n\t            this._details.element.style.display = visible ? null : \"none\";\n\t        }\n\t        if (this._view && this._view.element) {\n\t            this._view.element.style.display = visible ? null : \"none\";\n\t        }\n\t    };\n\t    EditorManager.prototype.isRaml = function (editor) {\n\t        if (!editor) {\n\t            return false;\n\t        }\n\t        var editorPath = editor.getPath();\n\t        if (!editorPath) {\n\t            return false;\n\t        }\n\t        var extName = path.extname(editorPath);\n\t        if (extName !== '.raml') {\n\t            return false;\n\t        }\n\t        return true;\n\t    };\n\t    EditorManager.prototype.updateEverything = function (display) {\n\t        if (display === void 0) { display = true; }\n\t        var editor = atom.workspace.getActiveTextEditor();\n\t        if (editor) {\n\t            this.setViewsDisplayStyle(this.isRaml(editor));\n\t        }\n\t        if (!editor || editor == this.currentEditor || !this.isRaml(editor)) {\n\t            return;\n\t        }\n\t        this.currentEditor = editor;\n\t        if (this.opened == false && display)\n\t            this.display();\n\t        //we are not listening to the editor changes any more,\n\t        //instead we are listening to the reports of the server that something is avilable, like the structure\n\t        if (!editor.patched) {\n\t            this.addListenersToEditor(editor);\n\t        }\n\t        this.reparseAST();\n\t        var pos = editor.getBuffer().characterIndexForPosition(editor.getCursorBufferPosition());\n\t        this.positionUpdated(pos);\n\t        this.scheduleViewsUpdate();\n\t    };\n\t    EditorManager.prototype.addListenersToEditor = function (cedit) {\n\t        var _this = this;\n\t        var buffer = cedit.getBuffer();\n\t        buffer.onDidChange(function (x) {\n\t            try {\n\t                //this.reparseAST();\n\t                var pos = buffer.characterIndexForPosition(cedit.getCursorBufferPosition());\n\t                _this.positionUpdated(pos);\n\t                //this.scheduleViewsUpdate();\n\t            }\n\t            catch (e) {\n\t                console.log(e);\n\t            }\n\t        });\n\t        //updating ast node on position change\n\t        // cedit.getLastCursor().onDidChangePosition(x=> {\n\t        //     if (!this.fire) return;\n\t        //     this.positionUpdated(buffer.characterIndexForPosition(cedit.getCursorBufferPosition()));\n\t        //     this.scheduleViewsUpdate();\n\t        // });\n\t        this.addListenersOnMove(cedit);\n\t        this.currentEditor.patched = true;\n\t    };\n\t    EditorManager.prototype.addListenersForStructure = function () {\n\t        var _this = this;\n\t        ramlServer.getNodeClientConnection().onStructureReport(function (report) {\n\t            var categoryNames = [];\n\t            for (var categoryName in report.structure)\n\t                categoryNames.push(categoryName);\n\t            var categoryNamesString = categoryNames.join();\n\t            ramlServer.getNodeClientConnection().debug(\"Got new structure report with categories \"\n\t                + categoryNamesString, \"EditorManager\", \"addListenersForStructure\");\n\t            var editor = atom.workspace.getActiveTextEditor();\n\t            if (!editor || !_this.isRaml(editor)) {\n\t                return;\n\t            }\n\t            _this.updateOutline();\n\t        });\n\t    };\n\t    EditorManager.prototype.addListenersOnMove = function (cedit) {\n\t        var _this = this;\n\t        var movingPane = false;\n\t        atom.workspace.onDidAddPaneItem(function (event) {\n\t            if (movingPane || _this.isETPane(event.pane) == false || event.item == _this.getOrCreateView() || (EditorManager.DETAILS_SUPPORT && event.item == _this.getDetails()))\n\t                return event;\n\t            setTimeout(function () {\n\t                try {\n\t                    var fpane = atom.workspace.paneForItem(cedit);\n\t                    if (fpane) {\n\t                        movingPane = true;\n\t                        event.pane.moveItemToPane(event.item, fpane, null);\n\t                        movingPane = false;\n\t                        fpane.setActiveItem(event.item);\n\t                        fpane.activate();\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    //TODO REMOVE IT LATER WE NEED TO BE PRETy DEFENSIVE AT THIS MOMENT\n\t                    console.log(e);\n\t                }\n\t            }, 18);\n\t        });\n\t    };\n\t    // _currentNode: hl.IHighLevelNode;\n\t    // //_selectedNode: hl.IHighLevelNode;\n\t    // patchCurrentNode(n:hl.IHighLevelNode){\n\t    //     this._currentNode=n;\n\t    // }\n\t    //\n\t    // getCurrentNode() {\n\t    //     if (this._currentNode == null) return this._currentNode = this.ast;\n\t    //     else return this._currentNode;\n\t    // }\n\t    // setSelectedNode(node: hl.IHighLevelNode) {\n\t    //     //this._selectedNode = node;\n\t    //\n\t    //     if (this.unit){\n\t    //         var unitPath=this.unit.absolutePath();\n\t    //         while (node.lowLevel().unit().absolutePath()!=unitPath){\n\t    //             if (!node.parent()){\n\t    //                 break;\n\t    //             }\n\t    //             else{\n\t    //                 node=node.parent();\n\t    //             }\n\t    //         }\n\t    //     }\n\t    //     var id=node.id();\n\t    //     var anode=this.ast.findById(id);\n\t    //     if (anode){\n\t    //         node=anode;\n\t    //     }\n\t    //     if (this._details){\n\t    //         this._details.show(node);\n\t    //     }\n\t    //     var editor = this.getCurrentEditor();\n\t    //     if (editor) {\n\t    //         this.fire=false;\n\t    //         try {\n\t    //             var buffer = editor.getBuffer();\n\t    //             var posStart = buffer.positionForCharacterIndex(node.lowLevel().start());\n\t    //             var posEnd = buffer.positionForCharacterIndex(node.lowLevel().end());\n\t    //             editor.setCursorBufferPosition(posStart);\n\t    //             this.positionUpdated(buffer.characterIndexForPosition(editor.getCursorBufferPosition()));\n\t    //         }finally{\n\t    //             this.fire=true;\n\t    //         }\n\t    //     }\n\t    // }\n\t    // getSelectedNode() {\n\t    //     return this.getCurrentNode()\n\t    //     //else return this._selectedNode;\n\t    // }\n\t    EditorManager.prototype.setText = function (text) {\n\t        console.log(\"ETM::SetText\");\n\t        var editor = this.currentEditor;\n\t        if (editor == null)\n\t            return;\n\t        editor.setText(text);\n\t    };\n\t    EditorManager.prototype.isFromEdgeRow = function () {\n\t        var editor = this.getCurrentEditor();\n\t        if (!editor) {\n\t            return false;\n\t        }\n\t        var currentPosition = editor.getCursorBufferPosition();\n\t        if (!currentPosition) {\n\t            return false;\n\t        }\n\t        var currentRow = currentPosition.row;\n\t        var previousRow = editor.previousRow;\n\t        editor.previousRow = currentRow;\n\t        if (previousRow === undefined) {\n\t            return false;\n\t        }\n\t        if (previousRow === currentRow) {\n\t            return false;\n\t        }\n\t        if (previousRow === editor.getBuffer().getLastRow() || previousRow === 0) {\n\t            return true;\n\t        }\n\t    };\n\t    EditorManager.prototype.updateViews = function () {\n\t        //var cNode = this.getCurrentNode();\n\t        var ds = new Date().getMilliseconds();\n\t        if (EditorManager.DETAILS_SUPPORT && this._details) {\n\t            this.getDetails().show(manager.unitPath, manager.currentPosition, this.isFromEdgeRow());\n\t        }\n\t        if (this._view) {\n\t            this.getOrCreateView().setUnit(manager.unitPath);\n\t            // this.getOrCreateView().setUnit(manager.ast);\n\t            //this.getOrCreateView().setSelection(cNode);\n\t        }\n\t        var d1 = new Date().getMilliseconds();\n\t        if (this.performanceDebug) {\n\t            console.log(\"Views update:\" + (d1 - ds));\n\t        }\n\t    };\n\t    EditorManager.prototype.updateOutline = function () {\n\t        ramlServer.getNodeClientConnection().debug(\"Updating outline\", \"EditorManager\", \"updateOutline\");\n\t        if (this._view) {\n\t            this.getOrCreateView().setUnit(manager.unitPath);\n\t        }\n\t    };\n\t    EditorManager.prototype.positionUpdated = function (newPosition) {\n\t        this.currentPosition = newPosition;\n\t        if (this._details) {\n\t            ramlServer.getNodeClientConnection().positionChanged(manager.unitPath, this.currentPosition);\n\t            // this.getDetails().show(manager.unitPath, this.currentPosition, this.isFromEdgeRow());\n\t        }\n\t        // if (this.ast){\n\t        //     this._currentNode=this.ast.findElementAtOffset(this.currentPosition);\n\t        // }\n\t    };\n\t    EditorManager.DETAILS_SUPPORT = true;\n\t    return EditorManager;\n\t}());\n\tvar manager = null;\n\tfunction initEditorTools(display) {\n\t    if (display === void 0) { display = true; }\n\t    if (manager == null)\n\t        manager = new EditorManager(display);\n\t    else if (display)\n\t        manager.display();\n\t}\n\texports.initEditorTools = initEditorTools;\n\tfunction editorToolsStatus() {\n\t    return manager != null && manager.opened;\n\t}\n\texports.editorToolsStatus = editorToolsStatus;\n\tfunction aquireManager() {\n\t    if (!manager) {\n\t        manager = new EditorManager(true);\n\t    }\n\t    return manager;\n\t}\n\texports.aquireManager = aquireManager;\n\t// export function updateAndSelect(node:hl.IHighLevelNode){\n\t//     if (aquireManager()._view) {\n\t//         aquireManager()._view.refresh();\n\t//     }\n\t//     aquireManager().updateText();\n\t//     aquireManager().selectNode(node);\n\t// }\n\tvar SplitDirections;\n\t(function (SplitDirections) {\n\t    SplitDirections[SplitDirections[\"RIGHT\"] = 0] = \"RIGHT\";\n\t    SplitDirections[SplitDirections[\"LEFT\"] = 1] = \"LEFT\";\n\t    SplitDirections[SplitDirections[\"TOP\"] = 2] = \"TOP\";\n\t    SplitDirections[SplitDirections[\"BOTTOM\"] = 3] = \"BOTTOM\";\n\t})(SplitDirections = exports.SplitDirections || (exports.SplitDirections = {}));\n\tfunction doSplit(value, dir) {\n\t    if (dir === void 0) { dir = SplitDirections.RIGHT; }\n\t    var newPane = null;\n\t    switch (dir) {\n\t        case SplitDirections.BOTTOM:\n\t            newPane = atom.workspace.getActivePane().splitDown({});\n\t            break;\n\t        case SplitDirections.TOP:\n\t            newPane = atom.workspace.getActivePane().splitUp({});\n\t            break;\n\t        case SplitDirections.LEFT:\n\t            newPane = atom.workspace.getActivePane().splitLeft({});\n\t            break;\n\t        case SplitDirections.RIGHT:\n\t            newPane = atom.workspace.getActivePane().splitRight({});\n\t            break;\n\t    }\n\t    newPane.addItem(value);\n\t    return newPane;\n\t}\n\texports.doSplit = doSplit;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBbUQ7QUFDbkQsMkJBQTJCO0FBRzNCLDBDQUE2QztBQU83Qyw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBRTVDLGlEQUFvRDtBQUNwRCx3REFBMEQ7QUFFMUQsSUFBSSxJQUFJLEdBQVksQ0FBQyxDQUFDO0FBQ3RCLG1CQUFtQixJQUFhO0lBQzVCLElBQUksRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDOUIsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsUUFBUSxHQUFHLENBQUMsRUFBRSxHQUFDLElBQUksQ0FBQyxHQUFHLGVBQWUsQ0FBQyxDQUFDO0lBRS9ELElBQUksR0FBRyxFQUFFLENBQUM7QUFDZCxDQUFDO0FBbUJEO0lBdUNJLHVCQUFZLE9BQXVCO1FBQXZCLHdCQUFBLEVBQUEsY0FBdUI7UUFBbkMsaUJBc0JDO1FBL0NPLGlCQUFZLEdBQVksS0FBSyxDQUFDO1FBSXRDLFdBQU0sR0FBWSxLQUFLLENBQUM7UUFJaEIsZ0JBQVcsR0FBUyxDQUFDLENBQUM7UUFFdEIsaUJBQVksR0FBUyxDQUFDLENBQUM7UUFFL0Isa0JBQWEsR0FBQyxLQUFLLENBQUM7UUFFcEIscUJBQWdCLEdBQUMsSUFBSSxDQUFDO1FBOEx0QixTQUFJLEdBQVksSUFBSSxDQUFDO1FBcVJyQixnQkFBVyxHQUFZLEtBQUssQ0FBQztRQXZjekIsT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7UUFFbkMsSUFBSSxDQUFDLHlCQUF5QixHQUFHLElBQUksVUFBVSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsdUJBQXVCLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUV0RyxJQUFJLENB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Q3ZCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUM7UUFDVixLQUFLLGVBQWUsQ0FBQyxHQUFHO1lBQ3BCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNuRCxLQUFLLENBQUM7UUFDVixLQUFLLGVBQWUsQ0FBQyxJQUFJO1lBQ3JCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUM7UUFDVixLQUFLLGVBQWUsQ0FBQyxLQUFLO1lBQ3RCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0RCxLQUFLLENBQUM7SUFDZCxDQUFDO0lBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUN0QixNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ25CLENBQUM7QUFsQkQsMEJBa0JDIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuaW1wb3J0IHBhdGg9cmVxdWlyZSgncGF0aCcpXG5pbXBvcnQgRGlzcG9zYWJsZSA9IFVJLklEaXNwb3NhYmxlXG5pbXBvcnQgQ29tcG9zaXRlRGlzcG9zYWJsZSA9IFVJLkNvbXBvc2l0ZURpc3Bvc2FibGVcbmltcG9ydCBhdG9tID0gcmVxdWlyZSgnLi4vY29yZS9hdG9tV3JhcHBlcicpO1xuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vLyBpbXBvcnQgaGw9cnAuaGw7XG4vLyBpbXBvcnQgbGw9cnAubGw7XG4vLyBpbXBvcnQgcHJvamVjdD1ycC5wcm9qZWN0O1xuaW1wb3J0IF89cmVxdWlyZShcInVuZGVyc2NvcmVcIilcbmltcG9ydCBwYWlyID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvcGFpclwiKTtcbmltcG9ydCBkZXRhaWxzVmlldz1yZXF1aXJlKFwiLi9kZXRhaWxzLXZpZXdcIilcbmltcG9ydCBvdXRsaW5lVmlldz1yZXF1aXJlKFwiLi9vdXRsaW5lLXZpZXdcIilcbmltcG9ydCBVST1yZXF1aXJlKFwiYXRvbS11aS1saWJcIilcbmltcG9ydCByYW1sU2VydmVyID0gcmVxdWlyZShcInJhbWwtbGFuZ3VhZ2Utc2VydmVyXCIpO1xuaW1wb3J0IG1hcmtPY2N1cnJlbmNlcyA9IHJlcXVpcmUoXCIuLi9jb3JlL21hcmtPY2N1cmVuY2VzXCIpXG5cbnZhciBfYm1jIDogbnVtYmVyID0gMDtcbmZ1bmN0aW9uIGJlbmNobWFyayhmdW5jPzogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIHQwID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgaWYgKF9ibWMgIT0gMCAmJiBmdW5jKVxuICAgICAgICBjb25zb2xlLmxvZyhmdW5jICsgXCIgdG9vayBcIiArICh0MC1fYm1jKSArIFwiIG1pbGlzZWNvbmRzLlwiKTtcblxuICAgIF9ibWMgPSB0MDtcbn1cblxuaW50ZXJmYWNlIFBvaW50IHtcbiAgICByb3c6IG51bWJlcjtcbiAgICBjb2x1bW46IG51bWJlcjtcbn1cbmludGVyZmFjZSBSYW5nZSB7XG4gICAgc3RhcnQ6IFBvaW50O1xuICAgIGVuZDogUG9pbnQ7XG59XG5pbnRlcmZhY2UgSUNoYW5nZUNvbW1hbmQge1xuICAgIG5ld1RleHQ6IHN0cmluZztcbiAgICBvbGRUZXh0OiBzdHJpbmc7XG4gICAgb2xkUmFuZ2U6IFJhbmdlO1xuICAgIG5ld1JhbmdlOiBSYW5nZTtcbn1cblxuXG5cbmNsYXNzIEVkaXRvck1hbmFnZXJ7XG5cbiAgICBwcml2YXRlIGN1cnJlbnRFZGl0b3I6YXRvbS5JVGV4dEVkaXRvcjtcblxuICAgIF92aWV3OiBvdXRsaW5lVmlldy5SYW1sT3V0bGluZTtcbiAgICBfZGV0YWlsczogZGV0YWlsc1ZpZXcuUmFtbERldGFpbHM7XG5cbiAgICAvLyBhc3Q6IGhsLklIaWdoTGV2ZWxOb2RlO1xuICAgIHVuaXRQYXRoIDogc3RyaW5nO1xuICAgIC8vIHVuaXQ6IGxsLklDb21waWxhdGlvblVuaXQ7XG5cbiAgICBjaGFuZ2luZzogYm9vbGVhbjtcbiAgICBleGVjdXRpbmdDb21tYW5kOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIHByaXZhdGUgbWFya09jY3VycmVuY2VzUmVjb25jaWxlcjtcblxuICAgIG9wZW5lZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBjdXJyZW50UG9zaXRpb246IG51bWJlcjtcblxuICAgIHByaXZhdGUgdXBkYXRlQ291bnQ6IG51bWJlcj0wO1xuXG4gICAgcHJpdmF0ZSBvdXRsaW5lQ291bnQ6IG51bWJlcj0wO1xuXG4gICAgX2NsZWFuT3V0bGluZT1mYWxzZTtcblxuICAgIHBlcmZvcm1hbmNlRGVidWc9dHJ1ZTtcblxuICAgIHByaXZhdGUgc3RhdGljIERFVEFJTFNfU1VQUE9SVCA9IHRydWVcblxuICAgIGdldFBhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFVE06OkdldFBhdGhcIik7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRFZGl0b3IgPyB0aGlzLmN1cnJlbnRFZGl0b3IuZ2V0UGF0aCgpIDogbnVsbDtcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50RWRpdG9yKCkgeyByZXR1cm4gdGhpcy5jdXJyZW50RWRpdG9yOyB9XG5cbiAgICBjb25zdHJ1Y3RvcihkaXNwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBtYW5hZ2VyID0gd2luZG93W1wibWFuYWdlclwiXSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5tYXJrT2NjdXJyZW5jZXNSZWNvbmNpbGVyID0gbmV3IHJhbWxTZXJ2ZXIuUmVjb25jaWxlcihyYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCksIDIwMCk7XG5cbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub25EaWRDaGFuZ2VBY3RpdmVQYW5lSXRlbShlID0+IHRoaXMudXBkYXRlRXZlcnl0aGluZyhkaXNwbGF5KSk7XG5cbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGVkaXRvcj0+e1xuICAgICAgICAgICAgZWRpdG9yLm9uRGlkRGVzdHJveSgoKT0+e1xuXG4gICAgICAgICAgICAgICAgbGV0IHBhdGggPSBlZGl0b3IuZ2V0UGF0aCgpO1xuXG4gICAgICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRvY3VtZW50Q2xvc2VkKHBhdGgpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgZWRpdG9yLm9uRGlkQ2hhbmdlQ3Vyc29yUG9zaXRpb24oZXZlbnQ9PnRoaXMuY3Vyc29yQ2hhbmdlZChlZGl0b3IsIGV2ZW50Lm5ld0J1ZmZlclBvc2l0aW9uKSlcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLnVwZGF0ZUV2ZXJ5dGhpbmcoZGlzcGxheSk7XG4gICAgICAgIHRoaXMuYWRkQXV0b0Nsb3NlTGlzdGVuZXIoKTtcblxuICAgICAgICB0aGlzLmFkZExpc3RlbmVyc0ZvclN0cnVjdHVyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDdXJyZW50UG9zaXRpb24oKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQb3NpdGlvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGN1cnNvckNoYW5nZWQoZWRpdG9yOiBhdG9tLklUZXh0RWRpdG9yLCBuZXdCdWZmZXJQb3NpdGlvbjogUG9pbnQpIHtcblxuICAgICAgICBtYXJrT2NjdXJyZW5jZXMuY2xlYXJPY2N1cmVuY2VzKGVkaXRvcik7XG5cbiAgICAgICAgdGhpcy5tYXJrT2NjdXJyZW5jZXNSZWNvbmNpbGVyLnNjaGVkdWxlKG5ldyBtYXJrT2NjdXJyZW5jZXMuTWFya09jY3VycmVuY2VSdW5uYWJsZShlZGl0b3IsIG5ld0J1ZmZlclBvc2l0aW9uKSk7XG5cbiAgICAgICAgbGV0IGJ1ZmZlciA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICAgICAgbGV0IHBvcyA9IGJ1ZmZlci5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKGVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpKTtcblxuICAgICAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkucG9zaXRpb25DaGFuZ2VkKG1hbmFnZXIudW5pdFBhdGgsIHBvcyk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBwb3M7XG4gICAgfVxuXG4gICAgaW50ZXJuYWxTY2hlZHVsZVVwZGF0ZVZpZXdzKGNvdW50Om51bWJlcil7XG4gICAgICAgIHRoaXMudXBkYXRlQ291bnQ9Y291bnQ7XG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgIGlmICh0aGlzLnVwZGF0ZUNvdW50PT1jb3VudCl7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LDUwMCk7XG4gICAgfVxuXG4gICAgc2NoZWR1bGVWaWV3c1VwZGF0ZSgpe1xuICAgICAgICBpZiAodGhpcy5maXJlKXtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxTY2hlZHVsZVVwZGF0ZVZpZXdzKHRoaXMudXBkYXRlQ291bnQrMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcm5hbFNjaGVkdWxlT3V0bGluZVVwZGF0ZShjb3VudDpudW1iZXIpe1xuICAgICAgICB0aGlzLm91dGxpbmVDb3VudD1jb3VudDtcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgaWYgKHRoaXMub3V0bGluZUNvdW50PT1jb3VudCl7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPdXRsaW5lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sNTAwKTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZU91dGxpbmVVcGRhdGUoKXtcbiAgICAgICAgdGhpcy5pbnRlcm5hbFNjaGVkdWxlT3V0bGluZVVwZGF0ZSh0aGlzLm91dGxpbmVDb3VudCsxKTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgYWRkQXV0b0Nsb3NlTGlzdGVuZXIoKSB7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9uRGlkRGVzdHJveVBhbmUoZXZ0PT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZWRjb3VudCA9IGF0b20ud29ya3NwYWNlLmdldFBhbmVJdGVtcygpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsnc29mdFRhYnMnXSAhPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChlZGNvdW50ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5hc3Q9bnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy51bml0PW51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX2N1cnJlbnROb2RlPW51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRvcj1udWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKChnbG9iYWwgYXMgYW55KS5jbGVhbkNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2xvYmFsIGFzIGFueSkuY2xlYW5DYWNoZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0b20ud29ya3NwYWNlLnBhbmVGb3JJdGVtKHRoaXMuX3ZpZXcpKSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzLl92aWV3KS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzLl9kZXRhaWxzKSkgYXRvbS53b3Jrc3BhY2UucGFuZUZvckl0ZW0odGhpcy5fZGV0YWlscykuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE8gUkVNT1ZFIElUIExBVEVSIFdFIE5FRUQgVE8gQkUgUFJFVHkgREVGRU5TSVZFIEFUIFRISVMgTU9NRU5UXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRPckNyZWF0ZVZpZXcoKSB7XG4gICAgICAgIGlmICghdGhpcy5fdmlldykge1xuICAgICAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBvdXRsaW5lVmlldy5SYW1sT3V0bGluZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMudW5pdFBhdGgpe1xuICAgICAgICAgICAgICAgICB0aGlzLl92aWV3LnNldFVuaXQodGhpcy51bml0UGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiAodGhpcy5hc3Qpe1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuX3ZpZXcuc2V0VW5pdCh0aGlzLmFzdCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREZXRhaWxzKCkge1xuICAgICAgICBpZiAoIUVkaXRvck1hbmFnZXIuREVUQUlMU19TVVBQT1JUKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLl9kZXRhaWxzKSB0aGlzLl9kZXRhaWxzID0gbmV3IGRldGFpbHNWaWV3LlJhbWxEZXRhaWxzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXRhaWxzO1xuICAgIH1cblxuICAgIHVwZGF0ZURldGFpbHMoKSB7XG4gICAgICAgIHRoaXMuZ2V0RGV0YWlscygpLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIHJlcGFyc2VBU1QoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRFZGl0b3IpIHtcbiAgICAgICAgICAgIHZhciBfcGF0aCA9IHRoaXMuY3VycmVudEVkaXRvci5nZXRQYXRoKCk7XG4gICAgICAgICAgICB2YXIgYmY9dGhpcy5jdXJyZW50RWRpdG9yLmdldEJ1ZmZlcigpO1xuXG4gICAgICAgICAgICB0aGlzLnVuaXRQYXRoID0gX3BhdGg7XG4gICAgICAgICAgICAvLyB2YXIgcHJqID0gcHJvamVjdC5jcmVhdGVQcm9qZWN0KHBhdGguZGlybmFtZShfcGF0aCkpO1xuICAgICAgICAgICAgLy8gdmFyIHVuaXQgPSBwcmouc2V0Q2FjaGVkVW5pdENvbnRlbnQocGF0aC5iYXNlbmFtZShfcGF0aCksIHRoaXMuY3VycmVudEVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIHVuaXQucHJvamVjdCgpLmFkZFRleHRDaGFuZ2VMaXN0ZW5lcihkZWx0YT0+e1xuICAgICAgICAgICAgLy8gICAgIGlmIChkZWx0YS51bml0IT11bml0KXtcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICB2YXIgY209ZGVsdGEub2Zmc2V0O1xuICAgICAgICAgICAgLy8gICAgIHZhciBlbmQ9ZGVsdGEucmVwbGFjZW1lbnRMZW5ndGg7XG4gICAgICAgICAgICAvLyAgICAgdmFyIHRleHQ9ZGVsdGEudGV4dDtcbiAgICAgICAgICAgIC8vICAgICB2YXIgYnVmZmVyPSg8YXRvbS5JQnVmZmVyPnRoaXMuY3VycmVudEVkaXRvci5nZXRCdWZmZXIoKSk7XG4gICAgICAgICAgICAvLyAgICAgdmFyIHN0YXJ0PWJ1ZmZlci5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGNtKTtcbiAgICAgICAgICAgIC8vICAgICB2YXIgZW5kUG9zaXRpb249YnVmZmVyLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgoY20rZW5kKTtcbiAgICAgICAgICAgIC8vICAgICB0cnkge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmZpcmU9ZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgICAgICg8YW55PmJ1ZmZlcikuc2V0VGV4dEluUmFuZ2Uoe3N0YXJ0OiBzdGFydCwgZW5kOiBlbmRQb3NpdGlvbn0sIHRleHQpO1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnNjaGVkdWxlT3V0bGluZVVwZGF0ZSgpO1xuICAgICAgICAgICAgLy8gICAgIH0gZmluYWxseXtcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5maXJlPXRydWU7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvLyB0aGlzLmFzdCA9IHVuaXQuaGlnaExldmVsKCk7XG4gICAgICAgICAgICAvLyB0aGlzLnVuaXQgPSB1bml0O1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBpc0VUUGFuZShwYW5lKSB7XG4gICAgICAgaWYgKCF0aGlzLl92aWV3KXtcbiAgICAgICAgICAgcmV0dXJuO1xuICAgICAgIH1cbiAgICAgICB2YXIgaXRlbXMgPSBwYW5lLmdldEl0ZW1zKCk7XG4gICAgICAgcmV0dXJuICgoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQgJiYgaXRlbXMuaW5kZXhPZih0aGlzLmdldERldGFpbHMoKSkgPj0gMClcbiAgICAgICAgfHwgaXRlbXMuaW5kZXhPZih0aGlzLl92aWV3KSA+PSAwKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVUTTo6RGlzcGxheVwiKTtcbiAgICAgICAgdmFyIGF3ID0gYXRvbS53b3Jrc3BhY2U7XG4gICAgICAgIHZhciBmcGFuZSA9IGF0b20ud29ya3NwYWNlLnBhbmVGb3JJdGVtKHRoaXMuZ2V0Q3VycmVudEVkaXRvcigpKTtcbiAgICAgICAgaWYgKCFmcGFuZSkgcmV0dXJuO1xuICAgICAgICBpZiAoIWF3LnBhbmVGb3JJdGVtKHRoaXMuZ2V0T3JDcmVhdGVWaWV3KCkpKVxuICAgICAgICAgICAgZG9TcGxpdCh0aGlzLmdldE9yQ3JlYXRlVmlldygpKTtcblxuICAgICAgICBpZiAoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQpIHtcbiAgICAgICAgICAgIGlmICghYXcucGFuZUZvckl0ZW0obWFuYWdlci5nZXREZXRhaWxzKCkpKVxuICAgICAgICAgICAgICAgIGRvU3BsaXQodGhpcy5nZXREZXRhaWxzKCksIFNwbGl0RGlyZWN0aW9ucy5CT1RUT00pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vcGVuZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZpcmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgLy8gdXBkYXRlVGV4dChub2RlPzogbGwuSUxvd0xldmVsQVNUTm9kZSkge1xuICAgIC8vICAgICB0aGlzLmZpcmUgPSBmYWxzZTtcbiAgICAvLyAgICAgdmFyIGVkaXRvciA9IHRoaXMuY3VycmVudEVkaXRvcjtcbiAgICAvLyAgICAgdmFyIHBvcyA9IG5vZGUgPyBlZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLnN0YXJ0KCkpIDogbnVsbDtcbiAgICAvLyAgICAgZWRpdG9yLnNldFRleHQodGhpcy51bml0LmNvbnRlbnRzKCkpO1xuICAgIC8vICAgICB0aGlzLmZpcmUgPSB0cnVlO1xuICAgIC8vICAgICBpZiAocG9zKSAoPGFueT5lZGl0b3IpLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKHBvcyk7XG4gICAgLy8gfVxuXG4gICAgLy8gc2VsZWN0Tm9kZShobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGUgPSBobm9kZS5sb3dMZXZlbCgpO1xuICAgIC8vICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAvLyAgICAgdmFyIGVkaXRvciA9IHRoaXMuY3VycmVudEVkaXRvcjtcbiAgICAvLyAgICAgaWYgKCFlZGl0b3IpIHJldHVybjtcbiAgICAvLyAgICAgdmFyIHBvcyA9IG5vZGUgPyBlZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLnN0YXJ0KCkpIDogbnVsbDtcbiAgICAvLyAgICAgaWYgKHBvcykgKDxhbnk+ZWRpdG9yKS5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihwb3MpO1xuICAgIC8vIH1cbiAgICBcbiAgICBwcml2YXRlIHNldFZpZXdzRGlzcGxheVN0eWxlKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYodGhpcy5fZGV0YWlscyAmJiAoPGFueT50aGlzKS5fZGV0YWlscy5lbGVtZW50KSB7XG4gICAgICAgICAgICAoPGFueT50aGlzKS5fZGV0YWlscy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gbnVsbCA6IFwibm9uZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5fdmlldyAmJiAoPGFueT50aGlzKS5fdmlldy5lbGVtZW50KSB7XG4gICAgICAgICAgICAoPGFueT50aGlzKS5fdmlldy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gbnVsbCA6IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaXNSYW1sKGVkaXRvcik6IGJvb2xlYW4ge1xuICAgICAgICBpZighZWRpdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWRpdG9yUGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG4gICAgICAgIFxuICAgICAgICBpZighZWRpdG9yUGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgZXh0TmFtZSA9IHBhdGguZXh0bmFtZShlZGl0b3JQYXRoKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGV4dE5hbWUgIT09ICcucmFtbCcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdXBkYXRlRXZlcnl0aGluZyhkaXNwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICB2YXIgZWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuICAgICAgICBcbiAgICAgICAgaWYoZWRpdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpZXdzRGlzcGxheVN0eWxlKHRoaXMuaXNSYW1sKGVkaXRvcikpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZighZWRpdG9yIHx8IGVkaXRvciA9PSB0aGlzLmN1cnJlbnRFZGl0b3IgfHwgIXRoaXMuaXNSYW1sKGVkaXRvcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VycmVudEVkaXRvciA9IGVkaXRvcjtcblxuICAgICAgICBpZiAodGhpcy5vcGVuZWQgPT0gZmFsc2UgJiYgZGlzcGxheSkgdGhpcy5kaXNwbGF5KCk7XG5cbiAgICAgICAgLy93ZSBhcmUgbm90IGxpc3RlbmluZyB0byB0aGUgZWRpdG9yIGNoYW5nZXMgYW55IG1vcmUsXG4gICAgICAgIC8vaW5zdGVhZCB3ZSBhcmUgbGlzdGVuaW5nIHRvIHRoZSByZXBvcnRzIG9mIHRoZSBzZXJ2ZXIgdGhhdCBzb21ldGhpbmcgaXMgYXZpbGFibGUsIGxpa2UgdGhlIHN0cnVjdHVyZVxuICAgICAgICBpZiAoISg8YW55PmVkaXRvcikucGF0Y2hlZCkge1xuICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyc1RvRWRpdG9yKCBlZGl0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXBhcnNlQVNUKCk7XG5cbiAgICAgICAgdmFyIHBvcyA9ICg8YW55PmVkaXRvci5nZXRCdWZmZXIoKSkuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihlZGl0b3IuZ2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oKSk7XG5cbiAgICAgICAgdGhpcy5wb3NpdGlvblVwZGF0ZWQocG9zKTtcblxuICAgICAgICB0aGlzLnNjaGVkdWxlVmlld3NVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZExpc3RlbmVyc1RvRWRpdG9yKGNlZGl0KSB7XG4gICAgICAgIHZhciBidWZmZXIgPSBjZWRpdC5nZXRCdWZmZXIoKTtcbiAgICAgICAgYnVmZmVyLm9uRGlkQ2hhbmdlKHggPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvL3RoaXMucmVwYXJzZUFTVCgpO1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBidWZmZXIuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihjZWRpdC5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uVXBkYXRlZChwb3MpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5zY2hlZHVsZVZpZXdzVXBkYXRlKCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy91cGRhdGluZyBhc3Qgbm9kZSBvbiBwb3NpdGlvbiBjaGFuZ2VcbiAgICAgICAgLy8gY2VkaXQuZ2V0TGFzdEN1cnNvcigpLm9uRGlkQ2hhbmdlUG9zaXRpb24oeD0+IHtcbiAgICAgICAgLy8gICAgIGlmICghdGhpcy5maXJlKSByZXR1cm47XG4gICAgICAgIC8vICAgICB0aGlzLnBvc2l0aW9uVXBkYXRlZChidWZmZXIuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihjZWRpdC5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpKSk7XG4gICAgICAgIC8vICAgICB0aGlzLnNjaGVkdWxlVmlld3NVcGRhdGUoKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzT25Nb3ZlKGNlZGl0KTtcbiAgICAgICAgKDxhbnk+dGhpcy5jdXJyZW50RWRpdG9yKS5wYXRjaGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZExpc3RlbmVyc0ZvclN0cnVjdHVyZSgpIHtcbiAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLm9uU3RydWN0dXJlUmVwb3J0KHJlcG9ydD0+e1xuXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnlOYW1lcyA9IFtdXG4gICAgICAgICAgICBmb3IobGV0IGNhdGVnb3J5TmFtZSBpbiByZXBvcnQuc3RydWN0dXJlKSBjYXRlZ29yeU5hbWVzLnB1c2goY2F0ZWdvcnlOYW1lKTtcblxuICAgICAgICAgICAgbGV0IGNhdGVnb3J5TmFtZXNTdHJpbmcgPSBjYXRlZ29yeU5hbWVzLmpvaW4oKTtcbiAgICAgICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5kZWJ1ZyhcIkdvdCBuZXcgc3RydWN0dXJlIHJlcG9ydCB3aXRoIGNhdGVnb3JpZXMgXCJcbiAgICAgICAgICAgICAgICArIGNhdGVnb3J5TmFtZXNTdHJpbmcsIFwiRWRpdG9yTWFuYWdlclwiLCBcImFkZExpc3RlbmVyc0ZvclN0cnVjdHVyZVwiKTtcblxuICAgICAgICAgICAgdmFyIGVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKTtcblxuICAgICAgICAgICAgaWYoIWVkaXRvciB8fCAhdGhpcy5pc1JhbWwoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVPdXRsaW5lKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRMaXN0ZW5lcnNPbk1vdmUoY2VkaXQpIHtcbiAgICAgICAgdmFyIG1vdmluZ1BhbmU9ZmFsc2U7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9uRGlkQWRkUGFuZUl0ZW0oZXZlbnQ9PiB7XG4gICAgICAgICAgICBpZiAobW92aW5nUGFuZSB8fCB0aGlzLmlzRVRQYW5lKGV2ZW50LnBhbmUpID09IGZhbHNlIHx8IGV2ZW50Lml0ZW0gPT0gdGhpcy5nZXRPckNyZWF0ZVZpZXcoKSB8fCAoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQgJiYgZXZlbnQuaXRlbSA9PSB0aGlzLmdldERldGFpbHMoKSkpIHJldHVybiBldmVudDtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZwYW5lID0gYXRvbS53b3Jrc3BhY2UucGFuZUZvckl0ZW0oY2VkaXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnBhbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZ1BhbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucGFuZS5tb3ZlSXRlbVRvUGFuZShldmVudC5pdGVtLCBmcGFuZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmdQYW5lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcGFuZS5zZXRBY3RpdmVJdGVtKGV2ZW50Lml0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnBhbmUuYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIFJFTU9WRSBJVCBMQVRFUiBXRSBORUVEIFRPIEJFIFBSRVR5IERFRkVOU0lWRSBBVCBUSElTIE1PTUVOVFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxOCk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLy8gX2N1cnJlbnROb2RlOiBobC5JSGlnaExldmVsTm9kZTtcbiAgICAvLyAvL19zZWxlY3RlZE5vZGU6IGhsLklIaWdoTGV2ZWxOb2RlO1xuXG4gICAgLy8gcGF0Y2hDdXJyZW50Tm9kZShuOmhsLklIaWdoTGV2ZWxOb2RlKXtcbiAgICAvLyAgICAgdGhpcy5fY3VycmVudE5vZGU9bjtcbiAgICAvLyB9XG4gICAgLy9cbiAgICAvLyBnZXRDdXJyZW50Tm9kZSgpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMuX2N1cnJlbnROb2RlID09IG51bGwpIHJldHVybiB0aGlzLl9jdXJyZW50Tm9kZSA9IHRoaXMuYXN0O1xuICAgIC8vICAgICBlbHNlIHJldHVybiB0aGlzLl9jdXJyZW50Tm9kZTtcbiAgICAvLyB9XG5cblxuICAgIC8vIHNldFNlbGVjdGVkTm9kZShub2RlOiBobC5JSGlnaExldmVsTm9kZSkge1xuICAgIC8vICAgICAvL3RoaXMuX3NlbGVjdGVkTm9kZSA9IG5vZGU7XG4gICAgLy9cbiAgICAvLyAgICAgaWYgKHRoaXMudW5pdCl7XG4gICAgLy8gICAgICAgICB2YXIgdW5pdFBhdGg9dGhpcy51bml0LmFic29sdXRlUGF0aCgpO1xuICAgIC8vICAgICAgICAgd2hpbGUgKG5vZGUubG93TGV2ZWwoKS51bml0KCkuYWJzb2x1dGVQYXRoKCkhPXVuaXRQYXRoKXtcbiAgICAvLyAgICAgICAgICAgICBpZiAoIW5vZGUucGFyZW50KCkpe1xuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgZWxzZXtcbiAgICAvLyAgICAgICAgICAgICAgICAgbm9kZT1ub2RlLnBhcmVudCgpO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB2YXIgaWQ9bm9kZS5pZCgpO1xuICAgIC8vICAgICB2YXIgYW5vZGU9dGhpcy5hc3QuZmluZEJ5SWQoaWQpO1xuICAgIC8vICAgICBpZiAoYW5vZGUpe1xuICAgIC8vICAgICAgICAgbm9kZT1hbm9kZTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZiAodGhpcy5fZGV0YWlscyl7XG4gICAgLy8gICAgICAgICB0aGlzLl9kZXRhaWxzLnNob3cobm9kZSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgdmFyIGVkaXRvciA9IHRoaXMuZ2V0Q3VycmVudEVkaXRvcigpO1xuICAgIC8vICAgICBpZiAoZWRpdG9yKSB7XG4gICAgLy8gICAgICAgICB0aGlzLmZpcmU9ZmFsc2U7XG4gICAgLy8gICAgICAgICB0cnkge1xuICAgIC8vICAgICAgICAgICAgIHZhciBidWZmZXIgPSBlZGl0b3IuZ2V0QnVmZmVyKCk7XG4gICAgLy8gICAgICAgICAgICAgdmFyIHBvc1N0YXJ0ID0gYnVmZmVyLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgobm9kZS5sb3dMZXZlbCgpLnN0YXJ0KCkpO1xuICAgIC8vICAgICAgICAgICAgIHZhciBwb3NFbmQgPSBidWZmZXIucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLmxvd0xldmVsKCkuZW5kKCkpO1xuICAgIC8vICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihwb3NTdGFydCk7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5wb3NpdGlvblVwZGF0ZWQoYnVmZmVyLmNoYXJhY3RlckluZGV4Rm9yUG9zaXRpb24oZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCkpKTtcbiAgICAvLyAgICAgICAgIH1maW5hbGx5e1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuZmlyZT10cnVlO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gZ2V0U2VsZWN0ZWROb2RlKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50Tm9kZSgpXG4gICAgLy8gICAgIC8vZWxzZSByZXR1cm4gdGhpcy5fc2VsZWN0ZWROb2RlO1xuICAgIC8vIH1cblxuICAgIHNldFRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVRNOjpTZXRUZXh0XCIpO1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5jdXJyZW50RWRpdG9yO1xuICAgICAgICBpZiAoZWRpdG9yID09IG51bGwpIHJldHVybjtcbiAgICAgICAgZWRpdG9yLnNldFRleHQodGV4dCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0Zyb21FZGdlUm93KCk6IGJvb2xlYW4ge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5nZXRDdXJyZW50RWRpdG9yKClcblxuICAgICAgICBpZighZWRpdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3VycmVudFBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG5cbiAgICAgICAgaWYoIWN1cnJlbnRQb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRSb3cgPSBjdXJyZW50UG9zaXRpb24ucm93O1xuXG4gICAgICAgIHZhciBwcmV2aW91c1JvdyA9ICg8YW55PmVkaXRvcikucHJldmlvdXNSb3c7XG5cbiAgICAgICAgKDxhbnk+ZWRpdG9yKS5wcmV2aW91c1JvdyA9IGN1cnJlbnRSb3c7XG5cbiAgICAgICAgaWYocHJldmlvdXNSb3cgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYocHJldmlvdXNSb3cgPT09IGN1cnJlbnRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHByZXZpb3VzUm93ID09PSAoPGFueT5lZGl0b3IuZ2V0QnVmZmVyKCkpLmdldExhc3RSb3coKSB8fCBwcmV2aW91c1JvdyA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVWaWV3cygpIHtcbiAgICAgICAgLy92YXIgY05vZGUgPSB0aGlzLmdldEN1cnJlbnROb2RlKCk7XG4gICAgICAgIHZhciBkcz1uZXcgRGF0ZSgpLmdldE1pbGxpc2Vjb25kcygpO1xuICAgICAgICBpZiAoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQgJiYgdGhpcy5fZGV0YWlscykge1xuICAgICAgICAgICAgdGhpcy5nZXREZXRhaWxzKCkuc2hvdyhtYW5hZ2VyLnVuaXRQYXRoLCBtYW5hZ2VyLmN1cnJlbnRQb3NpdGlvbiwgdGhpcy5pc0Zyb21FZGdlUm93KCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl92aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFVuaXQobWFuYWdlci51bml0UGF0aCk7XG4gICAgICAgICAgICAvLyB0aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFVuaXQobWFuYWdlci5hc3QpO1xuICAgICAgICAgICAgLy90aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFNlbGVjdGlvbihjTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGQxPW5ldyBEYXRlKCkuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlRGVidWcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVmlld3MgdXBkYXRlOlwiICsgKGQxIC0gZHMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZU91dGxpbmUoKSB7XG5cbiAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRlYnVnKFwiVXBkYXRpbmcgb3V0bGluZVwiLCBcIkVkaXRvck1hbmFnZXJcIiwgXCJ1cGRhdGVPdXRsaW5lXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLl92aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFVuaXQobWFuYWdlci51bml0UGF0aCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwb3NpdGlvblVwZGF0ZWQobmV3UG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBuZXdQb3NpdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuX2RldGFpbHMpIHtcbiAgICAgICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5wb3NpdGlvbkNoYW5nZWQobWFuYWdlci51bml0UGF0aCwgdGhpcy5jdXJyZW50UG9zaXRpb24pO1xuICAgICAgICAgICAgLy8gdGhpcy5nZXREZXRhaWxzKCkuc2hvdyhtYW5hZ2VyLnVuaXRQYXRoLCB0aGlzLmN1cnJlbnRQb3NpdGlvbiwgdGhpcy5pc0Zyb21FZGdlUm93KCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmICh0aGlzLmFzdCl7XG4gICAgICAgIC8vICAgICB0aGlzLl9jdXJyZW50Tm9kZT10aGlzLmFzdC5maW5kRWxlbWVudEF0T2Zmc2V0KHRoaXMuY3VycmVudFBvc2l0aW9uKTtcbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIHBsYWNlaG9sZGVyOiBib29sZWFuID0gZmFsc2U7XG5cbn1cbnZhciBtYW5hZ2VyIDogRWRpdG9yTWFuYWdlciA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0RWRpdG9yVG9vbHMoZGlzcGxheTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBpZiAobWFuYWdlciA9PSBudWxsKSBtYW5hZ2VyID0gbmV3IEVkaXRvck1hbmFnZXIoZGlzcGxheSk7XG4gICAgZWxzZSBpZiAoZGlzcGxheSkgbWFuYWdlci5kaXNwbGF5KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0b3JUb29sc1N0YXR1cygpIHtcbiAgICByZXR1cm4gbWFuYWdlciAhPSBudWxsICYmIG1hbmFnZXIub3BlbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXF1aXJlTWFuYWdlcigpe1xuICAgIGlmICghbWFuYWdlcil7XG4gICAgICAgIG1hbmFnZXI9bmV3IEVkaXRvck1hbmFnZXIodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiBtYW5hZ2VyO1xufVxuLy8gZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFuZFNlbGVjdChub2RlOmhsLklIaWdoTGV2ZWxOb2RlKXtcbi8vICAgICBpZiAoYXF1aXJlTWFuYWdlcigpLl92aWV3KSB7XG4vLyAgICAgICAgIGFxdWlyZU1hbmFnZXIoKS5fdmlldy5yZWZyZXNoKCk7XG4vLyAgICAgfVxuLy8gICAgIGFxdWlyZU1hbmFnZXIoKS51cGRhdGVUZXh0KCk7XG4vLyAgICAgYXF1aXJlTWFuYWdlcigpLnNlbGVjdE5vZGUobm9kZSk7XG4vLyB9XG5leHBvcnQgZW51bSBTcGxpdERpcmVjdGlvbnN7XG4gICAgUklHSFQsXG4gICAgTEVGVCxcbiAgICBUT1AsXG4gICAgQk9UVE9NXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1NwbGl0KHZhbHVlOmFueSxkaXI6U3BsaXREaXJlY3Rpb25zPVNwbGl0RGlyZWN0aW9ucy5SSUdIVCl7XG4gICAgdmFyIG5ld1BhbmU9bnVsbDtcbiAgICBzd2l0Y2goIGRpcikge1xuICAgICAgICBjYXNlIFNwbGl0RGlyZWN0aW9ucy5CT1RUT006XG4gICAgICAgICAgICBuZXdQYW5lPWF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmUoKS5zcGxpdERvd24oe30pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BsaXREaXJlY3Rpb25zLlRPUDpcbiAgICAgICAgICAgIG5ld1BhbmU9YXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZSgpLnNwbGl0VXAoe30pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BsaXREaXJlY3Rpb25zLkxFRlQ6XG4gICAgICAgICAgICBuZXdQYW5lPWF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmUoKS5zcGxpdExlZnQoe30pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BsaXREaXJlY3Rpb25zLlJJR0hUOlxuICAgICAgICAgICAgbmV3UGFuZT1hdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lKCkuc3BsaXRSaWdodCh7fSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgbmV3UGFuZS5hZGRJdGVtKHZhbHVlKVxuICAgIHJldHVybiBuZXdQYW5lO1xufVxuIl19\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar Workspace = /** @class */ (function () {\n\t    function Workspace() {\n\t    }\n\t    Workspace.prototype.onDidChangeActivePaneItem = function (callback) {\n\t        return atom.workspace.onDidChangeActivePaneItem(callback);\n\t    };\n\t    Workspace.prototype.addModalPanel = function (arg) {\n\t        return atom.workspace.addModalPanel(arg);\n\t    };\n\t    Workspace.prototype.getActiveTextEditor = function () {\n\t        return atom.workspace.getActiveTextEditor();\n\t    };\n\t    Workspace.prototype.getActivePane = function () {\n\t        return atom.workspace.getActivePane();\n\t    };\n\t    Workspace.prototype.getActiveEditor = function () {\n\t        return atom.workspace.getActiveEditor();\n\t    };\n\t    Workspace.prototype.addRightPanel = function (arg) {\n\t        return atom.workspace.addRightPanel(arg);\n\t    };\n\t    Workspace.prototype.paneForItem = function (arg) {\n\t        return atom.workspace.paneForItem(arg);\n\t    };\n\t    Workspace.prototype.getPaneItems = function () {\n\t        return atom.workspace.getPaneItems();\n\t    };\n\t    Workspace.prototype.onDidAddPaneItem = function (callback) {\n\t        return atom.workspace.onDidAddPaneItem(callback);\n\t    };\n\t    Workspace.prototype.onDidDestroyPane = function (callback) {\n\t        return atom.workspace.onDidDestroyPane(callback);\n\t    };\n\t    Workspace.prototype.open = function (path, args) {\n\t        atom.workspace.open(path, args);\n\t    };\n\t    Workspace.prototype.observeTextEditors = function (callback) {\n\t        atom.workspace.observeTextEditors(callback);\n\t    };\n\t    return Workspace;\n\t}());\n\texports.Workspace = Workspace;\n\tfunction open(pathsToOpen) {\n\t    atom.open(pathsToOpen);\n\t}\n\texports.open = open;\n\texports.workspace = new Workspace();\n\tvar CommandManager = /** @class */ (function () {\n\t    function CommandManager() {\n\t    }\n\t    CommandManager.prototype.add = function (selector, type, callback) {\n\t        return atom.commands.add(selector, type, callback);\n\t    };\n\t    return CommandManager;\n\t}());\n\texports.CommandManager = CommandManager;\n\texports.commands = new CommandManager();\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvYXRvbVdyYXBwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBbUQ7QUFDbkQ7SUFBQTtJQTRDQSxDQUFDO0lBM0NHLDZDQUF5QixHQUF6QixVQUEwQixRQUEwQjtRQUNoRCxNQUFNLENBQU8sSUFBSSxDQUFDLFNBQVUsQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsaUNBQWEsR0FBYixVQUFjLEdBQW9CO1FBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQsdUNBQW1CLEdBQW5CO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQsaUNBQWEsR0FBYjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQzFDLENBQUM7SUFFRCxtQ0FBZSxHQUFmO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDNUMsQ0FBQztJQUVELGlDQUFhLEdBQWIsVUFBYyxHQUFRO1FBQ2xCLE1BQU0sQ0FBTyxJQUFJLENBQUMsU0FBVSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsK0JBQVcsR0FBWCxVQUFZLEdBQVE7UUFDaEIsTUFBTSxDQUFPLElBQUksQ0FBQyxTQUFVLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDRCxnQ0FBWSxHQUFaO1FBQ0ksTUFBTSxDQUFRLElBQUksQ0FBQyxTQUFVLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDakQsQ0FBQztJQUNELG9DQUFnQixHQUFoQixVQUFpQixRQUFvRTtRQUNqRixNQUFNLENBQVEsSUFBSSxDQUFDLFNBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBQ0Qsb0NBQWdCLEdBQWhCLFVBQWlCLFFBQTBDO1FBQ3ZELE1BQU0sQ0FBUSxJQUFJLENBQUMsU0FBVSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFDRCx3QkFBSSxHQUFKLFVBQUssSUFBSSxFQUFFLElBQUk7UUFDWCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELHNDQUFrQixHQUFsQixVQUFtQixRQUFxQztRQUNwRCxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFDTCxnQkFBQztBQUFELENBNUNBLEFBNENDLElBQUE7QUE1Q1ksOEJBQVM7QUE4Q3RCLGNBQXFCLFdBQVc7SUFDdEIsSUFBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBRkQsb0JBRUM7QUE2RVUsUUFBQSxTQUFTLEdBQWEsSUFBSSxTQUFTLEVBQUUsQ0FBQztBQU1qRDtJQUFBO0lBSUEsQ0FBQztJQUhHLDRCQUFHLEdBQUgsVUFBSSxRQUFnQixFQUFFLElBQVksRUFBRSxRQUFvQjtRQUNwRCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBQ0wscUJBQUM7QUFBRCxDQUpBLEFBSUMsSUFBQTtBQUpZLHdDQUFjO0FBTWhCLFFBQUEsUUFBUSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUMiLCJmaWxlIjoic3JjL2F0b20vY29yZS9hdG9tV3JhcHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcbiAgICBvbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrOihhcmc6YW55KSA9PiB2b2lkKTp2b2lkIHtcbiAgICAgICAgcmV0dXJuICg8YW55PmF0b20ud29ya3NwYWNlKS5vbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBhZGRNb2RhbFBhbmVsKGFyZzpBZGRNb2RhbFBhbmVsQXJnKTphbnkge1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbChhcmcpO1xuICAgIH1cblxuICAgIGdldEFjdGl2ZVRleHRFZGl0b3IoKTogSVRleHRFZGl0b3Ige1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuICAgIH1cblxuICAgIGdldEFjdGl2ZVBhbmUoKTogSVBhbmUge1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZSgpO1xuICAgIH1cblxuICAgIGdldEFjdGl2ZUVkaXRvcigpOiBJRWRpdG9yIHtcbiAgICAgICAgcmV0dXJuIGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZUVkaXRvcigpO1xuICAgIH1cblxuICAgIGFkZFJpZ2h0UGFuZWwoYXJnOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuICg8YW55PmF0b20ud29ya3NwYWNlKS5hZGRSaWdodFBhbmVsKGFyZyk7XG4gICAgfVxuXG4gICAgcGFuZUZvckl0ZW0oYXJnOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuICg8YW55PmF0b20ud29ya3NwYWNlKS5wYW5lRm9ySXRlbShhcmcpO1xuICAgIH1cbiAgICBnZXRQYW5lSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiAoPGFueT4gYXRvbS53b3Jrc3BhY2UpLmdldFBhbmVJdGVtcygpO1xuICAgIH1cbiAgICBvbkRpZEFkZFBhbmVJdGVtKGNhbGxiYWNrOiAoZXZlbnQ6IHsgaXRlbTogYW55OyBwYW5lOiBJUGFuZTsgaW5kZXg6IG51bWJlciB9KSA9PiB2b2lkKSB7XG4gICAgICAgIHJldHVybiAoPGFueT4gYXRvbS53b3Jrc3BhY2UpLm9uRGlkQWRkUGFuZUl0ZW0oY2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRpZERlc3Ryb3lQYW5lKGNhbGxiYWNrOiAoZXZlbnQ6IHsgcGFuZTogSVBhbmUgfSkgPT4gdm9pZCkge1xuICAgICAgICByZXR1cm4gKDxhbnk+IGF0b20ud29ya3NwYWNlKS5vbkRpZERlc3Ryb3lQYW5lKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgb3BlbihwYXRoLCBhcmdzKSB7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4ocGF0aCwgYXJncyk7XG4gICAgfVxuXG4gICAgb2JzZXJ2ZVRleHRFZGl0b3JzKGNhbGxiYWNrIDogKGVkaXRvcjpJVGV4dEVkaXRvcik9PnZvaWQpIHtcbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuKHBhdGhzVG9PcGVuKSB7XG4gICAgKDxhbnk+YXRvbSkub3BlbihwYXRoc1RvT3Blbik7XG59XG5cbmludGVyZmFjZSBJUGFuZSB7XG4gICAgc3BsaXRVcChhcmc6YW55KTogSVBhbmU7XG5cbiAgICBzcGxpdERvd24oYXJnOmFueSk6IElQYW5lO1xuXG4gICAgc3BsaXRMZWZ0KGFyZzphbnkpOiBJUGFuZTtcblxuICAgIHNwbGl0UmlnaHQoYXJnOmFueSk6IElQYW5lO1xuXG4gICAgYWRkSXRlbShpdGVtOmFueSwgaW5kZXg6bnVtYmVyKTtcblxuICAgIGFjdGl2YXRlSXRlbUF0SW5kZXgoYXJnOiBhbnkpO1xuICAgIFxuICAgIG1vdmVJdGVtVG9QYW5lKGl0ZW06YW55LCBwYW5lOklQYW5lLCBpbmRleDpudW1iZXIpOnZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnR7XG4gICAgcm93Om51bWJlcjtcbiAgICBjb2x1bW46bnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlIHtcbiAgICBzdGFydDpQb2ludDtcbiAgICBlbmQ6UG9pbnQ7XG59XG5cbmV4cG9ydCAgaW50ZXJmYWNlICBJQ3Vyc29yIHtcbiAgICBnZXRCdWZmZXJQb3NpdGlvbigpOiBQb2ludDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSAgSUJ1ZmZlciB7XG4gICAgcG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChpbmRleE9mOmFueSk6IFBvaW50O1xuICAgIGNoYXJhY3RlckluZGV4Rm9yUG9zaXRpb24ocG9zaXRpb246UG9pbnQpOm51bWJlcjtcblxuICAgIHJhbmdlRm9yUm93KGFueSk6IFJhbmdlO1xuXG4gICAgc2V0VGV4dCh0ZXh0KTtcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlICBJVGV4dEVkaXRvciB7XG4gICAgZ2V0VGV4dCgpOiBzdHJpbmc7XG5cbiAgICBnZXRQYXRoKCk6IHN0cmluZztcblxuICAgIGdldExhc3RDdXJzb3IoKTogSUN1cnNvcjtcblxuICAgIGdldEJ1ZmZlcigpOiBJQnVmZmVyO1xuXG4gICAgc2V0VGV4dCh0ZXh0KTtcblxuICAgIGdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk6UG9pbnQ7XG5cbiAgICBvbkRpZERlc3Ryb3koY2FsbGJhY2s6KCk9PnZvaWQpO1xuXG4gICAgb25EaWRDaGFuZ2VDdXJzb3JQb3NpdGlvbihjYWxsYmFjazogKGV2ZW50OntcbiAgICAgICAgIG9sZEJ1ZmZlclBvc2l0aW9uOlBvaW50LFxuICAgICAgICAgb2xkU2NyZWVuUG9zaXRpb246UG9pbnQsXG4gICAgICAgICBuZXdCdWZmZXJQb3NpdGlvbjpQb2ludCxcbiAgICAgICAgIG5ld1NjcmVlblBvc2l0aW9uOlBvaW50LFxuICAgICAgICAgdGV4dENoYW5nZWQ6Ym9vbGVhbixcbiAgICAgICAgIGN1cnNvcjogSUN1cnNvclxuICAgICB9KT0+dm9pZCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgIElFZGl0b3Ige1xuICAgIGdldEJ1ZmZlcigpOiBJQnVmZmVyO1xuXG4gICAgc2V0U2VsZWN0ZWRCdWZmZXJSYW5nZShyYW5nZTogYW55LCBhcmc6IGFueSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRkTW9kYWxQYW5lbEFyZyB7XG4gICAgaXRlbTogYW55O1xufVxuXG5leHBvcnQgdmFyIHdvcmtzcGFjZTpXb3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKCk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRNYW5hZ2VyIHtcbiAgICBhZGQoc2VsZWN0b3I6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IEF0b21Db3JlLkRpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kTWFuYWdlciB7XG4gICAgYWRkKHNlbGVjdG9yOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgcmV0dXJuIGF0b20uY29tbWFuZHMuYWRkKHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnQgdmFyIGNvbW1hbmRzID0gbmV3IENvbW1hbmRNYW5hZ2VyKCk7Il19\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar UI = __webpack_require__(5);\n\tvar SC = __webpack_require__(6);\n\tvar CompositeDisposable = UI.CompositeDisposable;\n\tvar details = __webpack_require__(8);\n\tvar editorTools = __webpack_require__(1);\n\tvar ramlServer = __webpack_require__(17);\n\tvar reconciler_1 = __webpack_require__(18);\n\tvar RamlDetails = /** @class */ (function (_super) {\n\t    __extends(RamlDetails, _super);\n\t    function RamlDetails(allowStructureChanges) {\n\t        if (allowStructureChanges === void 0) { allowStructureChanges = true; }\n\t        var _this = _super.call(this) || this;\n\t        _this.allowStructureChanges = allowStructureChanges;\n\t        _this.disposables = new CompositeDisposable();\n\t        _this.addClass('raml-details');\n\t        var connection = ramlServer.getNodeClientConnection();\n\t        connection.onDetailsReport(function (report) { return _this.onDetailsReport(report); });\n\t        _this.reconciler = new reconciler_1.Reconciler(connection, 800);\n\t        return _this;\n\t    }\n\t    RamlDetails.prototype.getTitle = function () {\n\t        return \"Details\";\n\t    };\n\t    RamlDetails.prototype.attached = function () {\n\t        try {\n\t            this.element.innerHTML = \"<div></div>\";\n\t            this._children = [];\n\t            this.container = UI.vc();\n\t            this.addChild(this.container);\n\t            this.ui().appendChild(this.container.ui());\n\t            _super.prototype.attached.call(this);\n\t        }\n\t        catch (e) {\n\t        }\n\t    };\n\t    RamlDetails.prototype.setResource = function (detailsNode, context) {\n\t        if (this.wasSchema) {\n\t            this.schemaView.dispose();\n\t            this.schemaView = null;\n\t        }\n\t        this.wasSchema = false;\n\t        window[\"detailsnode\"] = detailsNode;\n\t        window[\"detailscontext\"] = context;\n\t        if (detailsNode == null)\n\t            this.displayEmpty();\n\t        details.updateDetailsPanel(detailsNode, context, this.container, true);\n\t    };\n\t    RamlDetails.prototype.update = function () {\n\t        if (window[\"detailsnode\"]) {\n\t            this.setResource(window[\"detailsnode\"], window[\"detailscontext\"]);\n\t        }\n\t    };\n\t    RamlDetails.prototype.displayEmpty = function () {\n\t        this.container.clear();\n\t        // if (!editorTools.aquireManager().ast) {\n\t        //     this.container.addChild(UI.h3(\"Our API is fabulously empty\").margin(8, 8, 20, 8));\n\t        //     var create = new UI.Button(\"Create new API\", UI.ButtonSizes.LARGE, UI.ButtonHighlights.SUCCESS, UI.Icon.REPO_CLONE, ()=>dialogs.newApi());\n\t        //     create.margin(8, 8, 20, 0);\n\t        //     this.container.addChild(create);\n\t        // }\n\t    };\n\t    RamlDetails.prototype.destroy = function () {\n\t        editorTools.aquireManager()._details = null;\n\t        this.disposables.dispose();\n\t        this._unitPath = null;\n\t        this._position = null;\n\t        this.container.dispose();\n\t        this.container = null;\n\t        window[\"detailsnode\"] = null;\n\t        window[\"detailscontext\"] = null;\n\t        this._children = [];\n\t        if (details.oldItem) {\n\t            details.oldItem.detach();\n\t        }\n\t        if (this.wasSchema) {\n\t            this.schemaView.dispose();\n\t            this.schemaView = null;\n\t        }\n\t        details.oldItem = null;\n\t    };\n\t    RamlDetails.prototype.show = function (unitPath, position, force) {\n\t        var _this = this;\n\t        if (force === void 0) { force = false; }\n\t        if (!force && this._unitPath == unitPath && this._position === position)\n\t            return;\n\t        this._unitPath = unitPath;\n\t        this._position = position;\n\t        var reconciler = this.reconciler;\n\t        try {\n\t            // if (isSchema(node))\n\t            //     this.setSchema(this._node);\n\t            // else\n\t            //     this.setResource(node);\n\t            ramlServer.getNodeClientConnection().getDetails(unitPath, position).then(function (detailsNode) {\n\t                _this.setResource(detailsNode, {\n\t                    uri: unitPath,\n\t                    position: position,\n\t                    localModel: false,\n\t                    reconciler: reconciler\n\t                });\n\t            });\n\t        }\n\t        catch (e) { }\n\t    };\n\t    RamlDetails.prototype.onDetailsReport = function (report) {\n\t        var _this = this;\n\t        if (report.uri != this._unitPath)\n\t            return;\n\t        var reconciler = this.reconciler;\n\t        //if (this._position == report.position) return;\n\t        ramlServer.getNodeClientConnection().getLatestVersion(report.uri).then(function (latestVersion) {\n\t            //ignoring outdated reports\n\t            if (report.version != null && report.version < latestVersion)\n\t                return;\n\t            _this.setResource(report.details, {\n\t                uri: report.uri,\n\t                position: report.position,\n\t                localModel: false,\n\t                reconciler: reconciler,\n\t            });\n\t        });\n\t    };\n\t    return RamlDetails;\n\t}(SC.Scrollable));\n\texports.RamlDetails = RamlDetails;\n\t// function isSchema(p: hl.IHighLevelNode) {\n\t//     if (!p){\n\t//         return false;\n\t//     }\n\t//     return universeHelpers.isGlobalSchemaType(p.definition());\n\t// } \n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7Ozs7Ozs7Ozs7O0FBRW5ELGdDQUFnQztBQUNoQyx5Q0FBeUM7QUFHekMsSUFBTyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsbUJBQW1CLENBQUE7QUFDbkQsbUNBQW1DO0FBRW5DLDRDQUE0QztBQU01QyxpREFBb0Q7QUFDcEQsMkNBRXFCO0FBRXJCO0lBQWlDLCtCQUFhO0lBSTFDLHFCQUFvQixxQkFBcUM7UUFBckMsc0NBQUEsRUFBQSw0QkFBcUM7UUFBekQsWUFDSSxpQkFBTyxTQU9WO1FBUm1CLDJCQUFxQixHQUFyQixxQkFBcUIsQ0FBZ0I7UUFjekQsaUJBQVcsR0FBRyxJQUFJLG1CQUFtQixFQUFFLENBQUM7UUFaOUIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUVyQyxJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUN4RCxVQUFVLENBQUMsZUFBZSxDQUFDLFVBQUEsTUFBTSxJQUFFLE9BQUEsS0FBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBNUIsQ0FBNEIsQ0FBQyxDQUFBO1FBRWhFLEtBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSx1QkFBVSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQzs7SUFDdEQsQ0FBQztJQUVELDhCQUFRLEdBQVI7UUFDSSxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ3JCLENBQUM7SUFXRCw4QkFBUSxHQUFSO1FBQ0ksSUFBSSxDQUFDO1lBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUMsYUFBYSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxTQUFTLEdBQUMsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFB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QUFDO1lBRXJFLEtBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtnQkFDN0IsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHO2dCQUNmLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUTtnQkFDekIsVUFBVSxFQUFFLEtBQUs7Z0JBQ2pCLFVBQVUsWUFBQTthQUNiLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUNMLGtCQUFDO0FBQUQsQ0EzTUEsQUEyTUMsQ0EzTWdDLEVBQUUsQ0FBQyxVQUFVLEdBMk03QztBQTNNWSxrQ0FBVztBQTZNeEIsNENBQTRDO0FBQzVDLGVBQWU7QUFDZix3QkFBd0I7QUFDeEIsUUFBUTtBQUNSLGlFQUFpRTtBQUNqRSxJQUFJIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLXZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgVUk9cmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgU0M9cmVxdWlyZShcIi4uL3V0aWwvU2Nyb2xsVmlld1VJXCIpXG5pbXBvcnQgcGF0aD1yZXF1aXJlKCdwYXRoJylcbmltcG9ydCBEaXNwb3NhYmxlID0gVUkuSURpc3Bvc2FibGVcbmltcG9ydCBDb21wb3NpdGVEaXNwb3NhYmxlID0gVUkuQ29tcG9zaXRlRGlzcG9zYWJsZVxuaW1wb3J0IGRldGFpbHM9cmVxdWlyZShcIi4vZGV0YWlsc1wiKVxuaW1wb3J0IHNjaGVtYVVJPXJlcXVpcmUoXCIuL3NjaGVtYVVJXCIpXG5pbXBvcnQgZWRpdG9yVG9vbHM9cmVxdWlyZShcIi4vZWRpdG9yLXRvb2xzXCIpXG5pbXBvcnQgZGlhbG9ncz1yZXF1aXJlKFwiLi4vZGlhbG9ncy9kaWFsb2dzXCIpXG5pbXBvcnQgZnM9cmVxdWlyZShcImZzXCIpXG5pbXBvcnQgYXRvbSA9IHJlcXVpcmUoJy4uL2NvcmUvYXRvbVdyYXBwZXInKTtcbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgcGFpciA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL3BhaXJcIik7XG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKTtcbmltcG9ydCB7XG4gICAgUmVjb25jaWxlclxufSBmcm9tIFwiLi9yZWNvbmNpbGVyXCJcblxuZXhwb3J0IGNsYXNzIFJhbWxEZXRhaWxzIGV4dGVuZHMgU0MuU2Nyb2xsYWJsZSB7XG5cbiAgICBwcml2YXRlIHJlY29uY2lsZXI6IFJlY29uY2lsZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFsbG93U3RydWN0dXJlQ2hhbmdlczogYm9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgKDxhbnk+dGhpcykuYWRkQ2xhc3MoJ3JhbWwtZGV0YWlscycpO1xuXG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24ub25EZXRhaWxzUmVwb3J0KHJlcG9ydD0+dGhpcy5vbkRldGFpbHNSZXBvcnQocmVwb3J0KSlcblxuICAgICAgICB0aGlzLnJlY29uY2lsZXIgPSBuZXcgUmVjb25jaWxlcihjb25uZWN0aW9uLCA4MDApO1xuICAgIH1cblxuICAgIGdldFRpdGxlKCkge1xuICAgICAgICByZXR1cm4gXCJEZXRhaWxzXCI7XG4gICAgfVxuXG4gICAgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgX2lzQXR0YWNoZWQ6IGJvb2xlYW47XG5cbiAgICAvLyBwcml2YXRlIF9ub2RlOmhsLklIaWdoTGV2ZWxOb2RlO1xuICAgIHByaXZhdGUgX3VuaXRQYXRoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcG9zaXRpb246IG51bWJlcjtcblxuICAgIGNvbnRhaW5lcjogVUkuUGFuZWw7XG4gICAgYXR0YWNoZWQoKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUw9XCI8ZGl2PjwvZGl2PlwiO1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IFVJLnZjKCk7XG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMudWkoKS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lci51aSgpKTtcbiAgICAgICAgICAgIHN1cGVyLmF0dGFjaGVkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB3YXNTY2hlbWE6Ym9vbGVhbjtcblxuICAgIC8vIHByaXZhdGUgc2V0U2NoZW1hKHVuaXRQYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMud2FzU2NoZW1hKXtcbiAgICAvLyAgICAgICAgIHRoaXMuc2NoZW1hVmlldy5kaXNwb3NlKCk7XG4gICAgLy8gICAgICAgICB0aGlzLnNjaGVtYVZpZXc9bnVsbDtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB2YXIga2V5ID0gbm9kZS5hdHRyKFwia2V5XCIpLFxuICAgIC8vICAgICAgICAgdmFsdWUgPSBub2RlLmF0dHIoXCJ2YWx1ZVwiKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgc3N0byA9IDEyO1xuICAgIC8vXG4gICAgLy8gICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgLy8gICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGVhcigpO1xuICAgIC8vICAgICAgICAgdmFyIGVyckxhYmVsID0gVUkuaDMoXCJTZWxlY3RlZCBzY2hlbWEgaGFzIGluY29ycmVjdCBub2RlIHNvIGNhbm5vdCBiZSBkaXNwbGF5ZWQuXCIpO1xuICAgIC8vICAgICAgICAgVUkuYXBwbHlTdHlsaW5nKFVJLlRleHRDbGFzc2VzLldBUk5JTkcsIGVyckxhYmVsKTtcbiAgICAvLyAgICAgICAgIGVyckxhYmVsLnNldFN0eWxlKFwidGV4dC1hbGlnblwiLCBcImNlbnRlclwiKS5tYXJnaW4oMCwgMCwgMjQsIDEyKTtcbiAgICAvLyAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGVyckxhYmVsKTtcbiAgICAvLyAgICAgICAgIHJldHVybjtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICAvL0ZJWE1FXG4gICAgLy8gICAgIHNldEludGVydmFsKCgpPT57XG4gICAgLy8gICAgICAgICBpZiAoc3N0bysrICE9IDEyKSByZXR1cm47XG4gICAgLy8gICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAvLyAgICAgICAgICAgICB2YWx1ZS5zZXRWYWx1ZShzY2hlbWFUZXh0KTtcbiAgICAvLyAgICAgICAgICAgICBzY2hlbWFVSS5fdXBkYXRlUHJldmlldyh0cmVlVmlldywgc2NoZW1hVGV4dCk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH0sIDEwMCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIHNjaGVtYVRleHQgPSB2YWx1ZS52YWx1ZSgpO1xuICAgIC8vXG4gICAgLy8gICAgIHRoaXMuY29udGFpbmVyLmNsZWFyKCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIHRleHRWaWV3ID0gZGlhbG9ncy5zbWFsbEVkaXRvcigoZSx2KT0+e1xuICAgIC8vICAgICAgICAgaWYgKHZhbHVlLmxvd0xldmVsKCkuaW5jbHVkZVBhdGgoKSl7XG4gICAgLy8gICAgICAgICAgICAgdHJ5IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIHNtID0gcGF0aC5kaXJuYW1lKG5vZGUubG93TGV2ZWwoKS51bml0KCkuYWJzb2x1dGVQYXRoKCkpO1xuICAgIC8vICAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmUgPSBwYXRoLnJlc29sdmUoc20sIHZhbHVlLmxvd0xldmVsKCkuaW5jbHVkZVBhdGgoKSk7XG4gICAgLy8gICAgICAgICAgICAgICAgIGlmICghdmFsdWUubG93TGV2ZWwoKS5pbmNsdWRlUmVmZXJlbmNlKCkpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMocmVsYXRpdmUsIHYpO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIC8vIGlmICh2IT1zY2hlbWFUZXh0KSB0ZXh0Vmlldy5zZXRUZXh0KHNjaGVtYVRleHQpOyAvLyByZWFkLW9ubHkgdmFyaWFudFxuICAgIC8vICAgICAgICAgc2NoZW1hVGV4dCA9IHY7XG4gICAgLy8gICAgICAgICBzc3RvID0gMDtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gICAgIGRpYWxvZ3MuX3VwZGF0ZUVkaXRvcih0ZXh0Vmlldywgc2NoZW1hVGV4dCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIHRyZWVWaWV3ID0gc2NoZW1hVUkuX3NjaGVtYVByZXZpZXcoKTtcbiAgICAvLyAgICAgc2NoZW1hVUkuX3VwZGF0ZVByZXZpZXcodHJlZVZpZXcsIHNjaGVtYVRleHQpO1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBzY2hlbWFUYWIgPSBuZXcgVUkuVGFiRm9sZGVyKCk7XG4gICAgLy8gICAgIHNjaGVtYVRhYi5hZGQoXCJUcmVlIHZpZXdcIiwgVUkuSWNvbi5HSVRfTUVSR0UsIHRyZWVWaWV3KTtcbiAgICAvLyAgICAgc2NoZW1hVGFiLmFkZChcIlRleHQgdmlld1wiLCBVSS5JY29uLkZJTEVfVEVYVCwgdGV4dFZpZXcpO1xuICAgIC8vICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZChzY2hlbWFUYWIpO1xuICAgIC8vXG4gICAgLy8gICAgIHdpbmRvd1snZGV0YWlsc25vZGUnXSA9IG5vZGU7XG4gICAgLy8gICAgIGlmIChkZXRhaWxzLm9sZEl0ZW0pe1xuICAgIC8vICAgICAgICAgZGV0YWlscy5vbGRJdGVtLmRldGFjaCgpO1xuICAgIC8vICAgICAgICAgZGV0YWlscy5vbGRJdGVtPW51bGw7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgdGhpcy5zY2hlbWFWaWV3PXRleHRWaWV3O1xuICAgIC8vICAgICB0aGlzLndhc1NjaGVtYT10cnVlO1xuICAgIC8vIH1cbiAgICBzY2hlbWFWaWV3OlVJLkJhc2ljQ29tcG9uZW50PGFueT47XG5cblxuICAgIHByaXZhdGUgc2V0UmVzb3VyY2UoZGV0YWlsc05vZGU6IHJhbWxTZXJ2ZXIuRGV0YWlsc0l0ZW1KU09OLCBjb250ZXh0OiBkZXRhaWxzLkRldGFpbHNDb250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLndhc1NjaGVtYSl7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYVZpZXcuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWFWaWV3PW51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXNTY2hlbWE9ZmFsc2U7XG5cbiAgICAgICAgd2luZG93W1wiZGV0YWlsc25vZGVcIl0gPSBkZXRhaWxzTm9kZTtcbiAgICAgICAgd2luZG93W1wiZGV0YWlsc2NvbnRleHRcIl0gPSBjb250ZXh0O1xuXG4gICAgICAgIGlmIChkZXRhaWxzTm9kZSA9PSBudWxsKSB0aGlzLmRpc3BsYXlFbXB0eSgpO1xuICAgICAgICBkZXRhaWxzLnVwZGF0ZURldGFpbHNQYW5lbChkZXRhaWxzTm9kZSwgY29udGV4dCwgdGhpcy5jb250YWluZXIsIHRydWUpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYod2luZG93W1wiZGV0YWlsc25vZGVcIl0pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzb3VyY2Uod2luZG93W1wiZGV0YWlsc25vZGVcIl0sIHdpbmRvd1tcImRldGFpbHNjb250ZXh0XCJdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BsYXlFbXB0eSgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xlYXIoKTtcbiAgICAgICAgLy8gaWYgKCFlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuYXN0KSB7XG4gICAgICAgIC8vICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZChVSS5oMyhcIk91ciBBUEkgaXMgZmFidWxvdXNseSBlbXB0eVwiKS5tYXJnaW4oOCwgOCwgMjAsIDgpKTtcbiAgICAgICAgLy8gICAgIHZhciBjcmVhdGUgPSBuZXcgVUkuQnV0dG9uKFwiQ3JlYXRlIG5ldyBBUElcIiwgVUkuQnV0dG9uU2l6ZXMuTEFSR0UsIFVJLkJ1dHRvbkhpZ2hsaWdodHMuU1VDQ0VTUywgVUkuSWNvbi5SRVBPX0NMT05FLCAoKT0+ZGlhbG9ncy5uZXdBcGkoKSk7XG4gICAgICAgIC8vICAgICBjcmVhdGUubWFyZ2luKDgsIDgsIDIwLCAwKTtcbiAgICAgICAgLy8gICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGNyZWF0ZSk7XG4gICAgICAgIC8vIH1cbiAgICB9XG4gICAgZGVzdHJveSAoKTogdm9pZCB7XG4gICAgICAgIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5fZGV0YWlscz1udWxsO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGVzLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fdW5pdFBhdGg9bnVsbDtcbiAgICAgICAgdGhpcy5fcG9zaXRpb249bnVsbDtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lcj1udWxsO1xuICAgICAgICB3aW5kb3dbXCJkZXRhaWxzbm9kZVwiXT1udWxsO1xuICAgICAgICB3aW5kb3dbXCJkZXRhaWxzY29udGV4dFwiXT1udWxsO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbj1bXTtcbiAgICAgICAgaWYgKGRldGFpbHMub2xkSXRlbSl7XG4gICAgICAgICAgICBkZXRhaWxzLm9sZEl0ZW0uZGV0YWNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud2FzU2NoZW1hKXtcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hVmlldy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYVZpZXc9bnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkZXRhaWxzLm9sZEl0ZW09bnVsbDtcbiAgICB9XG5cbiAgICBzaG93KHVuaXRQYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIsIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFmb3JjZSAmJiB0aGlzLl91bml0UGF0aCA9PSB1bml0UGF0aCAmJiB0aGlzLl9wb3NpdGlvbiA9PT0gcG9zaXRpb24pIHJldHVybjtcbiAgICAgICAgdGhpcy5fdW5pdFBhdGggPSB1bml0UGF0aDtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgY29uc3QgcmVjb25jaWxlciA9IHRoaXMucmVjb25jaWxlcjtcblxuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICAvLyBpZiAoaXNTY2hlbWEobm9kZSkpXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5zZXRTY2hlbWEodGhpcy5fbm9kZSk7XG4gICAgICAgICAgICAvLyBlbHNlXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5zZXRSZXNvdXJjZShub2RlKTtcblxuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmdldERldGFpbHModW5pdFBhdGgsIHBvc2l0aW9uKS50aGVuKGRldGFpbHNOb2RlPT57XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXNvdXJjZShkZXRhaWxzTm9kZSwge1xuICAgICAgICAgICAgICAgICAgICB1cmk6IHVuaXRQYXRoLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsTW9kZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByZWNvbmNpbGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuXG4gICAgb25EZXRhaWxzUmVwb3J0KHJlcG9ydCA6IHJhbWxTZXJ2ZXIuSURldGFpbHNSZXBvcnQpIHtcbiAgICAgICAgaWYgKHJlcG9ydC51cmkgIT0gdGhpcy5fdW5pdFBhdGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVjb25jaWxlciA9IHRoaXMucmVjb25jaWxlcjtcblxuICAgICAgICAvL2lmICh0aGlzLl9wb3NpdGlvbiA9PSByZXBvcnQucG9zaXRpb24pIHJldHVybjtcblxuICAgICAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZ2V0TGF0ZXN0VmVyc2lvbihyZXBvcnQudXJpKS50aGVuKGxhdGVzdFZlcnNpb249PntcblxuICAgICAgICAgICAgLy9pZ25vcmluZyBvdXRkYXRlZCByZXBvcnRzXG4gICAgICAgICAgICBpZiAocmVwb3J0LnZlcnNpb24gIT0gbnVsbCAmJiByZXBvcnQudmVyc2lvbiA8IGxhdGVzdFZlcnNpb24pIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zZXRSZXNvdXJjZShyZXBvcnQuZGV0YWlscywge1xuICAgICAgICAgICAgICAgIHVyaTogcmVwb3J0LnVyaSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVwb3J0LnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGxvY2FsTW9kZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlY29uY2lsZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8vIGZ1bmN0aW9uIGlzU2NoZW1hKHA6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgaWYgKCFwKXtcbi8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gdW5pdmVyc2VIZWxwZXJzLmlzR2xvYmFsU2NoZW1hVHlwZShwLmRlZmluaXRpb24oKSk7XG4vLyB9Il19\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"atom-ui-lib\");\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/**\n\t * Created by kor on 22/06/15.\n\t */\n\tvar SpacePenViews = __webpack_require__(7);\n\tvar Scrollable = /** @class */ (function (_super) {\n\t    __extends(Scrollable, _super);\n\t    function Scrollable() {\n\t        var _this = _super.call(this) || this;\n\t        _this._children = [];\n\t        return _this;\n\t    }\n\t    Scrollable.content = function () {\n\t        var v = this.div({ class: 'scrollpad pane-item padded', tabindex: -1, style: \"overflow:scroll;\" });\n\t        return v;\n\t    };\n\t    Scrollable.prototype.dispose = function () {\n\t    };\n\t    Scrollable.prototype.caption = function () { return \"\"; };\n\t    Scrollable.prototype.scroll = function (top, left) {\n\t        this.element.scrollTop = top;\n\t        this.element.scrollLeft = left;\n\t    };\n\t    Scrollable.prototype.size = function () {\n\t        return {\n\t            top: this.element.scrollTop,\n\t            left: this.element.scrollLeft,\n\t            bottom: this.element.scrollTop + this.element.clientHeight,\n\t            right: this.element.scrollLeft + this.element.clientWidth\n\t        };\n\t    };\n\t    Scrollable.prototype.changed = function () { };\n\t    Scrollable.prototype.refresh = function () { };\n\t    Scrollable.prototype.ui = function () {\n\t        return this.element;\n\t    };\n\t    Scrollable.prototype.setParent = function (p) {\n\t        if (this._parent != null)\n\t            this._parent.removeChild(this);\n\t        this._parent = p;\n\t    };\n\t    //TODO REMOVE COPY PASTE\n\t    Scrollable.prototype.addChild = function (child) {\n\t        child.setParent(this);\n\t        this._children.push(child);\n\t        //this.changed();\n\t    };\n\t    Scrollable.prototype.removeChild = function (child) {\n\t        this._children = this._children.filter(function (x) { return x != child; });\n\t        // this.changed();\n\t    };\n\t    Scrollable.prototype.doRender = function () {\n\t        return this.innerRenderUI();\n\t    };\n\t    /**\n\t     *\n\t     * @returns not null element;\n\t     */\n\t    Scrollable.prototype.selfRender = function () {\n\t        return document.createElement(\"div\");\n\t    };\n\t    Scrollable.prototype.attached = function () {\n\t        this.html(this.innerRenderUI());\n\t    };\n\t    Scrollable.prototype.innerRenderUI = function () {\n\t        var start = this.selfRender();\n\t        this._children.forEach(function (x) {\n\t            var el = x.renderUI();\n\t            if (el) {\n\t                start.appendChild(el);\n\t            }\n\t        });\n\t        return start;\n\t    };\n\t    Scrollable.prototype.renderUI = function () {\n\t        return this.element;\n\t    };\n\t    Scrollable.prototype.parent = function () {\n\t        return null;\n\t    };\n\t    Scrollable.prototype.children = function () {\n\t        return this._children;\n\t    };\n\t    Scrollable.prototype.isAttached = function () {\n\t        return true;\n\t    };\n\t    return Scrollable;\n\t}(SpacePenViews.ScrollView));\n\texports.Scrollable = Scrollable;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3V0aWwvU2Nyb2xsVmlld1VJLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOztHQUVHO0FBQ0gsb0RBQXVEO0FBRXZEO0lBQWdDLDhCQUF3QjtJQUlwRDtRQUFBLFlBQ0ksaUJBQU8sU0FDVjtRQUpBLGVBQVMsR0FBcUIsRUFBRSxDQUFBOztJQUlqQyxDQUFDO0lBQ00sa0JBQU8sR0FBZDtRQUNJLElBQUksQ0FBQyxHQUFTLElBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsNEJBQTRCLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRSxDQUFDLENBQUE7UUFFekcsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNiLENBQUM7SUFDRCw0QkFBTyxHQUFQO0lBRUEsQ0FBQztJQUlELDRCQUFPLEdBQVAsY0FBWSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV4QiwyQkFBTSxHQUFOLFVBQU8sR0FBVyxFQUFFLElBQVk7UUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO1FBQzdCLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztJQUNuQyxDQUFDO0lBRUQseUJBQUksR0FBSjtRQUNJLE1BQU0sQ0FBQztZQUNILEdBQUcsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVM7WUFDM0IsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVTtZQUM3QixNQUFNLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZO1lBQzFELEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVc7U0FDNUQsQ0FBQTtJQUNMLENBQUM7SUFFRCw0QkFBTyxHQUFQLGNBQVksQ0FBQztJQUNiLDRCQUFPLEdBQVAsY0FBWSxDQUFDO0lBR2IsdUJBQUUsR0FBRjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFJRCw4QkFBUyxHQUFULFVBQVUsQ0FBaUI7UUFDdkIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUM7WUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDckIsQ0FBQztJQUVELHdCQUF3QjtJQUN4Qiw2QkFBUSxHQUFSLFVBQVMsS0FBNEM7UUFDakQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixpQkFBaUI7SUFDckIsQ0FBQztJQUNELGdDQUFXLEdBQVgsVUFBWSxLQUFxQjtRQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQUEsQ0FBQyxJQUFHLE9BQUEsQ0FBQyxJQUFJLEtBQUssRUFBVixDQUFVLENBQUMsQ0FBQztRQUN2RCxrQkFBa0I7SUFDdEIsQ0FBQztJQUNELDZCQUFRLEdBQVI7UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFDRDs7O09BR0c7SUFDSywrQkFBVSxHQUFsQjtRQUNJLE1BQU0sQ0FBTSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ1UsSUFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQTtJQUMxQyxDQUFDO0lBRUQsa0NBQWEsR0FBYjtRQUNJLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFBLENBQUM7WUFDcEIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFBO1lBQ3JCLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ0wsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMxQixDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUVELDJCQUFNLEdBQU47UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELCtCQUFVLEdBQVY7UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTCxpQkFBQztBQUFELENBdkdBLEFBdUdDLENBdkcrQixhQUFhLENBQUMsVUFBVSxHQXVHdkQ7QUF2R1ksZ0NBQVUiLCJmaWxlIjoic3JjL2F0b20vdXRpbC9TY3JvbGxWaWV3VUkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkga29yIG9uIDIyLzA2LzE1LlxuICovXG5pbXBvcnQgU3BhY2VQZW5WaWV3cyA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJyk7XG5pbXBvcnQgVUkgPSByZXF1aXJlKFwiYXRvbS11aS1saWJcIilcbmV4cG9ydCBjbGFzcyBTY3JvbGxhYmxlIGV4dGVuZHMgU3BhY2VQZW5WaWV3cy5TY3JvbGxWaWV3IGltcGxlbWVudHMgVUkuVUlDb21wb25lbnQge1xuXG4gICAgIF9jaGlsZHJlbjogVUkuVUlDb21wb25lbnRbXSA9IFtdXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbnRlbnQoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICB2YXIgdiA9ICg8YW55PnRoaXMpLmRpdih7IGNsYXNzOiAnc2Nyb2xscGFkIHBhbmUtaXRlbSBwYWRkZWQnLCB0YWJpbmRleDogLTEsIHN0eWxlOiBcIm92ZXJmbG93OnNjcm9sbDtcIiB9KVxuXG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuXG4gICAgfVxuICAgIGVsZW1lbnQ6SFRNTEVsZW1lbnRcblxuXG4gICAgY2FwdGlvbigpIHsgcmV0dXJuIFwiXCI7IH1cblxuICAgIHNjcm9sbCh0b3A6IG51bWJlciwgbGVmdDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0ID0gbGVmdDsgICAgXG4gICAgfVxuICAgIFxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC5zY3JvbGxUb3AsXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIGJvdHRvbTogdGhpcy5lbGVtZW50LnNjcm9sbFRvcCArIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICByaWdodDogdGhpcy5lbGVtZW50LnNjcm9sbExlZnQgKyB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGhcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoYW5nZWQoKSB7IH1cbiAgICByZWZyZXNoKCkgeyB9XG5cbiAgICBwcml2YXRlIF91aTogVUkuSFRNTFR5cGVzO1xuICAgIHVpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgX3BhcmVudDogVUkuVUlDb21wb25lbnQ7XG5cbiAgICBzZXRQYXJlbnQocDogVUkuVUlDb21wb25lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhcmVudCAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5fcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHA7XG4gICAgfVxuXG4gICAgLy9UT0RPIFJFTU9WRSBDT1BZIFBBU1RFXG4gICAgYWRkQ2hpbGQoY2hpbGQ6IFVJLlVJQ29tcG9uZW50fFVJLkJhc2ljQ29tcG9uZW50PGFueT4pIHtcbiAgICAgICAgY2hpbGQuc2V0UGFyZW50KHRoaXMpO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgLy90aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQ6IFVJLlVJQ29tcG9uZW50KSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW4uZmlsdGVyKHg9PiB4ICE9IGNoaWxkKTtcbiAgICAgICAgLy8gdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICAgIGRvUmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lclJlbmRlclVJKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgbm90IG51bGwgZWxlbWVudDtcbiAgICAgKi9cbiAgICBwcml2YXRlIHNlbGZSZW5kZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gPGFueT5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIH1cblxuICAgIGF0dGFjaGVkKCkge1xuICAgICAgICAoPGFueT50aGlzKS5odG1sKHRoaXMuaW5uZXJSZW5kZXJVSSgpKVxuICAgIH1cblxuICAgIGlubmVyUmVuZGVyVUkoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnNlbGZSZW5kZXIoKTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCh4PT4ge1xuICAgICAgICAgICAgdmFyIGVsID0geC5yZW5kZXJVSSgpXG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICBzdGFydC5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzdGFydDtcbiAgICB9XG5cbiAgICByZW5kZXJVSSgpOiBVSS5IVE1MVHlwZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIHBhcmVudCgpOiBhbnkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjaGlsZHJlbigpOiBVSS5VSUNvbXBvbmVudFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuO1xuICAgIH1cblxuICAgIGlzQXR0YWNoZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0iXX0=\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"atom-space-pen-views\");\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar UI = __webpack_require__(5);\n\tvar detailElements = __webpack_require__(9);\n\tvar HTTPANDHTTPS = \"HTTP, HTTPS\";\n\tvar HTTPHTTPS = \"HTTP/HTTPS\";\n\texports.nodes = {\n\t    Api: {\n\t        properties: [\"title\", \"version\", \"baseUri\", \"mediaType\", \"protocols\"],\n\t        actions: []\n\t    },\n\t    Resource: {\n\t        properties: [\"relativeUri\", \"displayName\", \"description\", \"is\", \"type\"]\n\t    },\n\t    Method: {\n\t        properties: [\"method\", \"displayName\", \"description\", \"is\", \"type\", \"protocols\", \"securedBy\"]\n\t    },\n\t    DataElement: {\n\t        properties: [\"name\", \"displayName\", \"description\", \"default\", \"required\"]\n\t    },\n\t    Response: {\n\t        properties: [\"code\", \"description\"]\n\t    }\n\t};\n\texports.filterOut = {\n\t    properties: [\"location\", \"annotations\", \"repeat\", \"locationKind\", \"signature\"]\n\t};\n\tvar focusedPropertyName = null;\n\tvar focusedPosition = -1;\n\tvar toFocus = null;\n\tfunction updateDetailsPanel(detailsReport, context, panel, updateTextOnDone) {\n\t    if (updateTextOnDone === void 0) { updateTextOnDone = false; }\n\t    panel.clear();\n\t    var cfg = atom.config;\n\t    var l = atom.styles.emitter.handlersByEventName;\n\t    var sadd = [].concat(l['did-add-style-element']);\n\t    var sremove = [].concat(l['did-remove-style-element']);\n\t    var schange = [].concat(l['did-update-style-element']);\n\t    var cfgCh = [].concat(cfg.emitter.handlersByEventName['did-change']);\n\t    var grammars = atom.grammars.emitter.handlersByEventName;\n\t    var addGrammar = [].concat(grammars[\"did-add-grammar\"]);\n\t    var updateGrammar = [].concat(grammars[\"did-update-grammar\"]);\n\t    var emptyGrammarListeners = [].concat(atom.grammars.nullGrammar.emitter.handlersByEventName[\"did-update\"]);\n\t    try {\n\t        var empty = true;\n\t        var item = detailElements.buildItem(detailsReport, context, false);\n\t        // item.addListener(x=> {\n\t        //     editorTools.aquireManager().updateText(null);\n\t        // })\n\t        var rend;\n\t        try {\n\t            rend = item.render({});\n\t        }\n\t        finally {\n\t            if (exports.oldItem) {\n\t                exports.oldItem.detach();\n\t            }\n\t            exports.oldItem = item;\n\t            if (rend) {\n\t                panel.addChild(rend);\n\t            }\n\t            empty = false;\n\t        }\n\t        if (toFocus) {\n\t            var field = toFocus.getActualField().ui();\n\t            field.focus();\n\t            field.getModel().setCursorBufferPosition(focusedPosition);\n\t            toFocus = null;\n\t            focusedPosition = null;\n\t            focusedPropertyName = null;\n\t        }\n\t        if (empty) {\n\t            var errLabel = UI.h3(\"Object has no additional properties.\");\n\t            UI.applyStyling(UI.TextClasses.WARNING, errLabel);\n\t            errLabel.setStyle(\"text-align\", \"center\").margin(0, 0, 24, 12);\n\t            panel.addChild(errLabel);\n\t        }\n\t    }\n\t    catch (Error) {\n\t        throw Error;\n\t    }\n\t    finally {\n\t        cfg.emitter.handlersByEventName['did-change'] = cfgCh;\n\t        l['did-add-style-element'] = sadd;\n\t        l['did-remove-style-element'] = sremove;\n\t        l['did-update-style-element'] = schange;\n\t        grammars[\"did-add-grammar\"] = addGrammar;\n\t        grammars[\"did-update-grammar\"] = updateGrammar;\n\t        atom.grammars.nullGrammar.emitter.handlersByEventName[\"did-update\"] = emptyGrammarListeners;\n\t    }\n\t}\n\texports.updateDetailsPanel = updateDetailsPanel;\n\t// function getSchemaType(value: string)\n\t// {\n\t//     var schema = schemautil.createSchema(value, null);\n\t//     if (!schema || !schema.getType) return \"Invalid\";\n\t//     switch (schema.getType()) {\n\t//         case \"source.json\":\n\t//             return \"JSON\";\n\t//         case \"text.xml\":\n\t//             return \"XML\";\n\t//         default :\n\t//             return \"Unknown type\";\n\t//     }\n\t// }\n\t// export function getStringValue(x : string | hl.IStructuredValue) : string {\n\t//     if (typeof x ===\"object\") return (<hl.IStructuredValue>x).valueName();\n\t//     else return <string>x;\n\t// }\n\t//\n\t// export function propertyInfo(node: hl.IHighLevelNode, name: string) {\n\t//     var prop = node.definition().property(name);\n\t//     if (prop.isValueProperty() == false) return null;\n\t//     var isMulti = prop.isMultiValue();\n\t//     var required = prop.isRequired();\n\t//     var value : string;\n\t//     var values = [];\n\t//     var type : string;\n\t//     var ipath: string;\n\t//     var rangeName = prop.range().nameId();\n\t//\n\t//     if (isMulti) {\n\t//         values = node.attributes(name).map(x=>x.value());\n\t//         value = values.map(x=>getStringValue(x)).join(\", \");\n\t//         switch (rangeName) {\n\t//             case \"StringType\":\n\t//                 type = 'enum';\n\t//                 if (!node.definition().getAdapter(def.RAMLService).isUserDefined()&&name==\"protocols\"){\n\t//                     type=\"protocols\"\n\t//                 }\n\t//                 break;\n\t//             case \"TraitRef\":\n\t//                 type = 'trait';\n\t//                 break;\n\t//             default:\n\t//                 type = 'unknown';\n\t//         }\n\t//     } else {\n\t//         var attr = node.attr(name);\n\t//         value = attr && attr.value() ? attr.value() : \"\";\n\t//\n\t//         switch (rangeName) {\n\t//             case \"MarkdownString\":\n\t//                 type = 'markdown';\n\t//                 values = value.split(\"\\n\");\n\t//                 value =  values[0];\n\t//                 break;\n\t//             case \"SchemaString\":\n\t//                 type = 'schema';\n\t//                 if (value.indexOf(\"\\n\") >= 0) {\n\t//                     values = [value];\n\t//                     value = \"(\" + getSchemaType(value) + \" Schema)\";\n\t//                 }\n\t//                 break;\n\t//             case \"ExampleString\":\n\t//                 type = 'schexample';\n\t//                 try {\n\t//                     ipath = attr.lowLevel().includePath();\n\t//                 } catch(e) { ipath = \"\"; }\n\t//                 values = [value, ipath];\n\t//                 value =  \"Example\" + (ipath != \"\" ? \" (referenced from \" + ipath + \")\" : \"\");\n\t//                 break;\n\t//             case \"ResourceTypeRef\":\n\t//                 type = \"type\";\n\t//                 break;\n\t//             default:\n\t//                 type = 'string';\n\t//         }\n\t//         if (type == \"string\") {\n\t//             if (value.indexOf(\"\\n\") >= 0) {\n\t//                 values = value.split(\"\\n\");\n\t//                 value = \"(\" + values.length + \" lines) \" + values[0].substring(0, 20) + \" ...\";\n\t//                 type = \"multiline\";\n\t//             }\n\t//             if (attr)\n\t//                 ipath = attr.lowLevel().includePath();\n\t//\n\t//             if (ipath) {\n\t//                 value = \"(included from \" + ipath +\")\";\n\t//                 type = \"include\";\n\t//             }\n\t//         }\n\t//     }\n\t//     var ret = {\n\t//         value: value,\n\t//         values: values,\n\t//         type: type,\n\t//         include: ipath,\n\t//         required: required,\n\t//     };\n\t//     return ret;\n\t// }\n\t// export function stringView(node: hl.IHighLevelNode, name: string) {\n\t//     return getStringValue(propertyInfo(node, name).value);\n\t// } \n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEsZ0NBQWdDO0FBSWhDLGlEQUFpRDtBQUlqRCxJQUFJLFlBQVksR0FBQyxhQUFhLENBQUE7QUFDOUIsSUFBSSxTQUFTLEdBQUMsWUFBWSxDQUFBO0FBR2YsUUFBQSxLQUFLLEdBQUM7SUFDYixHQUFHLEVBQUM7UUFDQSxVQUFVLEVBQUMsQ0FBQyxPQUFPLEVBQUMsU0FBUyxFQUFDLFNBQVMsRUFBQyxXQUFXLEVBQUMsV0FBVyxDQUFDO1FBQ2hFLE9BQU8sRUFBQyxFQUNQO0tBQ0o7SUFFRCxRQUFRLEVBQUM7UUFDTCxVQUFVLEVBQUMsQ0FBQyxhQUFhLEVBQUMsYUFBYSxFQUFDLGFBQWEsRUFBQyxJQUFJLEVBQUMsTUFBTSxDQUFDO0tBQ3JFO0lBQ0QsTUFBTSxFQUFDO1FBQ0gsVUFBVSxFQUFDLENBQUMsUUFBUSxFQUFDLGFBQWEsRUFBQyxhQUFhLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxXQUFXLEVBQUMsV0FBVyxDQUFDO0tBQ3hGO0lBRUQsV0FBVyxFQUFDO1FBQ1IsVUFBVSxFQUFDLENBQUMsTUFBTSxFQUFDLGFBQWEsRUFBQyxhQUFhLEVBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQztLQUN2RTtJQUNELFFBQVEsRUFBQztRQUNMLFVBQVUsRUFBQyxDQUFDLE1BQU0sRUFBQyxhQUFhLENBQUM7S0FDcEM7Q0FDSixDQUFBO0FBQ1UsUUFBQSxTQUFTLEdBQUM7SUFDakIsVUFBVSxFQUFDLENBQUMsVUFBVSxFQUFDLGFBQWEsRUFBQyxRQUFRLEVBQUMsY0FBYyxFQUFDLFdBQVcsQ0FBQztDQUU1RSxDQUFBO0FBRUQsSUFBSyxtQkFBbUIsR0FBVyxJQUFJLENBQUM7QUFDeEMsSUFBSSxlQUFlLEdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDakMsSUFBSSxPQUFPLEdBQWtCLElBQUksQ0FBQztBQUdsQyw0QkFBbUMsYUFBeUMsRUFDekMsT0FBc0Ms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QXNCO0FBQ3RCLDBCQUEwQjtBQUMxQiw4QkFBOEI7QUFDOUIsU0FBUztBQUNULGtCQUFrQjtBQUNsQixJQUFJO0FBQ0osc0VBQXNFO0FBQ3RFLDZEQUE2RDtBQUM3RCxJQUFJIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cbmltcG9ydCBmcyA9IHJlcXVpcmUgKCdmcycpXG5pbXBvcnQgcGF0aD1yZXF1aXJlKCdwYXRoJylcbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgVUk9cmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgU3BhY2VQZW5WaWV3cyA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJylcbmltcG9ydCBkaWFsb2dzPXJlcXVpcmUoXCIuLi9kaWFsb2dzL2RpYWxvZ3NcIilcbmltcG9ydCBlZGl0b3JUb29scz1yZXF1aXJlKFwiLi9lZGl0b3ItdG9vbHNcIilcbmltcG9ydCBkZXRhaWxFbGVtZW50cz1yZXF1aXJlKFwiLi9kZXRhaWxFbGVtZW50c1wiKVxuXG5leHBvcnQgdHlwZSBEZXRhaWxzQ29udGV4dCA9IGRldGFpbEVsZW1lbnRzLkRldGFpbHNDb250ZXh0O1xuXG52YXIgSFRUUEFOREhUVFBTPVwiSFRUUCwgSFRUUFNcIlxudmFyIEhUVFBIVFRQUz1cIkhUVFAvSFRUUFNcIlxuaW1wb3J0IHJhbWxTZXJ2ZXIgPSByZXF1aXJlKFwicmFtbC1sYW5ndWFnZS1zZXJ2ZXJcIik7XG5cbmV4cG9ydCB2YXIgbm9kZXM9e1xuICAgIEFwaTp7XG4gICAgICAgIHByb3BlcnRpZXM6W1widGl0bGVcIixcInZlcnNpb25cIixcImJhc2VVcmlcIixcIm1lZGlhVHlwZVwiLFwicHJvdG9jb2xzXCJdLFxuICAgICAgICBhY3Rpb25zOltcbiAgICAgICAgXVxuICAgIH1cbiAgICAsXG4gICAgUmVzb3VyY2U6e1xuICAgICAgICBwcm9wZXJ0aWVzOltcInJlbGF0aXZlVXJpXCIsXCJkaXNwbGF5TmFtZVwiLFwiZGVzY3JpcHRpb25cIixcImlzXCIsXCJ0eXBlXCJdXG4gICAgfSxcbiAgICBNZXRob2Q6e1xuICAgICAgICBwcm9wZXJ0aWVzOltcIm1ldGhvZFwiLFwiZGlzcGxheU5hbWVcIixcImRlc2NyaXB0aW9uXCIsXCJpc1wiLFwidHlwZVwiLFwicHJvdG9jb2xzXCIsXCJzZWN1cmVkQnlcIl1cbiAgICB9XG4gICAgLFxuICAgIERhdGFFbGVtZW50OntcbiAgICAgICAgcHJvcGVydGllczpbXCJuYW1lXCIsXCJkaXNwbGF5TmFtZVwiLFwiZGVzY3JpcHRpb25cIixcImRlZmF1bHRcIixcInJlcXVpcmVkXCJdXG4gICAgfSxcbiAgICBSZXNwb25zZTp7XG4gICAgICAgIHByb3BlcnRpZXM6W1wiY29kZVwiLFwiZGVzY3JpcHRpb25cIl1cbiAgICB9XG59XG5leHBvcnQgdmFyIGZpbHRlck91dD17XG4gICAgcHJvcGVydGllczpbXCJsb2NhdGlvblwiLFwiYW5ub3RhdGlvbnNcIixcInJlcGVhdFwiLFwibG9jYXRpb25LaW5kXCIsXCJzaWduYXR1cmVcIl1cblxufVxuXG52YXIgIGZvY3VzZWRQcm9wZXJ0eU5hbWU6IHN0cmluZyA9IG51bGw7XG52YXIgZm9jdXNlZFBvc2l0aW9uOiBudW1iZXIgPSAtMTtcbnZhciB0b0ZvY3VzIDogVUkuVGV4dEZpZWxkID0gbnVsbDtcblxuZXhwb3J0IHZhciBvbGRJdGVtO1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURldGFpbHNQYW5lbChkZXRhaWxzUmVwb3J0OiByYW1sU2VydmVyLkRldGFpbHNJdGVtSlNPTixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogZGV0YWlsRWxlbWVudHMuRGV0YWlsc0NvbnRleHQsIHBhbmVsOiBVSS5QYW5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGV4dE9uRG9uZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgcGFuZWwuY2xlYXIoKTtcbiAgICB2YXIgY2ZnPSg8YW55PmF0b20pLmNvbmZpZ1xuICAgIHZhciBsPSg8YW55PmF0b20pLnN0eWxlcy5lbWl0dGVyLmhhbmRsZXJzQnlFdmVudE5hbWU7XG4gICAgdmFyIHNhZGQ6YW55W109W10uY29uY2F0KGxbJ2RpZC1hZGQtc3R5bGUtZWxlbWVudCddKTtcbiAgICB2YXIgc3JlbW92ZTphbnlbXT1bXS5jb25jYXQobFsnZGlkLXJlbW92ZS1zdHlsZS1lbGVtZW50J10pO1xuICAgIHZhciBzY2hhbmdlOmFueVtdPVtdLmNvbmNhdChsWydkaWQtdXBkYXRlLXN0eWxlLWVsZW1lbnQnXSk7XG4gICAgdmFyIGNmZ0NoOmFueVtdPVtdLmNvbmNhdChjZmcuZW1pdHRlci5oYW5kbGVyc0J5RXZlbnROYW1lWydkaWQtY2hhbmdlJ10pO1xuICAgIHZhciBncmFtbWFycz0oPGFueT5hdG9tKS5ncmFtbWFycy5lbWl0dGVyLmhhbmRsZXJzQnlFdmVudE5hbWU7XG4gICAgdmFyIGFkZEdyYW1tYXI6YW55W109W10uY29uY2F0KGdyYW1tYXJzW1wiZGlkLWFkZC1ncmFtbWFyXCJdKTtcbiAgICB2YXIgdXBkYXRlR3JhbW1hcjphbnlbXT1bXS5jb25jYXQoZ3JhbW1hcnNbXCJkaWQtdXBkYXRlLWdyYW1tYXJcIl0pO1xuICAgIHZhciBlbXB0eUdyYW1tYXJMaXN0ZW5lcnM9W10uY29uY2F0KCg8YW55PmF0b20pLmdyYW1tYXJzLm51bGxHcmFtbWFyLmVtaXR0ZXIuaGFuZGxlcnNCeUV2ZW50TmFtZVtcImRpZC11cGRhdGVcIl0pO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBlbXB0eSA9IHRydWU7XG5cbiAgICAgICAgdmFyIGl0ZW0gPSBkZXRhaWxFbGVtZW50cy5idWlsZEl0ZW0oZGV0YWlsc1JlcG9ydCwgY29udGV4dCwgZmFsc2UpO1xuICAgICAgICAvLyBpdGVtLmFkZExpc3RlbmVyKHg9PiB7XG4gICAgICAgIC8vICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkudXBkYXRlVGV4dChudWxsKTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgdmFyIHJlbmQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZW5kID0gaXRlbS5yZW5kZXIoe30pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKG9sZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICBvbGRJdGVtLmRldGFjaCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvbGRJdGVtID0gaXRlbTtcblxuICAgICAgICAgICAgaWYgKHJlbmQpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC5hZGRDaGlsZChyZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b0ZvY3VzKSB7XG4gICAgICAgICAgICB2YXIgZmllbGQgPSB0b0ZvY3VzLmdldEFjdHVhbEZpZWxkKCkudWkoKTtcbiAgICAgICAgICAgIGZpZWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAoPGFueT4gZmllbGQpLmdldE1vZGVsKCkuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oZm9jdXNlZFBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRvRm9jdXMgPSBudWxsO1xuICAgICAgICAgICAgZm9jdXNlZFBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGZvY3VzZWRQcm9wZXJ0eU5hbWUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVtcHR5KSB7XG4gICAgICAgICAgICB2YXIgZXJyTGFiZWwgPSBVSS5oMyhcIk9iamVjdCBoYXMgbm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLlwiKTtcbiAgICAgICAgICAgIFVJLmFwcGx5U3R5bGluZyhVSS5UZXh0Q2xhc3Nlcy5XQVJOSU5HLCBlcnJMYWJlbCk7XG4gICAgICAgICAgICBlcnJMYWJlbC5zZXRTdHlsZShcInRleHQtYWxpZ25cIiwgXCJjZW50ZXJcIikubWFyZ2luKDAsIDAsIDI0LCAxMik7XG4gICAgICAgICAgICBwYW5lbC5hZGRDaGlsZChlcnJMYWJlbCk7XG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2goRXJyb3Ipe1xuICAgICAgICB0aHJvdyBFcnJvcjtcbiAgICB9IGZpbmFsbHkge1xuXG4gICAgICAgIGNmZy5lbWl0dGVyLmhhbmRsZXJzQnlFdmVudE5hbWVbJ2RpZC1jaGFuZ2UnXT1jZmdDaDtcbiAgICAgICAgbFsnZGlkLWFkZC1zdHlsZS1lbGVtZW50J109c2FkZDtcbiAgICAgICAgbFsnZGlkLXJlbW92ZS1zdHlsZS1lbGVtZW50J109c3JlbW92ZTtcbiAgICAgICAgbFsnZGlkLXVwZGF0ZS1zdHlsZS1lbGVtZW50J109c2NoYW5nZTtcbiAgICAgICAgZ3JhbW1hcnNbXCJkaWQtYWRkLWdyYW1tYXJcIl09YWRkR3JhbW1hcjtcbiAgICAgICAgZ3JhbW1hcnNbXCJkaWQtdXBkYXRlLWdyYW1tYXJcIl09dXBkYXRlR3JhbW1hcjtcbiAgICAgICAgKDxhbnk+YXRvbSkuZ3JhbW1hcnMubnVsbEdyYW1tYXIuZW1pdHRlci5oYW5kbGVyc0J5RXZlbnROYW1lW1wiZGlkLXVwZGF0ZVwiXT1lbXB0eUdyYW1tYXJMaXN0ZW5lcnM7XG4gICAgfVxufVxuXG5cblxuXG5cbi8vIGZ1bmN0aW9uIGdldFNjaGVtYVR5cGUodmFsdWU6IHN0cmluZylcbi8vIHtcbi8vICAgICB2YXIgc2NoZW1hID0gc2NoZW1hdXRpbC5jcmVhdGVTY2hlbWEodmFsdWUsIG51bGwpO1xuLy8gICAgIGlmICghc2NoZW1hIHx8ICFzY2hlbWEuZ2V0VHlwZSkgcmV0dXJuIFwiSW52YWxpZFwiO1xuLy8gICAgIHN3aXRjaCAoc2NoZW1hLmdldFR5cGUoKSkge1xuLy8gICAgICAgICBjYXNlIFwic291cmNlLmpzb25cIjpcbi8vICAgICAgICAgICAgIHJldHVybiBcIkpTT05cIjtcbi8vICAgICAgICAgY2FzZSBcInRleHQueG1sXCI6XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJYTUxcIjtcbi8vICAgICAgICAgZGVmYXVsdCA6XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJVbmtub3duIHR5cGVcIjtcbi8vICAgICB9XG4vLyB9XG4vLyBleHBvcnQgZnVuY3Rpb24gZ2V0U3RyaW5nVmFsdWUoeCA6IHN0cmluZyB8IGhsLklTdHJ1Y3R1cmVkVmFsdWUpIDogc3RyaW5nIHtcbi8vICAgICBpZiAodHlwZW9mIHggPT09XCJvYmplY3RcIikgcmV0dXJuICg8aGwuSVN0cnVjdHVyZWRWYWx1ZT54KS52YWx1ZU5hbWUoKTtcbi8vICAgICBlbHNlIHJldHVybiA8c3RyaW5nPng7XG4vLyB9XG4vL1xuLy8gZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5SW5mbyhub2RlOiBobC5JSGlnaExldmVsTm9kZSwgbmFtZTogc3RyaW5nKSB7XG4vLyAgICAgdmFyIHByb3AgPSBub2RlLmRlZmluaXRpb24oKS5wcm9wZXJ0eShuYW1lKTtcbi8vICAgICBpZiAocHJvcC5pc1ZhbHVlUHJvcGVydHkoKSA9PSBmYWxzZSkgcmV0dXJuIG51bGw7XG4vLyAgICAgdmFyIGlzTXVsdGkgPSBwcm9wLmlzTXVsdGlWYWx1ZSgpO1xuLy8gICAgIHZhciByZXF1aXJlZCA9IHByb3AuaXNSZXF1aXJlZCgpO1xuLy8gICAgIHZhciB2YWx1ZSA6IHN0cmluZztcbi8vICAgICB2YXIgdmFsdWVzID0gW107XG4vLyAgICAgdmFyIHR5cGUgOiBzdHJpbmc7XG4vLyAgICAgdmFyIGlwYXRoOiBzdHJpbmc7XG4vLyAgICAgdmFyIHJhbmdlTmFtZSA9IHByb3AucmFuZ2UoKS5uYW1lSWQoKTtcbi8vXG4vLyAgICAgaWYgKGlzTXVsdGkpIHtcbi8vICAgICAgICAgdmFsdWVzID0gbm9kZS5hdHRyaWJ1dGVzKG5hbWUpLm1hcCh4PT54LnZhbHVlKCkpO1xuLy8gICAgICAgICB2YWx1ZSA9IHZhbHVlcy5tYXAoeD0+Z2V0U3RyaW5nVmFsdWUoeCkpLmpvaW4oXCIsIFwiKTtcbi8vICAgICAgICAgc3dpdGNoIChyYW5nZU5hbWUpIHtcbi8vICAgICAgICAgICAgIGNhc2UgXCJTdHJpbmdUeXBlXCI6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICdlbnVtJztcbi8vICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuZGVmaW5pdGlvbigpLmdldEFkYXB0ZXIoZGVmLlJBTUxTZXJ2aWNlKS5pc1VzZXJEZWZpbmVkKCkmJm5hbWU9PVwicHJvdG9jb2xzXCIpe1xuLy8gICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJvdG9jb2xzXCJcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBjYXNlIFwiVHJhaXRSZWZcIjpcbi8vICAgICAgICAgICAgICAgICB0eXBlID0gJ3RyYWl0Jztcbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGRlZmF1bHQ6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICd1bmtub3duJztcbi8vICAgICAgICAgfVxuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIHZhciBhdHRyID0gbm9kZS5hdHRyKG5hbWUpO1xuLy8gICAgICAgICB2YWx1ZSA9IGF0dHIgJiYgYXR0ci52YWx1ZSgpID8gYXR0ci52YWx1ZSgpIDogXCJcIjtcbi8vXG4vLyAgICAgICAgIHN3aXRjaCAocmFuZ2VOYW1lKSB7XG4vLyAgICAgICAgICAgICBjYXNlIFwiTWFya2Rvd25TdHJpbmdcIjpcbi8vICAgICAgICAgICAgICAgICB0eXBlID0gJ21hcmtkb3duJztcbi8vICAgICAgICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZS5zcGxpdChcIlxcblwiKTtcbi8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICB2YWx1ZXNbMF07XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBjYXNlIFwiU2NoZW1hU3RyaW5nXCI6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICdzY2hlbWEnO1xuLy8gICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKFwiXFxuXCIpID49IDApIHtcbi8vICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gW3ZhbHVlXTtcbi8vICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBcIihcIiArIGdldFNjaGVtYVR5cGUodmFsdWUpICsgXCIgU2NoZW1hKVwiO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGNhc2UgXCJFeGFtcGxlU3RyaW5nXCI6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICdzY2hleGFtcGxlJztcbi8vICAgICAgICAgICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgICAgICAgICBpcGF0aCA9IGF0dHIubG93TGV2ZWwoKS5pbmNsdWRlUGF0aCgpO1xuLy8gICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkgeyBpcGF0aCA9IFwiXCI7IH1cbi8vICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBbdmFsdWUsIGlwYXRoXTtcbi8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICBcIkV4YW1wbGVcIiArIChpcGF0aCAhPSBcIlwiID8gXCIgKHJlZmVyZW5jZWQgZnJvbSBcIiArIGlwYXRoICsgXCIpXCIgOiBcIlwiKTtcbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGNhc2UgXCJSZXNvdXJjZVR5cGVSZWZcIjpcbi8vICAgICAgICAgICAgICAgICB0eXBlID0gXCJ0eXBlXCI7XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBkZWZhdWx0OlxuLy8gICAgICAgICAgICAgICAgIHR5cGUgPSAnc3RyaW5nJztcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAodHlwZSA9PSBcInN0cmluZ1wiKSB7XG4vLyAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihcIlxcblwiKSA+PSAwKSB7XG4vLyAgICAgICAgICAgICAgICAgdmFsdWVzID0gdmFsdWUuc3BsaXQoXCJcXG5cIik7XG4vLyAgICAgICAgICAgICAgICAgdmFsdWUgPSBcIihcIiArIHZhbHVlcy5sZW5ndGggKyBcIiBsaW5lcykgXCIgKyB2YWx1ZXNbMF0uc3Vic3RyaW5nKDAsIDIwKSArIFwiIC4uLlwiO1xuLy8gICAgICAgICAgICAgICAgIHR5cGUgPSBcIm11bHRpbGluZVwiO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgaWYgKGF0dHIpXG4vLyAgICAgICAgICAgICAgICAgaXBhdGggPSBhdHRyLmxvd0xldmVsKCkuaW5jbHVkZVBhdGgoKTtcbi8vXG4vLyAgICAgICAgICAgICBpZiAoaXBhdGgpIHtcbi8vICAgICAgICAgICAgICAgICB2YWx1ZSA9IFwiKGluY2x1ZGVkIGZyb20gXCIgKyBpcGF0aCArXCIpXCI7XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9IFwiaW5jbHVkZVwiO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIHZhciByZXQgPSB7XG4vLyAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbi8vICAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4vLyAgICAgICAgIHR5cGU6IHR5cGUsXG4vLyAgICAgICAgIGluY2x1ZGU6IGlwYXRoLFxuLy8gICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQsXG4vLyAgICAgfTtcbi8vICAgICByZXR1cm4gcmV0O1xuLy8gfVxuLy8gZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1ZpZXcobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUsIG5hbWU6IHN0cmluZykge1xuLy8gICAgIHJldHVybiBnZXRTdHJpbmdWYWx1ZShwcm9wZXJ0eUluZm8obm9kZSwgbmFtZSkudmFsdWUpO1xuLy8gfSJdfQ==\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar _ = __webpack_require__(10);\n\tvar UI = __webpack_require__(5);\n\t//import contextActions = require(\"raml-actions\")\n\tvar assistUtils = __webpack_require__(11);\n\tvar ramlServer = __webpack_require__(17);\n\tvar lastSelectedCaption;\n\tvar inRender = false;\n\t/**\n\t * Runnable that updates details values remotely\n\t */\n\tvar UpdateModelRunnable = /** @class */ (function () {\n\t    function UpdateModelRunnable(context, item, newValue) {\n\t        this.context = context;\n\t        this.item = item;\n\t        this.newValue = newValue;\n\t        this.cancelled = false;\n\t    }\n\t    /**\n\t     * Performs the actual business logics.\n\t     * Should resolve the promise when finished.\n\t     */\n\t    UpdateModelRunnable.prototype.run = function () {\n\t        if (this.context.localModel) {\n\t            this.context.localModel[this.item.id] = this.newValue;\n\t            return Promise.resolve();\n\t        }\n\t        var connection = ramlServer.getNodeClientConnection();\n\t        return connection.changeDetailValue(this.context.uri, this.context.position, this.item.id, this.newValue);\n\t    };\n\t    /**\n\t     * Whether two runnable conflict with each other.\n\t     * Must work fast as its called often.\n\t     * @param other\n\t     */\n\t    UpdateModelRunnable.prototype.conflicts = function (other) {\n\t        if (isUpdateModelRunnable(other)) {\n\t            return this.getUri() === other.getUri();\n\t        }\n\t        return false;\n\t    };\n\t    /**\n\t     * Cancels the runnable. run() method should do nothing if launched later,\n\t     * if cancel is called during the run() method execution, run() should stop as soon as it can.\n\t     */\n\t    UpdateModelRunnable.prototype.cancel = function () {\n\t        this.cancelled = true;\n\t    };\n\t    /**\n\t     * Whether cancel() method was called at least once.\n\t     */\n\t    UpdateModelRunnable.prototype.isCanceled = function () {\n\t        return this.cancelled;\n\t    };\n\t    UpdateModelRunnable.prototype.getUri = function () {\n\t        return this.context.uri;\n\t    };\n\t    return UpdateModelRunnable;\n\t}());\n\t/**\n\t * Instanceof for UpdateModelRunnable\n\t * @param runnable\n\t */\n\tfunction isUpdateModelRunnable(runnable) {\n\t    return runnable.getUri != null;\n\t}\n\tvar Item = /** @class */ (function () {\n\t    function Item(_title, description) {\n\t        if (description === void 0) { description = \"\"; }\n\t        this._title = _title;\n\t        this.description = description;\n\t        this.listeners = [];\n\t    }\n\t    Item.prototype.needsSeparateLabel = function () {\n\t        return false;\n\t    };\n\t    Item.prototype.detach = function () {\n\t        this.dispose();\n\t        this.children().forEach(function (x) {\n\t            if (x.detach)\n\t                x.detach();\n\t        });\n\t    };\n\t    Item.prototype.addListener = function (r) {\n\t        this.listeners.push(r);\n\t    };\n\t    Item.prototype.removeListener = function (r) {\n\t        this.listeners = this.listeners.filter(function (x) { return x != r; });\n\t    };\n\t    Item.prototype.add = function (i) {\n\t        throw new Error(\"Not supported\");\n\t    };\n\t    Item.prototype.root = function () {\n\t        if (this.parent) {\n\t            return this.parent.root();\n\t        }\n\t        return this;\n\t    };\n\t    Item.prototype.title = function () {\n\t        return this._title;\n\t    };\n\t    Item.prototype.children = function () {\n\t        return [];\n\t    };\n\t    Item.prototype.setDescription = function (desc) {\n\t        this.description = desc;\n\t    };\n\t    Item.prototype.setTitle = function (t) {\n\t        this._title = t;\n\t    };\n\t    Item.prototype.render = function (r) {\n\t        if (r === void 0) { r = {}; }\n\t        throw new Error(\"Not Implemented\");\n\t    };\n\t    Item.prototype.item = function (name) {\n\t        return null;\n\t    };\n\t    Item.prototype.setError = function (text) {\n\t    };\n\t    Item.prototype.clearErrors = function () {\n\t    };\n\t    return Item;\n\t}());\n\texports.Item = Item;\n\tvar TypeDisplayItem = /** @class */ (function (_super) {\n\t    __extends(TypeDisplayItem, _super);\n\t    function TypeDisplayItem(detailsNode, context) {\n\t        var _this = _super.call(this, \"Type \" + detailsNode.title, \"\") || this;\n\t        _this.detailsNode = detailsNode;\n\t        _this.context = context;\n\t        return _this;\n\t    }\n\t    TypeDisplayItem.prototype.render = function (r) {\n\t        var container = new UI.WrapPanel();\n\t        container.setCaption(this.title());\n\t        return container;\n\t        //return typeDisplay.render(this.detailsNode);\n\t    };\n\t    TypeDisplayItem.prototype.dispose = function () {\n\t    };\n\t    return TypeDisplayItem;\n\t}(Item));\n\texports.TypeDisplayItem = TypeDisplayItem;\n\tvar Category = /** @class */ (function (_super) {\n\t    __extends(Category, _super);\n\t    function Category() {\n\t        var _this = _super !== null && _super.apply(this, arguments) || this;\n\t        _this._children = [];\n\t        return _this;\n\t    }\n\t    Category.prototype.add = function (i) {\n\t        i.parent = this;\n\t        this._children.push(i);\n\t    };\n\t    Category.prototype.children = function () {\n\t        return this._children;\n\t    };\n\t    Category.prototype.plainChildren = function () {\n\t        return this._children.filter(function (x) { return !(x instanceof Category); });\n\t    };\n\t    Category.prototype.categories = function () {\n\t        return this._children.filter(function (x) { return (x instanceof Category); });\n\t    };\n\t    Category.prototype.item = function (name) {\n\t        var it;\n\t        this._children.forEach(function (x) {\n\t            if (x.title() == name) {\n\t                it = x;\n\t            }\n\t            var rr = x.item(name);\n\t            if (rr) {\n\t                it = rr;\n\t            }\n\t        });\n\t        return it;\n\t    };\n\t    Category.prototype.render = function (r) {\n\t        var _this = this;\n\t        if (r === void 0) { r = {}; }\n\t        var section = this.createSection(r);\n\t        this._result = section;\n\t        if (this.description && r.showDescription) {\n\t            this.descriptionLabel = UI.label(this.description);\n\t            section.addChild(this.descriptionLabel);\n\t        }\n\t        this.contributeTop(section);\n\t        this.plainChildren().forEach(function (x) { return _this.addChild(section, x); });\n\t        var wrappedChild = this.createWrappedChild(section);\n\t        this.subCategories = wrappedChild;\n\t        var cats = this.categories();\n\t        var remap = {};\n\t        cats.forEach(function (x) { return remap[x.title()] = x; });\n\t        var newCats = [];\n\t        if (remap[\"General\"]) {\n\t            newCats.push(remap[\"General\"]);\n\t            delete remap[\"General\"];\n\t        }\n\t        if (remap[\"Facets\"]) {\n\t            newCats.push(remap[\"Facets\"]);\n\t            delete remap[\"Facets\"];\n\t        }\n\t        for (var c in remap) {\n\t            newCats.push(remap[c]);\n\t        }\n\t        newCats.forEach(function (x) { return _this.addChild(wrappedChild, x); });\n\t        return section;\n\t    };\n\t    Category.prototype.detach = function () {\n\t        _super.prototype.detach.call(this);\n\t        this._result.dispose();\n\t    };\n\t    Category.prototype.createSection = function (r) {\n\t        if (r.showHeader) {\n\t            return new UI.Section(UI.h3(this.title()), false);\n\t        }\n\t        var pnl = new UI.Panel();\n\t        pnl.setCaption(this.title());\n\t        return pnl;\n\t    };\n\t    Category.prototype.createWrappedChild = function (section) {\n\t        return section;\n\t    };\n\t    Category.prototype.addChild = function (section, item) {\n\t        var child = item.render();\n\t        if (section instanceof UI.TabFolder) {\n\t            var tf = section;\n\t            tf.add(child.caption(), UI.Icon.NONE, child);\n\t        }\n\t        else {\n\t            if (item.needsSeparateLabel()) {\n\t                var firstLabel = UI.label(item.title());\n\t                firstLabel.margin(0, 5, 0, 0);\n\t                section.addChild(firstLabel);\n\t                section.addChild(UI.label(item.description));\n\t            }\n\t            section.addChild(child);\n\t        }\n\t    };\n\t    Category.prototype.contributeTop = function (section) {\n\t    };\n\t    Category.prototype.dispose = function () {\n\t    };\n\t    Category.prototype.setError = function (text) {\n\t    };\n\t    Category.prototype.clearErrors = function () {\n\t        this._children.forEach(function (x) { return x.clearErrors(); });\n\t    };\n\t    Category.prototype.update = function (i) {\n\t    };\n\t    return Category;\n\t}(Item));\n\tvar TopLevelNode = /** @class */ (function (_super) {\n\t    __extends(TopLevelNode, _super);\n\t    function TopLevelNode(detailsNode, context) {\n\t        var _this = _super.call(this, detailsNode.title, detailsNode.description) || this;\n\t        _this.detailsNode = detailsNode;\n\t        _this.context = context;\n\t        _this.ep = null;\n\t        return _this;\n\t    }\n\t    TopLevelNode.prototype.detach = function () {\n\t        _super.prototype.detach.call(this);\n\t        this._result.dispose();\n\t    };\n\t    TopLevelNode.prototype.createWrappedChild = function (section) {\n\t        var tf = new UI.TabFolder();\n\t        tf.setOnSelected(function () {\n\t            if (!inRender) {\n\t                lastSelectedCaption = (tf.selectedComponent().caption());\n\t            }\n\t        });\n\t        section.addChild(tf);\n\t        return tf;\n\t    };\n\t    TopLevelNode.prototype.subCategoryByNameOrCreate = function (name) {\n\t        var item = _.find(this.children(), function (x) { return x.title() == name; });\n\t        if (!item) {\n\t            var rs = new Category(name);\n\t            this.add(rs);\n\t            return rs;\n\t        }\n\t        return item;\n\t    };\n\t    TopLevelNode.prototype.addItemToCategory = function (name, it) {\n\t        if (name == null) {\n\t            this._children.push(it);\n\t            it.parent = this;\n\t            return;\n\t        }\n\t        this.subCategoryByNameOrCreate(name).add(it);\n\t    };\n\t    TopLevelNode.prototype.contributeTop = function (section) {\n\t        this.errorLabel = UI.label(\"\", UI.Icon.BUG, UI.TextClasses.ERROR);\n\t        this.ep = UI.hc(this.errorLabel);\n\t        this.ep.setDisplay(false);\n\t        section.addChild(this.ep);\n\t    };\n\t    TopLevelNode.prototype.render = function (r) {\n\t        if (r === void 0) { r = {}; }\n\t        inRender = true;\n\t        try {\n\t            var result = _super.prototype.render.call(this, r);\n\t            this._options = r;\n\t            this._panel = result;\n\t            var tf = this.subCategories;\n\t            for (var n = 0; n < tf.tabsCount(); n++) {\n\t                var item = tf.get(n);\n\t                if (item.header == lastSelectedCaption) {\n\t                    tf.setSelectedIndex(n);\n\t                    return result;\n\t                }\n\t            }\n\t            var documentation = \"\";\n\t            if (this.detailsNode.description) {\n\t                documentation = this.detailsNode.description;\n\t            }\n\t            if (documentation.length && !r.showDescription) {\n\t                result.addChild(UI.html(\"<hr/>\"));\n\t                result.addChild(UI.label(documentation, UI.Icon.INBOX, UI.TextClasses.SUBTLE));\n\t            }\n\t            this.update(this);\n\t            return result;\n\t        }\n\t        finally {\n\t            inRender = false;\n\t        }\n\t    };\n\t    TopLevelNode.prototype.dispose = function () {\n\t        this.detailsNode = null;\n\t    };\n\t    TopLevelNode.prototype.update = function (i) {\n\t        // if (!this._panel){\n\t        //     return;\n\t        // }\n\t        // if (i instanceof PropertyEditorInfo){\n\t        //     var prInfo=<PropertyEditorInfo>i;\n\t        //     if (prInfo.property.getAdapter(def.RAMLPropertyService).isTypeExpr()||prInfo.property.isDescriminator()){\n\t        //         rp.utils.updateType(this.node);\n\t        //         var extras=<Category>this.item(\"Facets\");\n\t        //         if (extras&&extras._result) {\n\t        //             extras._result.clear();\n\t        //         }\n\t        //\n\t        //         var item=buildItem(this.node,false);\n\t        //         var newExtras=<Category>item.item(\"Facets\");\n\t        //         if (newExtras) {\n\t        //             if (extras&&extras._result) {\n\t        //                 extras._children = newExtras._children;\n\t        //                 extras._children.forEach(x=>x.parent = extras);\n\t        //                 if (extras._children.length > 0) {\n\t        //                     extras._result.setDisplay(true);\n\t        //                     //workaroung events flow issue in UI.ts\n\t        //                 }\n\t        //                 newExtras.children().forEach(x=> {\n\t        //                     extras._result.addChild(x.render(this._options))\n\t        //                 })\n\t        //             }\n\t        //             else{\n\t        //                 this._children.push(newExtras);\n\t        //                 if (this._panel) {\n\t        //                     this._panel.addChild(newExtras.render(this._options))\n\t        //                 }\n\t        //             }\n\t        //         }\n\t        //         else{\n\t        //             if (extras&&extras._result) {\n\t        //                 extras._result.setDisplay(false);\n\t        //             }\n\t        //         }\n\t        //     }\n\t        // }\n\t        // var kp=null;\n\t        // this.node.definition().allProperties().forEach(x=>{\n\t        //     if (x.getAdapter(def.RAMLPropertyService).isKey()){\n\t        //         kp=x;\n\t        //     }\n\t        // })\n\t        // if (kp){\n\t        //     var keyItem=<PropertyEditorInfo>this.item(kp.nameId());\n\t        //     if (keyItem){\n\t        //         var m=keyItem.fld;\n\t        //         var vl=m.getBinding().get();\n\t        //         if ((!vl)||vl.trim().length==0){\n\t        //             this._panel.getBinding().setStatus(UI.errorStatus(\"\"));\n\t        //         }\n\t        //         else{\n\t        //             this._panel.getBinding().setStatus(UI.okStatus());\n\t        //         }\n\t        //     }\n\t        // }\n\t        //\n\t        // var errors;\n\t        //\n\t        // if(this.node.property() && universehelpers.isExampleProperty(this.node.property())) {\n\t        //     var parent = this.node.parent()\n\t        //\n\t        //     if(parent) {\n\t        //         var parsed = parent.parsedType();\n\t        //\n\t        //         var exampleMeta =  _.find((<any>parsed).metaInfo || [], (meta: any): boolean => {\n\t        //             return meta && meta._name === 'example';\n\t        //         });\n\t        //\n\t        //         if(exampleMeta) {\n\t        //             var validateObject = exampleMeta.validateSelf(this.node.types().getAnnotationTypeRegistry());\n\t        //\n\t        //             errors = ((validateObject && validateObject.getErrors()) || []).map(error => {\n\t        //                 return this.node.createIssue(error);\n\t        //             });\n\t        //         }\n\t        //     }\n\t        // } else {\n\t        //     errors = this.node.errors();\n\t        // }\n\t        //\n\t        // this.clearErrors();\n\t        // this.ep.setDisplay(false)\n\t        // if (!resourceRegistry.hasAsyncRequests() && errors&&errors.length>0){\n\t        //     var notFound=[];\n\t        //     errors.forEach(error=>{\n\t        //         if (error.extras&&error.extras.length>0){\n\t        //             error=error.extras[0];\n\t        //         }\n\t        //         var item = error.node && this.item(error.node.name());\n\t        //         if (item){\n\t        //             item.setError(error.message);\n\t        //         }\n\t        //         else{notFound.push(error);}\n\t        //     })\n\t        //     if (notFound.length>0){\n\t        //         this.errorLabel.setIcon(UI.Icon.BUG)\n\t        //         var et=notFound.map(x=>x.node.name()+\":\"+x.message).join(\",\");\n\t        //         if (et.length>100){\n\t        //             et=et.substring(0,100)+\"...\";\n\t        //         }\n\t        //         this.errorLabel.setText(et)\n\t        //         this.ep.setDisplay(true);\n\t        //     }\n\t        //     else{\n\t        //         this.ep.setDisplay(false);\n\t        //     }\n\t        // }\n\t    };\n\t    return TopLevelNode;\n\t}(Category));\n\tvar CheckBox2 = /** @class */ (function (_super) {\n\t    __extends(CheckBox2, _super);\n\t    function CheckBox2() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    CheckBox2.prototype.setLabelWidth = function (n) {\n\t        this.setStyle(\"margin-left\", (n + 2) + \"ch\");\n\t    };\n\t    return CheckBox2;\n\t}(UI.CheckBox));\n\tvar PropertyEditorInfo = /** @class */ (function (_super) {\n\t    __extends(PropertyEditorInfo, _super);\n\t    function PropertyEditorInfo(outlineNode, context) {\n\t        var _this = _super.call(this, outlineNode.title, outlineNode.description) || this;\n\t        _this.outlineNode = outlineNode;\n\t        _this.context = context;\n\t        _this.rendered = false;\n\t        _this.update = function (newValue, oldValue) {\n\t            if (!_this.rendered) {\n\t                return;\n\t            }\n\t            _this.fromEditorToModel(newValue, oldValue);\n\t        };\n\t        return _this;\n\t    }\n\t    PropertyEditorInfo.prototype.dispose = function () {\n\t        this.outlineNode = null;\n\t        this.fld.getBinding().removeListener(this.update);\n\t    };\n\t    PropertyEditorInfo.prototype.clearErrors = function () {\n\t        this.setError(null);\n\t    };\n\t    PropertyEditorInfo.prototype.setError = function (text) {\n\t        if (text) {\n\t            this.errorLabel.setText(text);\n\t            this.errorLabel.setDisplay(true);\n\t        }\n\t        else {\n\t            if (this.errorLabel) {\n\t                this.errorLabel.setDisplay(false);\n\t            }\n\t        }\n\t    };\n\t    PropertyEditorInfo.prototype.fromEditorToModel = function (newValue, oldValue) {\n\t        var detailsChangeRunnable = new UpdateModelRunnable(this.context, this.outlineNode, newValue);\n\t        var context = this.context;\n\t        context.reconciler.schedule(detailsChangeRunnable).then(function (changedDocuments) {\n\t            if (context.localModel) {\n\t                return;\n\t            }\n\t            assistUtils.applyChangedDocuments(changedDocuments);\n\t            assistUtils.gotoPosition(context.position);\n\t        });\n\t    };\n\t    PropertyEditorInfo.prototype.toLocalValue = function (inputValue) {\n\t        return inputValue;\n\t    };\n\t    PropertyEditorInfo.prototype.toUIValue = function (value) {\n\t        return value;\n\t    };\n\t    PropertyEditorInfo.prototype.fromModelToEditor = function () {\n\t        this.fld.getBinding().set(this.outlineNode.valueText);\n\t    };\n\t    PropertyEditorInfo.prototype.render = function () {\n\t        var container = new UI.WrapPanel();\n\t        this.errorLabel = UI.label(\"\", UI.Icon.BUG, UI.TextClasses.ERROR);\n\t        this.errorLabel.setDisplay(false);\n\t        this.errorLabel.setStyle(\"margin-left\", (this._title.length + 1) + \"ch\");\n\t        var field = this.createField();\n\t        this.fld = field;\n\t        field.getBinding().addListener(this.update);\n\t        container.setCaption(this.title());\n\t        this.fromModelToEditor();\n\t        container.addChild(field);\n\t        container.addChild(this.errorLabel);\n\t        this.rendered = true;\n\t        return container;\n\t    };\n\t    PropertyEditorInfo.prototype.createField = function () {\n\t        return UI.texfField(this.needsSeparateLabel() ? \"\" : this.outlineNode.title, \"\", function (x) { });\n\t    };\n\t    return PropertyEditorInfo;\n\t}(Item));\n\tvar SimpleMultiEditor = /** @class */ (function (_super) {\n\t    __extends(SimpleMultiEditor, _super);\n\t    function SimpleMultiEditor() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    // fromEditorToModel(){\n\t    //     // var field=this.fld;\n\t    //     // var vl=field.getBinding().get();\n\t    //     // if (vl==null){\n\t    //     //     vl=\"\";\n\t    //     // }\n\t    //     // var attrs=this.node.attributes(this.property.nameId());\n\t    //     // var av=attrs.map(x=>escapeValue(\"\"+x.value())).join(\", \");\n\t    //     // if (av==vl){\n\t    //     //     return;\n\t    //     // }\n\t    //     // var ww=vl.split(\",\");\n\t    //     // var vl=ww.filter(x=>x.trim().length>0).map(x=>x.trim());\n\t    //     //\n\t    //     // if(this.node.lowLevel().includePath() && !this.node.lowLevel().unit().resolve(this.node.lowLevel().includePath())) {\n\t    //     //     return;\n\t    //     // }\n\t    //     //\n\t    //     // var attribute = this.node.attrOrCreate(this.property.nameId());\n\t    //     // attribute.setValues(vl)\n\t    //     //\n\t    //     // var root=this.root()\n\t    //     // if (root){\n\t    //     //     root.update(this);\n\t    //     // }\n\t    // }\n\t    SimpleMultiEditor.prototype.fromModelToEditor = function () {\n\t        this.fld.getBinding().set(this.outlineNode.valueText);\n\t    };\n\t    return SimpleMultiEditor;\n\t}(PropertyEditorInfo));\n\tfunction escapeValue(v) {\n\t    if (v.length > 0) {\n\t        if (v.charAt(0) == \"'\") {\n\t            return '\"' + v + '\"';\n\t        }\n\t        if (v.charAt(0) == '\"') {\n\t            return '\"' + v + '\"';\n\t        }\n\t    }\n\t    if (v.indexOf(' ') != -1 || v.indexOf(',') != -1) {\n\t        if (v.indexOf('\"') == -1) {\n\t            return '\"' + v + '\"';\n\t        }\n\t        if (v.indexOf(\"'\") == -1) {\n\t            return \"'\" + v + \"'\";\n\t        }\n\t    }\n\t    return v;\n\t}\n\tvar CheckBoxField = /** @class */ (function (_super) {\n\t    __extends(CheckBoxField, _super);\n\t    function CheckBoxField() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    CheckBoxField.prototype.createField = function () {\n\t        return new CheckBox2(this.outlineNode.title, UI.Icon.NONE, function (x) { });\n\t    };\n\t    CheckBoxField.prototype.toUIValue = function (value) {\n\t        if (!value) {\n\t            return false;\n\t        }\n\t        if (value === true || value.trim() === 'true') {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    CheckBoxField.prototype.toLocalValue = function (value) {\n\t        return value + \"\";\n\t    };\n\t    return CheckBoxField;\n\t}(PropertyEditorInfo));\n\t// class ActionsItem extends Item{\n\t//\n\t//     constructor(private node:hl.IHighLevelNode){\n\t//         super(\"Actions\",\"\");\n\t//     }\n\t//     render(r:RenderingOptions){\n\t//         return suggestions.generateSuggestionsPanel(this.node);\n\t//     }\n\t//     dispose(){\n\t//         this.node=null;\n\t//     }\n\t//\n\t// }\n\t// class ContextActionsItem extends Item{\n\t//     constructor(node:hl.IHighLevelNode,name:string,private actions:contextActions.IContextDependedAction[]){\n\t//         super(name,\"\");\n\t//     }\n\t//     dispose(){\n\t//\n\t//     }\n\t//\n\t//     render(r:RenderingOptions){\n\t//         var result=UI.hc();\n\t//         result.addChild(UI.h3(this.title()))\n\t//         this.actions.forEach(x=>{\n\t//             result.addChild(UI.button(x.name,UI.ButtonSizes.EXTRA_SMALL,UI.ButtonHighlights.SUCCESS,UI.Icon.CHECKLIST,a=>x.onClick()).margin(3,3,3,3))\n\t//         })\n\t//         return result;\n\t//     }\n\t// }\n\tvar MarkdownFieldUI = /** @class */ (function (_super) {\n\t    __extends(MarkdownFieldUI, _super);\n\t    function MarkdownFieldUI(text, onchange) {\n\t        var _this = _super.call(this, text, onchange) || this;\n\t        _this.margin(0, 0, 6, 12);\n\t        _this.setMini(false);\n\t        _this.setStyle(\"min-height\", \"100px\");\n\t        //this.setStyle(\"max-height\",\"200px\");\n\t        _this.setStyle(\"border\", \"solid\");\n\t        _this.setStyle(\"border-width\", \"1px\");\n\t        _this.setStyle(\"border-radius\", \"2px\");\n\t        _this.setStyle(\"font-size\", \"1.15em\");\n\t        _this.setStyle(\"border-color\", \"rgba(0,0,0,0.2)\");\n\t        _this.setGrammar('source.mdcustom');\n\t        return _this;\n\t    }\n\t    MarkdownFieldUI.prototype.setLabelWidth = function () {\n\t    };\n\t    MarkdownFieldUI.prototype.setLabelHeight = function () {\n\t    };\n\t    MarkdownFieldUI.prototype.setRequired = function (v) {\n\t    };\n\t    return MarkdownFieldUI;\n\t}(UI.AtomEditorElement));\n\tvar XMLField = /** @class */ (function (_super) {\n\t    __extends(XMLField, _super);\n\t    function XMLField(text, onchange) {\n\t        var _this = _super.call(this, text, onchange) || this;\n\t        _this.margin(0, 0, 6, 12);\n\t        _this.setMini(false);\n\t        _this.setStyle(\"min-height\", \"100px\");\n\t        //this.setStyle(\"max-height\",\"200px\");\n\t        _this.setStyle(\"border\", \"solid\");\n\t        _this.setStyle(\"border-width\", \"1px\");\n\t        _this.setStyle(\"border-radius\", \"2px\");\n\t        _this.setStyle(\"font-size\", \"1.15em\");\n\t        _this.setStyle(\"border-color\", \"rgba(0,0,0,0.2)\");\n\t        _this.setGrammar('text.xml');\n\t        return _this;\n\t    }\n\t    XMLField.prototype.setLabelWidth = function () {\n\t    };\n\t    XMLField.prototype.setLabelHeight = function () {\n\t    };\n\t    XMLField.prototype.setRequired = function (v) {\n\t    };\n\t    return XMLField;\n\t}(UI.AtomEditorElement));\n\tvar JSONField = /** @class */ (function (_super) {\n\t    __extends(JSONField, _super);\n\t    function JSONField(text, onchange) {\n\t        var _this = _super.call(this, text, onchange) || this;\n\t        _this.margin(0, 0, 6, 12);\n\t        _this.setMini(false);\n\t        _this.setStyle(\"min-height\", \"100px\");\n\t        //this.setStyle(\"max-height\",\"200px\");\n\t        _this.setStyle(\"border\", \"solid\");\n\t        _this.setStyle(\"border-width\", \"1px\");\n\t        _this.setStyle(\"border-radius\", \"2px\");\n\t        _this.setStyle(\"font-size\", \"1.15em\");\n\t        _this.setStyle(\"border-color\", \"rgba(0,0,0,0.2)\");\n\t        _this.setGrammar('source.json');\n\t        return _this;\n\t    }\n\t    JSONField.prototype.setLabelWidth = function () {\n\t    };\n\t    JSONField.prototype.setLabelHeight = function () {\n\t    };\n\t    JSONField.prototype.setRequired = function (v) {\n\t    };\n\t    return JSONField;\n\t}(UI.AtomEditorElement));\n\tvar MarkdownField = /** @class */ (function (_super) {\n\t    __extends(MarkdownField, _super);\n\t    function MarkdownField() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    MarkdownField.prototype.createField = function () {\n\t        var editor = new MarkdownFieldUI(\"\", function (x) { });\n\t        return editor;\n\t    };\n\t    MarkdownField.prototype.needsSeparateLabel = function () {\n\t        return true;\n\t    };\n\t    return MarkdownField;\n\t}(PropertyEditorInfo));\n\tvar ExampleField = /** @class */ (function (_super) {\n\t    __extends(ExampleField, _super);\n\t    function ExampleField(outlineNode, context) {\n\t        return _super.call(this, outlineNode, context) || this;\n\t    }\n\t    ExampleField.prototype.createField = function () {\n\t        var editor = new JSONField(this.outlineNode.valueText, function (x) { });\n\t        return editor;\n\t    };\n\t    ExampleField.prototype.needsSeparateLabel = function () {\n\t        return true;\n\t    };\n\t    ExampleField.prototype.fromModelToEditor = function () {\n\t    };\n\t    ExampleField.prototype.fromEditorToModel = function (newValue, oldValue) {\n\t    };\n\t    return ExampleField;\n\t}(PropertyEditorInfo));\n\tvar XMLExampleField = /** @class */ (function (_super) {\n\t    __extends(XMLExampleField, _super);\n\t    function XMLExampleField(outlineNode, context) {\n\t        return _super.call(this, outlineNode, context) || this;\n\t    }\n\t    XMLExampleField.prototype.createField = function () {\n\t        var editor = new XMLField(this.outlineNode.valueText, function (x) { });\n\t        return editor;\n\t    };\n\t    XMLExampleField.prototype.needsSeparateLabel = function () {\n\t        return true;\n\t    };\n\t    XMLExampleField.prototype.fromModelToEditor = function () {\n\t    };\n\t    XMLExampleField.prototype.fromEditorToModel = function (newValue, oldValue) {\n\t    };\n\t    return XMLExampleField;\n\t}(PropertyEditorInfo));\n\tvar XMLSchemaField = /** @class */ (function (_super) {\n\t    __extends(XMLSchemaField, _super);\n\t    function XMLSchemaField() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    XMLSchemaField.prototype.createField = function () {\n\t        var editor = new XMLField(\"\", function (x) { });\n\t        return editor;\n\t    };\n\t    XMLSchemaField.prototype.needsSeparateLabel = function () {\n\t        return true;\n\t    };\n\t    return XMLSchemaField;\n\t}(PropertyEditorInfo));\n\tvar JSONSchemaField = /** @class */ (function (_super) {\n\t    __extends(JSONSchemaField, _super);\n\t    function JSONSchemaField() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    JSONSchemaField.prototype.createField = function () {\n\t        var editor = new JSONField(\"\", function (x) { });\n\t        return editor;\n\t    };\n\t    JSONSchemaField.prototype.needsSeparateLabel = function () {\n\t        return true;\n\t    };\n\t    return JSONSchemaField;\n\t}(PropertyEditorInfo));\n\tvar SelectBox = /** @class */ (function (_super) {\n\t    __extends(SelectBox, _super);\n\t    function SelectBox(outlineNode, context) {\n\t        var _this = _super.call(this, outlineNode, context) || this;\n\t        _this.outlineNode = outlineNode;\n\t        return _this;\n\t    }\n\t    SelectBox.prototype.createField = function () {\n\t        var options = this.outlineNode.options ? this.outlineNode.options : [];\n\t        var select = new UI.SelectField(this.outlineNode.title, function (x) { }, \"\", UI.Icon.NONE, options);\n\t        select.getActualField().setOptions(options);\n\t        return select;\n\t    };\n\t    return SelectBox;\n\t}(PropertyEditorInfo));\n\tvar TypeSelectBox = /** @class */ (function (_super) {\n\t    __extends(TypeSelectBox, _super);\n\t    function TypeSelectBox() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    TypeSelectBox.prototype.fromEditorToModel = function (newValue, oldValue) {\n\t        // //current implementation only allows changing the facets of certain types for safety\n\t        // //TODO change this to arbitrary facets (remove type filtering)\n\t        //\n\t        // var oldNames : string[] = [];\n\t        // var savedAttrs = [];\n\t        // if (newValue && oldValue) {\n\t        //     try {\n\t        //         this.node.definition().allSuperTypes().forEach(superType=> {\n\t        //             if (this.isAllowedTypeToReplaceFacets(superType)) {\n\t        //                 this.addTypeFacets(superType, oldNames)\n\t        //             }\n\t        //         })\n\t        //\n\t        //         savedAttrs = [].concat(this.node.attrs())\n\t        //     } catch (err) {console.log(err)}\n\t        // }\n\t        //\n\t        // super.fromEditorToModel();\n\t        //\n\t        // if (newValue && oldValue) {\n\t        //     try {\n\t        //         //collecting facets allowed to remove\n\t        //         var currentUniverse = this.node.definition().universe();\n\t        //         var names : string[] = [];\n\t        //\n\t        //         this.node.definition().allSuperTypes().forEach(superType=>{\n\t        //             if (this.isAllowedTypeToReplaceFacets(superType)) {\n\t        //                 this.addTypeFacets(superType, names)\n\t        //             }\n\t        //         })\n\t        //\n\t        //         if (oldNames.length > 0 && names.length > 0) {\n\t        //             savedAttrs.forEach(attribute => {\n\t        //                 if (_.find(oldNames, facetName => facetName == attribute.name())\n\t        //                     && !_.find(names, facetName => facetName == attribute.name())) {\n\t        //\n\t        //                     this.node.remove(attribute)\n\t        //                 }\n\t        //             })\n\t        //         }\n\t        //     } catch (err) {console.log(err)}\n\t        // }\n\t    };\n\t    return TypeSelectBox;\n\t}(SelectBox));\n\tvar TreeField = /** @class */ (function (_super) {\n\t    __extends(TreeField, _super);\n\t    function TreeField(outlineNode, context) {\n\t        var _this = _super.call(this) || this;\n\t        _this.context = context;\n\t        var renderer = {\n\t            render: function (node) {\n\t                var left = UI.label(node.title, UI.Icon.CIRCUIT_BOARD, UI.TextClasses.HIGHLIGHT);\n\t                var right = UI.label(node.valueText ? (\":\" + node.valueText) : \"\", UI.Icon.NONE, UI.TextClasses.SUCCESS);\n\t                var result = UI.hc(left, right);\n\t                return result;\n\t            }\n\t        };\n\t        var getChildren = function (node) {\n\t            return node.children ? node.children : [];\n\t        };\n\t        var viewer = UI.treeViewer(getChildren, renderer, function (x) { return x.title; });\n\t        var inputValue = {\n\t            children: [outlineNode]\n\t        };\n\t        viewer.setInput(inputValue);\n\t        _this.addChild(UI.label(outlineNode.title));\n\t        _this.addChild(viewer);\n\t        return _this;\n\t    }\n\t    TreeField.prototype.setLabelWidth = function () {\n\t    };\n\t    TreeField.prototype.setLabelHeight = function () {\n\t    };\n\t    TreeField.prototype.setRequired = function (v) {\n\t    };\n\t    return TreeField;\n\t}(UI.Panel));\n\tvar StructuredField = /** @class */ (function (_super) {\n\t    __extends(StructuredField, _super);\n\t    function StructuredField() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    StructuredField.prototype.createField = function () {\n\t        var children = this.outlineNode.children;\n\t        if (!children || children.length != 1)\n\t            return null;\n\t        var tm = new TreeField(children[0], this.context);\n\t        return tm;\n\t    };\n\t    return StructuredField;\n\t}(PropertyEditorInfo));\n\tvar LowLevelTreeField = /** @class */ (function (_super) {\n\t    __extends(LowLevelTreeField, _super);\n\t    function LowLevelTreeField() {\n\t        return _super !== null && _super.apply(this, arguments) || this;\n\t    }\n\t    LowLevelTreeField.prototype.createField = function () {\n\t        var children = this.outlineNode.children;\n\t        if (!children || children.length != 1)\n\t            return null;\n\t        var tm = new TreeField(children[0], this.context);\n\t        return tm;\n\t    };\n\t    return LowLevelTreeField;\n\t}(PropertyEditorInfo));\n\t// function category(p:hl.IProperty,node:hl.IHighLevelNode):string{\n\t//     if (p.getAdapter(def.RAMLPropertyService).isKey()||p.isRequired()){\n\t//         return null;\n\t//     }\n\t//     if (p.domain()&&!p.domain().getAdapter(def.RAMLService).isUserDefined()) {\n\t//         if (universehelpers.isDocumentationProperty(p) ||\n\t//             universehelpers.isUsageProperty(p) ||\n\t//             universehelpers.isDescriptionProperty(p) ||\n\t//             universehelpers.isDisplayNameProperty(p) ||\n\t//             universehelpers.isTitleProperty(p)) {\n\t//             return \"Documentation\";\n\t//         }\n\t//         if (universehelpers.isAnnotationsProperty(p) ||\n\t//             universehelpers.isIsProperty(p) ||\n\t//             universehelpers.isSecuredByProperty(p) ||\n\t//             (universehelpers.isTypeProperty(p)&&!p.getAdapter(def.RAMLPropertyService).isTypeExpr())) {\n\t//             return \"References\";\n\t//         }\n\t//         if (universehelpers.isProtocolsProperty(p)){\n\t//             return \"General\";\n\t//         }\n\t//     }\n\t//\n\t//     if (universehelpers.isTypeProperty(p)){\n\t//         if (p.domain()&&!p.domain().getAdapter(def.RAMLService).isUserDefined()){\n\t//             return null;\n\t//         }\n\t//     }\n\t//     if (node.property()) {\n\t//         if (p.domain() && p.domain() != node.property().range()) {\n\t//             return \"Facets\";\n\t//         }\n\t//     }\n\t//     return \"General\";\n\t// }\n\t//\n\t// var valueOptions = function (x:hl.IProperty, node:hl.IHighLevelNode):string[] {\n\t//     var vls = search.enumValues(x,node);\n\t//     if (universehelpers.isNameProperty(x)){\n\t//         if (node.definition().isAssignableFrom(universe.Universe10.TypeDeclaration.name)){\n\t//             if (node.property()&&universehelpers.isBodyProperty(node.property())){\n\t//                 if (!(node.property() instanceof def.UserDefinedProp)) {\n\t//                     if (node.parent()&&\n\t//                         universehelpers.isMethodType(node.parent().definition())){\n\t//                         return [\"application/json\", \"application/xml\",\"multipart/form-data\",\"application/x-www-form-urlencoded\"]\n\t//                     }\n\t//                     return [\"application/json\", \"application/xml\"]\n\t//                 }\n\t//             }\n\t//         }\n\t//     }\n\t//     if ((!vls) || vls.length == 0) {\n\t//         var sug = (<def.Property>x).suggester()\n\t//         if (sug) {\n\t//             vls = sug(node);\n\t//\n\t//         }\n\t//         if ((!vls) || vls.length == 0) {\n\t//             vls = (<def.Property>x).getOftenKeys();\n\t//\n\t//         }\n\t//     }\n\t//     return _.unique(vls);\n\t// };\n\t//\n\t// function addExampleControl(property: hl.IProperty, node : hl.IHighLevelNode,\n\t//                            exampleElement : hl.IHighLevelNode, example : def.rt.nominalTypes.IExpandableExample,\n\t//                            container : TopLevelNode) {\n\t//\n\t//     if (example.isYAML()) {\n\t//         container.addItemToCategory(category(property, node),\n\t//             new LowLevelTreeField(property, node, exampleElement.lowLevel(), example.name()));\n\t//     } else if (example.isJSONString()) {\n\t//         container.addItemToCategory(category(property, node),\n\t//             new ExampleField(property, node, example.asString(), example.name()));\n\t//     } else if (example.isXMLString()) {\n\t//         container.addItemToCategory(category(property, node),\n\t//             new XMLExampleField(property, node, example.asString(), example.name()));\n\t//     }\n\t// }\n\tfunction buildItem(detailsNode, context, dialog) {\n\t    var root = new TopLevelNode(detailsNode, context);\n\t    if (detailsNode.children) {\n\t        for (var _i = 0, _a = detailsNode.children; _i < _a.length; _i++) {\n\t            var child = _a[_i];\n\t            if (child.type == \"CATEGORY\") {\n\t                var categoryName = child.title;\n\t                if (child.children) {\n\t                    for (var _b = 0, _c = child.children; _b < _c.length; _b++) {\n\t                        var childOfChild = _c[_b];\n\t                        buildItemInCategory(childOfChild, root, categoryName, context);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                buildItemInCategory(child, root, null, context);\n\t            }\n\t        }\n\t    }\n\t    return root;\n\t}\n\texports.buildItem = buildItem;\n\tfunction buildItemInCategory(detailsNode, root, categoryName, context) {\n\t    var item = null;\n\t    if (detailsNode.type == \"CHECKBOX\") {\n\t        item = new CheckBoxField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"JSONSCHEMA\"\n\t        && detailsNode.valueText !== null) {\n\t        item = new JSONSchemaField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"XMLSCHEMA\"\n\t        && detailsNode.valueText !== null) {\n\t        item = new XMLSchemaField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"MARKDOWN\") {\n\t        item = new MarkdownField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"SELECTBOX\"\n\t        && detailsNode.options !== null) {\n\t        item = new SelectBox(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"MULTIEDITOR\") {\n\t        item = new SimpleMultiEditor(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"TREE\") {\n\t        item = new LowLevelTreeField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"STRUCTURED\") {\n\t        item = new StructuredField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"TYPEDISPLAY\") {\n\t        item = new TypeDisplayItem(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"TYPESELECT\") {\n\t        item = new TypeSelectBox(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"JSONEXAMPLE\"\n\t        && detailsNode.valueText !== null) {\n\t        item = new ExampleField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"XMLEXAMPLE\"\n\t        && detailsNode.valueText !== null) {\n\t        item = new XMLExampleField(detailsNode, context);\n\t    }\n\t    else if (detailsNode.type == \"ATTRIBUTETEXT\") {\n\t        item = new PropertyEditorInfo(detailsNode, context);\n\t    }\n\t    if (item != null) {\n\t        root.addItemToCategory(categoryName, item);\n\t    }\n\t    else {\n\t        console.log(\"Can not recognize element \" + detailsNode.type);\n\t    }\n\t}\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxFbGVtZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbURBQW1EOzs7Ozs7Ozs7Ozs7QUFNbkQsOEJBQThCO0FBRTlCLGdDQUFnQztBQUtoQyxpREFBaUQ7QUFDakQscURBQXdEO0FBQ3hELGlEQUFvRDtBQU1wRCxJQUFJLG1CQUEwQixDQUFDO0FBQy9CLElBQUksUUFBUSxHQUFTLEtBQUssQ0FBQztBQWUzQjs7R0FFRztBQUNIO0lBSUksNkJBQW9CLE9BQXVCLEVBQVUsSUFBZ0MsRUFDakUsUUFBaUM7UUFEakMsWUFBTyxHQUFQLE9BQU8sQ0FBZ0I7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUE0QjtRQUNqRSxhQUFRLEdBQVIsUUFBUSxDQUF5QjtRQUg3QyxjQUFTLEdBQUcsS0FBSyxDQUFDO0lBSzFCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxpQ0FBRyxHQUFIO1FBQ0ksRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUV0RCxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRCxJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUV4RCxNQUFNLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCx1Q0FBUyxHQUFULFVBQVUsS0FBb0I7UUFDMUIsRUFB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Q0FBQyxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakUsQ0FBQztBQUNMLENBQUMiLCJmaWxlIjoic3JjL2F0b20vZWRpdG9yLXRvb2xzL2RldGFpbEVsZW1lbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbmltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuXG5cbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgcHJvdmlkZXI9cmVxdWlyZShcIi4uL3N1Z2dlc3Rpb24vcHJvdmlkZXJcIilcbmltcG9ydCBVST1yZXF1aXJlKFwiYXRvbS11aS1saWJcIilcbmltcG9ydCB4bWx1dGlsPXJlcXVpcmUoXCIuLi8uLi91dGlsL3htbHV0aWxcIilcbmltcG9ydCBzaGVtYWdlbj1yZXF1aXJlKFwiLi4vLi4vdXRpbC9zY2hlbWFHZW5lcmF0b3JcIilcbmltcG9ydCBTcGFjZVBlblZpZXdzID0gcmVxdWlyZSgnYXRvbS1zcGFjZS1wZW4tdmlld3MnKVxuaW1wb3J0IHRvb2x0aXA9cmVxdWlyZShcIi4uL2NvcmUvdG9vbHRpcC1tYW5hZ2VyXCIpXG4vL2ltcG9ydCBjb250ZXh0QWN0aW9ucyA9IHJlcXVpcmUoXCJyYW1sLWFjdGlvbnNcIilcbmltcG9ydCBhc3Npc3RVdGlscyA9IHJlcXVpcmUoXCIuLi9kaWFsb2dzL2Fzc2lzdC11dGlsc1wiKTtcbmltcG9ydCByYW1sU2VydmVyID0gcmVxdWlyZShcInJhbWwtbGFuZ3VhZ2Utc2VydmVyXCIpO1xuaW1wb3J0IHtcbiAgICBSdW5uYWJsZSxcbiAgICBSZWNvbmNpbGVyXG59IGZyb20gXCIuL3JlY29uY2lsZXJcIlxuXG52YXIgbGFzdFNlbGVjdGVkQ2FwdGlvbjpzdHJpbmc7XG52YXIgaW5SZW5kZXI6Ym9vbGVhbj1mYWxzZTtcblxuaW50ZXJmYWNlIFJlbmRlcmluZ09wdGlvbnN7XG4gICAgc2hvd0Rlc2NyaXB0aW9uPzpib29sZWFuO1xuICAgIHNob3dIZWFkZXI/OmJvb2xlYW47XG4gICAgY29sbGFwc2libGU/OmJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV0YWlsc0NvbnRleHQge1xuICAgIHVyaTogc3RyaW5nLFxuICAgIHBvc2l0aW9uOiBudW1iZXIsXG4gICAgcmVjb25jaWxlcjogUmVjb25jaWxlcixcbiAgICBsb2NhbE1vZGVsOiBhbnlcbn1cblxuLyoqXG4gKiBSdW5uYWJsZSB0aGF0IHVwZGF0ZXMgZGV0YWlscyB2YWx1ZXMgcmVtb3RlbHlcbiAqL1xuY2xhc3MgVXBkYXRlTW9kZWxSdW5uYWJsZSBpbXBsZW1lbnRzIFJ1bm5hYmxlPHJhbWxTZXJ2ZXIuSUNoYW5nZWREb2N1bWVudFtdPiB7XG5cbiAgICBwcml2YXRlIGNhbmNlbGxlZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCwgcHJpdmF0ZSBpdGVtOiByYW1sU2VydmVyLkRldGFpbHNJdGVtSlNPTixcbiAgICAgICAgICAgICAgICBwcml2YXRlIG5ld1ZhbHVlOiBzdHJpbmd8IG51bWJlcnwgYm9vbGVhbikge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgdGhlIGFjdHVhbCBidXNpbmVzcyBsb2dpY3MuXG4gICAgICogU2hvdWxkIHJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiBmaW5pc2hlZC5cbiAgICAgKi9cbiAgICBydW4oKTogUHJvbWlzZTxyYW1sU2VydmVyLklDaGFuZ2VkRG9jdW1lbnRbXT4ge1xuICAgICAgICBpZih0aGlzLmNvbnRleHQubG9jYWxNb2RlbCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxvY2FsTW9kZWxbdGhpcy5pdGVtLmlkXSA9IHRoaXMubmV3VmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKTtcblxuICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5jaGFuZ2VEZXRhaWxWYWx1ZSh0aGlzLmNvbnRleHQudXJpLCB0aGlzLmNvbnRleHQucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbS5pZCwgdGhpcy5uZXdWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0d28gcnVubmFibGUgY29uZmxpY3Qgd2l0aCBlYWNoIG90aGVyLlxuICAgICAqIE11c3Qgd29yayBmYXN0IGFzIGl0cyBjYWxsZWQgb2Z0ZW4uXG4gICAgICogQHBhcmFtIG90aGVyXG4gICAgICovXG4gICAgY29uZmxpY3RzKG90aGVyOiBSdW5uYWJsZTxhbnk+KTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChpc1VwZGF0ZU1vZGVsUnVubmFibGUob3RoZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVcmkoKSA9PT0gb3RoZXIuZ2V0VXJpKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgcnVubmFibGUuIHJ1bigpIG1ldGhvZCBzaG91bGQgZG8gbm90aGluZyBpZiBsYXVuY2hlZCBsYXRlcixcbiAgICAgKiBpZiBjYW5jZWwgaXMgY2FsbGVkIGR1cmluZyB0aGUgcnVuKCkgbWV0aG9kIGV4ZWN1dGlvbiwgcnVuKCkgc2hvdWxkIHN0b3AgYXMgc29vbiBhcyBpdCBjYW4uXG4gICAgICovXG4gICAgY2FuY2VsKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciBjYW5jZWwoKSBtZXRob2Qgd2FzIGNhbGxlZCBhdCBsZWFzdCBvbmNlLlxuICAgICAqL1xuICAgIGlzQ2FuY2VsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbGxlZDtcbiAgICB9XG5cbiAgICBnZXRVcmkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQudXJpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnN0YW5jZW9mIGZvciBVcGRhdGVNb2RlbFJ1bm5hYmxlXG4gKiBAcGFyYW0gcnVubmFibGVcbiAqL1xuZnVuY3Rpb24gaXNVcGRhdGVNb2RlbFJ1bm5hYmxlKHJ1bm5hYmxlOiBSdW5uYWJsZTxhbnk+KSA6IHJ1bm5hYmxlIGlzIFVwZGF0ZU1vZGVsUnVubmFibGUge1xuICAgIHJldHVybiAocnVubmFibGUgYXMgVXBkYXRlTW9kZWxSdW5uYWJsZSkuZ2V0VXJpICE9IG51bGw7XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJdGVte1xuXG4gICAgcGFyZW50Okl0ZW07XG5cbiAgICBsaXN0ZW5lcnM6KChpOkl0ZW0pPT52b2lkKSBbXSA9W11cblxuICAgIGFic3RyYWN0IGRpc3Bvc2UoKTp2b2lkXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3RpdGxlOnN0cmluZyxwdWJsaWMgZGVzY3JpcHRpb246c3RyaW5nPVwiXCIpe1xuXG4gICAgfVxuXG4gICAgbmVlZHNTZXBhcmF0ZUxhYmVsKCl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBkZXRhY2goKXtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4oKS5mb3JFYWNoKHg9PntcbiAgICAgICAgICAgIGlmICh4LmRldGFjaCl4LmRldGFjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRMaXN0ZW5lcihyOihpOkl0ZW0pPT52b2lkKXtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChyKTtcbiAgICB9XG5cbiAgICByZW1vdmVMaXN0ZW5lcihyOihpOkl0ZW0pPT52b2lkKXtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnM9dGhpcy5saXN0ZW5lcnMuZmlsdGVyKHg9PnghPXIpO1xuICAgIH1cblxuICAgIGFkZChpOkl0ZW0pe1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBzdXBwb3J0ZWRcIilcbiAgICB9XG5cbiAgICByb290KCl7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQucm9vdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRpdGxlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgICB9XG5cbiAgICBjaGlsZHJlbigpOkl0ZW1bXXtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHNldERlc2NyaXB0aW9uKGRlc2M6c3RyaW5nKXtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbj1kZXNjO1xuICAgIH1cblxuICAgIHNldFRpdGxlKHQ6c3RyaW5nKXtcbiAgICAgICAgdGhpcy5fdGl0bGU9dDtcbiAgICB9XG5cbiAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zPXt9KTpVSS5VSUNvbXBvbmVudHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpXG4gICAgfVxuXG4gICAgaXRlbShuYW1lOnN0cmluZyk6SXRlbXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc2V0RXJyb3IodGV4dDpzdHJpbmcpe1xuXG4gICAgfVxuXG4gICAgY2xlYXJFcnJvcnMoKXtcblxuICAgIH1cblxufVxuXG5leHBvcnQgY2xhc3MgVHlwZURpc3BsYXlJdGVtIGV4dGVuZHMgSXRlbXtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGV0YWlsc05vZGU6cmFtbFNlcnZlci5EZXRhaWxzSXRlbUpTT04sIHByb3RlY3RlZCBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCl7XG4gICAgICAgIHN1cGVyKFwiVHlwZSBcIiArIGRldGFpbHNOb2RlLnRpdGxlLFwiXCIpO1xuICAgIH1cbiAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zKXtcbiAgICAgICAgbGV0IGNvbnRhaW5lcj1uZXcgVUkuV3JhcFBhbmVsKCk7XG5cbiAgICAgICAgY29udGFpbmVyLnNldENhcHRpb24odGhpcy50aXRsZSgpKTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICAvL3JldHVybiB0eXBlRGlzcGxheS5yZW5kZXIodGhpcy5kZXRhaWxzTm9kZSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKXtcblxuICAgIH1cbn1cbmNsYXNzIENhdGVnb3J5IGV4dGVuZHMgSXRlbXtcblxuICAgIF9jaGlsZHJlbjpJdGVtW109W11cbiAgICBkZXNjcmlwdGlvbkxhYmVsOlVJLlVJQ29tcG9uZW50O1xuICAgIHN1YkNhdGVnb3JpZXM6IFVJLlVJQ29tcG9uZW50O1xuICAgIF9yZXN1bHQ6VUkuUGFuZWw7XG5cbiAgICBhZGQoaTpJdGVtKXtcbiAgICAgICAgaS5wYXJlbnQ9dGhpcztcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChpKTtcbiAgICB9XG5cbiAgICBjaGlsZHJlbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47XG4gICAgfVxuICAgIHBsYWluQ2hpbGRyZW4oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuLmZpbHRlcih4PT4hKHggaW5zdGFuY2VvZiBDYXRlZ29yeSkpO1xuICAgIH1cbiAgICBjYXRlZ29yaWVzKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5maWx0ZXIoeD0+KHggaW5zdGFuY2VvZiBDYXRlZ29yeSkpO1xuICAgIH1cblxuICAgIGl0ZW0obmFtZTpzdHJpbmcpOkl0ZW17XG4gICAgICAgIHZhciBpdDpJdGVtO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5mb3JFYWNoKHg9PntcbiAgICAgICAgICAgIGlmICh4LnRpdGxlKCk9PW5hbWUpe1xuICAgICAgICAgICAgICAgIGl0PXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcnI9eC5pdGVtKG5hbWUpO1xuICAgICAgICAgICAgaWYgKHJyKXtcbiAgICAgICAgICAgICAgICBpdD1ycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpdDtcbiAgICB9XG5cbiAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zPXt9KTpVSS5VSUNvbXBvbmVudHtcbiAgICAgICAgdmFyIHNlY3Rpb249dGhpcy5jcmVhdGVTZWN0aW9uKHIpO1xuICAgICAgICB0aGlzLl9yZXN1bHQ9c2VjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24mJnIuc2hvd0Rlc2NyaXB0aW9uKXtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb25MYWJlbD1VSS5sYWJlbCh0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodGhpcy5kZXNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRyaWJ1dGVUb3Aoc2VjdGlvbik7XG4gICAgICAgIHRoaXMucGxhaW5DaGlsZHJlbigpLmZvckVhY2goeD0+dGhpcy5hZGRDaGlsZChzZWN0aW9uLHgpKTtcblxuICAgICAgICB2YXIgd3JhcHBlZENoaWxkPXRoaXMuY3JlYXRlV3JhcHBlZENoaWxkKHNlY3Rpb24pO1xuICAgICAgICB0aGlzLnN1YkNhdGVnb3JpZXM9d3JhcHBlZENoaWxkO1xuICAgICAgICB2YXIgY2F0cz10aGlzLmNhdGVnb3JpZXMoKVxuICAgICAgICB2YXIgcmVtYXA9e31cbiAgICAgICAgY2F0cy5mb3JFYWNoKHg9PnJlbWFwW3gudGl0bGUoKV09eCk7XG4gICAgICAgIHZhciBuZXdDYXRzPVtdO1xuICAgICAgICBpZiAocmVtYXBbXCJHZW5lcmFsXCJdKXtcbiAgICAgICAgICAgIG5ld0NhdHMucHVzaChyZW1hcFtcIkdlbmVyYWxcIl0pO1xuICAgICAgICAgICAgZGVsZXRlIHJlbWFwW1wiR2VuZXJhbFwiXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtYXBbXCJGYWNldHNcIl0pe1xuICAgICAgICAgICAgbmV3Q2F0cy5wdXNoKHJlbWFwW1wiRmFjZXRzXCJdKTtcbiAgICAgICAgICAgIGRlbGV0ZSByZW1hcFtcIkZhY2V0c1wiXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBjIGluIHJlbWFwKXtcbiAgICAgICAgICAgIG5ld0NhdHMucHVzaChyZW1hcFtjXSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3Q2F0cy5mb3JFYWNoKHg9PnRoaXMuYWRkQ2hpbGQod3JhcHBlZENoaWxkLHgpKTtcbiAgICAgICAgcmV0dXJuIHNlY3Rpb247XG4gICAgfVxuXG4gICAgZGV0YWNoKCl7XG4gICAgICAgIHN1cGVyLmRldGFjaCgpO1xuICAgICAgICB0aGlzLl9yZXN1bHQuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVNlY3Rpb24ocjpSZW5kZXJpbmdPcHRpb25zKTpVSS5QYW5lbHtcbiAgICAgICAgaWYgKHIuc2hvd0hlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVSS5TZWN0aW9uKDxhbnk+VUkuaDModGhpcy50aXRsZSgpKSwgZmFsc2UpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBubD1uZXcgVUkuUGFuZWwoKTtcbiAgICAgICAgcG5sLnNldENhcHRpb24odGhpcy50aXRsZSgpKTtcbiAgICAgICAgcmV0dXJuIHBubDtcbiAgICB9XG5cbiAgICBjcmVhdGVXcmFwcGVkQ2hpbGQoc2VjdGlvbjpVSS5VSUNvbXBvbmVudCl7XG4gICAgICAgIHJldHVybiBzZWN0aW9uO1xuICAgIH1cblxuICAgIGFkZENoaWxkKHNlY3Rpb246VUkuVUlDb21wb25lbnQsIGl0ZW06SXRlbSl7XG4gICAgICAgIHZhciBjaGlsZD1pdGVtLnJlbmRlcigpO1xuICAgICAgICBpZiAoc2VjdGlvbiBpbnN0YW5jZW9mIFVJLlRhYkZvbGRlcil7XG4gICAgICAgICAgICB2YXIgdGY9PFVJLlRhYkZvbGRlcj5zZWN0aW9uO1xuICAgICAgICAgICAgdGYuYWRkKGNoaWxkLmNhcHRpb24oKSxVSS5JY29uLk5PTkUsY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmVlZHNTZXBhcmF0ZUxhYmVsKCkpe1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdExhYmVsID0gVUkubGFiZWwoaXRlbS50aXRsZSgpKTtcblxuICAgICAgICAgICAgICAgIGZpcnN0TGFiZWwubWFyZ2luKDAsIDUsIDAsIDApO1xuXG4gICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChmaXJzdExhYmVsKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZENoaWxkKFVJLmxhYmVsKGl0ZW0uZGVzY3JpcHRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29udHJpYnV0ZVRvcChzZWN0aW9uOlVJLlBhbmVsKXtcblxuICAgIH1cblxuICAgIGRpc3Bvc2UoKTp2b2lke1xuXG4gICAgfVxuXG4gICAgc2V0RXJyb3IodGV4dDpzdHJpbmcpe1xuXG4gICAgfVxuXG4gICAgY2xlYXJFcnJvcnMoKXtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCh4PT54LmNsZWFyRXJyb3JzKCkpXG4gICAgfVxuXG4gICAgdXBkYXRlKGk6SXRlbSl7XG5cbiAgICB9XG59XG5cbmNsYXNzIFRvcExldmVsTm9kZSBleHRlbmRzIENhdGVnb3J5e1xuXG4gICAgZXJyb3JMYWJlbDpVSS5UZXh0RWxlbWVudDxhbnk+XG4gICAgZXA6VUkuUGFuZWw9bnVsbDtcbiAgICBfcGFuZWw6VUkuUGFuZWw7XG4gICAgX29wdGlvbnM6UmVuZGVyaW5nT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBkZXRhaWxzTm9kZTpyYW1sU2VydmVyLkRldGFpbHNJdGVtSlNPTixcbiAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgY29udGV4dDogRGV0YWlsc0NvbnRleHQpe1xuICAgICAgICBzdXBlcihkZXRhaWxzTm9kZS50aXRsZSxkZXRhaWxzTm9kZS5kZXNjcmlwdGlvbik7XG4gICAgfVxuXG4gICAgZGV0YWNoKCl7XG4gICAgICAgIHN1cGVyLmRldGFjaCgpO1xuICAgICAgICB0aGlzLl9yZXN1bHQuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVdyYXBwZWRDaGlsZChzZWN0aW9uOlVJLlVJQ29tcG9uZW50KXtcbiAgICAgICAgdmFyIHRmPW5ldyBVSS5UYWJGb2xkZXIoKVxuICAgICAgICB0Zi5zZXRPblNlbGVjdGVkKCgpPT57XG4gICAgICAgICAgICBpZiAoIWluUmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgbGFzdFNlbGVjdGVkQ2FwdGlvbiA9ICh0Zi5zZWxlY3RlZENvbXBvbmVudCgpLmNhcHRpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKHRmKTtcbiAgICAgICAgcmV0dXJuIHRmO1xuICAgIH1cblxuICAgIHN1YkNhdGVnb3J5QnlOYW1lT3JDcmVhdGUobmFtZTpzdHJpbmcpe1xuICAgICAgICB2YXIgaXRlbT1fLmZpbmQodGhpcy5jaGlsZHJlbigpLHg9PngudGl0bGUoKT09bmFtZSk7XG4gICAgICAgIGlmICghaXRlbSl7XG4gICAgICAgICAgICB2YXIgcnM9bmV3IENhdGVnb3J5KG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5hZGQocnMpO1xuICAgICAgICAgICAgcmV0dXJuIHJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIGFkZEl0ZW1Ub0NhdGVnb3J5KG5hbWU6c3RyaW5nLGl0Okl0ZW0pe1xuICAgICAgICBpZiAobmFtZT09bnVsbCl7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKGl0KTtcbiAgICAgICAgICAgIGl0LnBhcmVudD10aGlzO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ViQ2F0ZWdvcnlCeU5hbWVPckNyZWF0ZShuYW1lKS5hZGQoaXQpO1xuICAgIH1cblxuICAgIGNvbnRyaWJ1dGVUb3Aoc2VjdGlvbjpVSS5QYW5lbCl7XG4gICAgICAgIHRoaXMuZXJyb3JMYWJlbD1VSS5sYWJlbChcIlwiLFVJLkljb24uQlVHLFVJLlRleHRDbGFzc2VzLkVSUk9SKTtcbiAgICAgICAgdGhpcy5lcD1VSS5oYyh0aGlzLmVycm9yTGFiZWwpO1xuICAgICAgICB0aGlzLmVwLnNldERpc3BsYXkoZmFsc2UpXG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodGhpcy5lcCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKHI6IFJlbmRlcmluZ09wdGlvbnM9e30pe1xuICAgICAgICBpblJlbmRlcj10cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHN1cGVyLnJlbmRlcihyKTtcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSByO1xuICAgICAgICAgICAgdGhpcy5fcGFuZWwgPSA8YW55PnJlc3VsdDtcbiAgICAgICAgICAgIHZhciB0ZiA9IDxVSS5UYWJGb2xkZXI+dGhpcy5zdWJDYXRlZ29yaWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0Zi50YWJzQ291bnQoKTsgbisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0Zi5nZXQobik7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaGVhZGVyID09IGxhc3RTZWxlY3RlZENhcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleChuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRhdGlvbj1cIlwiO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGV0YWlsc05vZGUuZGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgICAgIGRvY3VtZW50YXRpb249dGhpcy5kZXRhaWxzTm9kZS5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRvY3VtZW50YXRpb24ubGVuZ3RoJiYhci5zaG93RGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hZGRDaGlsZChVSS5odG1sKFwiPGhyLz5cIikpXG4gICAgICAgICAgICAgICAgcmVzdWx0LmFkZENoaWxkKFVJLmxhYmVsKGRvY3VtZW50YXRpb24sVUkuSWNvbi5JTkJPWCxVSS5UZXh0Q2xhc3Nlcy5TVUJUTEUpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaW5SZW5kZXI9ZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNwb3NlKCk6dm9pZHtcbiAgICAgICAgdGhpcy5kZXRhaWxzTm9kZT1udWxsO1xuICAgIH1cblxuICAgIHVwZGF0ZShpOkl0ZW0pe1xuICAgICAgICAvLyBpZiAoIXRoaXMuX3BhbmVsKXtcbiAgICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBpZiAoaSBpbnN0YW5jZW9mIFByb3BlcnR5RWRpdG9ySW5mbyl7XG4gICAgICAgIC8vICAgICB2YXIgcHJJbmZvPTxQcm9wZXJ0eUVkaXRvckluZm8+aTtcbiAgICAgICAgLy8gICAgIGlmIChwckluZm8ucHJvcGVydHkuZ2V0QWRhcHRlcihkZWYuUkFNTFByb3BlcnR5U2VydmljZSkuaXNUeXBlRXhwcigpfHxwckluZm8ucHJvcGVydHkuaXNEZXNjcmltaW5hdG9yKCkpe1xuICAgICAgICAvLyAgICAgICAgIHJwLnV0aWxzLnVwZGF0ZVR5cGUodGhpcy5ub2RlKTtcbiAgICAgICAgLy8gICAgICAgICB2YXIgZXh0cmFzPTxDYXRlZ29yeT50aGlzLml0ZW0oXCJGYWNldHNcIik7XG4gICAgICAgIC8vICAgICAgICAgaWYgKGV4dHJhcyYmZXh0cmFzLl9yZXN1bHQpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgZXh0cmFzLl9yZXN1bHQuY2xlYXIoKTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgdmFyIGl0ZW09YnVpbGRJdGVtKHRoaXMubm9kZSxmYWxzZSk7XG4gICAgICAgIC8vICAgICAgICAgdmFyIG5ld0V4dHJhcz08Q2F0ZWdvcnk+aXRlbS5pdGVtKFwiRmFjZXRzXCIpO1xuICAgICAgICAvLyAgICAgICAgIGlmIChuZXdFeHRyYXMpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKGV4dHJhcyYmZXh0cmFzLl9yZXN1bHQpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV4dHJhcy5fY2hpbGRyZW4gPSBuZXdFeHRyYXMuX2NoaWxkcmVuO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgZXh0cmFzLl9jaGlsZHJlbi5mb3JFYWNoKHg9PngucGFyZW50ID0gZXh0cmFzKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChleHRyYXMuX2NoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBleHRyYXMuX3Jlc3VsdC5zZXREaXNwbGF5KHRydWUpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC8vd29ya2Fyb3VuZyBldmVudHMgZmxvdyBpc3N1ZSBpbiBVSS50c1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbmV3RXh0cmFzLmNoaWxkcmVuKCkuZm9yRWFjaCh4PT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4dHJhcy5fcmVzdWx0LmFkZENoaWxkKHgucmVuZGVyKHRoaXMuX29wdGlvbnMpKVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgICAgICBlbHNle1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChuZXdFeHRyYXMpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhbmVsKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFuZWwuYWRkQ2hpbGQobmV3RXh0cmFzLnJlbmRlcih0aGlzLl9vcHRpb25zKSlcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICBlbHNle1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAoZXh0cmFzJiZleHRyYXMuX3Jlc3VsdCkge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgZXh0cmFzLl9yZXN1bHQuc2V0RGlzcGxheShmYWxzZSk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gdmFyIGtwPW51bGw7XG4gICAgICAgIC8vIHRoaXMubm9kZS5kZWZpbml0aW9uKCkuYWxsUHJvcGVydGllcygpLmZvckVhY2goeD0+e1xuICAgICAgICAvLyAgICAgaWYgKHguZ2V0QWRhcHRlcihkZWYuUkFNTFByb3BlcnR5U2VydmljZSkuaXNLZXkoKSl7XG4gICAgICAgIC8vICAgICAgICAga3A9eDtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gaWYgKGtwKXtcbiAgICAgICAgLy8gICAgIHZhciBrZXlJdGVtPTxQcm9wZXJ0eUVkaXRvckluZm8+dGhpcy5pdGVtKGtwLm5hbWVJZCgpKTtcbiAgICAgICAgLy8gICAgIGlmIChrZXlJdGVtKXtcbiAgICAgICAgLy8gICAgICAgICB2YXIgbT1rZXlJdGVtLmZsZDtcbiAgICAgICAgLy8gICAgICAgICB2YXIgdmw9bS5nZXRCaW5kaW5nKCkuZ2V0KCk7XG4gICAgICAgIC8vICAgICAgICAgaWYgKCghdmwpfHx2bC50cmltKCkubGVuZ3RoPT0wKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5fcGFuZWwuZ2V0QmluZGluZygpLnNldFN0YXR1cyhVSS5lcnJvclN0YXR1cyhcIlwiKSk7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIGVsc2V7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuX3BhbmVsLmdldEJpbmRpbmcoKS5zZXRTdGF0dXMoVUkub2tTdGF0dXMoKSk7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHZhciBlcnJvcnM7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIGlmKHRoaXMubm9kZS5wcm9wZXJ0eSgpICYmIHVuaXZlcnNlaGVscGVycy5pc0V4YW1wbGVQcm9wZXJ0eSh0aGlzLm5vZGUucHJvcGVydHkoKSkpIHtcbiAgICAgICAgLy8gICAgIHZhciBwYXJlbnQgPSB0aGlzLm5vZGUucGFyZW50KClcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgIGlmKHBhcmVudCkge1xuICAgICAgICAvLyAgICAgICAgIHZhciBwYXJzZWQgPSBwYXJlbnQucGFyc2VkVHlwZSgpO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgIHZhciBleGFtcGxlTWV0YSA9ICBfLmZpbmQoKDxhbnk+cGFyc2VkKS5tZXRhSW5mbyB8fCBbXSwgKG1ldGE6IGFueSk6IGJvb2xlYW4gPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gbWV0YSAmJiBtZXRhLl9uYW1lID09PSAnZXhhbXBsZSc7XG4gICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgaWYoZXhhbXBsZU1ldGEpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgdmFyIHZhbGlkYXRlT2JqZWN0ID0gZXhhbXBsZU1ldGEudmFsaWRhdGVTZWxmKHRoaXMubm9kZS50eXBlcygpLmdldEFubm90YXRpb25UeXBlUmVnaXN0cnkoKSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgICAgIGVycm9ycyA9ICgodmFsaWRhdGVPYmplY3QgJiYgdmFsaWRhdGVPYmplY3QuZ2V0RXJyb3JzKCkpIHx8IFtdKS5tYXAoZXJyb3IgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZS5jcmVhdGVJc3N1ZShlcnJvcik7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIGVycm9ycyA9IHRoaXMubm9kZS5lcnJvcnMoKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvL1xuICAgICAgICAvLyB0aGlzLmNsZWFyRXJyb3JzKCk7XG4gICAgICAgIC8vIHRoaXMuZXAuc2V0RGlzcGxheShmYWxzZSlcbiAgICAgICAgLy8gaWYgKCFyZXNvdXJjZVJlZ2lzdHJ5Lmhhc0FzeW5jUmVxdWVzdHMoKSAmJiBlcnJvcnMmJmVycm9ycy5sZW5ndGg+MCl7XG4gICAgICAgIC8vICAgICB2YXIgbm90Rm91bmQ9W107XG4gICAgICAgIC8vICAgICBlcnJvcnMuZm9yRWFjaChlcnJvcj0+e1xuICAgICAgICAvLyAgICAgICAgIGlmIChlcnJvci5leHRyYXMmJmVycm9yLmV4dHJhcy5sZW5ndGg+MCl7XG4gICAgICAgIC8vICAgICAgICAgICAgIGVycm9yPWVycm9yLmV4dHJhc1swXTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgdmFyIGl0ZW0gPSBlcnJvci5ub2RlICYmIHRoaXMuaXRlbShlcnJvci5ub2RlLm5hbWUoKSk7XG4gICAgICAgIC8vICAgICAgICAgaWYgKGl0ZW0pe1xuICAgICAgICAvLyAgICAgICAgICAgICBpdGVtLnNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICBlbHNle25vdEZvdW5kLnB1c2goZXJyb3IpO31cbiAgICAgICAgLy8gICAgIH0pXG4gICAgICAgIC8vICAgICBpZiAobm90Rm91bmQubGVuZ3RoPjApe1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuZXJyb3JMYWJlbC5zZXRJY29uKFVJLkljb24uQlVHKVxuICAgICAgICAvLyAgICAgICAgIHZhciBldD1ub3RGb3VuZC5tYXAoeD0+eC5ub2RlLm5hbWUoKStcIjpcIit4Lm1lc3NhZ2UpLmpvaW4oXCIsXCIpO1xuICAgICAgICAvLyAgICAgICAgIGlmIChldC5sZW5ndGg+MTAwKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgZXQ9ZXQuc3Vic3RyaW5nKDAsMTAwKStcIi4uLlwiO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB0aGlzLmVycm9yTGFiZWwuc2V0VGV4dChldClcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmVwLnNldERpc3BsYXkodHJ1ZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBlbHNle1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuZXAuc2V0RGlzcGxheShmYWxzZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cbiAgICB9XG59XG5cbmNsYXNzIENoZWNrQm94MiBleHRlbmRzIFVJLkNoZWNrQm94IGltcGxlbWVudHMgVUkuSUZpZWxkPGFueT57XG5cbiAgICBzZXRMYWJlbFdpZHRoKG46bnVtYmVyKXtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIsKG4rMikrXCJjaFwiKTtcbiAgICB9XG59XG5jbGFzcyBQcm9wZXJ0eUVkaXRvckluZm8gZXh0ZW5kcyBJdGVte1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIG91dGxpbmVOb2RlIDogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04sXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIGNvbnRleHQ6IERldGFpbHNDb250ZXh0KXtcbiAgICAgICAgc3VwZXIob3V0bGluZU5vZGUudGl0bGUsb3V0bGluZU5vZGUuZGVzY3JpcHRpb24pO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKXtcbiAgICAgICAgdGhpcy5vdXRsaW5lTm9kZT1udWxsO1xuICAgICAgICB0aGlzLmZsZC5nZXRCaW5kaW5nKCkucmVtb3ZlTGlzdGVuZXIodGhpcy51cGRhdGUpXG4gICAgfVxuXG4gICAgLy8gZ2V0RGVmYXVsdFZhbHVlKCkge1xuICAgIC8vICAgICByZXR1cm4gZGVmYXVsdFZhbHVlcy5nZXREZWZhdWx0VmFsdWUodGhpcy5ub2RlLCB0aGlzLnByb3BlcnR5KTtcbiAgICAvLyB9XG4gICAgLy9cbiAgICAvLyBoYXNEZWZhdWx0KCkge1xuICAgIC8vICAgICByZXR1cm4gZGVmYXVsdFZhbHVlcy5oYXNEZWZhdWx0KHRoaXMucHJvcGVydHkpO1xuICAgIC8vIH1cblxuICAgIGVycm9yTGFiZWw6VUkuVGV4dEVsZW1lbnQ8YW55PlxuICAgIGRlc2NMYWJlbDpVSS5UZXh0RWxlbWVudDxhbnk+XG5cbiAgICBmbGQ6VUkuQmFzaWNDb21wb25lbnQ8YW55PjtcbiAgICBjbGVhckVycm9ycygpe1xuICAgICAgICB0aGlzLnNldEVycm9yKG51bGwpO1xuICAgIH1cbiAgICBzZXRFcnJvcih0ZXh0OnN0cmluZyl7XG4gICAgICAgIGlmICh0ZXh0KXtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JMYWJlbC5zZXRUZXh0KHRleHQpO1xuICAgICAgICAgICAgdGhpcy5lcnJvckxhYmVsLnNldERpc3BsYXkodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmICh0aGlzLmVycm9yTGFiZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTGFiZWwuc2V0RGlzcGxheShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmcm9tRWRpdG9yVG9Nb2RlbChuZXdWYWx1ZT8gOiBhbnksIG9sZFZhbHVlPyA6IGFueSl7XG4gICAgICAgIGNvbnN0IGRldGFpbHNDaGFuZ2VSdW5uYWJsZSA9XG4gICAgICAgICAgICBuZXcgVXBkYXRlTW9kZWxSdW5uYWJsZSh0aGlzLmNvbnRleHQsIHRoaXMub3V0bGluZU5vZGUsIG5ld1ZhbHVlKTtcblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG4gICAgICAgIGNvbnRleHQucmVjb25jaWxlci5zY2hlZHVsZShkZXRhaWxzQ2hhbmdlUnVubmFibGUpLnRoZW4oKGNoYW5nZWREb2N1bWVudHMpID0+IHtcbiAgICAgICAgICAgIGlmKGNvbnRleHQubG9jYWxNb2RlbCkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhc3Npc3RVdGlscy5hcHBseUNoYW5nZWREb2N1bWVudHMoY2hhbmdlZERvY3VtZW50cyk7XG4gICAgICAgICAgICBhc3Npc3RVdGlscy5nb3RvUG9zaXRpb24oY29udGV4dC5wb3NpdGlvbik7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdG9Mb2NhbFZhbHVlKGlucHV0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWU7XG4gICAgfVxuXG4gICAgdG9VSVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmcm9tTW9kZWxUb0VkaXRvcigpIHtcblxuICAgICAgICB0aGlzLmZsZC5nZXRCaW5kaW5nKCkuc2V0KHRoaXMub3V0bGluZU5vZGUudmFsdWVUZXh0KTtcbiAgICB9XG4gICAgcmVuZGVyZWQ6Ym9vbGVhbj1mYWxzZVxuICAgIHVwZGF0ZT0obmV3VmFsdWUsIG9sZFZhbHVlKT0+e1xuICAgICAgICBpZighdGhpcy5yZW5kZXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mcm9tRWRpdG9yVG9Nb2RlbChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xuICAgIH1cblxuICAgIHJlbmRlcigpe1xuICAgICAgICB2YXIgY29udGFpbmVyPW5ldyBVSS5XcmFwUGFuZWwoKTtcblxuICAgICAgICB0aGlzLmVycm9yTGFiZWw9VUkubGFiZWwoXCJcIixVSS5JY29uLkJVRyxVSS5UZXh0Q2xhc3Nlcy5FUlJPUik7XG4gICAgICAgIHRoaXMuZXJyb3JMYWJlbC5zZXREaXNwbGF5KGZhbHNlKTtcbiAgICAgICAgdGhpcy5lcnJvckxhYmVsLnNldFN0eWxlKFwibWFyZ2luLWxlZnRcIiwodGhpcy5fdGl0bGUubGVuZ3RoKzEpK1wiY2hcIilcblxuICAgICAgICB2YXIgZmllbGQ9dGhpcy5jcmVhdGVGaWVsZCgpO1xuXG4gICAgICAgIHRoaXMuZmxkPTxVSS5CYXNpY0NvbXBvbmVudDxhbnk+PmZpZWxkO1xuXG4gICAgICAgIGZpZWxkLmdldEJpbmRpbmcoKS5hZGRMaXN0ZW5lcih0aGlzLnVwZGF0ZSlcblxuICAgICAgICBjb250YWluZXIuc2V0Q2FwdGlvbih0aGlzLnRpdGxlKCkpO1xuXG4gICAgICAgIHRoaXMuZnJvbU1vZGVsVG9FZGl0b3IoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQoZmllbGQpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmVycm9yTGFiZWwpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgY3JlYXRlRmllbGQoKTpVSS5JRmllbGQ8YW55PntcbiAgICAgICAgcmV0dXJuIFVJLnRleGZGaWVsZCh0aGlzLm5lZWRzU2VwYXJhdGVMYWJlbCgpP1wiXCI6dGhpcy5vdXRsaW5lTm9kZS50aXRsZSxcIlwiLHg9Pnt9KTtcbiAgICB9XG59XG5cbmNsYXNzIFNpbXBsZU11bHRpRWRpdG9yIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIC8vIGZyb21FZGl0b3JUb01vZGVsKCl7XG4gICAgLy8gICAgIC8vIHZhciBmaWVsZD10aGlzLmZsZDtcbiAgICAvLyAgICAgLy8gdmFyIHZsPWZpZWxkLmdldEJpbmRpbmcoKS5nZXQoKTtcbiAgICAvLyAgICAgLy8gaWYgKHZsPT1udWxsKXtcbiAgICAvLyAgICAgLy8gICAgIHZsPVwiXCI7XG4gICAgLy8gICAgIC8vIH1cbiAgICAvLyAgICAgLy8gdmFyIGF0dHJzPXRoaXMubm9kZS5hdHRyaWJ1dGVzKHRoaXMucHJvcGVydHkubmFtZUlkKCkpO1xuICAgIC8vICAgICAvLyB2YXIgYXY9YXR0cnMubWFwKHg9PmVzY2FwZVZhbHVlKFwiXCIreC52YWx1ZSgpKSkuam9pbihcIiwgXCIpO1xuICAgIC8vICAgICAvLyBpZiAoYXY9PXZsKXtcbiAgICAvLyAgICAgLy8gICAgIHJldHVybjtcbiAgICAvLyAgICAgLy8gfVxuICAgIC8vICAgICAvLyB2YXIgd3c9dmwuc3BsaXQoXCIsXCIpO1xuICAgIC8vICAgICAvLyB2YXIgdmw9d3cuZmlsdGVyKHg9PngudHJpbSgpLmxlbmd0aD4wKS5tYXAoeD0+eC50cmltKCkpO1xuICAgIC8vICAgICAvL1xuICAgIC8vICAgICAvLyBpZih0aGlzLm5vZGUubG93TGV2ZWwoKS5pbmNsdWRlUGF0aCgpICYmICF0aGlzLm5vZGUubG93TGV2ZWwoKS51bml0KCkucmVzb2x2ZSh0aGlzLm5vZGUubG93TGV2ZWwoKS5pbmNsdWRlUGF0aCgpKSkge1xuICAgIC8vICAgICAvLyAgICAgcmV0dXJuO1xuICAgIC8vICAgICAvLyB9XG4gICAgLy8gICAgIC8vXG4gICAgLy8gICAgIC8vIHZhciBhdHRyaWJ1dGUgPSB0aGlzLm5vZGUuYXR0ck9yQ3JlYXRlKHRoaXMucHJvcGVydHkubmFtZUlkKCkpO1xuICAgIC8vICAgICAvLyBhdHRyaWJ1dGUuc2V0VmFsdWVzKHZsKVxuICAgIC8vICAgICAvL1xuICAgIC8vICAgICAvLyB2YXIgcm9vdD10aGlzLnJvb3QoKVxuICAgIC8vICAgICAvLyBpZiAocm9vdCl7XG4gICAgLy8gICAgIC8vICAgICByb290LnVwZGF0ZSh0aGlzKTtcbiAgICAvLyAgICAgLy8gfVxuICAgIC8vIH1cbiAgICBmcm9tTW9kZWxUb0VkaXRvcigpe1xuICAgICAgICB0aGlzLmZsZC5nZXRCaW5kaW5nKCkuc2V0KHRoaXMub3V0bGluZU5vZGUudmFsdWVUZXh0KTtcbiAgICB9XG59XG5mdW5jdGlvbiBlc2NhcGVWYWx1ZSh2OnN0cmluZyl7XG4gICAgaWYgKHYubGVuZ3RoPjApIHtcbiAgICAgICAgaWYgKHYuY2hhckF0KDApID09IFwiJ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1wiJyArIHYgKyAnXCInO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PSAnXCInKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1wiJyArIHYgKyAnXCInO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh2LmluZGV4T2YoJyAnKSE9LTF8fHYuaW5kZXhPZignLCcpIT0tMSl7XG4gICAgICAgIGlmICh2LmluZGV4T2YoJ1wiJyk9PS0xKXtcbiAgICAgICAgICAgIHJldHVybiAnXCInK3YrJ1wiJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmluZGV4T2YoXCInXCIpPT0tMSl7XG4gICAgICAgICAgICByZXR1cm4gXCInXCIrditcIidcIlxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG5jbGFzcyBDaGVja0JveEZpZWxkIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIHJldHVybiBuZXcgQ2hlY2tCb3gyKHRoaXMub3V0bGluZU5vZGUudGl0bGUsVUkuSWNvbi5OT05FLHg9Pnt9KTtcbiAgICB9XG5cbiAgICB0b1VJVmFsdWUodmFsdWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIGlmKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoKDxhbnk+dmFsdWUpID09PSB0cnVlIHx8IHZhbHVlLnRyaW0oKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0b0xvY2FsVmFsdWUodmFsdWU6IGFueSk6IGFueSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSArIFwiXCI7XG4gICAgfVxufVxuXG4vLyBjbGFzcyBBY3Rpb25zSXRlbSBleHRlbmRzIEl0ZW17XG4vL1xuLy8gICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbm9kZTpobC5JSGlnaExldmVsTm9kZSl7XG4vLyAgICAgICAgIHN1cGVyKFwiQWN0aW9uc1wiLFwiXCIpO1xuLy8gICAgIH1cbi8vICAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zKXtcbi8vICAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb25zLmdlbmVyYXRlU3VnZ2VzdGlvbnNQYW5lbCh0aGlzLm5vZGUpO1xuLy8gICAgIH1cbi8vICAgICBkaXNwb3NlKCl7XG4vLyAgICAgICAgIHRoaXMubm9kZT1udWxsO1xuLy8gICAgIH1cbi8vXG4vLyB9XG4vLyBjbGFzcyBDb250ZXh0QWN0aW9uc0l0ZW0gZXh0ZW5kcyBJdGVte1xuLy8gICAgIGNvbnN0cnVjdG9yKG5vZGU6aGwuSUhpZ2hMZXZlbE5vZGUsbmFtZTpzdHJpbmcscHJpdmF0ZSBhY3Rpb25zOmNvbnRleHRBY3Rpb25zLklDb250ZXh0RGVwZW5kZWRBY3Rpb25bXSl7XG4vLyAgICAgICAgIHN1cGVyKG5hbWUsXCJcIik7XG4vLyAgICAgfVxuLy8gICAgIGRpc3Bvc2UoKXtcbi8vXG4vLyAgICAgfVxuLy9cbi8vICAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zKXtcbi8vICAgICAgICAgdmFyIHJlc3VsdD1VSS5oYygpO1xuLy8gICAgICAgICByZXN1bHQuYWRkQ2hpbGQoVUkuaDModGhpcy50aXRsZSgpKSlcbi8vICAgICAgICAgdGhpcy5hY3Rpb25zLmZvckVhY2goeD0+e1xuLy8gICAgICAgICAgICAgcmVzdWx0LmFkZENoaWxkKFVJLmJ1dHRvbih4Lm5hbWUsVUkuQnV0dG9uU2l6ZXMuRVhUUkFfU01BTEwsVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLFVJLkljb24uQ0hFQ0tMSVNULGE9Pngub25DbGljaygpKS5tYXJnaW4oMywzLDMsMykpXG4vLyAgICAgICAgIH0pXG4vLyAgICAgICAgIHJldHVybiByZXN1bHQ7XG4vLyAgICAgfVxuLy8gfVxuXG5jbGFzcyBNYXJrZG93bkZpZWxkVUkgZXh0ZW5kcyBVSS5BdG9tRWRpdG9yRWxlbWVudCBpbXBsZW1lbnRzIFVJLklGaWVsZDxhbnk+e1xuXG4gICAgY29uc3RydWN0b3IodGV4dDpzdHJpbmcsIG9uY2hhbmdlOlVJLkV2ZW50SGFuZGxlcikge1xuICAgICAgICBzdXBlcih0ZXh0LCBvbmNoYW5nZSk7XG4gICAgICAgIHRoaXMubWFyZ2luKDAsIDAsIDYsIDEyKTtcbiAgICAgICAgdGhpcy5zZXRNaW5pKGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcIm1pbi1oZWlnaHRcIixcIjEwMHB4XCIpO1xuICAgICAgICAvL3RoaXMuc2V0U3R5bGUoXCJtYXgtaGVpZ2h0XCIsXCIyMDBweFwiKTtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlclwiLFwic29saWRcIik7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIixcIjFweFwiKVxuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYm9yZGVyLXJhZGl1c1wiLFwiMnB4XCIpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwiZm9udC1zaXplXCIsXCIxLjE1ZW1cIilcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlci1jb2xvclwiLFwicmdiYSgwLDAsMCwwLjIpXCIpO1xuICAgICAgICB0aGlzLnNldEdyYW1tYXIoJ3NvdXJjZS5tZGN1c3RvbScpO1xuICAgIH1cblxuICAgIHNldExhYmVsV2lkdGgoKXtcblxuICAgIH1cbiAgICBzZXRMYWJlbEhlaWdodCgpe1xuXG4gICAgfVxuICAgIHNldFJlcXVpcmVkKHY6Ym9vbGVhbil7XG5cbiAgICB9XG59XG5jbGFzcyBYTUxGaWVsZCBleHRlbmRzIFVJLkF0b21FZGl0b3JFbGVtZW50IGltcGxlbWVudHMgVUkuSUZpZWxkPGFueT57XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0OnN0cmluZywgb25jaGFuZ2U6VUkuRXZlbnRIYW5kbGVyKSB7XG4gICAgICAgIHN1cGVyKHRleHQsIG9uY2hhbmdlKTtcbiAgICAgICAgdGhpcy5tYXJnaW4oMCwgMCwgNiwgMTIpO1xuICAgICAgICB0aGlzLnNldE1pbmkoZmFsc2UpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwibWluLWhlaWdodFwiLFwiMTAwcHhcIik7XG4gICAgICAgIC8vdGhpcy5zZXRTdHlsZShcIm1heC1oZWlnaHRcIixcIjIwMHB4XCIpO1xuXG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXJcIixcInNvbGlkXCIpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYm9yZGVyLXdpZHRoXCIsXCIxcHhcIilcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlci1yYWRpdXNcIixcIjJweFwiKTtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImZvbnQtc2l6ZVwiLFwiMS4xNWVtXCIpXG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXItY29sb3JcIixcInJnYmEoMCwwLDAsMC4yKVwiKTtcbiAgICAgICAgdGhpcy5zZXRHcmFtbWFyKCd0ZXh0LnhtbCcpO1xuICAgIH1cblxuXG5cbiAgICBzZXRMYWJlbFdpZHRoKCl7XG5cbiAgICB9XG4gICAgc2V0TGFiZWxIZWlnaHQoKXtcblxuICAgIH1cbiAgICBzZXRSZXF1aXJlZCh2OmJvb2xlYW4pe1xuXG4gICAgfVxufVxuY2xhc3MgSlNPTkZpZWxkIGV4dGVuZHMgVUkuQXRvbUVkaXRvckVsZW1lbnQgaW1wbGVtZW50cyBVSS5JRmllbGQ8YW55PntcblxuICAgIGNvbnN0cnVjdG9yKHRleHQ6c3RyaW5nLCBvbmNoYW5nZTpVSS5FdmVudEhhbmRsZXIpIHtcbiAgICAgICAgc3VwZXIodGV4dCwgb25jaGFuZ2UpO1xuICAgICAgICB0aGlzLm1hcmdpbigwLCAwLCA2LCAxMik7XG4gICAgICAgIHRoaXMuc2V0TWluaShmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJtaW4taGVpZ2h0XCIsXCIxMDBweFwiKTtcbiAgICAgICAgLy90aGlzLnNldFN0eWxlKFwibWF4LWhlaWdodFwiLFwiMjAwcHhcIik7XG5cbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlclwiLFwic29saWRcIik7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIixcIjFweFwiKVxuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYm9yZGVyLXJhZGl1c1wiLFwiMnB4XCIpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwiZm9udC1zaXplXCIsXCIxLjE1ZW1cIilcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlci1jb2xvclwiLFwicmdiYSgwLDAsMCwwLjIpXCIpO1xuICAgICAgICB0aGlzLnNldEdyYW1tYXIoJ3NvdXJjZS5qc29uJyk7XG4gICAgfVxuXG5cblxuICAgIHNldExhYmVsV2lkdGgoKXtcblxuICAgIH1cbiAgICBzZXRMYWJlbEhlaWdodCgpe1xuXG4gICAgfVxuICAgIHNldFJlcXVpcmVkKHY6Ym9vbGVhbil7XG5cbiAgICB9XG59XG5jbGFzcyBNYXJrZG93bkZpZWxkIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIHZhciBlZGl0b3IgPSBuZXcgTWFya2Rvd25GaWVsZFVJKFwiXCIseD0+e30pO1xuICAgICAgICByZXR1cm4gZWRpdG9yO1xuICAgIH1cblxuICAgIG5lZWRzU2VwYXJhdGVMYWJlbCgpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbn1cbmNsYXNzIEV4YW1wbGVGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcbiAgICBjb25zdHJ1Y3RvcihvdXRsaW5lTm9kZTogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04sIGNvbnRleHQ6IERldGFpbHNDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKG91dGxpbmVOb2RlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICBjcmVhdGVGaWVsZCgpe1xuICAgICAgICB2YXIgZWRpdG9yID0gbmV3IEpTT05GaWVsZCh0aGlzLm91dGxpbmVOb2RlLnZhbHVlVGV4dCx4PT57fSk7XG4gICAgICAgIHJldHVybiBlZGl0b3I7XG4gICAgfVxuXG4gICAgbmVlZHNTZXBhcmF0ZUxhYmVsKCl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZyb21Nb2RlbFRvRWRpdG9yKCl7XG5cbiAgICB9XG5cbiAgICBmcm9tRWRpdG9yVG9Nb2RlbChuZXdWYWx1ZT8gOiBhbnksIG9sZFZhbHVlPyA6IGFueSl7XG5cbiAgICB9XG59XG5jbGFzcyBYTUxFeGFtcGxlRmllbGQgZXh0ZW5kcyBQcm9wZXJ0eUVkaXRvckluZm97XG5cbiAgICBjb25zdHJ1Y3RvcihvdXRsaW5lTm9kZTogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04sIGNvbnRleHQ6IERldGFpbHNDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKG91dGxpbmVOb2RlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICBjcmVhdGVGaWVsZCgpe1xuICAgICAgICB2YXIgZWRpdG9yID0gbmV3IFhNTEZpZWxkKHRoaXMub3V0bGluZU5vZGUudmFsdWVUZXh0LHg9Pnt9KTtcbiAgICAgICAgcmV0dXJuIGVkaXRvcjtcbiAgICB9XG5cbiAgICBuZWVkc1NlcGFyYXRlTGFiZWwoKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbU1vZGVsVG9FZGl0b3IoKXtcblxuICAgIH1cblxuICAgIGZyb21FZGl0b3JUb01vZGVsKG5ld1ZhbHVlPyA6IGFueSwgb2xkVmFsdWU/IDogYW55KXtcblxuICAgIH1cbn1cbmNsYXNzIFhNTFNjaGVtYUZpZWxkIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIHZhciBlZGl0b3IgPSBuZXcgWE1MRmllbGQoXCJcIix4PT57fSk7XG4gICAgICAgIHJldHVybiBlZGl0b3I7XG4gICAgfVxuXG4gICAgbmVlZHNTZXBhcmF0ZUxhYmVsKCl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmNsYXNzIEpTT05TY2hlbWFGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcbiAgICBjcmVhdGVGaWVsZCgpe1xuICAgICAgICBsZXQgZWRpdG9yID0gbmV3IEpTT05GaWVsZChcIlwiLHg9Pnt9KTtcbiAgICAgICAgcmV0dXJuIGVkaXRvcjtcbiAgICB9XG5cbiAgICBuZWVkc1NlcGFyYXRlTGFiZWwoKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuY2xhc3MgU2VsZWN0Qm94IGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIG91dGxpbmVOb2RlIDogcmFtbFNlcnZlci5EZXRhaWxzSXRlbVdpdGhPcHRpb25zSlNPTiwgY29udGV4dDogRGV0YWlsc0NvbnRleHQpIHtcbiAgICAgICAgc3VwZXIob3V0bGluZU5vZGUsIGNvbnRleHQpXG4gICAgfVxuXG4gICAgY3JlYXRlRmllbGQoKXtcbiAgICAgICAgbGV0IG9wdGlvbnM9IHRoaXMub3V0bGluZU5vZGUub3B0aW9ucz90aGlzLm91dGxpbmVOb2RlLm9wdGlvbnM6W107XG5cbiAgICAgICAgbGV0IHNlbGVjdD0gbmV3IFVJLlNlbGVjdEZpZWxkKHRoaXMub3V0bGluZU5vZGUudGl0bGUseD0+e30sXCJcIixVSS5JY29uLk5PTkUsb3B0aW9ucyk7XG5cbiAgICAgICAgc2VsZWN0LmdldEFjdHVhbEZpZWxkKCkuc2V0T3B0aW9ucyhvcHRpb25zKVxuXG4gICAgICAgIHJldHVybiBzZWxlY3Q7XG4gICAgfVxuXG59XG5cbmNsYXNzIFR5cGVTZWxlY3RCb3ggZXh0ZW5kcyBTZWxlY3RCb3gge1xuXG4gICAgZnJvbUVkaXRvclRvTW9kZWwobmV3VmFsdWU/IDogYW55LCBvbGRWYWx1ZT8gOiBhbnkpe1xuICAgICAgICAvLyAvL2N1cnJlbnQgaW1wbGVtZW50YXRpb24gb25seSBhbGxvd3MgY2hhbmdpbmcgdGhlIGZhY2V0cyBvZiBjZXJ0YWluIHR5cGVzIGZvciBzYWZldHlcbiAgICAgICAgLy8gLy9UT0RPIGNoYW5nZSB0aGlzIHRvIGFyYml0cmFyeSBmYWNldHMgKHJlbW92ZSB0eXBlIGZpbHRlcmluZylcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdmFyIG9sZE5hbWVzIDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgLy8gdmFyIHNhdmVkQXR0cnMgPSBbXTtcbiAgICAgICAgLy8gaWYgKG5ld1ZhbHVlICYmIG9sZFZhbHVlKSB7XG4gICAgICAgIC8vICAgICB0cnkge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMubm9kZS5kZWZpbml0aW9uKCkuYWxsU3VwZXJUeXBlcygpLmZvckVhY2goc3VwZXJUeXBlPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAodGhpcy5pc0FsbG93ZWRUeXBlVG9SZXBsYWNlRmFjZXRzKHN1cGVyVHlwZSkpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuYWRkVHlwZUZhY2V0cyhzdXBlclR5cGUsIG9sZE5hbWVzKVxuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICBzYXZlZEF0dHJzID0gW10uY29uY2F0KHRoaXMubm9kZS5hdHRycygpKVxuICAgICAgICAvLyAgICAgfSBjYXRjaCAoZXJyKSB7Y29uc29sZS5sb2coZXJyKX1cbiAgICAgICAgLy8gfVxuICAgICAgICAvL1xuICAgICAgICAvLyBzdXBlci5mcm9tRWRpdG9yVG9Nb2RlbCgpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBpZiAobmV3VmFsdWUgJiYgb2xkVmFsdWUpIHtcbiAgICAgICAgLy8gICAgIHRyeSB7XG4gICAgICAgIC8vICAgICAgICAgLy9jb2xsZWN0aW5nIGZhY2V0cyBhbGxvd2VkIHRvIHJlbW92ZVxuICAgICAgICAvLyAgICAgICAgIHZhciBjdXJyZW50VW5pdmVyc2UgPSB0aGlzLm5vZGUuZGVmaW5pdGlvbigpLnVuaXZlcnNlKCk7XG4gICAgICAgIC8vICAgICAgICAgdmFyIG5hbWVzIDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICB0aGlzLm5vZGUuZGVmaW5pdGlvbigpLmFsbFN1cGVyVHlwZXMoKS5mb3JFYWNoKHN1cGVyVHlwZT0+e1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAodGhpcy5pc0FsbG93ZWRUeXBlVG9SZXBsYWNlRmFjZXRzKHN1cGVyVHlwZSkpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuYWRkVHlwZUZhY2V0cyhzdXBlclR5cGUsIG5hbWVzKVxuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICBpZiAob2xkTmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHNhdmVkQXR0cnMuZm9yRWFjaChhdHRyaWJ1dGUgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKF8uZmluZChvbGROYW1lcywgZmFjZXROYW1lID0+IGZhY2V0TmFtZSA9PSBhdHRyaWJ1dGUubmFtZSgpKVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICYmICFfLmZpbmQobmFtZXMsIGZhY2V0TmFtZSA9PiBmYWNldE5hbWUgPT0gYXR0cmlidXRlLm5hbWUoKSkpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlKGF0dHJpYnV0ZSlcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9IGNhdGNoIChlcnIpIHtjb25zb2xlLmxvZyhlcnIpfVxuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgLy8gcHJpdmF0ZSBpc0FsbG93ZWRUeXBlVG9SZXBsYWNlRmFjZXRzKGN1cnJlbnRUeXBlRGVmIDogaGwuSVR5cGVEZWZpbml0aW9uKSA6IGJvb2xlYW4ge1xuICAgIC8vICAgICByZXR1cm4gY3VycmVudFR5cGVEZWYua2V5KCkgPT0gdW5pdmVyc2UuVW5pdmVyc2UxMC5TdHJpbmdUeXBlRGVjbGFyYXRpb24gfHxcbiAgICAvLyAgICAgICAgIGN1cnJlbnRUeXBlRGVmLmtleSgpID09IHVuaXZlcnNlLlVuaXZlcnNlMTAuQm9vbGVhblR5cGVEZWNsYXJhdGlvbiB8fFxuICAgIC8vICAgICAgICAgY3VycmVudFR5cGVEZWYua2V5KCkgPT0gdW5pdmVyc2UuVW5pdmVyc2UxMC5OdW1iZXJUeXBlRGVjbGFyYXRpb24gfHxcbiAgICAvLyAgICAgICAgIGN1cnJlbnRUeXBlRGVmLmtleSgpID09IHVuaXZlcnNlLlVuaXZlcnNlMTAuSW50ZWdlclR5cGVEZWNsYXJhdGlvbjtcbiAgICAvLyB9XG5cbiAgICAvLyBwcml2YXRlIGFkZFR5cGVGYWNldHMoY3VycmVudFR5cGVEZWYgOiBobC5JVHlwZURlZmluaXRpb24gLCBuYW1lcyA6IHN0cmluZ1tdKSA6IHZvaWQge1xuICAgIC8vICAgICBjdXJyZW50VHlwZURlZi5wcm9wZXJ0aWVzKCkubWFwKHByb3BlcnR5PT5wcm9wZXJ0eS5uYW1lSWQoKSkuZm9yRWFjaChuYW1lPT5uYW1lcy5wdXNoKG5hbWUpKTtcbiAgICAvLyB9XG59XG5cbmNsYXNzIFRyZWVGaWVsZCBleHRlbmRzIFVJLlBhbmVsIGltcGxlbWVudHMgVUkuSUZpZWxkPGFueT57XG5cbiAgICBjb25zdHJ1Y3RvcihvdXRsaW5lTm9kZSA6IHJhbWxTZXJ2ZXIuRGV0YWlsc0l0ZW1KU09OLCBwcm90ZWN0ZWQgY29udGV4dDogRGV0YWlsc0NvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB2YXIgcmVuZGVyZXI9e1xuXG5cbiAgICAgICAgICAgIHJlbmRlcihub2RlIDogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04pe1xuXG4gICAgICAgICAgICAgICAgdmFyIGxlZnQ9VUkubGFiZWwobm9kZS50aXRsZSxVSS5JY29uLkNJUkNVSVRfQk9BUkQsVUkuVGV4dENsYXNzZXMuSElHSExJR0hUKTtcblxuICAgICAgICAgICAgICAgIHZhciByaWdodD1VSS5sYWJlbChub2RlLnZhbHVlVGV4dD8oXCI6XCIrbm9kZS52YWx1ZVRleHQpOlwiXCIsXG4gICAgICAgICAgICAgICAgICAgIFVJLkljb24uTk9ORSxVSS5UZXh0Q2xhc3Nlcy5TVUNDRVNTKTtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ9VUkuaGMobGVmdCxyaWdodCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRDaGlsZHJlbiA9IChub2RlIDogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNoaWxkcmVuP25vZGUuY2hpbGRyZW46W107XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmlld2VyPVVJLnRyZWVWaWV3ZXIoZ2V0Q2hpbGRyZW4sIHJlbmRlcmVyLCB4ID0+IHgudGl0bGUpO1xuXG4gICAgICAgIHZhciBpbnB1dFZhbHVlPXtcbiAgICAgICAgICAgIGNoaWxkcmVuOltvdXRsaW5lTm9kZV1cbiAgICAgICAgfVxuXG4gICAgICAgIHZpZXdlci5zZXRJbnB1dCg8YW55PmlucHV0VmFsdWUpO1xuXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoVUkubGFiZWwob3V0bGluZU5vZGUudGl0bGUpKVxuXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodmlld2VyKTtcbiAgICB9XG5cblxuXG4gICAgc2V0TGFiZWxXaWR0aCgpe1xuXG4gICAgfVxuICAgIHNldExhYmVsSGVpZ2h0KCl7XG5cbiAgICB9XG4gICAgc2V0UmVxdWlyZWQodjpib29sZWFuKXtcblxuICAgIH1cbn1cbmNsYXNzIFN0cnVjdHVyZWRGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcblxuICAgIGNyZWF0ZUZpZWxkKCl7XG5cbiAgICAgICAgbGV0IGNoaWxkcmVuID0gdGhpcy5vdXRsaW5lTm9kZS5jaGlsZHJlbjtcbiAgICAgICAgaWYgKCFjaGlsZHJlbiB8fCBjaGlsZHJlbi5sZW5ndGggIT0gMSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIHRtPSBuZXcgVHJlZUZpZWxkKGNoaWxkcmVuWzBdLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdG07XG4gICAgfVxufVxuXG5jbGFzcyBMb3dMZXZlbFRyZWVGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcblxuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMub3V0bGluZU5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmICghY2hpbGRyZW4gfHwgY2hpbGRyZW4ubGVuZ3RoICE9IDEpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciB0bT0gbmV3IFRyZWVGaWVsZChjaGlsZHJlblswXSwgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRtO1xuICAgIH1cbn1cblxuLy8gZnVuY3Rpb24gY2F0ZWdvcnkocDpobC5JUHJvcGVydHksbm9kZTpobC5JSGlnaExldmVsTm9kZSk6c3RyaW5ne1xuLy8gICAgIGlmIChwLmdldEFkYXB0ZXIoZGVmLlJBTUxQcm9wZXJ0eVNlcnZpY2UpLmlzS2V5KCl8fHAuaXNSZXF1aXJlZCgpKXtcbi8vICAgICAgICAgcmV0dXJuIG51bGw7XG4vLyAgICAgfVxuLy8gICAgIGlmIChwLmRvbWFpbigpJiYhcC5kb21haW4oKS5nZXRBZGFwdGVyKGRlZi5SQU1MU2VydmljZSkuaXNVc2VyRGVmaW5lZCgpKSB7XG4vLyAgICAgICAgIGlmICh1bml2ZXJzZWhlbHBlcnMuaXNEb2N1bWVudGF0aW9uUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc1VzYWdlUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc0Rlc2NyaXB0aW9uUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc0Rpc3BsYXlOYW1lUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc1RpdGxlUHJvcGVydHkocCkpIHtcbi8vICAgICAgICAgICAgIHJldHVybiBcIkRvY3VtZW50YXRpb25cIjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAodW5pdmVyc2VoZWxwZXJzLmlzQW5ub3RhdGlvbnNQcm9wZXJ0eShwKSB8fFxuLy8gICAgICAgICAgICAgdW5pdmVyc2VoZWxwZXJzLmlzSXNQcm9wZXJ0eShwKSB8fFxuLy8gICAgICAgICAgICAgdW5pdmVyc2VoZWxwZXJzLmlzU2VjdXJlZEJ5UHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgICh1bml2ZXJzZWhlbHBlcnMuaXNUeXBlUHJvcGVydHkocCkmJiFwLmdldEFkYXB0ZXIoZGVmLlJBTUxQcm9wZXJ0eVNlcnZpY2UpLmlzVHlwZUV4cHIoKSkpIHtcbi8vICAgICAgICAgICAgIHJldHVybiBcIlJlZmVyZW5jZXNcIjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAodW5pdmVyc2VoZWxwZXJzLmlzUHJvdG9jb2xzUHJvcGVydHkocCkpe1xuLy8gICAgICAgICAgICAgcmV0dXJuIFwiR2VuZXJhbFwiO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy9cbi8vICAgICBpZiAodW5pdmVyc2VoZWxwZXJzLmlzVHlwZVByb3BlcnR5KHApKXtcbi8vICAgICAgICAgaWYgKHAuZG9tYWluKCkmJiFwLmRvbWFpbigpLmdldEFkYXB0ZXIoZGVmLlJBTUxTZXJ2aWNlKS5pc1VzZXJEZWZpbmVkKCkpe1xuLy8gICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyAgICAgaWYgKG5vZGUucHJvcGVydHkoKSkge1xuLy8gICAgICAgICBpZiAocC5kb21haW4oKSAmJiBwLmRvbWFpbigpICE9IG5vZGUucHJvcGVydHkoKS5yYW5nZSgpKSB7XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJGYWNldHNcIjtcbi8vICAgICAgICAgfVxuLy8gICAgIH1cbi8vICAgICByZXR1cm4gXCJHZW5lcmFsXCI7XG4vLyB9XG4vL1xuLy8gdmFyIHZhbHVlT3B0aW9ucyA9IGZ1bmN0aW9uICh4OmhsLklQcm9wZXJ0eSwgbm9kZTpobC5JSGlnaExldmVsTm9kZSk6c3RyaW5nW10ge1xuLy8gICAgIHZhciB2bHMgPSBzZWFyY2guZW51bVZhbHVlcyh4LG5vZGUpO1xuLy8gICAgIGlmICh1bml2ZXJzZWhlbHBlcnMuaXNOYW1lUHJvcGVydHkoeCkpe1xuLy8gICAgICAgICBpZiAobm9kZS5kZWZpbml0aW9uKCkuaXNBc3NpZ25hYmxlRnJvbSh1bml2ZXJzZS5Vbml2ZXJzZTEwLlR5cGVEZWNsYXJhdGlvbi5uYW1lKSl7XG4vLyAgICAgICAgICAgICBpZiAobm9kZS5wcm9wZXJ0eSgpJiZ1bml2ZXJzZWhlbHBlcnMuaXNCb2R5UHJvcGVydHkobm9kZS5wcm9wZXJ0eSgpKSl7XG4vLyAgICAgICAgICAgICAgICAgaWYgKCEobm9kZS5wcm9wZXJ0eSgpIGluc3RhbmNlb2YgZGVmLlVzZXJEZWZpbmVkUHJvcCkpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50KCkmJlxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgdW5pdmVyc2VoZWxwZXJzLmlzTWV0aG9kVHlwZShub2RlLnBhcmVudCgpLmRlZmluaXRpb24oKSkpe1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcImFwcGxpY2F0aW9uL2pzb25cIiwgXCJhcHBsaWNhdGlvbi94bWxcIixcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXVxuLy8gICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXCJhcHBsaWNhdGlvbi9qc29uXCIsIFwiYXBwbGljYXRpb24veG1sXCJdXG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIGlmICgoIXZscykgfHwgdmxzLmxlbmd0aCA9PSAwKSB7XG4vLyAgICAgICAgIHZhciBzdWcgPSAoPGRlZi5Qcm9wZXJ0eT54KS5zdWdnZXN0ZXIoKVxuLy8gICAgICAgICBpZiAoc3VnKSB7XG4vLyAgICAgICAgICAgICB2bHMgPSBzdWcobm9kZSk7XG4vL1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmICgoIXZscykgfHwgdmxzLmxlbmd0aCA9PSAwKSB7XG4vLyAgICAgICAgICAgICB2bHMgPSAoPGRlZi5Qcm9wZXJ0eT54KS5nZXRPZnRlbktleXMoKTtcbi8vXG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIF8udW5pcXVlKHZscyk7XG4vLyB9O1xuLy9cbi8vIGZ1bmN0aW9uIGFkZEV4YW1wbGVDb250cm9sKHByb3BlcnR5OiBobC5JUHJvcGVydHksIG5vZGUgOiBobC5JSGlnaExldmVsTm9kZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVFbGVtZW50IDogaGwuSUhpZ2hMZXZlbE5vZGUsIGV4YW1wbGUgOiBkZWYucnQubm9taW5hbFR5cGVzLklFeHBhbmRhYmxlRXhhbXBsZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA6IFRvcExldmVsTm9kZSkge1xuLy9cbi8vICAgICBpZiAoZXhhbXBsZS5pc1lBTUwoKSkge1xuLy8gICAgICAgICBjb250YWluZXIuYWRkSXRlbVRvQ2F0ZWdvcnkoY2F0ZWdvcnkocHJvcGVydHksIG5vZGUpLFxuLy8gICAgICAgICAgICAgbmV3IExvd0xldmVsVHJlZUZpZWxkKHByb3BlcnR5LCBub2RlLCBleGFtcGxlRWxlbWVudC5sb3dMZXZlbCgpLCBleGFtcGxlLm5hbWUoKSkpO1xuLy8gICAgIH0gZWxzZSBpZiAoZXhhbXBsZS5pc0pTT05TdHJpbmcoKSkge1xuLy8gICAgICAgICBjb250YWluZXIuYWRkSXRlbVRvQ2F0ZWdvcnkoY2F0ZWdvcnkocHJvcGVydHksIG5vZGUpLFxuLy8gICAgICAgICAgICAgbmV3IEV4YW1wbGVGaWVsZChwcm9wZXJ0eSwgbm9kZSwgZXhhbXBsZS5hc1N0cmluZygpLCBleGFtcGxlLm5hbWUoKSkpO1xuLy8gICAgIH0gZWxzZSBpZiAoZXhhbXBsZS5pc1hNTFN0cmluZygpKSB7XG4vLyAgICAgICAgIGNvbnRhaW5lci5hZGRJdGVtVG9DYXRlZ29yeShjYXRlZ29yeShwcm9wZXJ0eSwgbm9kZSksXG4vLyAgICAgICAgICAgICBuZXcgWE1MRXhhbXBsZUZpZWxkKHByb3BlcnR5LCBub2RlLCBleGFtcGxlLmFzU3RyaW5nKCksIGV4YW1wbGUubmFtZSgpKSk7XG4vLyAgICAgfVxuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRJdGVtKGRldGFpbHNOb2RlOnJhbWxTZXJ2ZXIuRGV0YWlsc0l0ZW1KU09OLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCwgZGlhbG9nOmJvb2xlYW4pe1xuXG5cbiAgICBsZXQgcm9vdD1uZXcgVG9wTGV2ZWxOb2RlKGRldGFpbHNOb2RlLCBjb250ZXh0KTtcblxuICAgIGlmKGRldGFpbHNOb2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGRldGFpbHNOb2RlLmNoaWxkcmVuKSB7XG5cbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09IFwiQ0FURUdPUllcIikge1xuXG4gICAgICAgICAgICAgICAgbGV0IGNhdGVnb3J5TmFtZSA9IGNoaWxkLnRpdGxlO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZE9mQ2hpbGQgb2YgY2hpbGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkSXRlbUluQ2F0ZWdvcnkoY2hpbGRPZkNoaWxkLCByb290LCBjYXRlZ29yeU5hbWUsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1aWxkSXRlbUluQ2F0ZWdvcnkoY2hpbGQsIHJvb3QsIG51bGwsIGNvbnRleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gYnVpbGRJdGVtSW5DYXRlZ29yeShcbiAgICBkZXRhaWxzTm9kZTogcmFtbFNlcnZlci5EZXRhaWxzSXRlbUpTT04sIHJvb3Q6IFRvcExldmVsTm9kZSwgY2F0ZWdvcnlOYW1lOnN0cmluZyxcbiAgICBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCkge1xuXG4gICAgbGV0IGl0ZW0gPSBudWxsO1xuXG4gICAgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIkNIRUNLQk9YXCIpIHtcbiAgICAgICAgaXRlbSA9IG5ldyBDaGVja0JveEZpZWxkKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIkpTT05TQ0hFTUFcIlxuICAgICAgICAmJiAoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlKS52YWx1ZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgaXRlbSA9IG5ldyBKU09OU2NoZW1hRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiWE1MU0NIRU1BXCJcbiAgICAgICAgJiYgKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSkudmFsdWVUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgWE1MU2NoZW1hRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiTUFSS0RPV05cIikge1xuICAgICAgICBpdGVtID0gbmV3IE1hcmtkb3duRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiU0VMRUNUQk9YXCJcbiAgICAgICAgJiYgKDxyYW1sU2VydmVyLkRldGFpbHNJdGVtV2l0aE9wdGlvbnNKU09OPmRldGFpbHNOb2RlKS5vcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgU2VsZWN0Qm94KDxyYW1sU2VydmVyLkRldGFpbHNJdGVtV2l0aE9wdGlvbnNKU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiTVVMVElFRElUT1JcIikge1xuICAgICAgICBpdGVtID0gbmV3IFNpbXBsZU11bHRpRWRpdG9yKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIlRSRUVcIikge1xuICAgICAgICBpdGVtID0gbmV3IExvd0xldmVsVHJlZUZpZWxkKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIlNUUlVDVFVSRURcIikge1xuICAgICAgICBpdGVtID0gbmV3IFN0cnVjdHVyZWRGaWVsZCg8cmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04+ZGV0YWlsc05vZGUsIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmKGRldGFpbHNOb2RlLnR5cGUgPT0gXCJUWVBFRElTUExBWVwiKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgVHlwZURpc3BsYXlJdGVtKGRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiVFlQRVNFTEVDVFwiKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgVHlwZVNlbGVjdEJveCg8cmFtbFNlcnZlci5EZXRhaWxzSXRlbVdpdGhPcHRpb25zSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIkpTT05FWEFNUExFXCJcbiAgICAgICAgJiYgKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSkudmFsdWVUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgRXhhbXBsZUZpZWxkKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIlhNTEVYQU1QTEVcIlxuICAgICAgICAmJiAoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlKS52YWx1ZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgaXRlbSA9IG5ldyBYTUxFeGFtcGxlRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiQVRUUklCVVRFVEVYVFwiKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgUHJvcGVydHlFZGl0b3JJbmZvKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgaWYgKGl0ZW0gIT0gbnVsbCkge1xuICAgICAgICByb290LmFkZEl0ZW1Ub0NhdGVnb3J5KGNhdGVnb3J5TmFtZSwgaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYW4gbm90IHJlY29nbml6ZSBlbGVtZW50IFwiICsgZGV0YWlsc05vZGUudHlwZSk7XG4gICAgfVxufSJdfQ==\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"underscore\");\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar fs = __webpack_require__(12);\n\tvar path = __webpack_require__(2);\n\tvar UI = __webpack_require__(5);\n\tvar SpacePenViews = __webpack_require__(7);\n\t// import yaml = require(\"yaml-ast-parser\")\n\tvar linterUI = __webpack_require__(13);\n\tvar editorTools = __webpack_require__(1);\n\tvar ramlServer = __webpack_require__(17);\n\tvar textEditProcessor = ramlServer.textEditProcessor;\n\t// export function createGlobalSchema(attr:hl.IAttribute){\n\t//     var r=attr.parent().root();\n\t//     var t:def.NodeClass=<def.NodeClass>attr.property().range().universe().type(\"GlobalSchema\");\n\t//     var sc=stubs.createStubNode(t,(<any>t.universe().type(\"Api\")).property(\"schemas\"),\"\"+attr.value());\n\t//     sc.attrOrCreate(\"value\").setValue(\"!include \"+\"schemas/\"+attr.value()+\".json\")\n\t//     r.add(sc);\n\t//     var ed=atom.workspace.getActiveTextEditor();\n\t//     ed.getBuffer().setText(r.lowLevel().unit().contents());\n\t//     var sdir=path.resolve(path.dirname(ed.getPath()),\"schemas\");\n\t//     if (!fs.existsSync(sdir)){\n\t//         fs.mkdirSync(sdir);\n\t//     }\n\t//     var shFile=path.resolve(sdir,attr.value()+\".json\");\n\t//     fs.writeFileSync(shFile,`\n\t// {\n\t//   \"$schema\" : \"http://json-schema.org/draft-04/schema\" ,\n\t//   \"type\" : \"object\" ,\n\t//   \"properties\" : {\n\t//    }\n\t// }\n\t// `)\n\t//    atom.workspace.open(shFile,{});\n\t// }\n\t// export function createGlobalSchemaFromNameAndContent(root:hl.IHighLevelNode,name:string,schp:string,content:string, absolutePath?: string){\n\t//     if (universeHelpers.isRAML10Node(root)) {\n\t//         createGlobalSchemaFromNameAndContent10(root, name, schp, content, absolutePath);\n\t//     } else if (universeHelpers.isRAML08Node(root)) {\n\t//         createGlobalSchemaFromNameAndContent08(root, name, schp, content, absolutePath);\n\t//     }\n\t// }\n\tfunction createSchemaFile(content, schemaPath, absolutePath) {\n\t    var ed = getActiveEditor();\n\t    var sdir = absolutePath ? path.dirname(absolutePath) : path.resolve(path.dirname(ed.getPath()), path.dirname(schemaPath));\n\t    if (!fs.existsSync(sdir)) {\n\t        fs.mkdirSync(sdir);\n\t    }\n\t    var shFile = absolutePath ? absolutePath : path.resolve(path.dirname(ed.getPath()), schemaPath);\n\t    fs.writeFileSync(shFile, content);\n\t}\n\t// export function createGlobalSchemaFromNameAndContent10(root:hl.IHighLevelNode,name:string,\n\t//                                                        schemaPath:string,content:string, absolutePath?: string){\n\t//     var t:def.NodeClass=<def.NodeClass>root.definition().universe().type(universes.Universe10.TypeDeclaration.name);\n\t//     var sc=stubs.createStubNode(t,\n\t//         (<any>t.universe().type(universes.Universe10.Api.name)).property(universes.Universe10.Api.properties.types.name),\n\t//         \"\"+name);\n\t//\n\t//     sc.attrOrCreate(universes.Universe10.TypeDeclaration.properties.type.name).setValue(\"!include \"+schemaPath)\n\t//\n\t//     root.add(sc);\n\t//\n\t//     createSchemaFile(content, schemaPath, absolutePath);\n\t// }\n\t// export function createGlobalSchemaFromNameAndContent08(root:hl.IHighLevelNode,name:string,schp:string,content:string, absolutePath?: string){\n\t//     var t:def.NodeClass=<def.NodeClass>root.definition().universe().type(universes.Universe08.GlobalSchema.name);\n\t//     var sc=stubs.createStubNode(t,\n\t//         (<any>t.universe().type(universes.Universe08.Api.name)).property(universes.Universe08.Api.properties.schemas.name),\n\t//         \"\"+name);\n\t//\n\t//     sc.attrOrCreate(universes.Universe08.GlobalSchema.properties.value.name).setValue(\"!include \"+schp)\n\t//\n\t//     root.add(sc);\n\t//\n\t//     createSchemaFile(content, schp, absolutePath);\n\t// }\n\t// export function saveExample(r:hl.IHighLevelNode,schp:string,content:string){\n\t//     var ed=getActiveEditor();\n\t//     var sdir=path.resolve(path.dirname(ed.getPath()),path.dirname(schp));\n\t//     if (!fs.existsSync(sdir)){\n\t//         fs.mkdirSync(sdir);\n\t//     }\n\t//     var shFile=path.resolve(path.dirname(ed.getPath()),schp);\n\t//     fs.writeFileSync(shFile,content)\n\t// }\n\tvar NewProjectDialog = /** @class */ (function () {\n\t    function NewProjectDialog(title) {\n\t        if (title === void 0) { title = \"Create RAML Project\"; }\n\t        this.title = title;\n\t        this.apititle = \"New API\";\n\t        this.version = \"v1\";\n\t        this.baseUri = \"http://api.samplehost.com\";\n\t        this._raml1 = true;\n\t        this._defStructure = true;\n\t        this._createSampleResource = true;\n\t        this.sourceValue = path.resolve(this.generateDefaultProjectParentFolder(), \"newRamlProject\");\n\t    }\n\t    NewProjectDialog.prototype.generateDefaultProjectParentFolder = function () {\n\t        return UI.fdUtils.getHome();\n\t    };\n\t    NewProjectDialog.prototype.extraContent = function (s) {\n\t    };\n\t    NewProjectDialog.prototype.validateProjectLocation = function (value) {\n\t        var toValidate = value ? value.trim() : \"\";\n\t        if (!toValidate) {\n\t            return UI.errorStatus(\"Path should't be empty\");\n\t        }\n\t        var parentDirectory = path.dirname(toValidate);\n\t        if (!parentDirectory || parentDirectory == \".\")\n\t            return UI.errorStatus(\"Can not find path parent\");\n\t        if (!fs.existsSync(parentDirectory))\n\t            return UI.errorStatus(\"Parent directory does not exist\");\n\t        return UI.okStatus();\n\t    };\n\t    NewProjectDialog.prototype.validateTitle = function (value) {\n\t        var toValidate = value ? value.trim() : \"\";\n\t        if (!toValidate || toValidate.length < 1) {\n\t            return UI.errorStatus(\"Title field is required\");\n\t        }\n\t        return UI.okStatus();\n\t    };\n\t    NewProjectDialog.prototype.show = function () {\n\t        var _this = this;\n\t        var zz = null;\n\t        var section = UI.section(this.title, UI.Icon.BOOK, false, false, UI.h3(\"Please select location to place your project:\")).pad(10, 10);\n\t        var panel = new UI.Panel(UI.LayoutType.BLOCK);\n\t        var statusLabel = UI.label(\"\", null, UI.TextClasses.ERROR);\n\t        var slf = new UI.CustomField(\"\", statusLabel, function (x) { return x; });\n\t        slf.setDisplay(this.validateProjectLocation(this.sourceValue).code == UI.StatusCode.ERROR);\n\t        panel.addChild(slf);\n\t        var projectLocationInput = UI.texfField(\"\", this.sourceValue, function (x) { return _this.sourceValue = x.getBinding().get(); });\n\t        projectLocationInput.getBinding().addValidator(function () { return _this.validateProjectLocation(_this.sourceValue); });\n\t        projectLocationInput.setStyle(\"width\", \"400px\");\n\t        projectLocationInput.getBinding().addListener(function (value) {\n\t            //var st = projectLocationInput.getBinding().status()\n\t            var st = _this.validateProjectLocation(value);\n\t            if (st.code != UI.StatusCode.ERROR) {\n\t                //this.updateUI(q, x)\n\t                statusLabel.setText(\"\");\n\t                statusLabel.setIcon(UI.Icon.NONE);\n\t                slf.setDisplay(false);\n\t            }\n\t            else {\n\t                statusLabel.setText(st.message);\n\t                statusLabel.setIcon(UI.Icon.BUG);\n\t                slf.setDisplay(true);\n\t            }\n\t        });\n\t        panel.addChild(\n\t        //UI.hc(\n\t        projectLocationInput\n\t        //UI.buttonSimple(\"Browse\",\n\t        //    ()=>UI.fdUtils..openFolderDialog(\"Select project location\",\n\t        //            newLocation=> {\n\t        //                this.sourceValue=newLocation\n\t        //                projectLocationInput.getBinding().set(newLocation)\n\t        //                //var atomEditor = projectLocationInput.getActualField()\n\t        //                //var atomEditorUI = atomEditor.ui()\n\t        //                //var atomEditorUIModel = atomEditorUI.getModel();\n\t        //                //atomEditorUIModel.setText(newLocation)\n\t        //            },\n\t        //            true, this.sourceValue)\n\t        //).margin(10,0).setStyle(\"margin-bottom\", \"0.75em\")\n\t        //).setPercentWidth(100)\n\t        );\n\t        panel.addChild(UI.h3(\"Title of your API:\"));\n\t        var titleStatusLabel = UI.label(\"\", null, UI.TextClasses.ERROR);\n\t        var titleStatusMessage = new UI.CustomField(\"\", titleStatusLabel, function (x) { return x; });\n\t        titleStatusMessage.setDisplay(false);\n\t        panel.addChild(titleStatusMessage);\n\t        var titleTextField = UI.texfField(\"\", this.apititle, function (x) { return _this.apititle = x.getBinding().get(); });\n\t        titleTextField.getBinding().addValidator(function () { return _this.validateTitle(_this.apititle); });\n\t        titleTextField.getBinding().addListener(function (value) {\n\t            var status = _this.validateTitle(value);\n\t            if (status.code !== UI.StatusCode.ERROR) {\n\t                titleStatusLabel.setText(\"\");\n\t                titleStatusLabel.setIcon(UI.Icon.NONE);\n\t                titleStatusMessage.setDisplay(false);\n\t            }\n\t            else {\n\t                titleStatusLabel.setText(status.message);\n\t                titleStatusLabel.setIcon(UI.Icon.BUG);\n\t                titleStatusMessage.setDisplay(true);\n\t            }\n\t        });\n\t        panel.addChild(titleTextField);\n\t        panel.addChild(UI.h3(\"Version of your API\"));\n\t        panel.addChild(UI.texfField(\"\", this.version, function (x) { return _this.version = x.getBinding().get(); }));\n\t        panel.addChild(UI.h3(\"Base URI of your API\"));\n\t        panel.addChild(UI.texfField(\"\", this.baseUri, function (x) { return _this.baseUri = x.getBinding().get(); }));\n\t        section.addChild(panel);\n\t        var r1 = UI.checkBox(\"Use RAML 1.0\");\n\t        r1.setValue(this._raml1);\n\t        r1.getBinding().addListener(function (x) { return _this._raml1 = r1.getValue(); });\n\t        section.addChild(r1);\n\t        var r2 = UI.checkBox(\"Create default directory structure\");\n\t        r2.setValue(this._defStructure);\n\t        r2.getBinding().addListener(function (x) { return _this._defStructure = r2.getValue(); });\n\t        section.addChild(r2);\n\t        var r3 = UI.checkBox(\"Create sample resource and method\");\n\t        r3.setValue(this._createSampleResource);\n\t        r3.getBinding().addListener(function (x) { return _this._createSampleResource = r3.getValue(); });\n\t        section.addChild(r3);\n\t        var buttonBar = UI.hc().setPercentWidth(100).setStyle(\"display\", \"flex\");\n\t        buttonBar.addChild(UI.label(\"\", null, null, null).setStyle(\"flex\", \"1\"));\n\t        buttonBar.addChild(UI.button(\"Cancel\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.NO_HIGHLIGHT, UI.Icon.NONE, function (x) { zz.destroy(); }).margin(10, 10));\n\t        buttonBar.addChild(UI.button(\"Create\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, function (x) {\n\t            if (_this.validateTitle(_this.apititle).code === UI.StatusCode.ERROR) {\n\t                return;\n\t            }\n\t            if (_this.validateProjectLocation(_this.sourceValue).code === UI.StatusCode.ERROR) {\n\t                return;\n\t            }\n\t            _this.onOk(zz);\n\t            zz.destroy();\n\t        }));\n\t        section.addChild(buttonBar);\n\t        zz = atom.workspace.addModalPanel({ item: section.renderUI() });\n\t    };\n\t    NewProjectDialog.prototype.createIfNotExist = function (p) {\n\t        var ps = path.resolve(this.sourceValue, p);\n\t        if (!fs.existsSync(ps)) {\n\t            fs.mkdirSync(ps);\n\t        }\n\t    };\n\t    NewProjectDialog.prototype.onOk = function (zz) {\n\t        if (!fs.existsSync(this.sourceValue)) {\n\t            fs.mkdirSync(this.sourceValue);\n\t        }\n\t        if (this._defStructure) {\n\t            this.createIfNotExist(\"schemas\");\n\t            this.createIfNotExist(\"examples\");\n\t            this.createIfNotExist(\"traits\");\n\t            this.createIfNotExist(\"resourceTypes\");\n\t            this.createIfNotExist(\"securitySchemes\");\n\t            this.createIfNotExist(\"documentation\");\n\t            if (this._raml1) {\n\t                this.createIfNotExist(\"notebooks\");\n\t                this.createIfNotExist(\"scripts\");\n\t            }\n\t        }\n\t        var content = createRAMLFile(this.apititle, this.version, this.baseUri, this._createSampleResource, this._raml1);\n\t        var ps = path.resolve(this.sourceValue, \"api.raml\");\n\t        fs.writeFileSync(ps, content);\n\t        atom.open({ pathsToOpen: [this.sourceValue, ps] });\n\t    };\n\t    return NewProjectDialog;\n\t}());\n\tfunction createRAMLFile(title, version, baseUri, sample, raml1) {\n\t    if (sample === void 0) { sample = true; }\n\t    if (raml1 === void 0) { raml1 = true; }\n\t    var apiLines = [(raml1 ? \"#%RAML 1.0\" : \"#%RAML 0.8\"), \"title: \" + title];\n\t    if (version)\n\t        apiLines.push(\"version: \" + version);\n\t    if (baseUri)\n\t        apiLines.push(\"baseUri: \" + baseUri);\n\t    var typesLines = [\n\t        'types:',\n\t        '  TestType:',\n\t        '    type: object',\n\t        '    properties:',\n\t        '      id: number',\n\t        '      optional?: string',\n\t        '      expanded:',\n\t        '        type: object',\n\t        '        properties:',\n\t        '          count: number'\n\t    ], resourceLines = [\n\t        '/helloWorld:',\n\t        '  get:',\n\t        '    responses:',\n\t        '      200:',\n\t        '        body:',\n\t        '          application/json:',\n\t        '            example: |',\n\t        '              {',\n\t        '                \"message\" : \"Hello World\"',\n\t        '              }'\n\t    ];\n\t    var result = apiLines;\n\t    if (sample) {\n\t        if (raml1)\n\t            result = result.concat(typesLines);\n\t        result = result.concat(resourceLines);\n\t    }\n\t    return result.join('\\n') + '\\n';\n\t}\n\texports.createRAMLFile = createRAMLFile;\n\tfunction newProject() {\n\t    new NewProjectDialog().show();\n\t}\n\texports.newProject = newProject;\n\t// export function moveResource(h:hl.IHighLevelNode){\n\t//     new move.MoveElementsDialog(h, \"Resource Type\",true).show()\n\t// }\n\tfunction splitOnLines(text) {\n\t    var lines = text.match(/^.*((\\r\\n|\\n|\\r)|$)/gm);\n\t    return lines;\n\t}\n\texports.splitOnLines = splitOnLines;\n\tfunction cleanEmptyLines(text) {\n\t    var lines = splitOnLines(text);\n\t    var rs = [];\n\t    for (var i = 0; i < lines.length; i++) {\n\t        if (lines[i].trim().length > 0) {\n\t            rs.push(lines[i]);\n\t        }\n\t    }\n\t    return rs.join(\"\");\n\t}\n\texports.cleanEmptyLines = cleanEmptyLines;\n\t//FIXME remove it from here duplication with jsyaml2lowLevel.ts\n\tfunction stripIndent(text, indent) {\n\t    var lines = splitOnLines(text);\n\t    var rs = [];\n\t    for (var i = 0; i < lines.length; i++) {\n\t        if (i == 0) {\n\t            rs.push(lines[0]);\n\t        }\n\t        else {\n\t            rs.push(lines[i].substring(indent.length));\n\t        }\n\t    }\n\t    return rs.join(\"\");\n\t}\n\t// var leadingIndent = function (node:lowLevel.ILowLevelASTNode, text:string) {\n\t//     var leading = \"\";\n\t//     var pos = node.start() - 1;\n\t//     while (pos > 0) {\n\t//         var ch = text[pos];\n\t//         if (ch == '\\r' || ch == '\\n') break;\n\t//         leading = ch + leading;\n\t//         pos--;\n\t//     }\n\t//     return leading;\n\t// };\n\tfunction indent(line) {\n\t    var rs = \"\";\n\t    for (var i = 0; i < line.length; i++) {\n\t        var c = line[i];\n\t        if (c == '\\r' || c == '\\n') {\n\t            continue;\n\t        }\n\t        if (c == ' ' || c == '\\t') {\n\t            rs += c;\n\t            continue;\n\t        }\n\t        break;\n\t    }\n\t    return rs;\n\t}\n\tfunction getActiveEditor() {\n\t    var activeEditor = atom.workspace.getActiveTextEditor();\n\t    if (activeEditor) {\n\t        return activeEditor;\n\t    }\n\t    if (editorTools.aquireManager())\n\t        return editorTools.aquireManager().getCurrentEditor();\n\t    return null;\n\t}\n\texports.getActiveEditor = getActiveEditor;\n\t/**\n\t * Sets active editor cursor at the position (starting from 0).\n\t * @param position\n\t */\n\tfunction gotoPosition(position) {\n\t    var activeEditor = getActiveEditor();\n\t    if (!activeEditor) {\n\t        return;\n\t    }\n\t    var bufferPos = activeEditor.getBuffer().positionForCharacterIndex(position);\n\t    activeEditor.setSelectedBufferRange({ start: bufferPos, end: bufferPos }, {});\n\t}\n\texports.gotoPosition = gotoPosition;\n\tfunction gotoDeclaration() {\n\t    var editor = getActiveEditor();\n\t    if (!editor)\n\t        return;\n\t    var position = editor.getCursorBufferPosition();\n\t    var offset = editor.getBuffer().characterIndexForPosition(position);\n\t    var path = editor.getPath();\n\t    ramlServer.getNodeClientConnection().openDeclaration(path, offset).then(function (locations) {\n\t        if (!locations)\n\t            return;\n\t        atom.workspace.open(locations[0].uri, {}).then(function (x) {\n\t            var activeEditor = getActiveEditor();\n\t            var p1 = activeEditor.getBuffer().positionForCharacterIndex(locations[0].range.start);\n\t            var p2 = activeEditor.getBuffer().positionForCharacterIndex(locations[0].range.end);\n\t            activeEditor.setSelectedBufferRange({ start: p1, end: p2 }, {});\n\t        });\n\t    });\n\t}\n\texports.gotoDeclaration = gotoDeclaration;\n\t// export class MoveToNewFileDialog{\n\t//\n\t//     constructor(private node:hl.IHighLevelNode){\n\t//\n\t//     }\n\t//     destination:string;\n\t//\n\t//     show(){\n\t//         var zz:any=null;\n\t//         var node=this.node;\n\t//         var vc=UI.section(\"Move node content to new file \",UI.Icon.GIST_NEW,false,false);\n\t//         var errorLabel=UI.label(\"please enter correct destination path\",UI.Icon.BUG,UI.TextClasses.ERROR,UI.HighLightClasses.NONE);\n\t//         vc.addChild(UI.vc(errorLabel));\n\t//         vc.addChild(UI.label(\"Please enter destination path\"));\n\t//         var txt=UI.texfField(\"\",\"\",x=>{\n\t//             if (!txt){\n\t//                 return;\n\t//             }\n\t//             this.destination=txt.getBinding().get();\n\t//             var isError=this.destination.trim().length==0\n\t//             if (!isError) {\n\t//                 if (path.extname(this.destination) != '.raml') {\n\t//                     isError = true;\n\t//                 }\n\t//             }\n\t//             if (!isError) {\n\t//                 var dir = path.resolve(path.dirname(getActiveEditor().getPath()), path.dirname(this.destination));\n\t//                 if (!fs.existsSync(dir)) {\n\t//                     isError = true;\n\t//                 }\n\t//                 else{\n\t//                     var st=fs.statSync(dir)\n\t//                     if (!st.isDirectory()){\n\t//                         isError=true;\n\t//                     }\n\t//                 }\n\t//             }\n\t//\n\t//             errorLabel.setDisplay(isError);\n\t//             okButton.setDisabled(isError);\n\t//         });\n\t//         vc.addChild(UI.vc(txt));\n\t//         var buttonBar=UI.hc().setPercentWidth(100).setStyle(\"display\",\"flex\");\n\t//         buttonBar.addChild(UI.label(\"\",null,null,null).setStyle(\"flex\",\"1\"))\n\t//         buttonBar.addChild(UI.button(\"Cancel\",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.NO_HIGHLIGHT,UI.Icon.NONE,x=>{zz.destroy()}).margin(10,10))\n\t//         var okButton=UI.button(\"Move\",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.SUCCESS,UI.Icon.NONE,x=>{\n\t//             var d=path.resolve(path.dirname(getActiveEditor().getPath()), this.destination);\n\t//             var dump=this.node.lowLevel().dump();\n\t//             var ci=splitOnLines(dump);\n\t//             var li=ci.length>1?indent(ci[1]):indent(ci[0]);\n\t//             dump=dump.substring(this.node.lowLevel().keyEnd()-this.node.lowLevel().start()+1).trim();\n\t//             dump=stripIndent(dump,li);\n\t//             dump=\"#%RAML 0.8 \"+this.node.definition().nameId()+\"\\n\"+dump;\n\t//             fs.writeFileSync(d,dump);\n\t//             //no we need to replace content of the node with text;\n\t//\n\t//             var txt=node.lowLevel().unit().contents();\n\t//             var endPart=txt.substring(node.lowLevel().end());\n\t//             var startPart=txt.substring(0,node.lowLevel().keyEnd()+1);\n\t//             var vl=startPart+\" !include \"+this.destination+endPart;\n\t//             getActiveEditor().setText(vl);\n\t//             zz.destroy();\n\t//         });\n\t//         okButton.setDisabled(true)\n\t//         buttonBar.addChild(okButton);\n\t//         vc.addChild(buttonBar)\n\t//         var html=vc.renderUI();\n\t//         zz=(<any>atom).workspace.addModalPanel( { item: html});\n\t//         html.focus();\n\t//     }\n\t//\n\t//\n\t// }\n\t// export function moveOut(h:hl.IHighLevelNode){\n\t//     new MoveToNewFileDialog(h).show()\n\t// }\n\tfunction revalidate() {\n\t    var currentEditor = getActiveEditor();\n\t    if (!currentEditor)\n\t        return;\n\t    linterUI.relint(currentEditor);\n\t}\n\texports.revalidate = revalidate;\n\t/**\n\t * Gets opened editor for specified path or uri.\n\t * Currently only returns active editor if applicable, in future may also return other opened editors.\n\t * @param path\n\t * @returns {any}\n\t */\n\tfunction getEditorByUriOrPath(path) {\n\t    //TODO consider also returning other opened editors\n\t    var activeEditor = getActiveEditor();\n\t    if (activeEditor.getPath() == path)\n\t        return activeEditor;\n\t    return null;\n\t}\n\texports.getEditorByUriOrPath = getEditorByUriOrPath;\n\t/**\n\t * Applies a set of changed documents to current documents and files\n\t * @param changedDocuments\n\t */\n\tfunction applyChangedDocuments(changedDocuments) {\n\t    for (var _i = 0, changedDocuments_1 = changedDocuments; _i < changedDocuments_1.length; _i++) {\n\t        var changedDocument = changedDocuments_1[_i];\n\t        var editor = getEditorByUriOrPath(changedDocument.uri);\n\t        var oldContents = null;\n\t        if (editor) {\n\t            oldContents = editor.getText();\n\t        }\n\t        else {\n\t            oldContents = fs.readFileSync(changedDocument.uri).toString();\n\t        }\n\t        var newText = null;\n\t        if (changedDocument.text) {\n\t            newText = changedDocument.text;\n\t        }\n\t        else if (changedDocument.textEdits) {\n\t            newText = textEditProcessor.applyDocumentEdits(oldContents, changedDocument.textEdits);\n\t        }\n\t        else {\n\t            continue;\n\t        }\n\t        if (editor) {\n\t            editor.getBuffer().setText(newText);\n\t        }\n\t        else {\n\t            fs.writeFileSync(changedDocument.uri, newText);\n\t        }\n\t    }\n\t}\n\texports.applyChangedDocuments = applyChangedDocuments;\n\t/**\n\t * Tries to detect the name/symbol at position.\n\t * In practise it is impossible to do properly in all cases unless having AST at hands\n\t * or making the server to do this, but MS LSP does not have an interface for this.\n\t *\n\t * @param contents\n\t * @param offset\n\t */\n\tfunction findCurrentName(contents, offset) {\n\t    //we cant use alpha-numeric detection due to potential non-english alphabets.\n\t    //so we have to defined some stop characters and expand the list when a bug case is detected\n\t    var stopCharacters = [\n\t        \"\\r\", \"\\n\", \"[\", \"]\", \":\", \".\", \",\", \" \", \"\\t\", \"{\", \"}\", \"'\", \"'\", \"\\\"\"\n\t    ];\n\t    var beginning = 0;\n\t    for (var currentOffset = offset - 1; currentOffset >= 0; currentOffset--) {\n\t        var currentChar = contents.charAt(currentOffset);\n\t        var found = false;\n\t        for (var _i = 0, stopCharacters_1 = stopCharacters; _i < stopCharacters_1.length; _i++) {\n\t            var stopChar = stopCharacters_1[_i];\n\t            if (currentChar == stopChar) {\n\t                beginning = currentOffset + 1;\n\t                found = true;\n\t                break;\n\t            }\n\t        }\n\t        if (found)\n\t            break;\n\t    }\n\t    var end = contents.length;\n\t    for (var currentOffset = offset; currentOffset < contents.length; currentOffset++) {\n\t        var currentChar = contents.charAt(currentOffset);\n\t        var found = false;\n\t        for (var _a = 0, stopCharacters_2 = stopCharacters; _a < stopCharacters_2.length; _a++) {\n\t            var stopChar = stopCharacters_2[_a];\n\t            if (currentChar == stopChar) {\n\t                end = currentOffset;\n\t                found = true;\n\t                break;\n\t            }\n\t        }\n\t        if (found)\n\t            break;\n\t    }\n\t    return contents.substring(beginning, end);\n\t}\n\t/**\n\t * Activates renaming for current active editor and cursor position\n\t */\n\tfunction renameRAMLElement() {\n\t    var editor = getActiveEditor();\n\t    if (!editor)\n\t        return;\n\t    if (path.extname(editor.getPath()) != '.raml')\n\t        return;\n\t    var position = editor.getCursorBufferPosition();\n\t    var offset = editor.getBuffer().characterIndexForPosition(position);\n\t    var editorPath = editor.getPath();\n\t    var currentName = findCurrentName(editor.getText(), offset);\n\t    UI.prompt(\"Enter new name for: \", function (newName) {\n\t        ramlServer.getNodeClientConnection().\n\t            rename(editorPath, offset, newName).then(function (changedDocuments) {\n\t            applyChangedDocuments(changedDocuments);\n\t        });\n\t    }, currentName);\n\t}\n\texports.renameRAMLElement = renameRAMLElement;\n\tvar getKeyValue = function (offset, txt) {\n\t    var m = offset;\n\t    for (var i = offset; i >= 0; i--) {\n\t        var c = txt.charAt(i);\n\t        if (c == ' ' || c == '\\r' || c == '\\n' || c == '\\t') {\n\t            m = i + 1;\n\t            break;\n\t        }\n\t    }\n\t    var res = \"\";\n\t    for (var i = m; m < txt.length; i++) {\n\t        var c = txt.charAt(i);\n\t        if (c == ' ' || c == '\\r' || c == '\\n' || c == '\\t' || c == ':') {\n\t            break;\n\t        }\n\t        res += c;\n\t    }\n\t    return res;\n\t};\n\t// export function select(){\n\t//     var ed=getActiveEditor();\n\t//     var request={editor:ed,bufferPosition:ed.getCursorBufferPosition()};\n\t//     var node=provider.getAstNode(request,false);\n\t//     if (!node){\n\t//         return;\n\t//     }\n\t//     var start=ed.getBuffer().positionForCharacterIndex(node.lowLevel().start());\n\t//     var end=ed.getBuffer().positionForCharacterIndex(node.lowLevel().end());\n\t//     ed.setSelectedBufferRange({start:start,end:end},{});\n\t// }\n\t//export function expandSignature(attr:hl.IAttribute){\n\t//    var tr=signature.convertToTrait(signature.parse(attr));\n\t//    //console.log('trait:\\n' + tr.highLevel().lowLevel().dump());\n\t//    var res = attr.parent();\n\t//    //pr.remove(attr); // incorrect usage!!! remove attributes as below\n\t//    attr.remove();\n\t//    tr.highLevel().elements().forEach(x=>{\n\t//        res.add(<any>x)\n\t//    });\n\t//    var ed=getActiveEditor();\n\t//    ed.setText(attr.root().lowLevel().unit().contents());\n\t//}\n\tfunction findUsagesImpl(renderer) {\n\t    if (renderer === void 0) { renderer = display; }\n\t    var editor = getActiveEditor();\n\t    var position = editor.getCursorBufferPosition();\n\t    var offset = editor.getBuffer().characterIndexForPosition(position);\n\t    var path = editor.getPath();\n\t    ramlServer.getNodeClientConnection().findReferences(path, offset).then(function (locations) {\n\t        if (!locations)\n\t            return;\n\t        renderer(locations);\n\t    });\n\t}\n\texports.findUsagesImpl = findUsagesImpl;\n\tfunction display(n) {\n\t    if (sv) {\n\t        sv.setInput(n);\n\t    }\n\t    else {\n\t        sv = new SearchResultView(n);\n\t        sv.panel = atom.workspace.addBottomPanel({ item: sv });\n\t    }\n\t}\n\tfunction findUsages() {\n\t    findUsagesImpl(display);\n\t}\n\texports.findUsages = findUsages;\n\tvar SearchResultView = /** @class */ (function (_super) {\n\t    __extends(SearchResultView, _super);\n\t    function SearchResultView(_result) {\n\t        var _this = _super.call(this) || this;\n\t        _this._result = _result;\n\t        _this.isAttached = false;\n\t        return _this;\n\t    }\n\t    SearchResultView.prototype.initialize = function () {\n\t        _super.prototype.initialize.apply(this, arguments);\n\t        return true;\n\t    };\n\t    SearchResultView.content = function () {\n\t        return this.div({ class: 'raml-console pane-item', tabindex: -1 });\n\t    };\n\t    SearchResultView.prototype.attached = function () {\n\t        if (this.isAttached) {\n\t            return;\n\t        }\n\t        this.load();\n\t        this.isAttached = true;\n\t    };\n\t    SearchResultView.prototype.setInput = function (_result) {\n\t        this._result = _result;\n\t        this.load();\n\t    };\n\t    SearchResultView.prototype.load = function () {\n\t        var _this = this;\n\t        var section = UI.section(\"References\", UI.Icon.SEARCH);\n\t        var view = UI.list(this._result, function (location) {\n\t            var p1 = getActiveEditor().getBuffer().positionForCharacterIndex(location.range.start);\n\t            var res = UI.hc(UI.a(location.uri, function (y) {\n\t                atom.workspace.open(location.uri, {}).then(function (x) {\n\t                    var activeEditor = getActiveEditor();\n\t                    var p1 = activeEditor.getBuffer().positionForCharacterIndex(location.range.start);\n\t                    var p2 = activeEditor.getBuffer().positionForCharacterIndex(location.range.end);\n\t                    activeEditor.setSelectedBufferRange({ start: p1, end: p2 }, {});\n\t                });\n\t            }), UI.label(\" line:\", UI.Icon.NONE, UI.TextClasses.SUBTLE).pad(5, 5), UI.label(\"\" + p1.row, UI.Icon.NONE, UI.TextClasses.SUCCESS));\n\t            return res;\n\t        });\n\t        view.setStyle(\"max-height\", \"400px\");\n\t        section.addChild(view);\n\t        section.addChild(UI.button(\"Close\", UI.ButtonSizes.SMALL, UI.ButtonHighlights.PRIMARY, UI.Icon.NONE, function (x) { _this.panel.destroy(); sv = null; }));\n\t        this.html(section.renderUI());\n\t    };\n\t    return SearchResultView;\n\t}(SpacePenViews.ScrollView));\n\tvar sv;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2RpYWxvZ3MvYXNzaXN0LXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtREFBbUQ7Ozs7Ozs7Ozs7OztBQUVuRCx1QkFBMEI7QUFDMUIsMkJBQThCO0FBYTlCLGdDQUFnQztBQUtoQyxvREFBc0Q7QUFNdEQsMkNBQTJDO0FBQzNDLDRDQUE4QztBQUU5QywwREFBNEQ7QUFDNUQsaURBQW1EO0FBRW5ELElBQU8saUJBQWlCLEdBQUcsVUFBVSxDQUFDLGlCQUFpQixDQUFBO0FBUXZELDBEQUEwRDtBQUMxRCxrQ0FBa0M7QUFDbEMsa0dBQWtHO0FBQ2xHLDBHQUEwRztBQUMxRyxxRkFBcUY7QUFDckYsaUJBQWlCO0FBQ2pCLG1EQUFtRDtBQUNuRCw4REFBOEQ7QUFDOUQsbUVBQW1FO0FBQ25FLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUIsUUFBUTtBQUNSLDBEQUEwRDtBQUMxRCxnQ0FBZ0M7QUFDaEMsSUFBSTtBQUNKLDJEQUEyRDtBQUMzRCx3QkFBd0I7QUFDeEIscUJBQXFCO0FBQ3JCLE9BQU87QUFDUCxJQUFJO0FBQ0osS0FBSztBQUNMLHFDQUFxQztBQUNyQyxJQUFJO0FBRUosOElBQThJO0FBQzlJLGdEQUFnRDtBQUNoRCwyRkFBMkY7QUFDM0YsdURBQXVEO0FBQ3ZELDJGQUEyRjtBQUMzRixRQUFRO0FBQ1IsSUFBSTtBQUVKLDBCQUEwQixPQUFnQixFQUFFLFVBQW1CLEVBQUUsWUFBc0I7SUFDbkYsSUFBSSxFQUFFLEdBQUMsZUFBZSxFQUFFLENBQUE7SUFDeEIsSUFBSSxJQUFJLEdBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUN2SCxFQUFFLENBQUMsQ0FBQyxDQUFD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QUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUNqRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBQyxFQUFFLENBQUMsR0FBRyxFQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtZQUN4RCxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2QsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBQyxPQUFPLENBQUMsQ0FBQztRQUNwQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBQyxVQUFBLENBQUMsSUFBRyxLQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUEsRUFBRSxHQUFDLElBQUksQ0FBQSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDcEksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBQ0wsdUJBQUM7QUFBRCxDQXhEQSxBQXdEQyxDQXhEOEIsYUFBYSxDQUFDLFVBQVUsR0F3RHREO0FBQ0QsSUFBSSxFQUFtQixDQUFDIiwiZmlsZSI6InNyYy9hdG9tL2RpYWxvZ3MvYXNzaXN0LXV0aWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbmltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vLyBpbXBvcnQgc3R1YnM9cnAuc3R1YnM7XG4vLyBpbXBvcnQgbG93TGV2ZWw9cnAubGw7XG4vLyBpbXBvcnQgaGw9cnAuaGw7XG5cbi8vIGltcG9ydCB1bml2ZXJzZXM9cnAudW5pdmVyc2VzO1xuLy9cbi8vIGltcG9ydCBzZWFyY2g9cnAuc2VhcmNoO1xuXG5cbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgcHJvdmlkZXI9cmVxdWlyZShcIi4uL3N1Z2dlc3Rpb24vcHJvdmlkZXJcIilcbmltcG9ydCBVST1yZXF1aXJlKFwiYXRvbS11aS1saWJcIilcblxuaW1wb3J0IHhtbHV0aWw9cmVxdWlyZShcIi4uLy4uL3V0aWwveG1sdXRpbFwiKVxuLy8gaW1wb3J0IGV4dHJhY3Q9cmVxdWlyZShcIi4vZXh0cmFjdEVsZW1lbnRzRGlhbG9nXCIpXG5pbXBvcnQgc2hlbWFnZW49cmVxdWlyZShcIi4uLy4uL3V0aWwvc2NoZW1hR2VuZXJhdG9yXCIpXG5pbXBvcnQgU3BhY2VQZW5WaWV3cyA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJylcbi8vIGltcG9ydCBkZWY9cnAuZHNcbi8vIHZhciBzZXJ2aWNlcz1kZWZcblxuLy8gaW1wb3J0IG1vdmU9cmVxdWlyZShcIi4vbW92ZUVsZW1lbnRzRGlhbG9nXCIpXG5pbXBvcnQgdG9vbHRpcD1yZXF1aXJlKFwiLi4vY29yZS90b29sdGlwLW1hbmFnZXJcIilcbi8vIGltcG9ydCB5YW1sID0gcmVxdWlyZShcInlhbWwtYXN0LXBhcnNlclwiKVxuaW1wb3J0IGxpbnRlclVJID0gcmVxdWlyZShcIi4uL2NvcmUvbGludGVyLXVpXCIpXG5cbmltcG9ydCBlZGl0b3JUb29scyA9IHJlcXVpcmUoXCIuLi9lZGl0b3ItdG9vbHMvZWRpdG9yLXRvb2xzXCIpXG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKVxuaW1wb3J0IHtJTG9jYXRpb259IGZyb20gXCJyYW1sLWxhbmd1YWdlLXNlcnZlci9kaXN0L2NvbW1vbi90eXBlSW50ZXJmYWNlc1wiO1xuaW1wb3J0IHRleHRFZGl0UHJvY2Vzc29yID0gcmFtbFNlcnZlci50ZXh0RWRpdFByb2Nlc3NvclxuXG4vLyBpbXBvcnQge3VuaXZlcnNlSGVscGVyc30gZnJvbSBcInJhbWwtMS1wYXJzZXIvZGlzdC9pbmRleFwiO1xuXG5pbnRlcmZhY2UgUXVpY2tGaXh7XG4gICAgdGl0bGU6c3RyaW5nXG4gICAgZXhlY3V0b3I6KCk9PnZvaWRcbn1cbi8vIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHbG9iYWxTY2hlbWEoYXR0cjpobC5JQXR0cmlidXRlKXtcbi8vICAgICB2YXIgcj1hdHRyLnBhcmVudCgpLnJvb3QoKTtcbi8vICAgICB2YXIgdDpkZWYuTm9kZUNsYXNzPTxkZWYuTm9kZUNsYXNzPmF0dHIucHJvcGVydHkoKS5yYW5nZSgpLnVuaXZlcnNlKCkudHlwZShcIkdsb2JhbFNjaGVtYVwiKTtcbi8vICAgICB2YXIgc2M9c3R1YnMuY3JlYXRlU3R1Yk5vZGUodCwoPGFueT50LnVuaXZlcnNlKCkudHlwZShcIkFwaVwiKSkucHJvcGVydHkoXCJzY2hlbWFzXCIpLFwiXCIrYXR0ci52YWx1ZSgpKTtcbi8vICAgICBzYy5hdHRyT3JDcmVhdGUoXCJ2YWx1ZVwiKS5zZXRWYWx1ZShcIiFpbmNsdWRlIFwiK1wic2NoZW1hcy9cIithdHRyLnZhbHVlKCkrXCIuanNvblwiKVxuLy8gICAgIHIuYWRkKHNjKTtcbi8vICAgICB2YXIgZWQ9YXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuLy8gICAgIGVkLmdldEJ1ZmZlcigpLnNldFRleHQoci5sb3dMZXZlbCgpLnVuaXQoKS5jb250ZW50cygpKTtcbi8vICAgICB2YXIgc2Rpcj1wYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGVkLmdldFBhdGgoKSksXCJzY2hlbWFzXCIpO1xuLy8gICAgIGlmICghZnMuZXhpc3RzU3luYyhzZGlyKSl7XG4vLyAgICAgICAgIGZzLm1rZGlyU3luYyhzZGlyKTtcbi8vICAgICB9XG4vLyAgICAgdmFyIHNoRmlsZT1wYXRoLnJlc29sdmUoc2RpcixhdHRyLnZhbHVlKCkrXCIuanNvblwiKTtcbi8vICAgICBmcy53cml0ZUZpbGVTeW5jKHNoRmlsZSxgXG4vLyB7XG4vLyAgIFwiJHNjaGVtYVwiIDogXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA0L3NjaGVtYVwiICxcbi8vICAgXCJ0eXBlXCIgOiBcIm9iamVjdFwiICxcbi8vICAgXCJwcm9wZXJ0aWVzXCIgOiB7XG4vLyAgICB9XG4vLyB9XG4vLyBgKVxuLy8gICAgYXRvbS53b3Jrc3BhY2Uub3BlbihzaEZpbGUse30pO1xuLy8gfVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50KHJvb3Q6aGwuSUhpZ2hMZXZlbE5vZGUsbmFtZTpzdHJpbmcsc2NocDpzdHJpbmcsY29udGVudDpzdHJpbmcsIGFic29sdXRlUGF0aD86IHN0cmluZyl7XG4vLyAgICAgaWYgKHVuaXZlcnNlSGVscGVycy5pc1JBTUwxME5vZGUocm9vdCkpIHtcbi8vICAgICAgICAgY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50MTAocm9vdCwgbmFtZSwgc2NocCwgY29udGVudCwgYWJzb2x1dGVQYXRoKTtcbi8vICAgICB9IGVsc2UgaWYgKHVuaXZlcnNlSGVscGVycy5pc1JBTUwwOE5vZGUocm9vdCkpIHtcbi8vICAgICAgICAgY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50MDgocm9vdCwgbmFtZSwgc2NocCwgY29udGVudCwgYWJzb2x1dGVQYXRoKTtcbi8vICAgICB9XG4vLyB9XG5cbmZ1bmN0aW9uIGNyZWF0ZVNjaGVtYUZpbGUoY29udGVudCA6IHN0cmluZywgc2NoZW1hUGF0aCA6IHN0cmluZywgYWJzb2x1dGVQYXRoPyA6IHN0cmluZykge1xuICAgIHZhciBlZD1nZXRBY3RpdmVFZGl0b3IoKVxuICAgIHZhciBzZGlyPWFic29sdXRlUGF0aCA/IHBhdGguZGlybmFtZShhYnNvbHV0ZVBhdGgpIDogcGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZShlZC5nZXRQYXRoKCkpLHBhdGguZGlybmFtZShzY2hlbWFQYXRoKSk7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHNkaXIpKXtcbiAgICAgICAgZnMubWtkaXJTeW5jKHNkaXIpO1xuICAgIH1cbiAgICB2YXIgc2hGaWxlPWFic29sdXRlUGF0aCA/IGFic29sdXRlUGF0aCA6IHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUoZWQuZ2V0UGF0aCgpKSxzY2hlbWFQYXRoKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHNoRmlsZSxjb250ZW50KVxufVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50MTAocm9vdDpobC5JSGlnaExldmVsTm9kZSxuYW1lOnN0cmluZyxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFQYXRoOnN0cmluZyxjb250ZW50OnN0cmluZywgYWJzb2x1dGVQYXRoPzogc3RyaW5nKXtcbi8vICAgICB2YXIgdDpkZWYuTm9kZUNsYXNzPTxkZWYuTm9kZUNsYXNzPnJvb3QuZGVmaW5pdGlvbigpLnVuaXZlcnNlKCkudHlwZSh1bml2ZXJzZXMuVW5pdmVyc2UxMC5UeXBlRGVjbGFyYXRpb24ubmFtZSk7XG4vLyAgICAgdmFyIHNjPXN0dWJzLmNyZWF0ZVN0dWJOb2RlKHQsXG4vLyAgICAgICAgICg8YW55PnQudW5pdmVyc2UoKS50eXBlKHVuaXZlcnNlcy5Vbml2ZXJzZTEwLkFwaS5uYW1lKSkucHJvcGVydHkodW5pdmVyc2VzLlVuaXZlcnNlMTAuQXBpLnByb3BlcnRpZXMudHlwZXMubmFtZSksXG4vLyAgICAgICAgIFwiXCIrbmFtZSk7XG4vL1xuLy8gICAgIHNjLmF0dHJPckNyZWF0ZSh1bml2ZXJzZXMuVW5pdmVyc2UxMC5UeXBlRGVjbGFyYXRpb24ucHJvcGVydGllcy50eXBlLm5hbWUpLnNldFZhbHVlKFwiIWluY2x1ZGUgXCIrc2NoZW1hUGF0aClcbi8vXG4vLyAgICAgcm9vdC5hZGQoc2MpO1xuLy9cbi8vICAgICBjcmVhdGVTY2hlbWFGaWxlKGNvbnRlbnQsIHNjaGVtYVBhdGgsIGFic29sdXRlUGF0aCk7XG4vLyB9XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHbG9iYWxTY2hlbWFGcm9tTmFtZUFuZENvbnRlbnQwOChyb290OmhsLklIaWdoTGV2ZWxOb2RlLG5hbWU6c3RyaW5nLHNjaHA6c3RyaW5nLGNvbnRlbnQ6c3RyaW5nLCBhYnNvbHV0ZVBhdGg/OiBzdHJpbmcpe1xuLy8gICAgIHZhciB0OmRlZi5Ob2RlQ2xhc3M9PGRlZi5Ob2RlQ2xhc3M+cm9vdC5kZWZpbml0aW9uKCkudW5pdmVyc2UoKS50eXBlKHVuaXZlcnNlcy5Vbml2ZXJzZTA4Lkdsb2JhbFNjaGVtYS5uYW1lKTtcbi8vICAgICB2YXIgc2M9c3R1YnMuY3JlYXRlU3R1Yk5vZGUodCxcbi8vICAgICAgICAgKDxhbnk+dC51bml2ZXJzZSgpLnR5cGUodW5pdmVyc2VzLlVuaXZlcnNlMDguQXBpLm5hbWUpKS5wcm9wZXJ0eSh1bml2ZXJzZXMuVW5pdmVyc2UwOC5BcGkucHJvcGVydGllcy5zY2hlbWFzLm5hbWUpLFxuLy8gICAgICAgICBcIlwiK25hbWUpO1xuLy9cbi8vICAgICBzYy5hdHRyT3JDcmVhdGUodW5pdmVyc2VzLlVuaXZlcnNlMDguR2xvYmFsU2NoZW1hLnByb3BlcnRpZXMudmFsdWUubmFtZSkuc2V0VmFsdWUoXCIhaW5jbHVkZSBcIitzY2hwKVxuLy9cbi8vICAgICByb290LmFkZChzYyk7XG4vL1xuLy8gICAgIGNyZWF0ZVNjaGVtYUZpbGUoY29udGVudCwgc2NocCwgYWJzb2x1dGVQYXRoKTtcbi8vIH1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIHNhdmVFeGFtcGxlKHI6aGwuSUhpZ2hMZXZlbE5vZGUsc2NocDpzdHJpbmcsY29udGVudDpzdHJpbmcpe1xuLy8gICAgIHZhciBlZD1nZXRBY3RpdmVFZGl0b3IoKTtcbi8vICAgICB2YXIgc2Rpcj1wYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGVkLmdldFBhdGgoKSkscGF0aC5kaXJuYW1lKHNjaHApKTtcbi8vICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoc2Rpcikpe1xuLy8gICAgICAgICBmcy5ta2RpclN5bmMoc2Rpcik7XG4vLyAgICAgfVxuLy8gICAgIHZhciBzaEZpbGU9cGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZShlZC5nZXRQYXRoKCkpLHNjaHApO1xuLy8gICAgIGZzLndyaXRlRmlsZVN5bmMoc2hGaWxlLGNvbnRlbnQpXG4vLyB9XG5cblxuY2xhc3MgTmV3UHJvamVjdERpYWxvZ3tcblxuICAgIHByb3RlY3RlZCBzb3VyY2VWYWx1ZTpzdHJpbmc7XG4gICAgcHJvdGVjdGVkIGFwaXRpdGxlOnN0cmluZz1cIk5ldyBBUElcIlxuICAgIHByb3RlY3RlZCB2ZXJzaW9uOnN0cmluZz1cInYxXCJcbiAgICBwcm90ZWN0ZWQgYmFzZVVyaTpzdHJpbmc9XCJodHRwOi8vYXBpLnNhbXBsZWhvc3QuY29tXCJcblxuICAgIHByb3RlY3RlZCBfcmFtbDE6Ym9vbGVhbj10cnVlO1xuICAgIHByb3RlY3RlZCBfZGVmU3RydWN0dXJlOmJvb2xlYW49dHJ1ZTtcbiAgICBwcm90ZWN0ZWQgX2NyZWF0ZVNhbXBsZVJlc291cmNlOmJvb2xlYW49dHJ1ZTtcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdGl0bGU6c3RyaW5nPVwiQ3JlYXRlIFJBTUwgUHJvamVjdFwiKXtcbiAgICAgICAgdGhpcy5zb3VyY2VWYWx1ZSA9IHBhdGgucmVzb2x2ZSh0aGlzLmdlbmVyYXRlRGVmYXVsdFByb2plY3RQYXJlbnRGb2xkZXIoKSwgXCJuZXdSYW1sUHJvamVjdFwiKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZURlZmF1bHRQcm9qZWN0UGFyZW50Rm9sZGVyKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gVUkuZmRVdGlscy5nZXRIb21lKCk7XG4gICAgfVxuXG4gICAgZXh0cmFDb250ZW50KHM6VUkuU2VjdGlvbil7XG5cbiAgICB9XG5cbiAgICB2YWxpZGF0ZVByb2plY3RMb2NhdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgdG9WYWxpZGF0ZSA6IHN0cmluZyA9IHZhbHVlID8gdmFsdWUudHJpbSgpIDogXCJcIjtcblxuICAgICAgICBpZighdG9WYWxpZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFVJLmVycm9yU3RhdHVzKFwiUGF0aCBzaG91bGQndCBiZSBlbXB0eVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnREaXJlY3RvcnkgPSBwYXRoLmRpcm5hbWUodG9WYWxpZGF0ZSlcbiAgICAgICAgaWYgKCFwYXJlbnREaXJlY3RvcnkgfHwgcGFyZW50RGlyZWN0b3J5ID09IFwiLlwiKSByZXR1cm4gVUkuZXJyb3JTdGF0dXMoXCJDYW4gbm90IGZpbmQgcGF0aCBwYXJlbnRcIilcblxuICAgICAgICBpZighZnMuZXhpc3RzU3luYyhwYXJlbnREaXJlY3RvcnkpKSByZXR1cm4gVUkuZXJyb3JTdGF0dXMoXCJQYXJlbnQgZGlyZWN0b3J5IGRvZXMgbm90IGV4aXN0XCIpXG5cbiAgICAgICAgcmV0dXJuIFVJLm9rU3RhdHVzKClcbiAgICB9XG5cbiAgICB2YWxpZGF0ZVRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHZhciB0b1ZhbGlkYXRlIDogc3RyaW5nID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiBcIlwiO1xuXG4gICAgICAgIGlmICghdG9WYWxpZGF0ZSB8fCB0b1ZhbGlkYXRlLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBVSS5lcnJvclN0YXR1cyhcIlRpdGxlIGZpZWxkIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVJLm9rU3RhdHVzKClcbiAgICB9XG5cbiAgICBzaG93KCl7XG4gICAgICAgIHZhciB6ej1udWxsO1xuICAgICAgICB2YXIgc2VjdGlvbj1VSS5zZWN0aW9uKHRoaXMudGl0bGUsVUkuSWNvbi5CT09LLGZhbHNlLGZhbHNlLFVJLmgzKFwiUGxlYXNlIHNlbGVjdCBsb2NhdGlvbiB0byBwbGFjZSB5b3VyIHByb2plY3Q6XCIpKS5wYWQoMTAsMTApXG5cbiAgICAgICAgdmFyIHBhbmVsID0gbmV3IFVJLlBhbmVsKFVJLkxheW91dFR5cGUuQkxPQ0spO1xuXG4gICAgICAgIHZhciBzdGF0dXNMYWJlbDpVSS5MYWJlbCA9IFVJLmxhYmVsKFwiXCIsIG51bGwsIFVJLlRleHRDbGFzc2VzLkVSUk9SKVxuICAgICAgICB2YXIgc2xmPW5ldyBVSS5DdXN0b21GaWVsZChcIlwiLCBzdGF0dXNMYWJlbCx4PT54KTtcbiAgICAgICAgc2xmLnNldERpc3BsYXkodGhpcy52YWxpZGF0ZVByb2plY3RMb2NhdGlvbih0aGlzLnNvdXJjZVZhbHVlKS5jb2RlID09IFVJLlN0YXR1c0NvZGUuRVJST1IpXG4gICAgICAgIHBhbmVsLmFkZENoaWxkKHNsZilcblxuICAgICAgICB2YXIgcHJvamVjdExvY2F0aW9uSW5wdXQgPSBVSS50ZXhmRmllbGQoXCJcIix0aGlzLnNvdXJjZVZhbHVlLHg9PnRoaXMuc291cmNlVmFsdWU9eC5nZXRCaW5kaW5nKCkuZ2V0KCkpXG4gICAgICAgIHByb2plY3RMb2NhdGlvbklucHV0LmdldEJpbmRpbmcoKS5hZGRWYWxpZGF0b3IoKCk9PnRoaXMudmFsaWRhdGVQcm9qZWN0TG9jYXRpb24odGhpcy5zb3VyY2VWYWx1ZSkpXG4gICAgICAgIHByb2plY3RMb2NhdGlvbklucHV0LnNldFN0eWxlKFwid2lkdGhcIixcIjQwMHB4XCIpO1xuICAgICAgICBwcm9qZWN0TG9jYXRpb25JbnB1dC5nZXRCaW5kaW5nKCkuYWRkTGlzdGVuZXIodmFsdWU9PiB7XG5cbiAgICAgICAgICAgIC8vdmFyIHN0ID0gcHJvamVjdExvY2F0aW9uSW5wdXQuZ2V0QmluZGluZygpLnN0YXR1cygpXG4gICAgICAgICAgICB2YXIgc3QgPSB0aGlzLnZhbGlkYXRlUHJvamVjdExvY2F0aW9uKHZhbHVlKVxuICAgICAgICAgICAgaWYgKHN0LmNvZGUgIT0gVUkuU3RhdHVzQ29kZS5FUlJPUikge1xuICAgICAgICAgICAgICAgIC8vdGhpcy51cGRhdGVVSShxLCB4KVxuICAgICAgICAgICAgICAgIHN0YXR1c0xhYmVsLnNldFRleHQoXCJcIik7XG4gICAgICAgICAgICAgICAgc3RhdHVzTGFiZWwuc2V0SWNvbihVSS5JY29uLk5PTkUpXG4gICAgICAgICAgICAgICAgc2xmLnNldERpc3BsYXkoZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNMYWJlbC5zZXRUZXh0KHN0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHN0YXR1c0xhYmVsLnNldEljb24oVUkuSWNvbi5CVUcpXG4gICAgICAgICAgICAgICAgc2xmLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBwYW5lbC5hZGRDaGlsZChcbiAgICAgICAgICAgIC8vVUkuaGMoXG4gICAgICAgICAgICAgICAgcHJvamVjdExvY2F0aW9uSW5wdXRcblxuICAgICAgICAgICAgICAgIC8vVUkuYnV0dG9uU2ltcGxlKFwiQnJvd3NlXCIsXG4gICAgICAgICAgICAgICAgLy8gICAgKCk9PlVJLmZkVXRpbHMuLm9wZW5Gb2xkZXJEaWFsb2coXCJTZWxlY3QgcHJvamVjdCBsb2NhdGlvblwiLFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgbmV3TG9jYXRpb249PiB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VWYWx1ZT1uZXdMb2NhdGlvblxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIHByb2plY3RMb2NhdGlvbklucHV0LmdldEJpbmRpbmcoKS5zZXQobmV3TG9jYXRpb24pXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgLy92YXIgYXRvbUVkaXRvciA9IHByb2plY3RMb2NhdGlvbklucHV0LmdldEFjdHVhbEZpZWxkKClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAvL3ZhciBhdG9tRWRpdG9yVUkgPSBhdG9tRWRpdG9yLnVpKClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAvL3ZhciBhdG9tRWRpdG9yVUlNb2RlbCA9IGF0b21FZGl0b3JVSS5nZXRNb2RlbCgpO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIC8vYXRvbUVkaXRvclVJTW9kZWwuc2V0VGV4dChuZXdMb2NhdGlvbilcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICB0cnVlLCB0aGlzLnNvdXJjZVZhbHVlKVxuICAgICAgICAgICAgICAgIC8vKS5tYXJnaW4oMTAsMCkuc2V0U3R5bGUoXCJtYXJnaW4tYm90dG9tXCIsIFwiMC43NWVtXCIpXG4gICAgICAgICAgICAvLykuc2V0UGVyY2VudFdpZHRoKDEwMClcbiAgICAgICAgKVxuXG4gICAgICAgIHBhbmVsLmFkZENoaWxkKFVJLmgzKFwiVGl0bGUgb2YgeW91ciBBUEk6XCIpKTtcblxuICAgICAgICB2YXIgdGl0bGVTdGF0dXNMYWJlbCA9IFVJLmxhYmVsKFwiXCIsIG51bGwsIFVJLlRleHRDbGFzc2VzLkVSUk9SKTtcblxuICAgICAgICB2YXIgdGl0bGVTdGF0dXNNZXNzYWdlID0gbmV3IFVJLkN1c3RvbUZpZWxkKFwiXCIsIHRpdGxlU3RhdHVzTGFiZWwsIHggPT4geCk7XG5cbiAgICAgICAgdGl0bGVTdGF0dXNNZXNzYWdlLnNldERpc3BsYXkoZmFsc2UpO1xuXG4gICAgICAgIHBhbmVsLmFkZENoaWxkKHRpdGxlU3RhdHVzTWVzc2FnZSk7XG5cbiAgICAgICAgdmFyIHRpdGxlVGV4dEZpZWxkID0gVUkudGV4ZkZpZWxkKFwiXCIsIHRoaXMuYXBpdGl0bGUsIHggPT4gdGhpcy5hcGl0aXRsZSA9IHguZ2V0QmluZGluZygpLmdldCgpKTtcblxuICAgICAgICB0aXRsZVRleHRGaWVsZC5nZXRCaW5kaW5nKCkuYWRkVmFsaWRhdG9yKCgpID0+IHRoaXMudmFsaWRhdGVUaXRsZSh0aGlzLmFwaXRpdGxlKSk7XG5cbiAgICAgICAgdGl0bGVUZXh0RmllbGQuZ2V0QmluZGluZygpLmFkZExpc3RlbmVyKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSB0aGlzLnZhbGlkYXRlVGl0bGUodmFsdWUpO1xuXG4gICAgICAgICAgICBpZiAoc3RhdHVzLmNvZGUgIT09IFVJLlN0YXR1c0NvZGUuRVJST1IpIHtcbiAgICAgICAgICAgICAgICB0aXRsZVN0YXR1c0xhYmVsLnNldFRleHQoXCJcIik7XG4gICAgICAgICAgICAgICAgdGl0bGVTdGF0dXNMYWJlbC5zZXRJY29uKFVJLkljb24uTk9ORSlcbiAgICAgICAgICAgICAgICB0aXRsZVN0YXR1c01lc3NhZ2Uuc2V0RGlzcGxheShmYWxzZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGVTdGF0dXNMYWJlbC5zZXRUZXh0KHN0YXR1cy5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aXRsZVN0YXR1c0xhYmVsLnNldEljb24oVUkuSWNvbi5CVUcpXG4gICAgICAgICAgICAgICAgdGl0bGVTdGF0dXNNZXNzYWdlLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBwYW5lbC5hZGRDaGlsZCh0aXRsZVRleHRGaWVsZCk7XG4gICAgICAgIHBhbmVsLmFkZENoaWxkKFVJLmgzKFwiVmVyc2lvbiBvZiB5b3VyIEFQSVwiKSk7XG4gICAgICAgIHBhbmVsLmFkZENoaWxkKFVJLnRleGZGaWVsZChcIlwiLHRoaXMudmVyc2lvbix4PT50aGlzLnZlcnNpb249eC5nZXRCaW5kaW5nKCkuZ2V0KCkpKVxuICAgICAgICBwYW5lbC5hZGRDaGlsZChVSS5oMyhcIkJhc2UgVVJJIG9mIHlvdXIgQVBJXCIpKTtcbiAgICAgICAgcGFuZWwuYWRkQ2hpbGQoVUkudGV4ZkZpZWxkKFwiXCIsdGhpcy5iYXNlVXJpLHg9PnRoaXMuYmFzZVVyaT14LmdldEJpbmRpbmcoKS5nZXQoKSkpXG5cbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChwYW5lbCk7XG5cbiAgICAgICAgdmFyIHIxPVVJLmNoZWNrQm94KFwiVXNlIFJBTUwgMS4wXCIpXG4gICAgICAgIHIxLnNldFZhbHVlKHRoaXMuX3JhbWwxKVxuICAgICAgICByMS5nZXRCaW5kaW5nKCkuYWRkTGlzdGVuZXIoeD0+dGhpcy5fcmFtbDE9cjEuZ2V0VmFsdWUoKSk7XG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQocjEpXG4gICAgICAgIHZhciByMj1VSS5jaGVja0JveChcIkNyZWF0ZSBkZWZhdWx0IGRpcmVjdG9yeSBzdHJ1Y3R1cmVcIilcbiAgICAgICAgcjIuc2V0VmFsdWUodGhpcy5fZGVmU3RydWN0dXJlKVxuICAgICAgICByMi5nZXRCaW5kaW5nKCkuYWRkTGlzdGVuZXIoeD0+dGhpcy5fZGVmU3RydWN0dXJlPXIyLmdldFZhbHVlKCkpO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKHIyKVxuICAgICAgICB2YXIgcjM9VUkuY2hlY2tCb3goXCJDcmVhdGUgc2FtcGxlIHJlc291cmNlIGFuZCBtZXRob2RcIilcbiAgICAgICAgcjMuc2V0VmFsdWUodGhpcy5fY3JlYXRlU2FtcGxlUmVzb3VyY2UpXG4gICAgICAgIHIzLmdldEJpbmRpbmcoKS5hZGRMaXN0ZW5lcih4PT50aGlzLl9jcmVhdGVTYW1wbGVSZXNvdXJjZT1yMy5nZXRWYWx1ZSgpKTtcbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChyMylcbiAgICAgICAgdmFyIGJ1dHRvbkJhcj1VSS5oYygpLnNldFBlcmNlbnRXaWR0aCgxMDApLnNldFN0eWxlKFwiZGlzcGxheVwiLFwiZmxleFwiKTtcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKFVJLmxhYmVsKFwiXCIsbnVsbCxudWxsLG51bGwpLnNldFN0eWxlKFwiZmxleFwiLFwiMVwiKSlcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKFVJLmJ1dHRvbihcIkNhbmNlbFwiLFVJLkJ1dHRvblNpemVzLk5PUk1BTCxVSS5CdXR0b25IaWdobGlnaHRzLk5PX0hJR0hMSUdIVCxVSS5JY29uLk5PTkUseD0+e3p6LmRlc3Ryb3koKX0pLm1hcmdpbigxMCwxMCkpXG4gICAgICAgIGJ1dHRvbkJhci5hZGRDaGlsZChVSS5idXR0b24oXCJDcmVhdGVcIixVSS5CdXR0b25TaXplcy5OT1JNQUwsVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLFVJLkljb24uTk9ORSx4PT57XG4gICAgICAgICAgICBpZih0aGlzLnZhbGlkYXRlVGl0bGUodGhpcy5hcGl0aXRsZSkuY29kZSA9PT0gVUkuU3RhdHVzQ29kZS5FUlJPUikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodGhpcy52YWxpZGF0ZVByb2plY3RMb2NhdGlvbih0aGlzLnNvdXJjZVZhbHVlKS5jb2RlID09PSBVSS5TdGF0dXNDb2RlLkVSUk9SKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9uT2soenopO1xuICAgICAgICAgICAgenouZGVzdHJveSgpO1xuICAgICAgICB9KSlcbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChidXR0b25CYXIpO1xuXG4gICAgICAgIHp6PSg8YW55PmF0b20pLndvcmtzcGFjZS5hZGRNb2RhbFBhbmVsKCB7IGl0ZW06IHNlY3Rpb24ucmVuZGVyVUkoKSB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlSWZOb3RFeGlzdChwOnN0cmluZyl7XG4gICAgICAgIHZhciBwcz1wYXRoLnJlc29sdmUodGhpcy5zb3VyY2VWYWx1ZSxwKTtcbiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHBzKSl7XG4gICAgICAgICAgICBmcy5ta2RpclN5bmMocHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG9uT2soenopIHtcblxuICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmModGhpcy5zb3VyY2VWYWx1ZSkpIHtcbiAgICAgICAgICAgIGZzLm1rZGlyU3luYyh0aGlzLnNvdXJjZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmU3RydWN0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJzY2hlbWFzXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJZk5vdEV4aXN0KFwiZXhhbXBsZXNcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJ0cmFpdHNcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJyZXNvdXJjZVR5cGVzXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJZk5vdEV4aXN0KFwic2VjdXJpdHlTY2hlbWVzXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJZk5vdEV4aXN0KFwiZG9jdW1lbnRhdGlvblwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yYW1sMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlSWZOb3RFeGlzdChcIm5vdGVib29rc1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJzY3JpcHRzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjb250ZW50ID0gY3JlYXRlUkFNTEZpbGUodGhpcy5hcGl0aXRsZSwgdGhpcy52ZXJzaW9uLCB0aGlzLmJhc2VVcmksIHRoaXMuX2NyZWF0ZVNhbXBsZVJlc291cmNlLCB0aGlzLl9yYW1sMSk7XG4gICAgICAgIHZhciBwcz1wYXRoLnJlc29sdmUodGhpcy5zb3VyY2VWYWx1ZSxcImFwaS5yYW1sXCIpO1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHBzLGNvbnRlbnQpO1xuICAgICAgICAoPGFueT5hdG9tKS5vcGVuKHtwYXRoc1RvT3BlbjpbdGhpcy5zb3VyY2VWYWx1ZSxwc119KTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJBTUxGaWxlKHRpdGxlOiBzdHJpbmcsIHZlcnNpb246IHN0cmluZywgYmFzZVVyaTogc3RyaW5nLCBzYW1wbGU6IGJvb2xlYW4gPSB0cnVlLCByYW1sMTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICB2YXIgYXBpTGluZXMgPSBbIChyYW1sMSA/IFwiIyVSQU1MIDEuMFwiIDogXCIjJVJBTUwgMC44XCIpLCBgdGl0bGU6ICR7dGl0bGV9YF07XG4gICAgaWYgKHZlcnNpb24pIGFwaUxpbmVzLnB1c2goYHZlcnNpb246ICR7dmVyc2lvbn1gKTtcbiAgICBpZiAoYmFzZVVyaSkgYXBpTGluZXMucHVzaChgYmFzZVVyaTogJHtiYXNlVXJpfWApO1xuXG4gICAgdmFyIHR5cGVzTGluZXMgPSBbXG4gICAgICAgICAgICAndHlwZXM6JyxcbiAgICAgICAgICAgICcgIFRlc3RUeXBlOicsXG4gICAgICAgICAgICAnICAgIHR5cGU6IG9iamVjdCcsXG4gICAgICAgICAgICAnICAgIHByb3BlcnRpZXM6JyxcbiAgICAgICAgICAgICcgICAgICBpZDogbnVtYmVyJyxcbiAgICAgICAgICAgICcgICAgICBvcHRpb25hbD86IHN0cmluZycsXG4gICAgICAgICAgICAnICAgICAgZXhwYW5kZWQ6JyxcbiAgICAgICAgICAgICcgICAgICAgIHR5cGU6IG9iamVjdCcsXG4gICAgICAgICAgICAnICAgICAgICBwcm9wZXJ0aWVzOicsXG4gICAgICAgICAgICAnICAgICAgICAgIGNvdW50OiBudW1iZXInXG4gICAgICAgIF0sXG4gICAgICAgIHJlc291cmNlTGluZXMgPSBbXG4gICAgICAgICAgICAnL2hlbGxvV29ybGQ6JyxcbiAgICAgICAgICAgICcgIGdldDonLFxuICAgICAgICAgICAgJyAgICByZXNwb25zZXM6JyxcbiAgICAgICAgICAgICcgICAgICAyMDA6JyxcbiAgICAgICAgICAgICcgICAgICAgIGJvZHk6JyxcbiAgICAgICAgICAgICcgICAgICAgICAgYXBwbGljYXRpb24vanNvbjonLFxuICAgICAgICAgICAgJyAgICAgICAgICAgIGV4YW1wbGU6IHwnLFxuICAgICAgICAgICAgJyAgICAgICAgICAgICAgeycsXG4gICAgICAgICAgICAnICAgICAgICAgICAgICAgIFwibWVzc2FnZVwiIDogXCJIZWxsbyBXb3JsZFwiJyxcbiAgICAgICAgICAgICcgICAgICAgICAgICAgIH0nXG4gICAgICAgIF07XG5cbiAgICB2YXIgcmVzdWx0OiBzdHJpbmdbXSA9IGFwaUxpbmVzO1xuICAgIGlmIChzYW1wbGUpIHtcbiAgICAgICBpZiAocmFtbDEpIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodHlwZXNMaW5lcyk7XG4gICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChyZXNvdXJjZUxpbmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3UHJvamVjdCgpe1xuICAgbmV3IE5ld1Byb2plY3REaWFsb2coKS5zaG93KClcbn1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIG1vdmVSZXNvdXJjZShoOmhsLklIaWdoTGV2ZWxOb2RlKXtcbi8vICAgICBuZXcgbW92ZS5Nb3ZlRWxlbWVudHNEaWFsb2coaCwgXCJSZXNvdXJjZSBUeXBlXCIsdHJ1ZSkuc2hvdygpXG4vLyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdE9uTGluZXModGV4dDpzdHJpbmcpOnN0cmluZ1tde1xuICAgIHZhciBsaW5lcyA9IHRleHQubWF0Y2goL14uKigoXFxyXFxufFxcbnxcXHIpfCQpL2dtKTtcbiAgICByZXR1cm4gbGluZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5FbXB0eUxpbmVzKHRleHQ6c3RyaW5nKTpzdHJpbmd7XG4gICAgdmFyIGxpbmVzPXNwbGl0T25MaW5lcyh0ZXh0KTtcbiAgICB2YXIgcnM6c3RyaW5nW109W11cbiAgICBmb3IgKHZhciBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgaWYgKGxpbmVzW2ldLnRyaW0oKS5sZW5ndGg+MCl7XG4gICAgICAgICAgICBycy5wdXNoKGxpbmVzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnMuam9pbihcIlwiKTtcbn1cbi8vRklYTUUgcmVtb3ZlIGl0IGZyb20gaGVyZSBkdXBsaWNhdGlvbiB3aXRoIGpzeWFtbDJsb3dMZXZlbC50c1xuZnVuY3Rpb24gc3RyaXBJbmRlbnQodGV4dDpzdHJpbmcsaW5kZW50OnN0cmluZyl7XG4gICAgdmFyIGxpbmVzID0gc3BsaXRPbkxpbmVzKHRleHQpO1xuICAgIHZhciBycz1bXTtcbiAgICBmb3IgKHZhciBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgaWYgKGk9PTApe1xuICAgICAgICAgICAgcnMucHVzaChsaW5lc1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHJzLnB1c2gobGluZXNbaV0uc3Vic3RyaW5nKGluZGVudC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnMuam9pbihcIlwiKTtcbn1cbi8vIHZhciBsZWFkaW5nSW5kZW50ID0gZnVuY3Rpb24gKG5vZGU6bG93TGV2ZWwuSUxvd0xldmVsQVNUTm9kZSwgdGV4dDpzdHJpbmcpIHtcbi8vICAgICB2YXIgbGVhZGluZyA9IFwiXCI7XG4vLyAgICAgdmFyIHBvcyA9IG5vZGUuc3RhcnQoKSAtIDE7XG4vLyAgICAgd2hpbGUgKHBvcyA+IDApIHtcbi8vICAgICAgICAgdmFyIGNoID0gdGV4dFtwb3NdO1xuLy8gICAgICAgICBpZiAoY2ggPT0gJ1xccicgfHwgY2ggPT0gJ1xcbicpIGJyZWFrO1xuLy8gICAgICAgICBsZWFkaW5nID0gY2ggKyBsZWFkaW5nO1xuLy8gICAgICAgICBwb3MtLTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGxlYWRpbmc7XG4vLyB9O1xuZnVuY3Rpb24gaW5kZW50KGxpbmU6c3RyaW5nKXtcbiAgICB2YXIgcnM9XCJcIjtcbiAgICBmb3IgKHZhciBpPTA7aTxsaW5lLmxlbmd0aDtpKyspe1xuICAgICAgICB2YXIgYz1saW5lW2ldO1xuICAgICAgICBpZiAoYz09J1xccid8fGM9PSdcXG4nKXtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjPT0nICd8fGM9PSdcXHQnKXtcbiAgICAgICAgICAgIHJzKz1jO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZUVkaXRvcigpIDogQXRvbUNvcmUuSUVkaXRvciB7XG4gICAgdmFyIGFjdGl2ZUVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKVxuICAgIGlmIChhY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUVkaXRvclxuICAgIH1cblxuICAgIGlmIChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkpXG4gICAgICAgIHJldHVybiA8QXRvbUNvcmUuSUVkaXRvcj5lZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpXG5cbiAgICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFNldHMgYWN0aXZlIGVkaXRvciBjdXJzb3IgYXQgdGhlIHBvc2l0aW9uIChzdGFydGluZyBmcm9tIDApLlxuICogQHBhcmFtIHBvc2l0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnb3RvUG9zaXRpb24ocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBhY3RpdmVFZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBpZiAoIWFjdGl2ZUVkaXRvcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGJ1ZmZlclBvcyA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KHBvc2l0aW9uKTtcblxuICAgIGFjdGl2ZUVkaXRvci5zZXRTZWxlY3RlZEJ1ZmZlclJhbmdlKHtzdGFydDogYnVmZmVyUG9zLCBlbmQ6IGJ1ZmZlclBvc30sIHt9KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZ290b0RlY2xhcmF0aW9uKCl7XG4gICAgdmFyIGVkaXRvcj1nZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBpZiAoIWVkaXRvcikgcmV0dXJuO1xuXG4gICAgbGV0IHBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICBsZXQgcGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkub3BlbkRlY2xhcmF0aW9uKHBhdGgsIG9mZnNldCkudGhlbihsb2NhdGlvbnM9PntcbiAgICAgICAgaWYgKCFsb2NhdGlvbnMpIHJldHVybjtcblxuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuKGxvY2F0aW9uc1swXS51cmkse30pLnRoZW4oeD0+e1xuXG4gICAgICAgICAgICBsZXQgYWN0aXZlRWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG5cbiAgICAgICAgICAgIHZhciBwMSA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGxvY2F0aW9uc1swXS5yYW5nZS5zdGFydCk7XG4gICAgICAgICAgICB2YXIgcDIgPSBhY3RpdmVFZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChsb2NhdGlvbnNbMF0ucmFuZ2UuZW5kKTtcblxuICAgICAgICAgICAgYWN0aXZlRWRpdG9yLnNldFNlbGVjdGVkQnVmZmVyUmFuZ2Uoe3N0YXJ0OiBwMSwgZW5kOiBwMn0sIHt9KTtcbiAgICAgICAgfSk7XG4gICAgfSlcbn1cblxuLy8gZXhwb3J0IGNsYXNzIE1vdmVUb05ld0ZpbGVEaWFsb2d7XG4vL1xuLy8gICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbm9kZTpobC5JSGlnaExldmVsTm9kZSl7XG4vL1xuLy8gICAgIH1cbi8vICAgICBkZXN0aW5hdGlvbjpzdHJpbmc7XG4vL1xuLy8gICAgIHNob3coKXtcbi8vICAgICAgICAgdmFyIHp6OmFueT1udWxsO1xuLy8gICAgICAgICB2YXIgbm9kZT10aGlzLm5vZGU7XG4vLyAgICAgICAgIHZhciB2Yz1VSS5zZWN0aW9uKFwiTW92ZSBub2RlIGNvbnRlbnQgdG8gbmV3IGZpbGUgXCIsVUkuSWNvbi5HSVNUX05FVyxmYWxzZSxmYWxzZSk7XG4vLyAgICAgICAgIHZhciBlcnJvckxhYmVsPVVJLmxhYmVsKFwicGxlYXNlIGVudGVyIGNvcnJlY3QgZGVzdGluYXRpb24gcGF0aFwiLFVJLkljb24uQlVHLFVJLlRleHRDbGFzc2VzLkVSUk9SLFVJLkhpZ2hMaWdodENsYXNzZXMuTk9ORSk7XG4vLyAgICAgICAgIHZjLmFkZENoaWxkKFVJLnZjKGVycm9yTGFiZWwpKTtcbi8vICAgICAgICAgdmMuYWRkQ2hpbGQoVUkubGFiZWwoXCJQbGVhc2UgZW50ZXIgZGVzdGluYXRpb24gcGF0aFwiKSk7XG4vLyAgICAgICAgIHZhciB0eHQ9VUkudGV4ZkZpZWxkKFwiXCIsXCJcIix4PT57XG4vLyAgICAgICAgICAgICBpZiAoIXR4dCl7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbj10eHQuZ2V0QmluZGluZygpLmdldCgpO1xuLy8gICAgICAgICAgICAgdmFyIGlzRXJyb3I9dGhpcy5kZXN0aW5hdGlvbi50cmltKCkubGVuZ3RoPT0wXG4vLyAgICAgICAgICAgICBpZiAoIWlzRXJyb3IpIHtcbi8vICAgICAgICAgICAgICAgICBpZiAocGF0aC5leHRuYW1lKHRoaXMuZGVzdGluYXRpb24pICE9ICcucmFtbCcpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaXNFcnJvciA9IHRydWU7XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgaWYgKCFpc0Vycm9yKSB7XG4vLyAgICAgICAgICAgICAgICAgdmFyIGRpciA9IHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUoZ2V0QWN0aXZlRWRpdG9yKCkuZ2V0UGF0aCgpKSwgcGF0aC5kaXJuYW1lKHRoaXMuZGVzdGluYXRpb24pKTtcbi8vICAgICAgICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuLy8gICAgICAgICAgICAgICAgICAgICBpc0Vycm9yID0gdHJ1ZTtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgZWxzZXtcbi8vICAgICAgICAgICAgICAgICAgICAgdmFyIHN0PWZzLnN0YXRTeW5jKGRpcilcbi8vICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdC5pc0RpcmVjdG9yeSgpKXtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXJyb3I9dHJ1ZTtcbi8vICAgICAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICBlcnJvckxhYmVsLnNldERpc3BsYXkoaXNFcnJvcik7XG4vLyAgICAgICAgICAgICBva0J1dHRvbi5zZXREaXNhYmxlZChpc0Vycm9yKTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgIHZjLmFkZENoaWxkKFVJLnZjKHR4dCkpO1xuLy8gICAgICAgICB2YXIgYnV0dG9uQmFyPVVJLmhjKCkuc2V0UGVyY2VudFdpZHRoKDEwMCkuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJmbGV4XCIpO1xuLy8gICAgICAgICBidXR0b25CYXIuYWRkQ2hpbGQoVUkubGFiZWwoXCJcIixudWxsLG51bGwsbnVsbCkuc2V0U3R5bGUoXCJmbGV4XCIsXCIxXCIpKVxuLy8gICAgICAgICBidXR0b25CYXIuYWRkQ2hpbGQoVUkuYnV0dG9uKFwiQ2FuY2VsXCIsVUkuQnV0dG9uU2l6ZXMuTk9STUFMLFVJLkJ1dHRvbkhpZ2hsaWdodHMuTk9fSElHSExJR0hULFVJLkljb24uTk9ORSx4PT57enouZGVzdHJveSgpfSkubWFyZ2luKDEwLDEwKSlcbi8vICAgICAgICAgdmFyIG9rQnV0dG9uPVVJLmJ1dHRvbihcIk1vdmVcIixVSS5CdXR0b25TaXplcy5OT1JNQUwsVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLFVJLkljb24uTk9ORSx4PT57XG4vLyAgICAgICAgICAgICB2YXIgZD1wYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGdldEFjdGl2ZUVkaXRvcigpLmdldFBhdGgoKSksIHRoaXMuZGVzdGluYXRpb24pO1xuLy8gICAgICAgICAgICAgdmFyIGR1bXA9dGhpcy5ub2RlLmxvd0xldmVsKCkuZHVtcCgpO1xuLy8gICAgICAgICAgICAgdmFyIGNpPXNwbGl0T25MaW5lcyhkdW1wKTtcbi8vICAgICAgICAgICAgIHZhciBsaT1jaS5sZW5ndGg+MT9pbmRlbnQoY2lbMV0pOmluZGVudChjaVswXSk7XG4vLyAgICAgICAgICAgICBkdW1wPWR1bXAuc3Vic3RyaW5nKHRoaXMubm9kZS5sb3dMZXZlbCgpLmtleUVuZCgpLXRoaXMubm9kZS5sb3dMZXZlbCgpLnN0YXJ0KCkrMSkudHJpbSgpO1xuLy8gICAgICAgICAgICAgZHVtcD1zdHJpcEluZGVudChkdW1wLGxpKTtcbi8vICAgICAgICAgICAgIGR1bXA9XCIjJVJBTUwgMC44IFwiK3RoaXMubm9kZS5kZWZpbml0aW9uKCkubmFtZUlkKCkrXCJcXG5cIitkdW1wO1xuLy8gICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhkLGR1bXApO1xuLy8gICAgICAgICAgICAgLy9ubyB3ZSBuZWVkIHRvIHJlcGxhY2UgY29udGVudCBvZiB0aGUgbm9kZSB3aXRoIHRleHQ7XG4vL1xuLy8gICAgICAgICAgICAgdmFyIHR4dD1ub2RlLmxvd0xldmVsKCkudW5pdCgpLmNvbnRlbnRzKCk7XG4vLyAgICAgICAgICAgICB2YXIgZW5kUGFydD10eHQuc3Vic3RyaW5nKG5vZGUubG93TGV2ZWwoKS5lbmQoKSk7XG4vLyAgICAgICAgICAgICB2YXIgc3RhcnRQYXJ0PXR4dC5zdWJzdHJpbmcoMCxub2RlLmxvd0xldmVsKCkua2V5RW5kKCkrMSk7XG4vLyAgICAgICAgICAgICB2YXIgdmw9c3RhcnRQYXJ0K1wiICFpbmNsdWRlIFwiK3RoaXMuZGVzdGluYXRpb24rZW5kUGFydDtcbi8vICAgICAgICAgICAgIGdldEFjdGl2ZUVkaXRvcigpLnNldFRleHQodmwpO1xuLy8gICAgICAgICAgICAgenouZGVzdHJveSgpO1xuLy8gICAgICAgICB9KTtcbi8vICAgICAgICAgb2tCdXR0b24uc2V0RGlzYWJsZWQodHJ1ZSlcbi8vICAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKG9rQnV0dG9uKTtcbi8vICAgICAgICAgdmMuYWRkQ2hpbGQoYnV0dG9uQmFyKVxuLy8gICAgICAgICB2YXIgaHRtbD12Yy5yZW5kZXJVSSgpO1xuLy8gICAgICAgICB6ej0oPGFueT5hdG9tKS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbCggeyBpdGVtOiBodG1sfSk7XG4vLyAgICAgICAgIGh0bWwuZm9jdXMoKTtcbi8vICAgICB9XG4vL1xuLy9cbi8vIH1cbi8vIGV4cG9ydCBmdW5jdGlvbiBtb3ZlT3V0KGg6aGwuSUhpZ2hMZXZlbE5vZGUpe1xuLy8gICAgIG5ldyBNb3ZlVG9OZXdGaWxlRGlhbG9nKGgpLnNob3coKVxuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2YWxpZGF0ZSgpIHtcbiAgICB2YXIgY3VycmVudEVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgIGlmICghY3VycmVudEVkaXRvcikgcmV0dXJuO1xuXG4gICAgbGludGVyVUkucmVsaW50KGN1cnJlbnRFZGl0b3IpO1xufVxuXG4vKipcbiAqIEdldHMgb3BlbmVkIGVkaXRvciBmb3Igc3BlY2lmaWVkIHBhdGggb3IgdXJpLlxuICogQ3VycmVudGx5IG9ubHkgcmV0dXJucyBhY3RpdmUgZWRpdG9yIGlmIGFwcGxpY2FibGUsIGluIGZ1dHVyZSBtYXkgYWxzbyByZXR1cm4gb3RoZXIgb3BlbmVkIGVkaXRvcnMuXG4gKiBAcGFyYW0gcGF0aFxuICogQHJldHVybnMge2FueX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVkaXRvckJ5VXJpT3JQYXRoKHBhdGggOiBzdHJpbmcpIDogQXRvbUNvcmUuSUVkaXRvcntcbiAgICAvL1RPRE8gY29uc2lkZXIgYWxzbyByZXR1cm5pbmcgb3RoZXIgb3BlbmVkIGVkaXRvcnNcblxuICAgIGxldCBhY3RpdmVFZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBpZiAoYWN0aXZlRWRpdG9yLmdldFBhdGgoKSA9PSBwYXRoKSByZXR1cm4gYWN0aXZlRWRpdG9yO1xuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQXBwbGllcyBhIHNldCBvZiBjaGFuZ2VkIGRvY3VtZW50cyB0byBjdXJyZW50IGRvY3VtZW50cyBhbmQgZmlsZXNcbiAqIEBwYXJhbSBjaGFuZ2VkRG9jdW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUNoYW5nZWREb2N1bWVudHMoY2hhbmdlZERvY3VtZW50cyA6IHJhbWxTZXJ2ZXIuSUNoYW5nZWREb2N1bWVudFtdKSA6IHZvaWQge1xuXG4gICAgZm9yIChsZXQgY2hhbmdlZERvY3VtZW50IG9mIGNoYW5nZWREb2N1bWVudHMpIHtcblxuICAgICAgICBsZXQgZWRpdG9yID0gZ2V0RWRpdG9yQnlVcmlPclBhdGgoY2hhbmdlZERvY3VtZW50LnVyaSk7XG5cbiAgICAgICAgbGV0IG9sZENvbnRlbnRzID0gbnVsbDtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgICAgb2xkQ29udGVudHMgPSBlZGl0b3IuZ2V0VGV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2xkQ29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoY2hhbmdlZERvY3VtZW50LnVyaSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuZXdUZXh0ID0gbnVsbDtcbiAgICAgICAgaWYgKGNoYW5nZWREb2N1bWVudC50ZXh0KSB7XG4gICAgICAgICAgICBuZXdUZXh0ID0gY2hhbmdlZERvY3VtZW50LnRleHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlZERvY3VtZW50LnRleHRFZGl0cykge1xuICAgICAgICAgICAgbmV3VGV4dCA9IHRleHRFZGl0UHJvY2Vzc29yLmFwcGx5RG9jdW1lbnRFZGl0cyhvbGRDb250ZW50cywgY2hhbmdlZERvY3VtZW50LnRleHRFZGl0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICAgIGVkaXRvci5nZXRCdWZmZXIoKS5zZXRUZXh0KG5ld1RleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhjaGFuZ2VkRG9jdW1lbnQudXJpLCBuZXdUZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUcmllcyB0byBkZXRlY3QgdGhlIG5hbWUvc3ltYm9sIGF0IHBvc2l0aW9uLlxuICogSW4gcHJhY3Rpc2UgaXQgaXMgaW1wb3NzaWJsZSB0byBkbyBwcm9wZXJseSBpbiBhbGwgY2FzZXMgdW5sZXNzIGhhdmluZyBBU1QgYXQgaGFuZHNcbiAqIG9yIG1ha2luZyB0aGUgc2VydmVyIHRvIGRvIHRoaXMsIGJ1dCBNUyBMU1AgZG9lcyBub3QgaGF2ZSBhbiBpbnRlcmZhY2UgZm9yIHRoaXMuXG4gKlxuICogQHBhcmFtIGNvbnRlbnRzXG4gKiBAcGFyYW0gb2Zmc2V0XG4gKi9cbmZ1bmN0aW9uIGZpbmRDdXJyZW50TmFtZShjb250ZW50czogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcikgOiBzdHJpbmcge1xuICAgIC8vd2UgY2FudCB1c2UgYWxwaGEtbnVtZXJpYyBkZXRlY3Rpb24gZHVlIHRvIHBvdGVudGlhbCBub24tZW5nbGlzaCBhbHBoYWJldHMuXG4gICAgLy9zbyB3ZSBoYXZlIHRvIGRlZmluZWQgc29tZSBzdG9wIGNoYXJhY3RlcnMgYW5kIGV4cGFuZCB0aGUgbGlzdCB3aGVuIGEgYnVnIGNhc2UgaXMgZGV0ZWN0ZWRcbiAgICBjb25zdCBzdG9wQ2hhcmFjdGVyczogc3RyaW5nW10gPSBbXG4gICAgICAgIFwiXFxyXCIsIFwiXFxuXCIsIFwiW1wiLCBcIl1cIiwgXCI6XCIsIFwiLlwiLCBcIixcIiwgXCIgXCIsIFwiXFx0XCIsIFwie1wiLCBcIn1cIiwgXCInXCIsIFwiJ1wiLCBcIlxcXCJcIlxuICAgIF1cblxuICAgIGxldCBiZWdpbm5pbmcgPSAwO1xuXG4gICAgZm9yKGxldCBjdXJyZW50T2Zmc2V0ID0gb2Zmc2V0IC0gMTsgY3VycmVudE9mZnNldCA+PSAwOyBjdXJyZW50T2Zmc2V0LS0pe1xuICAgICAgICBsZXQgY3VycmVudENoYXIgPSBjb250ZW50cy5jaGFyQXQoY3VycmVudE9mZnNldCk7XG5cbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHN0b3BDaGFyIG9mIHN0b3BDaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENoYXIgPT0gc3RvcENoYXIpIHtcbiAgICAgICAgICAgICAgICBiZWdpbm5pbmcgPSBjdXJyZW50T2Zmc2V0ICsgMTtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm91bmQpIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICBsZXQgZW5kID0gY29udGVudHMubGVuZ3RoO1xuXG4gICAgZm9yKGxldCBjdXJyZW50T2Zmc2V0ID0gb2Zmc2V0OyBjdXJyZW50T2Zmc2V0IDwgY29udGVudHMubGVuZ3RoOyBjdXJyZW50T2Zmc2V0Kyspe1xuICAgICAgICBsZXQgY3VycmVudENoYXIgPSBjb250ZW50cy5jaGFyQXQoY3VycmVudE9mZnNldCk7XG5cbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHN0b3BDaGFyIG9mIHN0b3BDaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENoYXIgPT0gc3RvcENoYXIpIHtcbiAgICAgICAgICAgICAgICBlbmQgPSBjdXJyZW50T2Zmc2V0O1xuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3VuZCkgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnRzLnN1YnN0cmluZyhiZWdpbm5pbmcsIGVuZCk7XG59XG5cbi8qKlxuICogQWN0aXZhdGVzIHJlbmFtaW5nIGZvciBjdXJyZW50IGFjdGl2ZSBlZGl0b3IgYW5kIGN1cnNvciBwb3NpdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuYW1lUkFNTEVsZW1lbnQoKSB7XG4gICAgdmFyIGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgIGlmICghZWRpdG9yKSByZXR1cm47XG5cbiAgICBpZiAocGF0aC5leHRuYW1lKGVkaXRvci5nZXRQYXRoKCkpICE9ICcucmFtbCcpIHJldHVybjtcblxuICAgIGxldCBwb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpXG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICBsZXQgZWRpdG9yUGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICBsZXQgY3VycmVudE5hbWUgPSBmaW5kQ3VycmVudE5hbWUoZWRpdG9yLmdldFRleHQoKSwgb2Zmc2V0KTtcblxuICAgIFVJLnByb21wdChcIkVudGVyIG5ldyBuYW1lIGZvcjogXCIsIG5ld05hbWU9PiB7XG4gICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5cbiAgICAgICAgICAgIHJlbmFtZShlZGl0b3JQYXRoLCBvZmZzZXQsIG5ld05hbWUpLnRoZW4oY2hhbmdlZERvY3VtZW50cz0+e1xuXG4gICAgICAgICAgICBhcHBseUNoYW5nZWREb2N1bWVudHMoY2hhbmdlZERvY3VtZW50cyk7XG4gICAgICAgIH0pXG4gICAgfSwgY3VycmVudE5hbWUpXG5cbn1cblxudmFyIGdldEtleVZhbHVlID0gZnVuY3Rpb24gKG9mZnNldCwgdHh0KSB7XG4gICAgdmFyIG0gPSBvZmZzZXQ7XG5cbiAgICBmb3IgKHZhciBpID0gb2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgYyA9IHR4dC5jaGFyQXQoaSk7XG4gICAgICAgIGlmIChjID09ICcgJyB8fCBjID09ICdcXHInIHx8IGMgPT0gJ1xcbicgfHwgYyA9PSAnXFx0Jykge1xuICAgICAgICAgICAgbSA9IGkgKyAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHJlcyA9IFwiXCI7XG4gICAgZm9yICh2YXIgaSA9IG07IG0gPCB0eHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMgPSB0eHQuY2hhckF0KGkpO1xuICAgICAgICBpZiAoYyA9PSAnICcgfHwgYyA9PSAnXFxyJyB8fCBjID09ICdcXG4nIHx8IGMgPT0gJ1xcdCcgfHwgYyA9PSAnOicpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJlcyArPSBjO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIGV4cG9ydCBmdW5jdGlvbiBzZWxlY3QoKXtcbi8vICAgICB2YXIgZWQ9Z2V0QWN0aXZlRWRpdG9yKCk7XG4vLyAgICAgdmFyIHJlcXVlc3Q9e2VkaXRvcjplZCxidWZmZXJQb3NpdGlvbjplZC5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpfTtcbi8vICAgICB2YXIgbm9kZT1wcm92aWRlci5nZXRBc3ROb2RlKHJlcXVlc3QsZmFsc2UpO1xuLy8gICAgIGlmICghbm9kZSl7XG4vLyAgICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vLyAgICAgdmFyIHN0YXJ0PWVkLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgobm9kZS5sb3dMZXZlbCgpLnN0YXJ0KCkpO1xuLy8gICAgIHZhciBlbmQ9ZWQuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLmxvd0xldmVsKCkuZW5kKCkpO1xuLy8gICAgIGVkLnNldFNlbGVjdGVkQnVmZmVyUmFuZ2Uoe3N0YXJ0OnN0YXJ0LGVuZDplbmR9LHt9KTtcbi8vIH1cbi8vZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFNpZ25hdHVyZShhdHRyOmhsLklBdHRyaWJ1dGUpe1xuLy8gICAgdmFyIHRyPXNpZ25hdHVyZS5jb252ZXJ0VG9UcmFpdChzaWduYXR1cmUucGFyc2UoYXR0cikpO1xuLy8gICAgLy9jb25zb2xlLmxvZygndHJhaXQ6XFxuJyArIHRyLmhpZ2hMZXZlbCgpLmxvd0xldmVsKCkuZHVtcCgpKTtcbi8vICAgIHZhciByZXMgPSBhdHRyLnBhcmVudCgpO1xuLy8gICAgLy9wci5yZW1vdmUoYXR0cik7IC8vIGluY29ycmVjdCB1c2FnZSEhISByZW1vdmUgYXR0cmlidXRlcyBhcyBiZWxvd1xuLy8gICAgYXR0ci5yZW1vdmUoKTtcbi8vICAgIHRyLmhpZ2hMZXZlbCgpLmVsZW1lbnRzKCkuZm9yRWFjaCh4PT57XG4vLyAgICAgICAgcmVzLmFkZCg8YW55PngpXG4vLyAgICB9KTtcbi8vICAgIHZhciBlZD1nZXRBY3RpdmVFZGl0b3IoKTtcbi8vICAgIGVkLnNldFRleHQoYXR0ci5yb290KCkubG93TGV2ZWwoKS51bml0KCkuY29udGVudHMoKSk7XG4vL31cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kVXNhZ2VzSW1wbChyZW5kZXJlcjoodDpJTG9jYXRpb25bXSk9PmFueT1kaXNwbGF5KXtcbiAgICB2YXIgZWRpdG9yPWdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgbGV0IHBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICBsZXQgcGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZmluZFJlZmVyZW5jZXMocGF0aCwgb2Zmc2V0KS50aGVuKGxvY2F0aW9ucz0+e1xuICAgICAgICBpZiAoIWxvY2F0aW9ucykgcmV0dXJuO1xuXG4gICAgICAgIHJlbmRlcmVyKGxvY2F0aW9ucyk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZGlzcGxheShuOklMb2NhdGlvbltdKXtcbiAgICBpZiAoc3Ype1xuICAgICAgICBzdi5zZXRJbnB1dChuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN2ID0gbmV3IFNlYXJjaFJlc3VsdFZpZXcobilcbiAgICAgICAgc3YucGFuZWwgPSAoPGFueT5hdG9tLndvcmtzcGFjZSkuYWRkQm90dG9tUGFuZWwoe2l0ZW06IHN2fSk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzYWdlcygpe1xuICAgIGZpbmRVc2FnZXNJbXBsKGRpc3BsYXkpO1xufVxuXG5jbGFzcyBTZWFyY2hSZXN1bHRWaWV3IGV4dGVuZHMgU3BhY2VQZW5WaWV3cy5TY3JvbGxWaWV3IHtcblxuXG4gICAgc2NyaXB0UGF0aDpzdHJpbmc7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfcmVzdWx0OklMb2NhdGlvbltdICkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICBpbml0aWFsaXplICgpIHtcbiAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBjb250ZW50ICgpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdih7IGNsYXNzOiAncmFtbC1jb25zb2xlIHBhbmUtaXRlbScsIHRhYmluZGV4OiAtMSB9KVxuICAgIH1cblxuICAgIGlzQXR0YWNoZWQ9ZmFsc2U7XG5cbiAgICBhdHRhY2hlZCAoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB0aGlzLmlzQXR0YWNoZWQgPSB0cnVlXG4gICAgfVxuICAgIHBhbmVsOmFueTtcblxuICAgIHNldElucHV0KF9yZXN1bHQ6SUxvY2F0aW9uW10pe1xuICAgICAgICB0aGlzLl9yZXN1bHQ9X3Jlc3VsdDtcbiAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgfVxuXG4gICAgbG9hZCgpe1xuICAgICAgICB2YXIgc2VjdGlvbj1VSS5zZWN0aW9uKFwiUmVmZXJlbmNlc1wiLFVJLkljb24uU0VBUkNIKVxuICAgICAgICB2YXIgdmlldz1VSS5saXN0KHRoaXMuX3Jlc3VsdCxsb2NhdGlvbj0+e1xuICAgICAgICAgICAgdmFyIHAxID0gZ2V0QWN0aXZlRWRpdG9yKCkuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChsb2NhdGlvbi5yYW5nZS5zdGFydCk7XG5cbiAgICAgICAgICAgIHZhciByZXM9IFVJLmhjKFVJLmEobG9jYXRpb24udXJpLHk9PntcbiAgICAgICAgICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuKGxvY2F0aW9uLnVyaSx7fSkudGhlbih4PT57XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwMSA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGxvY2F0aW9uLnJhbmdlLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAyID0gYWN0aXZlRWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgobG9jYXRpb24ucmFuZ2UuZW5kKTtcblxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFZGl0b3Iuc2V0U2VsZWN0ZWRCdWZmZXJSYW5nZSh7c3RhcnQ6IHAxLCBlbmQ6IHAyfSwge30pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICB9KSxVSS5sYWJlbChcIiBsaW5lOlwiLFVJLkljb24uTk9ORSxVSS5UZXh0Q2xhc3Nlcy5TVUJUTEUpLnBhZCg1LDUpLFxuICAgICAgICAgICBVSS5sYWJlbChcIlwiK3AxLnJvdyxVSS5JY29uLk5PTkUsVUkuVGV4dENsYXNzZXMuU1VDQ0VTUykpXG4gICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICB2aWV3LnNldFN0eWxlKFwibWF4LWhlaWdodFwiLFwiNDAwcHhcIik7XG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodmlldyk7XG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQoVUkuYnV0dG9uKFwiQ2xvc2VcIixVSS5CdXR0b25TaXplcy5TTUFMTCxVSS5CdXR0b25IaWdobGlnaHRzLlBSSU1BUlksVUkuSWNvbi5OT05FLHg9Pnt0aGlzLnBhbmVsLmRlc3Ryb3koKTtzdj1udWxsfSkpXG4gICAgICAgIHRoaXMuaHRtbChzZWN0aW9uLnJlbmRlclVJKCkpO1xuICAgIH1cbn1cbnZhciBzdjpTZWFyY2hSZXN1bHRWaWV3O1xuXG4iXX0=\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar fs = __webpack_require__(12);\n\t// import parser = require(\"raml-1-parser\");\n\t// import parserUtils = parser.utils;\n\tvar unitUtils = __webpack_require__(14);\n\tvar TextBuffer = __webpack_require__(15);\n\tvar editorManager = __webpack_require__(16);\n\tvar ramlServer = __webpack_require__(17);\n\texports.grammarScopes = ['source.raml'];\n\texports.scope = 'file';\n\texports.lintOnFly = true;\n\tvar raml_language_server_1 = __webpack_require__(17);\n\tfunction relint(editor) {\n\t    Promise.resolve(\"\").then(editorManager.toggleEditorTools);\n\t    editor.getBuffer().emitter.emit(\"did-change\", {\n\t        oldText: editor.getBuffer().getText(),\n\t        newText: editor.getBuffer().getText()\n\t    });\n\t}\n\texports.relint = relint;\n\tfunction initEditorObservers(linter) {\n\t    atom.workspace.observeTextEditors(function (editor) { return relint(editor); });\n\t    return {\n\t        dispose: function () {\n\t        }\n\t    };\n\t}\n\texports.initEditorObservers = initEditorObservers;\n\tfunction destroyLinter(linterApi, linter) {\n\t    linterApi.deleteMessages(linter);\n\t    linterApi.deleteLinter(linter);\n\t}\n\tfunction isRAMLUnit(editor) {\n\t    var contents = editor.getBuffer().getText();\n\t    return unitUtils.isRAMLUnit(contents);\n\t}\n\tvar combErrors = function (result) {\n\t    var map = {};\n\t    result.forEach(function (x) {\n\t        var original = JSON.parse(JSON.stringify(x));\n\t        original.trace = null;\n\t        var newKey = JSON.stringify(original);\n\t        var tr = map[newKey];\n\t        if (tr) {\n\t            tr.push(x);\n\t        }\n\t        else {\n\t            map[newKey] = [x];\n\t        }\n\t    });\n\t    var rs = [];\n\t    for (var i in map) {\n\t        var mes = JSON.parse(i);\n\t        mes.trace = [];\n\t        var ms = map[i];\n\t        ms.forEach(function (x) {\n\t            if (x.trace) {\n\t                mes.trace = mes.trace.concat(x.trace);\n\t            }\n\t        });\n\t        mes.trace = combErrors(mes.trace);\n\t        rs.push(mes);\n\t    }\n\t    return rs;\n\t};\n\tfunction tabWarnings(textEditor) {\n\t    var result = [];\n\t    var text = textEditor.getBuffer().getText();\n\t    var tab = 0;\n\t    while (true) {\n\t        var tab = text.indexOf('\\t', tab);\n\t        if (tab != -1) {\n\t            var p1 = textEditor.getBuffer().positionForCharacterIndex(tab);\n\t            var p2 = textEditor.getBuffer().positionForCharacterIndex(tab + 1);\n\t            var message = {\n\t                type: (\"Warning\"),\n\t                filePath: textEditor.getPath(),\n\t                text: \"Using tabs  can lead to unpredictable results\",\n\t                trace: [],\n\t                range: [[p1.row, p1.column], [p2.row, p2.column]]\n\t            };\n\t            result.push(message);\n\t            tab++;\n\t        }\n\t        else {\n\t            break;\n\t        }\n\t    }\n\t    return result;\n\t}\n\tfunction postPocessError(editor, error, buffers) {\n\t    var editorPath = editor.getPath();\n\t    if (!buffers[editorPath]) {\n\t        buffers[editorPath] = editor.getBuffer();\n\t    }\n\t    return Promise.resolve(error).then(function (error) {\n\t        if (!error.filePath) {\n\t            error.filePath = editorPath;\n\t        }\n\t        var buffer = buffers[error.filePath];\n\t        if (!buffer) {\n\t            return new Promise(function (resolve, reject) {\n\t                fs.readFile(error.filePath, function (err, data) {\n\t                    if (err) {\n\t                        reject(err);\n\t                    }\n\t                    else {\n\t                        buffer = new TextBuffer(data.toString());\n\t                        buffers[error.filePath] = buffer;\n\t                        resolve(buffer);\n\t                    }\n\t                });\n\t            });\n\t        }\n\t        return buffer;\n\t    }).then(function (buffer) {\n\t        clientConnection.debugDetail(\"Converting an error with range: [\" + error.range.start + \" , \" + error.range.end + \"]\", \"Linter-ui\", \"postPocessError\");\n\t        if (error.range.start != null && error.range.end != null) {\n\t            clientConnection.debugDetail(\"Converting an error with range as array: [\" + error.range[0] + \" , \" + error.range[1] + \"]\", \"Linter-ui\", \"postPocessError\");\n\t            var p1 = buffer.positionForCharacterIndex(error.range.start);\n\t            var p2 = buffer.positionForCharacterIndex(error.range.end);\n\t            clientConnection.debugDetail(\"Result error range: [\" + p1.row + \" , \" + p1.column + \"] ; [\" + p2.row + \" , \" + p2.column + \"]\", \"Linter-ui\", \"postPocessError\");\n\t            error.range = [[p1.row, p1.column], [p2.row, p2.column]];\n\t        }\n\t        var traceErrors = error.trace || [];\n\t        var tracePromises = traceErrors.map(function (traceError) { return postPocessError(editor, traceError, buffers); });\n\t        return Promise.all(tracePromises).then(function (trace) {\n\t            error.trace = trace;\n\t            return error;\n\t        });\n\t    });\n\t}\n\tfunction getEditorId(textEditor) {\n\t    return textEditor.id;\n\t}\n\tvar ValidationReportExpected = /** @class */ (function () {\n\t    function ValidationReportExpected() {\n\t    }\n\t    return ValidationReportExpected;\n\t}());\n\tvar clientConnection = raml_language_server_1.getNodeClientConnection();\n\tvar expectedValidationReports = [];\n\tfunction findAndRemoveExpectedReports(uri, versionLimit) {\n\t    var result = [];\n\t    expectedValidationReports = expectedValidationReports.filter(function (reportExpected) {\n\t        if (reportExpected.uri == uri\n\t            && (versionLimit == null || reportExpected.expectedVersion == null ||\n\t                versionLimit >= reportExpected.expectedVersion)) {\n\t            result.push(reportExpected);\n\t            return false;\n\t        }\n\t        return true;\n\t    });\n\t    return result;\n\t}\n\tvar latestRecievedReport = null;\n\tclientConnection.onValidationReport(function (report) {\n\t    clientConnection.debugDetail(\"Got debug report for uri \" + report.pointOfViewUri +\n\t        \" and version \" + report.version, \"linter-ui\", \"onValidationReport\");\n\t    var expectedReports = findAndRemoveExpectedReports(report.pointOfViewUri, report.version);\n\t    clientConnection.debugDetail(\"Found expected reports: \" + expectedReports.length, \"linter-ui\", \"onValidationReport\");\n\t    for (var _i = 0, expectedReports_1 = expectedReports; _i < expectedReports_1.length; _i++) {\n\t        var expectedReport = expectedReports_1[_i];\n\t        expectedReport.resolve(report.issues);\n\t    }\n\t    latestRecievedReport = report;\n\t});\n\tfunction runValidationSheduleUpdater(textEditor, resolve, reject) {\n\t    var uri = textEditor.getPath();\n\t    //in any way, lets report current state, it should not hurt.\n\t    clientConnection.documentChanged({\n\t        uri: uri,\n\t        text: textEditor.getBuffer().getText()\n\t    });\n\t    clientConnection.getLatestVersion(uri).then(function (version) {\n\t        clientConnection.debugDetail(\"Scheduling validation for uri \" + uri + \" and version \" +\n\t            version, \"linter-ui\", \"runValidationSheduleUpdater\");\n\t        if (latestRecievedReport && latestRecievedReport.version &&\n\t            latestRecievedReport.version >= version) {\n\t            //we already know validation report for this version\n\t            clientConnection.debugDetail(\"Previous report found v \" +\n\t                latestRecievedReport.version + \" resolving, issues \" +\n\t                (latestRecievedReport.issues ? latestRecievedReport.issues.length : 0), \"linter-ui\", \"runValidationSheduleUpdater\");\n\t            resolve(latestRecievedReport.issues);\n\t        }\n\t        else {\n\t            //lets wait until the server provides a report for this or later version\n\t            expectedValidationReports.push({\n\t                uri: uri,\n\t                expectedVersion: version,\n\t                resolve: resolve,\n\t                reject: reject\n\t            });\n\t            clientConnection.debugDetail(\"Pushing the expected report to the list for version \" +\n\t                version, \"linter-ui\", \"runValidationSheduleUpdater\");\n\t        }\n\t    });\n\t}\n\tfunction lint(textEditor) {\n\t    if (!isRAMLUnit(textEditor)) {\n\t        return Promise.resolve([]);\n\t    }\n\t    Promise.resolve(\"\").then(editorManager.toggleEditorTools);\n\t    var promise = new Promise(function (resolve, reject) {\n\t        runValidationSheduleUpdater(textEditor, resolve, reject);\n\t    }).then(function (errors) {\n\t        clientConnection.debugDetail(\"Update report handled in with issues \" +\n\t            (errors ? errors.length : 0), \"linter-ui\", \"lint\");\n\t        var buffers = {};\n\t        var promises = errors.map(function (error) { return postPocessError(textEditor, error, buffers); });\n\t        var tabs = tabWarnings(textEditor);\n\t        promises = promises.concat(tabs);\n\t        return Promise.all(promises).then(function (errors) {\n\t            var result = combErrors(errors);\n\t            var warnings = 0;\n\t            return result.filter(function (error) { return error ? true : false; }).filter(function (error) {\n\t                return error.type === 'Warning' && warnings++ >= 20 ? false : true;\n\t            });\n\t        });\n\t    });\n\t    clientConnection.debugDetail(\"Before returning from lint\", \"linter-ui\", \"lint\");\n\t    return promise;\n\t}\n\texports.lint = lint;\n\tfunction addListenersToEditor(editor) {\n\t    var currentBuffer = editor.getBuffer();\n\t    currentBuffer.onDidChange(function (x) {\n\t        try {\n\t            ramlServer.getNodeClientConnection().debug(\"Change detected\", \"linter-ui\", \"addListenersToEditor\");\n\t            ramlServer.getNodeClientConnection().documentChanged({\n\t                uri: currentBuffer.getPath(),\n\t                text: currentBuffer.getText()\n\t            });\n\t        }\n\t        catch (e) {\n\t            console.log(e);\n\t        }\n\t    });\n\t}\n\tfunction addListenersToWorkspace() {\n\t    atom.workspace.onDidChangeActivePaneItem(function (e) {\n\t        var editor = atom.workspace.getActiveTextEditor();\n\t        if (editor) {\n\t            addListenersToEditor(editor);\n\t        }\n\t    });\n\t}\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,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QWEsQ0FBQyxPQUFPLEVBQUU7YUFDcEMsQ0FBQyxDQUFDO1FBRVAsQ0FBQztRQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUM7WUFDUixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25CLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRDtJQUNJLElBQUksQ0FBQyxTQUFTLENBQUMseUJBQXlCLENBQUMsVUFBQSxDQUFDO1FBQ3RDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUNsRCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ1Qsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDaEMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsImZpbGUiOiJzcmMvYXRvbS9jb3JlL2xpbnRlci11aS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5pbXBvcnQgZnMgPSByZXF1aXJlKCdmcycpO1xuaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbi8vIGltcG9ydCBwYXJzZXIgPSByZXF1aXJlKFwicmFtbC0xLXBhcnNlclwiKTtcblxuLy8gaW1wb3J0IHBhcnNlclV0aWxzID0gcGFyc2VyLnV0aWxzO1xuXG5pbXBvcnQgdW5pdFV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWwvdW5pdFwiKTtcblxudmFyIFRleHRCdWZmZXIgPSByZXF1aXJlKFwiYmFzYXJhdC10ZXh0LWJ1ZmZlclwiKTtcblxuaW1wb3J0IGVkaXRvck1hbmFnZXIgPSByZXF1aXJlKFwiLi9lZGl0b3JNYW5hZ2VyXCIpO1xuaW1wb3J0IGVkaXRvclRvb2xzID0gcmVxdWlyZShcIi4uL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHNcIik7XG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKVxuXG5leHBvcnQgdmFyIGdyYW1tYXJTY29wZXMgPSBbJ3NvdXJjZS5yYW1sJ107XG5cbmV4cG9ydCB2YXIgc2NvcGUgPSAnZmlsZSc7XG5cbmV4cG9ydCB2YXIgbGludE9uRmx5ID0gdHJ1ZTtcblxuaW1wb3J0IHtcbiAgICBnZXROb2RlQ2xpZW50Q29ubmVjdGlvbixcbiAgICBJVmFsaWRhdGlvblJlcG9ydFxufSBmcm9tICdyYW1sLWxhbmd1YWdlLXNlcnZlcidcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbGludChlZGl0b3I6QXRvbUNvcmUuSUVkaXRvcikge1xuICAgIFByb21pc2UucmVzb2x2ZShcIlwiKS50aGVuKGVkaXRvck1hbmFnZXIudG9nZ2xlRWRpdG9yVG9vbHMpO1xuXG4gICAgKDxhbnk+ZWRpdG9yKS5nZXRCdWZmZXIoKS5lbWl0dGVyLmVtaXQoXCJkaWQtY2hhbmdlXCIsIHtcbiAgICAgICAgb2xkVGV4dDogKDxhbnk+ZWRpdG9yKS5nZXRCdWZmZXIoKS5nZXRUZXh0KCksXG4gICAgICAgIG5ld1RleHQ6ICg8YW55PmVkaXRvcikuZ2V0QnVmZmVyKCkuZ2V0VGV4dCgpXG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0RWRpdG9yT2JzZXJ2ZXJzKGxpbnRlcikge1xuXG4gICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGVkaXRvciA9PiByZWxpbnQoZWRpdG9yKSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVzdHJveUxpbnRlcihsaW50ZXJBcGksIGxpbnRlcikge1xuICAgIGxpbnRlckFwaS5kZWxldGVNZXNzYWdlcyhsaW50ZXIpO1xuXG4gICAgbGludGVyQXBpLmRlbGV0ZUxpbnRlcihsaW50ZXIpO1xufVxuXG5mdW5jdGlvbiBpc1JBTUxVbml0KGVkaXRvcikge1xuICAgIHZhciBjb250ZW50cyA9IGVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KCk7XG5cbiAgICByZXR1cm4gdW5pdFV0aWxzLmlzUkFNTFVuaXQoY29udGVudHMpXG59XG5cbnZhciBjb21iRXJyb3JzID0gZnVuY3Rpb24gKHJlc3VsdDphbnlbXSkge1xuICAgIHZhciBtYXAgPSB7fTtcbiAgICByZXN1bHQuZm9yRWFjaCh4PT4ge1xuICAgICAgICB2YXIgb3JpZ2luYWwgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHgpKTtcbiAgICAgICAgb3JpZ2luYWwudHJhY2UgPSBudWxsO1xuICAgICAgICB2YXIgbmV3S2V5ID0gSlNPTi5zdHJpbmdpZnkob3JpZ2luYWwpO1xuICAgICAgICB2YXIgdHIgPSBtYXBbbmV3S2V5XTtcbiAgICAgICAgaWYgKHRyKSB7XG4gICAgICAgICAgICB0ci5wdXNoKHgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWFwW25ld0tleV0gPSBbeF07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgcnM6YW55W10gPSBbXTtcbiAgICBmb3IgKHZhciBpIGluIG1hcCkge1xuICAgICAgICB2YXIgbWVzID0gSlNPTi5wYXJzZShpKTtcbiAgICAgICAgbWVzLnRyYWNlID0gW107XG4gICAgICAgIHZhciBtcyA9IG1hcFtpXTtcbiAgICAgICAgbXMuZm9yRWFjaCh4PT4ge1xuICAgICAgICAgICAgaWYgKHgudHJhY2UpIHtcbiAgICAgICAgICAgICAgICBtZXMudHJhY2UgPSBtZXMudHJhY2UuY29uY2F0KHgudHJhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBtZXMudHJhY2UgPSBjb21iRXJyb3JzKG1lcy50cmFjZSk7XG4gICAgICAgIHJzLnB1c2gobWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJzO1xufTtcblxuZnVuY3Rpb24gdGFiV2FybmluZ3ModGV4dEVkaXRvcjpBdG9tQ29yZS5JRWRpdG9yKTogYW55W10ge1xuICAgIHZhciByZXN1bHQ6IGFueVtdID0gW107XG5cbiAgICB2YXIgdGV4dCA9IHRleHRFZGl0b3IuZ2V0QnVmZmVyKCkuZ2V0VGV4dCgpO1xuXG4gICAgdmFyIHRhYiA9IDA7XG5cbiAgICB3aGlsZSh0cnVlKSB7XG4gICAgICAgIHZhciB0YWI6IG51bWJlciA9IHRleHQuaW5kZXhPZignXFx0Jyx0YWIpO1xuXG4gICAgICAgIGlmKHRhYiAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHAxID0gdGV4dEVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KHRhYik7XG4gICAgICAgICAgICB2YXIgcDIgPSB0ZXh0RWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgodGFiICsgMSk7XG5cbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IChcIldhcm5pbmdcIiksXG5cbiAgICAgICAgICAgICAgICBmaWxlUGF0aDogdGV4dEVkaXRvci5nZXRQYXRoKCksXG5cbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlVzaW5nIHRhYnMgIGNhbiBsZWFkIHRvIHVucHJlZGljdGFibGUgcmVzdWx0c1wiLFxuXG4gICAgICAgICAgICAgICAgdHJhY2U6IFtdLFxuXG4gICAgICAgICAgICAgICAgcmFuZ2U6IFtbcDEucm93LCBwMS5jb2x1bW5dLCBbcDIucm93LCBwMi5jb2x1bW5dXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRhYisrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHBvc3RQb2Nlc3NFcnJvcihlZGl0b3IsIGVycm9yLCBidWZmZXJzKSB7XG4gICAgdmFyIGVkaXRvclBhdGggPSBlZGl0b3IuZ2V0UGF0aCgpO1xuXG4gICAgaWYoIWJ1ZmZlcnNbZWRpdG9yUGF0aF0pIHtcbiAgICAgICAgYnVmZmVyc1tlZGl0b3JQYXRoXSA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVycm9yKS50aGVuKGVycm9yID0+IHtcbiAgICAgICAgaWYoIWVycm9yLmZpbGVQYXRoKSB7XG4gICAgICAgICAgICBlcnJvci5maWxlUGF0aCA9IGVkaXRvclBhdGg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tlcnJvci5maWxlUGF0aF07XG5cbiAgICAgICAgaWYoIWJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBmcy5yZWFkRmlsZShlcnJvci5maWxlUGF0aCwgKGVycjogYW55LCBkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBUZXh0QnVmZmVyKGRhdGEudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcnNbZXJyb3IuZmlsZVBhdGhdID0gYnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KS50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJDb252ZXJ0aW5nIGFuIGVycm9yIHdpdGggcmFuZ2U6IFtcIiArIGVycm9yLnJhbmdlLnN0YXJ0ICsgXCIgLCBcIiArIGVycm9yLnJhbmdlLmVuZCArIFwiXVwiLFxuICAgICAgICAgICAgXCJMaW50ZXItdWlcIixcInBvc3RQb2Nlc3NFcnJvclwiKTtcblxuICAgICAgICBpZiAoZXJyb3IucmFuZ2Uuc3RhcnQgIT0gbnVsbCAmJiBlcnJvci5yYW5nZS5lbmQgIT0gbnVsbCkge1xuXG4gICAgICAgICAgICBjbGllbnRDb25uZWN0aW9uLmRlYnVnRGV0YWlsKFwiQ29udmVydGluZyBhbiBlcnJvciB3aXRoIHJhbmdlIGFzIGFycmF5OiBbXCIgKyBlcnJvci5yYW5nZVswXSArIFwiICwgXCIgKyBlcnJvci5yYW5nZVsxXSArIFwiXVwiLFxuICAgICAgICAgICAgICAgIFwiTGludGVyLXVpXCIsXCJwb3N0UG9jZXNzRXJyb3JcIik7XG5cbiAgICAgICAgICAgIHZhciBwMSA9IGJ1ZmZlci5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGVycm9yLnJhbmdlLnN0YXJ0KTtcbiAgICAgICAgICAgIHZhciBwMiA9IGJ1ZmZlci5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGVycm9yLnJhbmdlLmVuZCk7XG5cbiAgICAgICAgICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJSZXN1bHQgZXJyb3IgcmFuZ2U6IFtcIiArIHAxLnJvdyArIFwiICwgXCIgKyBwMS5jb2x1bW4gKyBcIl0gOyBbXCIrIHAyLnJvdyArIFwiICwgXCIgKyBwMi5jb2x1bW4gKyBcIl1cIixcbiAgICAgICAgICAgICAgICBcIkxpbnRlci11aVwiLFwicG9zdFBvY2Vzc0Vycm9yXCIpO1xuXG4gICAgICAgICAgICBlcnJvci5yYW5nZSA9IFtbcDEucm93LCBwMS5jb2x1bW5dLCBbcDIucm93LCBwMi5jb2x1bW5dXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHRyYWNlRXJyb3JzID0gZXJyb3IudHJhY2UgfHwgW107XG4gICAgICAgIFxuICAgICAgICB2YXIgdHJhY2VQcm9taXNlcyA9IHRyYWNlRXJyb3JzLm1hcCh0cmFjZUVycm9yID0+IHBvc3RQb2Nlc3NFcnJvcihlZGl0b3IsIHRyYWNlRXJyb3IsIGJ1ZmZlcnMpKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodHJhY2VQcm9taXNlcykudGhlbih0cmFjZSA9PiB7XG4gICAgICAgICAgICBlcnJvci50cmFjZSA9IHRyYWNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRFZGl0b3JJZCh0ZXh0RWRpdG9yKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dEVkaXRvci5pZDtcbn1cblxuY2xhc3MgVmFsaWRhdGlvblJlcG9ydEV4cGVjdGVkIHtcbiAgICBwdWJsaWMgdXJpIDogc3RyaW5nXG4gICAgcHVibGljIGV4cGVjdGVkVmVyc2lvbiA6IG51bWJlclxuICAgIHB1YmxpYyByZXNvbHZlIDogeyhyZXN1bHQ6YW55KTp2b2lkfVxuICAgIHB1YmxpYyByZWplY3QgOiB7KGVycm9yOmFueSk6dm9pZH1cbn1cblxubGV0IGNsaWVudENvbm5lY3Rpb24gPSBnZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpO1xudmFyIGV4cGVjdGVkVmFsaWRhdGlvblJlcG9ydHMgOiBWYWxpZGF0aW9uUmVwb3J0RXhwZWN0ZWRbXSA9IFtdO1xuXG5mdW5jdGlvbiBmaW5kQW5kUmVtb3ZlRXhwZWN0ZWRSZXBvcnRzKHVyaSA6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbkxpbWl0OiBudW1iZXIpIDogVmFsaWRhdGlvblJlcG9ydEV4cGVjdGVkW10ge1xuICAgIGxldCByZXN1bHQgOiBWYWxpZGF0aW9uUmVwb3J0RXhwZWN0ZWRbXSA9IFtdO1xuXG4gICAgZXhwZWN0ZWRWYWxpZGF0aW9uUmVwb3J0cyA9IGV4cGVjdGVkVmFsaWRhdGlvblJlcG9ydHMuZmlsdGVyKHJlcG9ydEV4cGVjdGVkPT57XG5cbiAgICAgICAgaWYgKHJlcG9ydEV4cGVjdGVkLnVyaSA9PSB1cmlcbiAgICAgICAgICAgICYmICh2ZXJzaW9uTGltaXQgPT0gbnVsbCB8fCByZXBvcnRFeHBlY3RlZC5leHBlY3RlZFZlcnNpb24gPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZlcnNpb25MaW1pdCA+PSByZXBvcnRFeHBlY3RlZC5leHBlY3RlZFZlcnNpb24pKSB7XG5cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJlcG9ydEV4cGVjdGVkKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIGxhdGVzdFJlY2lldmVkUmVwb3J0ID0gbnVsbDtcbmNsaWVudENvbm5lY3Rpb24ub25WYWxpZGF0aW9uUmVwb3J0KChyZXBvcnQ6IElWYWxpZGF0aW9uUmVwb3J0KT0+e1xuICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJHb3QgZGVidWcgcmVwb3J0IGZvciB1cmkgXCIgKyByZXBvcnQucG9pbnRPZlZpZXdVcmkgK1xuICAgICAgICBcIiBhbmQgdmVyc2lvbiBcIiArIHJlcG9ydC52ZXJzaW9uLFxuICAgICAgICBcImxpbnRlci11aVwiLCBcIm9uVmFsaWRhdGlvblJlcG9ydFwiKVxuXG4gICAgbGV0IGV4cGVjdGVkUmVwb3J0cyA9IGZpbmRBbmRSZW1vdmVFeHBlY3RlZFJlcG9ydHMocmVwb3J0LnBvaW50T2ZWaWV3VXJpLFxuICAgICAgICByZXBvcnQudmVyc2lvbik7XG5cbiAgICBjbGllbnRDb25uZWN0aW9uLmRlYnVnRGV0YWlsKFwiRm91bmQgZXhwZWN0ZWQgcmVwb3J0czogXCIgKyBleHBlY3RlZFJlcG9ydHMubGVuZ3RoLFxuICAgICAgICBcImxpbnRlci11aVwiLCBcIm9uVmFsaWRhdGlvblJlcG9ydFwiKVxuXG4gICAgZm9yIChsZXQgZXhwZWN0ZWRSZXBvcnQgb2YgZXhwZWN0ZWRSZXBvcnRzKSB7XG4gICAgICAgIGV4cGVjdGVkUmVwb3J0LnJlc29sdmUocmVwb3J0Lmlzc3Vlcyk7XG4gICAgfVxuXG4gICAgbGF0ZXN0UmVjaWV2ZWRSZXBvcnQgPSByZXBvcnQ7XG59KTtcblxuZnVuY3Rpb24gcnVuVmFsaWRhdGlvblNoZWR1bGVVcGRhdGVyKHRleHRFZGl0b3I6IEF0b21Db3JlLklFZGl0b3IsIHJlc29sdmUsIHJlamVjdCkgOiB2b2lkIHtcbiAgICBsZXQgdXJpID0gdGV4dEVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICAvL2luIGFueSB3YXksIGxldHMgcmVwb3J0IGN1cnJlbnQgc3RhdGUsIGl0IHNob3VsZCBub3QgaHVydC5cbiAgICBjbGllbnRDb25uZWN0aW9uLmRvY3VtZW50Q2hhbmdlZCh7XG4gICAgICAgIHVyaSA6IHVyaSxcbiAgICAgICAgdGV4dDogdGV4dEVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KClcbiAgICB9KTtcblxuICAgIGNsaWVudENvbm5lY3Rpb24uZ2V0TGF0ZXN0VmVyc2lvbih1cmkpLnRoZW4odmVyc2lvbj0+e1xuICAgICAgICBjbGllbnRDb25uZWN0aW9uLmRlYnVnRGV0YWlsKFwiU2NoZWR1bGluZyB2YWxpZGF0aW9uIGZvciB1cmkgXCIgKyB1cmkgKyBcIiBhbmQgdmVyc2lvbiBcIiArXG4gICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgXCJsaW50ZXItdWlcIiwgXCJydW5WYWxpZGF0aW9uU2hlZHVsZVVwZGF0ZXJcIilcblxuICAgICAgICBpZiAobGF0ZXN0UmVjaWV2ZWRSZXBvcnQgJiYgbGF0ZXN0UmVjaWV2ZWRSZXBvcnQudmVyc2lvbiAmJlxuICAgICAgICAgICAgbGF0ZXN0UmVjaWV2ZWRSZXBvcnQudmVyc2lvbiA+PSB2ZXJzaW9uKSB7XG5cbiAgICAgICAgICAgIC8vd2UgYWxyZWFkeSBrbm93IHZhbGlkYXRpb24gcmVwb3J0IGZvciB0aGlzIHZlcnNpb25cblxuICAgICAgICAgICAgY2xpZW50Q29ubmVjdGlvbi5kZWJ1Z0RldGFpbChcIlByZXZpb3VzIHJlcG9ydCBmb3VuZCB2IFwiICtcbiAgICAgICAgICAgICAgICBsYXRlc3RSZWNpZXZlZFJlcG9ydC52ZXJzaW9uICsgXCIgcmVzb2x2aW5nLCBpc3N1ZXMgXCIgK1xuICAgICAgICAgICAgICAgIChsYXRlc3RSZWNpZXZlZFJlcG9ydC5pc3N1ZXM/bGF0ZXN0UmVjaWV2ZWRSZXBvcnQuaXNzdWVzLmxlbmd0aDowKSxcbiAgICAgICAgICAgICAgICBcImxpbnRlci11aVwiLCBcInJ1blZhbGlkYXRpb25TaGVkdWxlVXBkYXRlclwiKVxuXG4gICAgICAgICAgICByZXNvbHZlKGxhdGVzdFJlY2lldmVkUmVwb3J0Lmlzc3VlcylcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy9sZXRzIHdhaXQgdW50aWwgdGhlIHNlcnZlciBwcm92aWRlcyBhIHJlcG9ydCBmb3IgdGhpcyBvciBsYXRlciB2ZXJzaW9uXG4gICAgICAgICAgICBleHBlY3RlZFZhbGlkYXRpb25SZXBvcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHVyaTogdXJpLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkVmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgICAgICAgICByZXNvbHZlIDogcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICByZWplY3Q6IHJlamVjdFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJQdXNoaW5nIHRoZSBleHBlY3RlZCByZXBvcnQgdG8gdGhlIGxpc3QgZm9yIHZlcnNpb24gXCIgK1xuICAgICAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICAgICAgXCJsaW50ZXItdWlcIiwgXCJydW5WYWxpZGF0aW9uU2hlZHVsZVVwZGF0ZXJcIilcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaW50KHRleHRFZGl0b3I6IEF0b21Db3JlLklFZGl0b3IpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgaWYoIWlzUkFNTFVuaXQodGV4dEVkaXRvcikpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIFxuICAgIFByb21pc2UucmVzb2x2ZShcIlwiKS50aGVuKGVkaXRvck1hbmFnZXIudG9nZ2xlRWRpdG9yVG9vbHMpO1xuICAgIFxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBydW5WYWxpZGF0aW9uU2hlZHVsZVVwZGF0ZXIodGV4dEVkaXRvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KS50aGVuKChlcnJvcnM6IGFueVtdKSA9PiB7XG5cbiAgICAgICAgY2xpZW50Q29ubmVjdGlvbi5kZWJ1Z0RldGFpbChcIlVwZGF0ZSByZXBvcnQgaGFuZGxlZCBpbiB3aXRoIGlzc3VlcyBcIiArXG4gICAgICAgICAgICAoZXJyb3JzP2Vycm9ycy5sZW5ndGg6MCksXG4gICAgICAgICAgICBcImxpbnRlci11aVwiLCBcImxpbnRcIilcblxuICAgICAgICB2YXIgYnVmZmVycyA9IHt9O1xuICAgICAgICBcbiAgICAgICAgdmFyIHByb21pc2VzID0gZXJyb3JzLm1hcChlcnJvciA9PiBwb3N0UG9jZXNzRXJyb3IodGV4dEVkaXRvciwgZXJyb3IsIGJ1ZmZlcnMpKTtcblxuICAgICAgICB2YXIgdGFiczogYW55W10gPSB0YWJXYXJuaW5ncyh0ZXh0RWRpdG9yKTtcblxuICAgICAgICBwcm9taXNlcyA9IHByb21pc2VzLmNvbmNhdCh0YWJzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoZXJyb3JzOiBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbWJFcnJvcnMoZXJyb3JzKTtcblxuICAgICAgICAgICAgdmFyIHdhcm5pbmdzID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoZXJyb3IgPT4gZXJyb3IgPyB0cnVlIDogZmFsc2UpLmZpbHRlcihlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnR5cGUgPT09ICdXYXJuaW5nJyAmJiB3YXJuaW5ncysrID49IDIwID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY2xpZW50Q29ubmVjdGlvbi5kZWJ1Z0RldGFpbChcIkJlZm9yZSByZXR1cm5pbmcgZnJvbSBsaW50XCIsXG4gICAgICAgIFwibGludGVyLXVpXCIsIFwibGludFwiKVxuICAgIFxuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnNUb0VkaXRvcihlZGl0b3IpIHtcbiAgICBsZXQgY3VycmVudEJ1ZmZlciA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICBjdXJyZW50QnVmZmVyLm9uRGlkQ2hhbmdlKHggPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRlYnVnKFwiQ2hhbmdlIGRldGVjdGVkXCIsIFwibGludGVyLXVpXCIsIFwiYWRkTGlzdGVuZXJzVG9FZGl0b3JcIilcbiAgICAgICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5kb2N1bWVudENoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmk6IGN1cnJlbnRCdWZmZXIuZ2V0UGF0aCgpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjdXJyZW50QnVmZmVyLmdldFRleHQoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnNUb1dvcmtzcGFjZSgpIHtcbiAgICBhdG9tLndvcmtzcGFjZS5vbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGUgPT4ge1xuICAgICAgICBsZXQgZWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgICBhZGRMaXN0ZW5lcnNUb0VkaXRvcihlZGl0b3IpXG4gICAgICAgIH1cbiAgICB9KTtcbn0iXX0=\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/**\n\t * Returns whether the current text matches RAML unit.\n\t * @param contents\n\t * @returns {RegExpMatchArray}\n\t */\n\tfunction isRAMLUnit(contents) {\n\t    return contents.match(/^\\s*#%RAML\\s+(\\d\\.\\d)\\s*(\\w*)\\s*$/m);\n\t}\n\texports.isRAMLUnit = isRAMLUnit;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3V0aWwvdW5pdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0dBSUc7QUFDSCxvQkFBMkIsUUFBZ0I7SUFDdkMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsb0NBQW9DLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRkQsZ0NBRUMiLCJmaWxlIjoic3JjL2F0b20vdXRpbC91bml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgdGV4dCBtYXRjaGVzIFJBTUwgdW5pdC5cbiAqIEBwYXJhbSBjb250ZW50c1xuICogQHJldHVybnMge1JlZ0V4cE1hdGNoQXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JBTUxVbml0KGNvbnRlbnRzOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudHMubWF0Y2goL15cXHMqIyVSQU1MXFxzKyhcXGRcXC5cXGQpXFxzKihcXHcqKVxccyokL20pO1xufSJdfQ==\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"basarat-text-buffer\");\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/**\n\t * Created by kor on 24/07/15.\n\t */\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t// import fs = require ('fs')\n\t// import path = require ('path')\n\tvar editorTools = __webpack_require__(1);\n\t// import rp=require(\"raml-1-parser\")\n\t// import project=rp.project;\n\t// export function ast(editor:AtomCore.IEditor):rp.IHighLevelNode{\n\t//     var man=editorTools.aquireManager();\n\t//     if (editorTools.aquireManager()){\n\t//         if (man.getCurrentEditor()==editor){\n\t//             return man.ast;\n\t//         }\n\t//     }\n\t//     var p=editor.getPath();\n\t//     var prj=project.createProject(path.dirname(p));\n\t//     var unit=prj.unit(path.basename(p));\n\t//     var text=editor.getBuffer().getText();\n\t//     if (!unit){\n\t//         return null;\n\t//     }\n\t//     unit.updateContent(text);\n\t//     var ast=<rp.IHighLevelNode>unit.highLevel();\n\t//     return ast;\n\t// }\n\tfunction toggleEditorTools() {\n\t    var man = editorTools.aquireManager();\n\t    if (man) {\n\t        man.getCurrentEditor();\n\t    }\n\t}\n\texports.toggleEditorTools = toggleEditorTools;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvZWRpdG9yTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7QUFDSCxtREFBbUQ7O0FBRW5ELDZCQUE2QjtBQUM3QixpQ0FBaUM7QUFDakMsMERBQTBEO0FBQzFELHFDQUFxQztBQUNyQyw2QkFBNkI7QUFFN0Isa0VBQWtFO0FBQ2xFLDJDQUEyQztBQUMzQyx3Q0FBd0M7QUFDeEMsK0NBQStDO0FBQy9DLDhCQUE4QjtBQUM5QixZQUFZO0FBQ1osUUFBUTtBQUNSLDhCQUE4QjtBQUM5QixzREFBc0Q7QUFDdEQsMkNBQTJDO0FBQzNDLDZDQUE2QztBQUM3QyxrQkFBa0I7QUFDbEIsdUJBQXVCO0FBQ3ZCLFFBQVE7QUFDUixnQ0FBZ0M7QUFDaEMsbURBQW1EO0FBQ25ELGtCQUFrQjtBQUNsQixJQUFJO0FBRUo7SUFDSSxJQUFJLEdBQUcsR0FBRyxXQUFXLENBQUMsYUFBYSxFQUFFLENBQUM7SUFFdEMsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUEsQ0FBQztRQUNKLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzNCLENBQUM7QUFDTCxDQUFDO0FBTkQsOENBTUMiLCJmaWxlIjoic3JjL2F0b20vY29yZS9lZGl0b3JNYW5hZ2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGtvciBvbiAyNC8wNy8xNS5cbiAqL1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuLy8gaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbi8vIGltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuaW1wb3J0IGVkaXRvclRvb2xzPXJlcXVpcmUoXCIuLi9lZGl0b3ItdG9vbHMvZWRpdG9yLXRvb2xzXCIpXG4vLyBpbXBvcnQgcnA9cmVxdWlyZShcInJhbWwtMS1wYXJzZXJcIilcbi8vIGltcG9ydCBwcm9qZWN0PXJwLnByb2plY3Q7XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBhc3QoZWRpdG9yOkF0b21Db3JlLklFZGl0b3IpOnJwLklIaWdoTGV2ZWxOb2Rle1xuLy8gICAgIHZhciBtYW49ZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpO1xuLy8gICAgIGlmIChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkpe1xuLy8gICAgICAgICBpZiAobWFuLmdldEN1cnJlbnRFZGl0b3IoKT09ZWRpdG9yKXtcbi8vICAgICAgICAgICAgIHJldHVybiBtYW4uYXN0O1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIHZhciBwPWVkaXRvci5nZXRQYXRoKCk7XG4vLyAgICAgdmFyIHByaj1wcm9qZWN0LmNyZWF0ZVByb2plY3QocGF0aC5kaXJuYW1lKHApKTtcbi8vICAgICB2YXIgdW5pdD1wcmoudW5pdChwYXRoLmJhc2VuYW1lKHApKTtcbi8vICAgICB2YXIgdGV4dD1lZGl0b3IuZ2V0QnVmZmVyKCkuZ2V0VGV4dCgpO1xuLy8gICAgIGlmICghdW5pdCl7XG4vLyAgICAgICAgIHJldHVybiBudWxsO1xuLy8gICAgIH1cbi8vICAgICB1bml0LnVwZGF0ZUNvbnRlbnQodGV4dCk7XG4vLyAgICAgdmFyIGFzdD08cnAuSUhpZ2hMZXZlbE5vZGU+dW5pdC5oaWdoTGV2ZWwoKTtcbi8vICAgICByZXR1cm4gYXN0O1xuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRWRpdG9yVG9vbHMoKTogdm9pZCB7XG4gICAgdmFyIG1hbiA9IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKTtcbiAgICBcbiAgICBpZihtYW4pe1xuICAgICAgICBtYW4uZ2V0Q3VycmVudEVkaXRvcigpO1xuICAgIH1cbn1cbiJdfQ==\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"raml-language-server\");\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar PromiseConstructor = __webpack_require__(19);\n\tif (typeof Promise === \"undefined\" && typeof window !== \"undefined\") {\n\t    window.Promise = PromiseConstructor;\n\t}\n\tvar Reconciler = /** @class */ (function () {\n\t    function Reconciler(logger, timeout) {\n\t        this.logger = logger;\n\t        this.timeout = timeout;\n\t        this.waitingList = [];\n\t        this.runningList = [];\n\t    }\n\t    Reconciler.prototype.schedule = function (runnable) {\n\t        var _this = this;\n\t        this.addToWaitingList(runnable);\n\t        return new Promise(function (resolve, reject) {\n\t            setTimeout(function () {\n\t                _this.logger.debugDetail(\"Time came to execute \" + runnable.toString(), \"Reconciler\", \"schedule\");\n\t                if (runnable.isCanceled()) {\n\t                    _this.logger.debugDetail(\"Runnable \" + runnable.toString() + \" is cancelled, doing nothing\", \"Reconciler\", \"schedule\");\n\t                    _this.removeFromWaitingList(runnable);\n\t                    return;\n\t                }\n\t                var currentlyRunning = _this.findConflictingInRunningList(runnable);\n\t                if (currentlyRunning) {\n\t                    // TODO add an additional short timeout parameter to launch the reschedule\n\t                    // at the finish of the currently running task for a short time after it.\n\t                    _this.logger.debugDetail(\"Conflicting to \" + runnable.toString()\n\t                        + \" is found in the running list: \" + currentlyRunning.toString()\n\t                        + \" rescheduling current one.\", \"Reconciler\", \"schedule\");\n\t                    _this.schedule(runnable);\n\t                    return;\n\t                }\n\t                _this.removeFromWaitingList(runnable);\n\t                _this.addToRunningList(runnable);\n\t                _this.logger.debugDetail(\"Executing \" + runnable.toString(), \"Reconciler\", \"schedule\");\n\t                _this.run(runnable).then(function (result) { resolve(result); }, function (error) { reject(error); });\n\t            }, _this.timeout);\n\t        });\n\t    };\n\t    Reconciler.prototype.run = function (runnable) {\n\t        var _this = this;\n\t        return runnable.run().then(function (result) {\n\t            _this.removeFromRunningList(runnable);\n\t            return result;\n\t        }, function (error) {\n\t            _this.removeFromRunningList(runnable);\n\t            throw error;\n\t        });\n\t    };\n\t    /**\n\t     * Adds item to waiting list and removes anything currently in the list,\n\t     * which conflicts with the new item.\n\t     * @param runnable\n\t     */\n\t    Reconciler.prototype.addToWaitingList = function (runnable) {\n\t        var _this = this;\n\t        this.logger.debugDetail(\"Adding runnable \" + runnable.toString() + \" to waiting list\", \"Reconciler\", \"addToWaitingList\");\n\t        this.waitingList = this.waitingList.filter(function (current) {\n\t            _this.logger.debugDetail(\"Comparing existing runnable \" + current.toString() +\n\t                \" to the new \" + runnable.toString(), \"Reconciler\", \"addToWaitingList\");\n\t            var conflicts = runnable.conflicts(current);\n\t            if (conflicts) {\n\t                _this.logger.debugDetail(\"Runnables are conflicting, canceling existing one\", \"Reconciler\", \"addToWaitingList\");\n\t                current.cancel();\n\t            }\n\t            return !conflicts;\n\t        });\n\t        this.waitingList.push(runnable);\n\t    };\n\t    /**\n\t     * Removes runnable from the list of running ones.\n\t     * @param runnable\n\t     */\n\t    Reconciler.prototype.removeFromWaitingList = function (runnable) {\n\t        this.logger.debugDetail(\"Removing \" + runnable.toString()\n\t            + \" from waiting list\", \"Reconciler\", \"removeFromWaitingList\");\n\t        var index = this.waitingList.indexOf(runnable);\n\t        if (index !== -1) {\n\t            this.waitingList.splice(index, 1);\n\t        }\n\t    };\n\t    /**\n\t     * Adds runnable to the list of running ones.\n\t     * @param runnable\n\t     */\n\t    Reconciler.prototype.addToRunningList = function (runnable) {\n\t        this.logger.debugDetail(\"Adding \" + runnable.toString()\n\t            + \" to running list\", \"Reconciler\", \"removeFromWaitingList\");\n\t        this.runningList.push(runnable);\n\t    };\n\t    /**\n\t     * Removes runnable from the list of running ones.\n\t     * @param runnable\n\t     */\n\t    Reconciler.prototype.removeFromRunningList = function (runnable) {\n\t        this.logger.debugDetail(\"Removing \" + runnable.toString()\n\t            + \" from running list\", \"Reconciler\", \"removeFromWaitingList\");\n\t        var index = this.runningList.indexOf(runnable);\n\t        if (index !== -1) {\n\t            this.runningList.splice(index, 1);\n\t        }\n\t    };\n\t    /**\n\t     * Finds the first conflicting runnable in the current list.\n\t     * @param runnable\n\t     * @returns {any}\n\t     */\n\t    Reconciler.prototype.findConflictingInRunningList = function (runnable) {\n\t        for (var _i = 0, _a = this.runningList; _i < _a.length; _i++) {\n\t            var current = _a[_i];\n\t            if (runnable.conflicts(current)) {\n\t                return current;\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    return Reconciler;\n\t}());\n\texports.Reconciler = Reconciler;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9yZWNvbmNpbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEscURBQXdEO0FBQ3hELEVBQUUsQ0FBQyxDQUFDLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLE1BQWMsQ0FBQyxPQUFPLEdBQUcsa0JBQWtCLENBQUM7QUFDakQsQ0FBQztBQTZCRDtJQUtJLG9CQUFvQixNQUFlLEVBQVUsT0FBZTtRQUF4QyxXQUFNLEdBQU4sTUFBTSxDQUFTO1FBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUhwRCxnQkFBVyxHQUFvQixFQUFFLENBQUM7UUFDbEMsZ0JBQVcsR0FBb0IsRUFBRSxDQUFDO0lBRzFDLENBQUM7SUFFTSw2QkFBUSxHQUFmLFVBQTRCLFFBQThCO1FBQTFELGlCQThDQztRQTdDRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFaEMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBcUMsRUFBRSxNQUE2QjtZQUVwRixVQUFVLENBQUM7Z0JBRVAsS0FBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsdUJBQXVCLEdBQUcsUUFBUSxDQUFDLFFBQVEsRUFBRSxFQUNqRSxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7Z0JBRTlCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ3hCLEtBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsOEJBQThCLEVBQ3RGLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztvQkFFOUIsS0FBSSxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUNyQyxNQUFNLENBQUM7Z0JBQ1gsQ0FBQztnQkFFRCxJQUFNLGdCQUFnQixHQUFHLEtBQUks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R0FBcEMsVUFBaUQsUUFBOEI7UUFDM0UsR0FBRyxDQUFDLENBQWtCLFVBQWdCLEVBQWhCLEtBQUEsSUFBSSxDQUFDLFdBQVcsRUFBaEIsY0FBZ0IsRUFBaEIsSUFBZ0I7WUFBakMsSUFBTSxPQUFPLFNBQUE7WUFDZCxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUNuQixDQUFDO1NBQ0o7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTCxpQkFBQztBQUFELENBN0pBLEFBNkpDLElBQUE7QUE3SlksZ0NBQVUiLCJmaWxlIjoic3JjL2F0b20vZWRpdG9yLXRvb2xzL3JlY29uY2lsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIElMb2dnZXJcbn0gZnJvbSBcIi4vbG9nZ2VyXCI7XG5cbmltcG9ydCBQcm9taXNlQ29uc3RydWN0b3IgPSByZXF1aXJlKFwicHJvbWlzZS1wb2x5ZmlsbFwiKTtcbmlmICh0eXBlb2YgUHJvbWlzZSA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgKHdpbmRvdyBhcyBhbnkpLlByb21pc2UgPSBQcm9taXNlQ29uc3RydWN0b3I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUnVubmFibGU8UmVzdWx0VHlwZT4ge1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgdGhlIGFjdHVhbCBidXNpbmVzcyBsb2dpY3MuXG4gICAgICogU2hvdWxkIHJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiBmaW5pc2hlZC5cbiAgICAgKi9cbiAgICBydW4oKTogUHJvbWlzZTxSZXN1bHRUeXBlPjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdHdvIHJ1bm5hYmxlIGNvbmZsaWN0IHdpdGggZWFjaCBvdGhlci5cbiAgICAgKiBNdXN0IHdvcmsgZmFzdCBhcyBpdHMgY2FsbGVkIG9mdGVuLlxuICAgICAqIEBwYXJhbSBvdGhlclxuICAgICAqL1xuICAgIGNvbmZsaWN0cyhvdGhlcjogUnVubmFibGU8YW55Pik6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBydW5uYWJsZS4gcnVuKCkgbWV0aG9kIHNob3VsZCBkbyBub3RoaW5nIGlmIGxhdW5jaGVkIGxhdGVyLFxuICAgICAqIGlmIGNhbmNlbCBpcyBjYWxsZWQgZHVyaW5nIHRoZSBydW4oKSBtZXRob2QgZXhlY3V0aW9uLCBydW4oKSBzaG91bGQgc3RvcCBhcyBzb29uIGFzIGl0IGNhbi5cbiAgICAgKi9cbiAgICBjYW5jZWwoKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgY2FuY2VsKCkgbWV0aG9kIHdhcyBjYWxsZWQgYXQgbGVhc3Qgb25jZS5cbiAgICAgKi9cbiAgICBpc0NhbmNlbGVkKCk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBSZWNvbmNpbGVyIHtcblxuICAgIHByaXZhdGUgd2FpdGluZ0xpc3Q6IFJ1bm5hYmxlPGFueT5bXSA9IFtdO1xuICAgIHByaXZhdGUgcnVubmluZ0xpc3Q6IFJ1bm5hYmxlPGFueT5bXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBsb2dnZXI6IElMb2dnZXIsIHByaXZhdGUgdGltZW91dDogbnVtYmVyKSB7XG4gICAgfVxuXG4gICAgcHVibGljIHNjaGVkdWxlPFJlc3VsdFR5cGU+KHJ1bm5hYmxlOiBSdW5uYWJsZTxSZXN1bHRUeXBlPik6IFByb21pc2U8UmVzdWx0VHlwZT4ge1xuICAgICAgICB0aGlzLmFkZFRvV2FpdGluZ0xpc3QocnVubmFibGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlPzogUmVzdWx0VHlwZSkgPT4gdm9pZCwgcmVqZWN0OiAoZXJyb3I/OiBhbnkpID0+IHZvaWQpID0+IHtcblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1Z0RldGFpbChcIlRpbWUgY2FtZSB0byBleGVjdXRlIFwiICsgcnVubmFibGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwic2NoZWR1bGVcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAocnVubmFibGUuaXNDYW5jZWxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiUnVubmFibGUgXCIgKyBydW5uYWJsZS50b1N0cmluZygpICsgXCIgaXMgY2FuY2VsbGVkLCBkb2luZyBub3RoaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlJlY29uY2lsZXJcIiwgXCJzY2hlZHVsZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21XYWl0aW5nTGlzdChydW5uYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50bHlSdW5uaW5nID0gdGhpcy5maW5kQ29uZmxpY3RpbmdJblJ1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBhbiBhZGRpdGlvbmFsIHNob3J0IHRpbWVvdXQgcGFyYW1ldGVyIHRvIGxhdW5jaCB0aGUgcmVzY2hlZHVsZVxuICAgICAgICAgICAgICAgICAgICAvLyBhdCB0aGUgZmluaXNoIG9mIHRoZSBjdXJyZW50bHkgcnVubmluZyB0YXNrIGZvciBhIHNob3J0IHRpbWUgYWZ0ZXIgaXQuXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWdEZXRhaWwoXCJDb25mbGljdGluZyB0byBcIiArIHJ1bm5hYmxlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgaXMgZm91bmQgaW4gdGhlIHJ1bm5pbmcgbGlzdDogXCIgKyBjdXJyZW50bHlSdW5uaW5nLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgcmVzY2hlZHVsaW5nIGN1cnJlbnQgb25lLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwic2NoZWR1bGVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZShydW5uYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21XYWl0aW5nTGlzdChydW5uYWJsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb1J1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiRXhlY3V0aW5nIFwiICsgcnVubmFibGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwic2NoZWR1bGVcIik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJ1bihydW5uYWJsZSkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdCkgPT4geyByZXNvbHZlKHJlc3VsdCk7IH0sXG4gICAgICAgICAgICAgICAgICAgIChlcnJvcikgPT4geyByZWplY3QoZXJyb3IpOyB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfSwgdGhpcy50aW1lb3V0KTtcblxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJ1bjxSZXN1bHRUeXBlPihydW5uYWJsZTogUnVubmFibGU8UmVzdWx0VHlwZT4pOiBQcm9taXNlPFJlc3VsdFR5cGU+IHtcblxuICAgICAgICByZXR1cm4gcnVubmFibGUucnVuKCkudGhlbihcblxuICAgICAgICAgICAgKHJlc3VsdCk6IFJlc3VsdFR5cGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVJ1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnJvcik6IFJlc3VsdFR5cGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVJ1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgaXRlbSB0byB3YWl0aW5nIGxpc3QgYW5kIHJlbW92ZXMgYW55dGhpbmcgY3VycmVudGx5IGluIHRoZSBsaXN0LFxuICAgICAqIHdoaWNoIGNvbmZsaWN0cyB3aXRoIHRoZSBuZXcgaXRlbS5cbiAgICAgKiBAcGFyYW0gcnVubmFibGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFRvV2FpdGluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiQWRkaW5nIHJ1bm5hYmxlIFwiICsgcnVubmFibGUudG9TdHJpbmcoKSArIFwiIHRvIHdhaXRpbmcgbGlzdFwiLFxuICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwiYWRkVG9XYWl0aW5nTGlzdFwiKTtcblxuICAgICAgICB0aGlzLndhaXRpbmdMaXN0ID0gdGhpcy53YWl0aW5nTGlzdC5maWx0ZXIoKGN1cnJlbnQpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWdEZXRhaWwoXCJDb21wYXJpbmcgZXhpc3RpbmcgcnVubmFibGUgXCIgKyBjdXJyZW50LnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgICAgIFwiIHRvIHRoZSBuZXcgXCIgKyBydW5uYWJsZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIFwiUmVjb25jaWxlclwiLCBcImFkZFRvV2FpdGluZ0xpc3RcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0cyA9IHJ1bm5hYmxlLmNvbmZsaWN0cyhjdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChjb25mbGljdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1Z0RldGFpbChcIlJ1bm5hYmxlcyBhcmUgY29uZmxpY3RpbmcsIGNhbmNlbGluZyBleGlzdGluZyBvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwiYWRkVG9XYWl0aW5nTGlzdFwiKTtcblxuICAgICAgICAgICAgICAgIGN1cnJlbnQuY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAhY29uZmxpY3RzO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLndhaXRpbmdMaXN0LnB1c2gocnVubmFibGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcnVubmFibGUgZnJvbSB0aGUgbGlzdCBvZiBydW5uaW5nIG9uZXMuXG4gICAgICogQHBhcmFtIHJ1bm5hYmxlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW1vdmVGcm9tV2FpdGluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiUmVtb3ZpbmcgXCIgKyBydW5uYWJsZS50b1N0cmluZygpXG4gICAgICAgICAgICArIFwiIGZyb20gd2FpdGluZyBsaXN0XCIsXG4gICAgICAgICAgICBcIlJlY29uY2lsZXJcIiwgXCJyZW1vdmVGcm9tV2FpdGluZ0xpc3RcIik7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndhaXRpbmdMaXN0LmluZGV4T2YocnVubmFibGUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLndhaXRpbmdMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHJ1bm5hYmxlIHRvIHRoZSBsaXN0IG9mIHJ1bm5pbmcgb25lcy5cbiAgICAgKiBAcGFyYW0gcnVubmFibGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFRvUnVubmluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiQWRkaW5nIFwiICsgcnVubmFibGUudG9TdHJpbmcoKVxuICAgICAgICAgICAgKyBcIiB0byBydW5uaW5nIGxpc3RcIixcbiAgICAgICAgICAgIFwiUmVjb25jaWxlclwiLCBcInJlbW92ZUZyb21XYWl0aW5nTGlzdFwiKTtcblxuICAgICAgICB0aGlzLnJ1bm5pbmdMaXN0LnB1c2gocnVubmFibGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcnVubmFibGUgZnJvbSB0aGUgbGlzdCBvZiBydW5uaW5nIG9uZXMuXG4gICAgICogQHBhcmFtIHJ1bm5hYmxlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW1vdmVGcm9tUnVubmluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiUmVtb3ZpbmcgXCIgKyBydW5uYWJsZS50b1N0cmluZygpXG4gICAgICAgICAgICArIFwiIGZyb20gcnVubmluZyBsaXN0XCIsXG4gICAgICAgICAgICBcIlJlY29uY2lsZXJcIiwgXCJyZW1vdmVGcm9tV2FpdGluZ0xpc3RcIik7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnJ1bm5pbmdMaXN0LmluZGV4T2YocnVubmFibGUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmdMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgZmlyc3QgY29uZmxpY3RpbmcgcnVubmFibGUgaW4gdGhlIGN1cnJlbnQgbGlzdC5cbiAgICAgKiBAcGFyYW0gcnVubmFibGVcbiAgICAgKiBAcmV0dXJucyB7YW55fVxuICAgICAqL1xuICAgIHByaXZhdGUgZmluZENvbmZsaWN0aW5nSW5SdW5uaW5nTGlzdDxSZXN1bHRUeXBlPihydW5uYWJsZTogUnVubmFibGU8UmVzdWx0VHlwZT4pOiBSdW5uYWJsZTxSZXN1bHRUeXBlPiB7XG4gICAgICAgIGZvciAoY29uc3QgY3VycmVudCBvZiB0aGlzLnJ1bm5pbmdMaXN0KSB7XG4gICAgICAgICAgICBpZiAocnVubmFibGUuY29uZmxpY3RzKGN1cnJlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iXX0=\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"promise-polyfill\");\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar UI = __webpack_require__(5);\n\tvar SC = __webpack_require__(6);\n\tvar CompositeDisposable = UI.CompositeDisposable;\n\t// import details2=require(\"./details2\")\n\t// import contextActions = require(\"raml-actions\")\n\t// import commonContextActions = require(\"../context-menu/commonContextActions\")\n\tvar editorTools = __webpack_require__(1);\n\t// import universeHelpers = rp.universeHelpers;\n\t// import ramlOutline = require(\"raml-outline\")\n\t// import outlineCommon = require(\"./outline-common\")\n\tvar ramlServer = __webpack_require__(17);\n\tfunction getActiveEditor() {\n\t    var activeEditor = atom.workspace.getActiveTextEditor();\n\t    if (activeEditor) {\n\t        return activeEditor;\n\t    }\n\t    if (editorTools.aquireManager())\n\t        return editorTools.aquireManager().getCurrentEditor();\n\t    return null;\n\t}\n\texports.getActiveEditor = getActiveEditor;\n\tvar RamlOutline = /** @class */ (function (_super) {\n\t    __extends(RamlOutline, _super);\n\t    function RamlOutline() {\n\t        var _this = _super.call(this) || this;\n\t        _this.disposables = new CompositeDisposable();\n\t        _this.fire = true;\n\t        _this.createTree(null);\n\t        _this.addClass('raml-outline');\n\t        _this.addChild(_this._rs);\n\t        return _this;\n\t    }\n\t    RamlOutline.prototype.createTree = function (structure /*p: hl.IParseResult*/) {\n\t        var _this = this;\n\t        this._rs = createTree(structure, function (sender) {\n\t            if (sender.selection && sender.selection.elements && _this.fire == true) {\n\t                if (sender.selection.elements.length > 0 && sender.selection.elements[0]) {\n\t                    var activeEditor = getActiveEditor();\n\t                    var p1 = activeEditor.getBuffer().positionForCharacterIndex(sender.selection.elements[0].start);\n\t                    var p2 = activeEditor.getBuffer().positionForCharacterIndex(sender.selection.elements[0].end);\n\t                    activeEditor.setSelectedBufferRange({ start: p1, end: p2 }, {});\n\t                }\n\t            }\n\t        });\n\t        this._viewers = [];\n\t        if (structure)\n\t            this._viewers = [0, 1, 2, 3].map(function (i) { return _this._rs.get(i).content; });\n\t    };\n\t    RamlOutline.prototype.getTitle = function () { return \"Outline\"; };\n\t    RamlOutline.prototype.getNodePType = function (node) {\n\t        node.category;\n\t        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.ResourcesCategory])\n\t            return 0;\n\t        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.SchemasAndTypesCategory])\n\t            return 1;\n\t        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.ResourceTypesAndTraitsCategory])\n\t            return 2;\n\t        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.OtherCategory])\n\t            return 3;\n\t        return 3;\n\t    };\n\t    RamlOutline.prototype.setSelection = function (node) {\n\t        //if (this._selectedNode == node) return;\n\t        this._selectedNode = node;\n\t        this.fire = false;\n\t        try {\n\t            var index = this.getNodePType(node);\n\t            var viewer = this._viewers[index];\n\t            if (viewer != null) {\n\t                viewer.setSelection(node);\n\t                this._rs.setSelectedIndex(index);\n\t            }\n\t        }\n\t        finally {\n\t            this.fire = true;\n\t        }\n\t    };\n\t    RamlOutline.prototype.setUnit = function (unitPath /*unit:hl.IHighLevelNode*/, force) {\n\t        var _this = this;\n\t        if (force === void 0) { force = false; }\n\t        if (this.unitPath && unitPath && unitPath != this.unitPath) {\n\t            this._children = [];\n\t        }\n\t        this.unitPath = unitPath;\n\t        var activeEditor = getActiveEditor();\n\t        ramlServer.getNodeClientConnection().documentChanged({\n\t            uri: unitPath,\n\t            text: activeEditor.getText()\n\t        });\n\t        var structurePromise = ramlServer.getNodeClientConnection().getStructure(unitPath);\n\t        if (structurePromise) {\n\t            structurePromise.then(function (structure) {\n\t                _this.createTree(structure);\n\t                _this.addClass('raml-outline');\n\t                _this._children = [];\n\t                _this.addChild(_this._rs);\n\t                _this.html(_this.innerRenderUI());\n\t            }).catch(function (error) {\n\t                //ignoring, the error is already reported to the log, and we dont need to display\n\t                //it to user in other way\n\t            });\n\t        }\n\t    };\n\t    RamlOutline.prototype.attach = function () {\n\t        if (!this._isAttached) {\n\t            var $this = $(this);\n\t            $this.html(this._rs.renderUI().outerHTML);\n\t            this._isAttached = true;\n\t        }\n\t    };\n\t    RamlOutline.prototype.forEachViewer = function (command) {\n\t        this._viewers.forEach(command);\n\t    };\n\t    RamlOutline.prototype.refresh = function () {\n\t        // var unit = this.unit;\n\t        // this.setUnit(null);\n\t        // this.setUnit(unit);\n\t        var unitPath = this.unitPath;\n\t        this.setUnit(null);\n\t        this.setUnit(unitPath);\n\t    };\n\t    RamlOutline.prototype.destroy = function () {\n\t        editorTools.aquireManager()._view = null;\n\t        // this._selectedNode=null;\n\t        // this.unit=null;\n\t        this.unitPath = null;\n\t        this._viewers = [];\n\t        this._rs = null;\n\t        this._children = [];\n\t        this.disposables.dispose();\n\t    };\n\t    return RamlOutline;\n\t}(SC.Scrollable));\n\texports.RamlOutline = RamlOutline;\n\t/*\n\t *\n\t */\n\t// export function treeSection(input: hl.IParseResult,\n\t//                             name: string,\n\t//                             icon: UI.Icon,\n\t//                             filterFunc: (x:hl.IHighLevelNode)=>boolean,\n\t//                             l: UI.ISelectionListener<any>,\n\t//                             opener: (x:hl.IParseResult)=>void=null) : UI.TreePanel<any,any> {\n\t//\n\t//     var v = UI.treeViewerSection(name,icon,input,x=>getChildren(x).filter(x=>filterFunc(<hl.IHighLevelNode> x)),new HLRenderer(opener));\n\t//\n\t//     v.viewer.setBasicLabelFunction(x=>x ? x.name() : '');\n\t//     v.viewer.setKeyProvider({\n\t//         key:(p:hl.IParseResult):string=>{\n\t//             return \"\"+p.lowLevel().start();\n\t//         }\n\t//\n\t//     });\n\t//     v.viewer.addSelectionListener(l)\n\t//     return v;\n\t// }\n\tvar HLNodeType;\n\t(function (HLNodeType) {\n\t    HLNodeType[HLNodeType[\"Resource\"] = 0] = \"Resource\";\n\t    HLNodeType[HLNodeType[\"Schema\"] = 1] = \"Schema\";\n\t    HLNodeType[HLNodeType[\"Type\"] = 2] = \"Type\";\n\t    HLNodeType[HLNodeType[\"Trait\"] = 3] = \"Trait\";\n\t    HLNodeType[HLNodeType[\"Unknown\"] = 4] = \"Unknown\";\n\t})(HLNodeType || (HLNodeType = {}));\n\t// function getNodeType(node: hl.IHighLevelNode): HLNodeType {\n\t//     if (outlineCommon.isResource(node)) return HLNodeType.Resource;\n\t//     else if (outlineCommon.isOther(node)) return HLNodeType.Trait;\n\t//     else if (outlineCommon.isResourceTypeOrTrait(node)) return HLNodeType.Type;\n\t//     else if (outlineCommon.isSchemaOrType(node)) return HLNodeType.Schema;\n\t//     else return HLNodeType.Unknown;\n\t// }\n\t// function isApi(p: hl.IHighLevelNode) {\n\t//     var pc=p.definition().key();\n\t//     return pc===universes.Universe08.Api||pc===universes.Universe10.Api;\n\t// }\n\t// function isDocumentation(p: hl.IHighLevelNode) {\n\t//     var pc=p.definition().key();\n\t//     return ( pc=== universes.Universe08.DocumentationItem||pc===universes.Universe10.DocumentationItem);\n\t// }\n\tfunction fullStructurePath(model) {\n\t    if (!model)\n\t        return \"\";\n\t    return model.text;\n\t    // var node = model.getSource();\n\t    // return fullPath(<any>node);\n\t}\n\t//\n\t// function fullPath(node: hl.IParseResult) {\n\t//     if (node == null) return \"\";\n\t//     else return fullPath(node.parent()) + \"/\" + node.name();\n\t// }\n\tfunction simpleTree(input, selectionListener, categoryName, opener) {\n\t    if (opener === void 0) { opener = null; }\n\t    var viewer = UI.treeViewer(function (x) {\n\t        return x.children;\n\t    }, new HLRenderer(opener), fullStructurePath);\n\t    viewer.setBasicLabelFunction(function (x) { return x.text; });\n\t    viewer.setKeyProvider({ key: function (x) { return x.key; } });\n\t    viewer.addSelectionListener(selectionListener);\n\t    viewer.getBinding().set(input);\n\t    return viewer;\n\t}\n\tfunction createTree(structure, selectionListener, opener) {\n\t    if (opener === void 0) { opener = null; }\n\t    if (!structure) {\n\t        return new UI.TabFolder();\n\t    }\n\t    var resourcesModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.ResourcesCategory]];\n\t    var typesModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.SchemasAndTypesCategory]];\n\t    var traitsModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.ResourceTypesAndTraitsCategory]];\n\t    var otherModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.OtherCategory]];\n\t    // var resourcesModel = p!=null?ramlOutline.getStructure(outlineCommon.ResourcesCategory):null;\n\t    // var typesModel = p!=null?ramlOutline.getStructure(outlineCommon.SchemasAndTypesCategory):null;\n\t    // var traitsModel = p!=null?ramlOutline.getStructure(outlineCommon.ResourceTypesAndTraitsCategory):null;\n\t    // var otherModel = p!=null?ramlOutline.getStructure(outlineCommon.OtherCategory):null;\n\t    var outline = resourcesModel != null ? simpleTree(resourcesModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.ResourcesCategory], opener) : null;\n\t    var schemas = typesModel != null ? simpleTree(typesModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.SchemasAndTypesCategory], opener) : null;\n\t    var types = traitsModel != null ? simpleTree(traitsModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.ResourceTypesAndTraitsCategory], opener) : null;\n\t    var other = otherModel != null ? simpleTree(otherModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.OtherCategory], opener) : null;\n\t    var folder = new UI.TabFolder();\n\t    folder.add(\"Resources\", UI.Icon.SEARCH, outline, 'raml-icon-custom');\n\t    folder.add(\"Schemas&Types\", UI.Icon.SEARCH, schemas, 'raml-icon-custom');\n\t    folder.add(\"ResourceTypes&Traits\", UI.Icon.SEARCH, types, 'raml-icon-custom');\n\t    folder.add(\"Other\", UI.Icon.SEARCH, other, 'raml-icon-custom');\n\t    folder.setSelectedIndex(0);\n\t    folder.setOnSelected(function () {\n\t        var selectedTab = folder.selectedComponent();\n\t        if (selectedTab) {\n\t            var selection = selectedTab.getSelection();\n\t            if (selection && selection.elements && selection.elements.length > 0) {\n\t                selectionListener(new UI.SelectionChangedEvent(selectedTab, null, selection));\n\t            }\n\t            selectedTab.customizePanel(true);\n\t        }\n\t    });\n\t    return folder;\n\t}\n\texports.createTree = createTree;\n\tvar HLRenderer = /** @class */ (function () {\n\t    function HLRenderer(opener) {\n\t        this.opener = opener;\n\t    }\n\t    HLRenderer.prototype.iconNameToIconEnum = function (iconName) {\n\t        if (!iconName)\n\t            return null;\n\t        return UI.Icon[iconName];\n\t    };\n\t    HLRenderer.prototype.textHighlightNameToTextClass = function (highlightName) {\n\t        if (!highlightName)\n\t            return null;\n\t        return UI.TextClasses[highlightName];\n\t    };\n\t    HLRenderer.prototype.render = function (model) {\n\t        try {\n\t            // if (ramlOutline.isTypedStructureNode(model)\n\t            //     && (<ramlOutline.TypedStructureNode>model).type\n\t            //     && (<ramlOutline.TypedStructureNode>model).type == ramlOutline.NodeType.ATTRIBUTE) {\n\t            //\n\t            //     var attr = <hl.IAttribute>(<any>model.getSource());\n\t            //\n\t            //     //TODO check if we really need custom selection here, otherwise the whole \"is attribute\" condition is redundant\n\t            //     return UI.hc(UI.label(model.text), UI.a(\"\", x=> {\n\t            //         var p1 = editorTools.aquireManager().getCurrentEditor().\n\t            //             getBuffer().positionForCharacterIndex(attr.lowLevel().start());\n\t            //         var p2 = editorTools.aquireManager().getCurrentEditor().\n\t            //             getBuffer().positionForCharacterIndex(attr.lowLevel().end());\n\t            //         editorTools.aquireManager().getCurrentEditor().setSelectedBufferRange({ start: p1, end: p1 }, {});\n\t            //\n\t            //     }, UI.Icon.ARROW_SMALL_LEFT, null, null));\n\t            //\n\t            // }\n\t            var icon = UI.Icon.DASH;\n\t            var highLight = UI.TextClasses.NORMAL;\n\t            if (this.iconNameToIconEnum(model.icon)) {\n\t                icon = this.iconNameToIconEnum(model.icon);\n\t            }\n\t            if (this.textHighlightNameToTextClass(model.textStyle)) {\n\t                highLight = this.textHighlightNameToTextClass(model.textStyle);\n\t            }\n\t            var extraText = \"\";\n\t            var extraClass = UI.TextClasses.NORMAL;\n\t            var hc = UI.hc(UI.label(model.text, icon, highLight));\n\t            if (model.typeText) {\n\t                hc.addChild(UI.label(model.typeText, UI.Icon.NONE, UI.TextClasses.WARNING).margin(2, 0, 0, 0));\n\t            }\n\t            // if (model.getSource().lowLevel().unit()!=model.getSource().root().lowLevel().unit()){\n\t            //     highLight=UI.TextClasses.SUBTLE;\n\t            //     hc.addChild(UI.label(\"(\"+model.getSource().lowLevel().unit().path()+\")\",UI.Icon.NONE,highLight).margin(5,0,0,0));\n\t            // }\n\t            hc.addClass(\"outline\");\n\t            return hc;\n\t        }\n\t        catch (e) {\n\t            console.log(e);\n\t            return UI.hc(UI.label(\"Illegal node\", UI.Icon.ARROW_SMALL_LEFT, null, null));\n\t        }\n\t    };\n\t    return HLRenderer;\n\t}());\n\texports.HLRenderer = HLRenderer;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9vdXRsaW5lLXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7Ozs7Ozs7Ozs7O0FBRW5ELGdDQUFnQztBQUNoQyx5Q0FBeUM7QUFHekMsSUFBTyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsbUJBQW1CLENBQUE7QUFRbkQsd0NBQXdDO0FBQ3hDLGtEQUFrRDtBQUNsRCxnRkFBZ0Y7QUFDaEYsNENBQTRDO0FBRzVDLCtDQUErQztBQUMvQywrQ0FBK0M7QUFDL0MscURBQXFEO0FBQ3JELGlEQUFvRDtBQUVwRDtJQUNJLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsQ0FBQTtJQUN2RCxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ2YsTUFBTSxDQUFDLFlBQVksQ0FBQTtJQUN2QixDQUFDO0lBRUQsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzVCLE1BQU0sQ0FBbUIsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUE7SUFFM0UsTUFBTSxDQUFDLElBQUksQ0FBQTtBQUNmLENBQUM7QUFWRCwwQ0FVQztBQUVEO0lBQWlDLCtCQUFhO0lBMEIxQztRQUFBLFlBQ0ksaUJBQU8sU0FLVjtRQUlELGlCQUFXLEdBQUcsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1FBSWhDLFVBQUksR0FBYSxJQUFJLENBQUM7UUFYMUIsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQixLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3JDLEtBQUksQ0FBQyxRQUFRLENBQUMsS0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztJQUM1QixDQUFDO0lBN0JPLGdDQUFVLEdBQWxCLFVBQW1CLFNBQWdFLENBQUEsc0JBQXNCO1FBQXpHLGlCQWtCQztRQWpCRyxJQUFJLENB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WUFFSixFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZCLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDZCxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZixNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLENBQUM7SUFDTCxDQUFDO0lBQ0wsaUJBQUM7QUFBRCxDQXZFQSxBQXVFQyxJQUFBO0FBdkVZLGdDQUFVIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9vdXRsaW5lLXZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgVUk9cmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgU0M9cmVxdWlyZShcIi4uL3V0aWwvU2Nyb2xsVmlld1VJXCIpXG5pbXBvcnQgcGF0aD1yZXF1aXJlKCdwYXRoJylcbmltcG9ydCBEaXNwb3NhYmxlID0gVUkuSURpc3Bvc2FibGVcbmltcG9ydCBDb21wb3NpdGVEaXNwb3NhYmxlID0gVUkuQ29tcG9zaXRlRGlzcG9zYWJsZVxuXG4vLyBpbXBvcnQgcnA9cmVxdWlyZShcInJhbWwtMS1wYXJzZXJcIilcbi8vIGltcG9ydCBsb3dMZXZlbD1ycC5sbDtcbi8vIGltcG9ydCBobD1ycC5obDtcbi8vIHZhciB1bml2ZXJzZXM9cnAudW5pdmVyc2VzXG5cbmltcG9ydCBmcz1yZXF1aXJlKFwiZnNcIilcbi8vIGltcG9ydCBkZXRhaWxzMj1yZXF1aXJlKFwiLi9kZXRhaWxzMlwiKVxuLy8gaW1wb3J0IGNvbnRleHRBY3Rpb25zID0gcmVxdWlyZShcInJhbWwtYWN0aW9uc1wiKVxuLy8gaW1wb3J0IGNvbW1vbkNvbnRleHRBY3Rpb25zID0gcmVxdWlyZShcIi4uL2NvbnRleHQtbWVudS9jb21tb25Db250ZXh0QWN0aW9uc1wiKVxuaW1wb3J0IGVkaXRvclRvb2xzPXJlcXVpcmUoXCIuL2VkaXRvci10b29sc1wiKVxuaW1wb3J0IF89cmVxdWlyZShcInVuZGVyc2NvcmVcIilcbmltcG9ydCBwYWlyID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvcGFpclwiKTtcbi8vIGltcG9ydCB1bml2ZXJzZUhlbHBlcnMgPSBycC51bml2ZXJzZUhlbHBlcnM7XG4vLyBpbXBvcnQgcmFtbE91dGxpbmUgPSByZXF1aXJlKFwicmFtbC1vdXRsaW5lXCIpXG4vLyBpbXBvcnQgb3V0bGluZUNvbW1vbiA9IHJlcXVpcmUoXCIuL291dGxpbmUtY29tbW9uXCIpXG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZUVkaXRvcigpIHtcbiAgICB2YXIgYWN0aXZlRWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpXG4gICAgaWYgKGFjdGl2ZUVkaXRvcikge1xuICAgICAgICByZXR1cm4gYWN0aXZlRWRpdG9yXG4gICAgfVxuXG4gICAgaWYgKGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSlcbiAgICAgICAgcmV0dXJuIDxBdG9tQ29yZS5JRWRpdG9yPmVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKClcblxuICAgIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBjbGFzcyBSYW1sT3V0bGluZSBleHRlbmRzIFNDLlNjcm9sbGFibGUge1xuICAgIHByaXZhdGUgX3JzOiBVSS5UYWJGb2xkZXI7XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRyZWUoc3RydWN0dXJlOntbY2F0ZWdvcnlOYW1lOiBzdHJpbmddOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OfS8qcDogaGwuSVBhcnNlUmVzdWx0Ki8pIHtcbiAgICAgICAgdGhpcy5fcnMgPSBjcmVhdGVUcmVlKHN0cnVjdHVyZSwgc2VuZGVyID0+IHtcbiAgICAgICAgICAgIGlmKHNlbmRlci5zZWxlY3Rpb24gJiYgc2VuZGVyLnNlbGVjdGlvbi5lbGVtZW50cyAmJiB0aGlzLmZpcmUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlci5zZWxlY3Rpb24uZWxlbWVudHMubGVuZ3RoPjAmJnNlbmRlci5zZWxlY3Rpb24uZWxlbWVudHNbMF0pIHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHAxID0gYWN0aXZlRWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgoc2VuZGVyLnNlbGVjdGlvbi5lbGVtZW50c1swXS5zdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwMiA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KHNlbmRlci5zZWxlY3Rpb24uZWxlbWVudHNbMF0uZW5kKTtcblxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFZGl0b3Iuc2V0U2VsZWN0ZWRCdWZmZXJSYW5nZSh7c3RhcnQ6IHAxLCBlbmQ6IHAyfSwge30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3ZpZXdlcnMgPSBbXTtcblxuICAgICAgICBpZiAoc3RydWN0dXJlKVxuICAgICAgICAgICAgdGhpcy5fdmlld2VycyA9IFswLCAxLCAyLCAzXS5tYXAoaT0+IDxVSS5UcmVlVmlld2VyPGFueSwgYW55Pj4gdGhpcy5fcnMuZ2V0KGkpLmNvbnRlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3ZpZXdlcnM6IFVJLlRyZWVWaWV3ZXI8YW55LGFueT5bXTtcbiAgICBwcml2YXRlIG91dGxpbmVEYXRhUm9vdCA6IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT047XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVRyZWUobnVsbCk7XG4gICAgICAgICg8YW55PnRoaXMpLmFkZENsYXNzKCdyYW1sLW91dGxpbmUnKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLl9ycyk7XG4gICAgfVxuXG4gICAgZ2V0VGl0bGUoKSB7IHJldHVybiBcIk91dGxpbmVcIjsgfVxuXG4gICAgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgX2lzQXR0YWNoZWQgOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBmaXJlIDogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBwcml2YXRlIGdldE5vZGVQVHlwZShub2RlOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKSB7XG4gICAgICAgIG5vZGUuY2F0ZWdvcnlcblxuICAgICAgICBpZiAobm9kZS5jYXRlZ29yeSA9PSByYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLlJlc291cmNlc0NhdGVnb3J5XSkgcmV0dXJuIDA7XG4gICAgICAgIGlmIChub2RlLmNhdGVnb3J5ID09IHJhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllc1tyYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXMuU2NoZW1hc0FuZFR5cGVzQ2F0ZWdvcnldKSByZXR1cm4gMTtcbiAgICAgICAgaWYgKG5vZGUuY2F0ZWdvcnkgPT0gcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZVR5cGVzQW5kVHJhaXRzQ2F0ZWdvcnldKSByZXR1cm4gMjtcbiAgICAgICAgaWYgKG5vZGUuY2F0ZWdvcnkgPT0gcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5PdGhlckNhdGVnb3J5XSkgcmV0dXJuIDM7XG5cbiAgICAgICAgcmV0dXJuIDM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWROb2RlOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OO1xuXG4gICAgc2V0U2VsZWN0aW9uKG5vZGU6IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04pIHtcbiAgICAgICAgLy9pZiAodGhpcy5fc2VsZWN0ZWROb2RlID09IG5vZGUpIHJldHVybjtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWROb2RlID0gbm9kZTtcblxuICAgICAgICB0aGlzLmZpcmUgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Tm9kZVBUeXBlKG5vZGUpO1xuICAgICAgICAgICAgdmFyIHZpZXdlciA9IHRoaXMuX3ZpZXdlcnNbaW5kZXhdO1xuXG4gICAgICAgICAgICBpZiAodmlld2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2aWV3ZXIuc2V0U2VsZWN0aW9uKG5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JzLnNldFNlbGVjdGVkSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmZpcmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gdW5pdDogaGwuSUhpZ2hMZXZlbE5vZGU7XG5cbiAgICB1bml0UGF0aDogc3RyaW5nO1xuXG4gICAgc2V0VW5pdCh1bml0UGF0aDogc3RyaW5nLyp1bml0OmhsLklIaWdoTGV2ZWxOb2RlKi8sIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMudW5pdFBhdGggJiYgdW5pdFBhdGggJiYgdW5pdFBhdGggIT0gdGhpcy51bml0UGF0aCkge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVuaXRQYXRoID0gdW5pdFBhdGg7XG5cbiAgICAgICAgbGV0IGFjdGl2ZUVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5kb2N1bWVudENoYW5nZWQoe1xuICAgICAgICAgICAgdXJpOiB1bml0UGF0aCxcbiAgICAgICAgICAgIHRleHQ6IGFjdGl2ZUVkaXRvci5nZXRUZXh0KClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHN0cnVjdHVyZVByb21pc2UgPSByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZ2V0U3RydWN0dXJlKHVuaXRQYXRoKTtcbiAgICAgICAgaWYgKHN0cnVjdHVyZVByb21pc2UpIHtcbiAgICAgICAgICAgIHN0cnVjdHVyZVByb21pc2UudGhlbihzdHJ1Y3R1cmU9PntcblxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVHJlZShzdHJ1Y3R1cmUpO1xuXG4gICAgICAgICAgICAgICAgKDxhbnk+dGhpcykuYWRkQ2xhc3MoJ3JhbWwtb3V0bGluZScpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLl9ycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sKHRoaXMuaW5uZXJSZW5kZXJVSSgpKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57XG4gICAgICAgICAgICAgICAgLy9pZ25vcmluZywgdGhlIGVycm9yIGlzIGFscmVhZHkgcmVwb3J0ZWQgdG8gdGhlIGxvZywgYW5kIHdlIGRvbnQgbmVlZCB0byBkaXNwbGF5XG4gICAgICAgICAgICAgICAgLy9pdCB0byB1c2VyIGluIG90aGVyIHdheVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgYXR0YWNoKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAkdGhpcy5odG1sKHRoaXMuX3JzLnJlbmRlclVJKCkub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yRWFjaFZpZXdlcihjb21tYW5kOiAodmlld2VyOiBVSS5UcmVlVmlld2VyPGFueSwgYW55PikgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl92aWV3ZXJzLmZvckVhY2goY29tbWFuZCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgLy8gdmFyIHVuaXQgPSB0aGlzLnVuaXQ7XG4gICAgICAgIC8vIHRoaXMuc2V0VW5pdChudWxsKTtcbiAgICAgICAgLy8gdGhpcy5zZXRVbml0KHVuaXQpO1xuXG4gICAgICAgIHZhciB1bml0UGF0aCA9IHRoaXMudW5pdFBhdGg7XG4gICAgICAgIHRoaXMuc2V0VW5pdChudWxsKTtcbiAgICAgICAgdGhpcy5zZXRVbml0KHVuaXRQYXRoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95ICgpOiB2b2lkIHtcbiAgICAgICAgZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLl92aWV3PW51bGw7XG4gICAgICAgIC8vIHRoaXMuX3NlbGVjdGVkTm9kZT1udWxsO1xuICAgICAgICAvLyB0aGlzLnVuaXQ9bnVsbDtcbiAgICAgICAgdGhpcy51bml0UGF0aCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ZpZXdlcnM9W107XG4gICAgICAgIHRoaXMuX3JzPW51bGxcbiAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpXG4gICAgfVxufVxuXG4vKlxuICpcbiAqL1xuLy8gZXhwb3J0IGZ1bmN0aW9uIHRyZWVTZWN0aW9uKGlucHV0OiBobC5JUGFyc2VSZXN1bHQsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IFVJLkljb24sXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyRnVuYzogKHg6aGwuSUhpZ2hMZXZlbE5vZGUpPT5ib29sZWFuLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGw6IFVJLklTZWxlY3Rpb25MaXN0ZW5lcjxhbnk+LFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lcjogKHg6aGwuSVBhcnNlUmVzdWx0KT0+dm9pZD1udWxsKSA6IFVJLlRyZWVQYW5lbDxhbnksYW55PiB7XG4vL1xuLy8gICAgIHZhciB2ID0gVUkudHJlZVZpZXdlclNlY3Rpb24obmFtZSxpY29uLGlucHV0LHg9PmdldENoaWxkcmVuKHgpLmZpbHRlcih4PT5maWx0ZXJGdW5jKDxobC5JSGlnaExldmVsTm9kZT4geCkpLG5ldyBITFJlbmRlcmVyKG9wZW5lcikpO1xuLy9cbi8vICAgICB2LnZpZXdlci5zZXRCYXNpY0xhYmVsRnVuY3Rpb24oeD0+eCA/IHgubmFtZSgpIDogJycpO1xuLy8gICAgIHYudmlld2VyLnNldEtleVByb3ZpZGVyKHtcbi8vICAgICAgICAga2V5OihwOmhsLklQYXJzZVJlc3VsdCk6c3RyaW5nPT57XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJcIitwLmxvd0xldmVsKCkuc3RhcnQoKTtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICB9KTtcbi8vICAgICB2LnZpZXdlci5hZGRTZWxlY3Rpb25MaXN0ZW5lcihsKVxuLy8gICAgIHJldHVybiB2O1xuLy8gfVxuXG5lbnVtIEhMTm9kZVR5cGUge1xuICAgIFJlc291cmNlLFxuICAgIFNjaGVtYSxcbiAgICBUeXBlLFxuICAgIFRyYWl0LFxuICAgIFVua25vd25cbn1cblxuLy8gZnVuY3Rpb24gZ2V0Tm9kZVR5cGUobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUpOiBITE5vZGVUeXBlIHtcbi8vICAgICBpZiAob3V0bGluZUNvbW1vbi5pc1Jlc291cmNlKG5vZGUpKSByZXR1cm4gSExOb2RlVHlwZS5SZXNvdXJjZTtcbi8vICAgICBlbHNlIGlmIChvdXRsaW5lQ29tbW9uLmlzT3RoZXIobm9kZSkpIHJldHVybiBITE5vZGVUeXBlLlRyYWl0O1xuLy8gICAgIGVsc2UgaWYgKG91dGxpbmVDb21tb24uaXNSZXNvdXJjZVR5cGVPclRyYWl0KG5vZGUpKSByZXR1cm4gSExOb2RlVHlwZS5UeXBlO1xuLy8gICAgIGVsc2UgaWYgKG91dGxpbmVDb21tb24uaXNTY2hlbWFPclR5cGUobm9kZSkpIHJldHVybiBITE5vZGVUeXBlLlNjaGVtYTtcbi8vICAgICBlbHNlIHJldHVybiBITE5vZGVUeXBlLlVua25vd247XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGlzQXBpKHA6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgdmFyIHBjPXAuZGVmaW5pdGlvbigpLmtleSgpO1xuLy8gICAgIHJldHVybiBwYz09PXVuaXZlcnNlcy5Vbml2ZXJzZTA4LkFwaXx8cGM9PT11bml2ZXJzZXMuVW5pdmVyc2UxMC5BcGk7XG4vLyB9XG4vLyBmdW5jdGlvbiBpc0RvY3VtZW50YXRpb24ocDogaGwuSUhpZ2hMZXZlbE5vZGUpIHtcbi8vICAgICB2YXIgcGM9cC5kZWZpbml0aW9uKCkua2V5KCk7XG4vLyAgICAgcmV0dXJuICggcGM9PT0gdW5pdmVyc2VzLlVuaXZlcnNlMDguRG9jdW1lbnRhdGlvbkl0ZW18fHBjPT09dW5pdmVyc2VzLlVuaXZlcnNlMTAuRG9jdW1lbnRhdGlvbkl0ZW0pO1xuLy8gfVxuXG5mdW5jdGlvbiBmdWxsU3RydWN0dXJlUGF0aChtb2RlbDogcmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTikge1xuICAgIGlmICghbW9kZWwpIHJldHVybiBcIlwiO1xuXG4gICAgcmV0dXJuIG1vZGVsLnRleHQ7XG4gICAgLy8gdmFyIG5vZGUgPSBtb2RlbC5nZXRTb3VyY2UoKTtcbiAgICAvLyByZXR1cm4gZnVsbFBhdGgoPGFueT5ub2RlKTtcbn1cbi8vXG4vLyBmdW5jdGlvbiBmdWxsUGF0aChub2RlOiBobC5JUGFyc2VSZXN1bHQpIHtcbi8vICAgICBpZiAobm9kZSA9PSBudWxsKSByZXR1cm4gXCJcIjtcbi8vICAgICBlbHNlIHJldHVybiBmdWxsUGF0aChub2RlLnBhcmVudCgpKSArIFwiL1wiICsgbm9kZS5uYW1lKCk7XG4vLyB9XG5cbmZ1bmN0aW9uIHNpbXBsZVRyZWUoaW5wdXQ6IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04sIHNlbGVjdGlvbkxpc3RlbmVyOiBVSS5JU2VsZWN0aW9uTGlzdGVuZXI8YW55PiwgY2F0ZWdvcnlOYW1lOnN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lcjogKHg6cmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTik9PnZvaWQ9bnVsbCkge1xuICAgIHZhciB2aWV3ZXIgPSBVSS50cmVlVmlld2VyPHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04+KCh4OnJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04pPT57XG4gICAgICAgIHJldHVybiA8cmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTltdPnguY2hpbGRyZW47XG4gICAgfSwgbmV3IEhMUmVuZGVyZXIob3BlbmVyKSwgZnVsbFN0cnVjdHVyZVBhdGgpO1xuXG4gICAgdmlld2VyLnNldEJhc2ljTGFiZWxGdW5jdGlvbih4PT54LnRleHQpO1xuICAgIHZpZXdlci5zZXRLZXlQcm92aWRlcih7IGtleTogKHg6cmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTik9PntyZXR1cm4geC5rZXl9IH0pO1xuICAgIHZpZXdlci5hZGRTZWxlY3Rpb25MaXN0ZW5lcihzZWxlY3Rpb25MaXN0ZW5lcik7XG5cbiAgICB2aWV3ZXIuZ2V0QmluZGluZygpLnNldChpbnB1dCk7XG5cbiAgICByZXR1cm4gdmlld2VyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJlZShzdHJ1Y3R1cmU6e1tjYXRlZ29yeU5hbWU6IHN0cmluZ106IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT059LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uTGlzdGVuZXI6IChlIDogVUkuU2VsZWN0aW9uQ2hhbmdlZEV2ZW50PGFueT4pID0+IHZvaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuZXI6ICh4OiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKSA9PiB2b2lkID0gbnVsbCkge1xuXG4gICAgaWYgKCFzdHJ1Y3R1cmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSS5UYWJGb2xkZXIoKTtcbiAgICB9XG5cbiAgICB2YXIgcmVzb3VyY2VzTW9kZWwgPSBzdHJ1Y3R1cmVbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZXNDYXRlZ29yeV1dO1xuICAgIHZhciB0eXBlc01vZGVsID0gc3RydWN0dXJlW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllc1tyYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXMuU2NoZW1hc0FuZFR5cGVzQ2F0ZWdvcnldXTtcbiAgICB2YXIgdHJhaXRzTW9kZWwgPSBzdHJ1Y3R1cmVbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZVR5cGVzQW5kVHJhaXRzQ2F0ZWdvcnldXTtcbiAgICB2YXIgb3RoZXJNb2RlbCA9IHN0cnVjdHVyZVtyYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLk90aGVyQ2F0ZWdvcnldXTtcblxuICAgIC8vIHZhciByZXNvdXJjZXNNb2RlbCA9IHAhPW51bGw/cmFtbE91dGxpbmUuZ2V0U3RydWN0dXJlKG91dGxpbmVDb21tb24uUmVzb3VyY2VzQ2F0ZWdvcnkpOm51bGw7XG4gICAgLy8gdmFyIHR5cGVzTW9kZWwgPSBwIT1udWxsP3JhbWxPdXRsaW5lLmdldFN0cnVjdHVyZShvdXRsaW5lQ29tbW9uLlNjaGVtYXNBbmRUeXBlc0NhdGVnb3J5KTpudWxsO1xuICAgIC8vIHZhciB0cmFpdHNNb2RlbCA9IHAhPW51bGw/cmFtbE91dGxpbmUuZ2V0U3RydWN0dXJlKG91dGxpbmVDb21tb24uUmVzb3VyY2VUeXBlc0FuZFRyYWl0c0NhdGVnb3J5KTpudWxsO1xuICAgIC8vIHZhciBvdGhlck1vZGVsID0gcCE9bnVsbD9yYW1sT3V0bGluZS5nZXRTdHJ1Y3R1cmUob3V0bGluZUNvbW1vbi5PdGhlckNhdGVnb3J5KTpudWxsO1xuXG4gICAgdmFyIG91dGxpbmUgPSByZXNvdXJjZXNNb2RlbCE9bnVsbD8gc2ltcGxlVHJlZShyZXNvdXJjZXNNb2RlbCwgeyBzZWxlY3Rpb25DaGFuZ2VkOiBzZWxlY3Rpb25MaXN0ZW5lciB9LFxuICAgICAgICAgICAgcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZXNDYXRlZ29yeV0sIG9wZW5lcik6bnVsbDtcbiAgICB2YXIgc2NoZW1hcyA9IHR5cGVzTW9kZWwhPW51bGw/IHNpbXBsZVRyZWUodHlwZXNNb2RlbCwgeyBzZWxlY3Rpb25DaGFuZ2VkOiBzZWxlY3Rpb25MaXN0ZW5lciB9LFxuICAgICAgICAgICAgcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5TY2hlbWFzQW5kVHlwZXNDYXRlZ29yeV0sIG9wZW5lcik6bnVsbDtcbiAgICB2YXIgdHlwZXMgICA9IHRyYWl0c01vZGVsIT1udWxsPyBzaW1wbGVUcmVlKHRyYWl0c01vZGVsLCB7IHNlbGVjdGlvbkNoYW5nZWQ6IHNlbGVjdGlvbkxpc3RlbmVyIH0sXG4gICAgICAgICAgICByYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLlJlc291cmNlVHlwZXNBbmRUcmFpdHNDYXRlZ29yeV0sIG9wZW5lcik6bnVsbDtcbiAgICB2YXIgb3RoZXIgID0gb3RoZXJNb2RlbCE9bnVsbD8gc2ltcGxlVHJlZShvdGhlck1vZGVsLCB7IHNlbGVjdGlvbkNoYW5nZWQ6IHNlbGVjdGlvbkxpc3RlbmVyIH0sXG4gICAgICAgICAgICByYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLk90aGVyQ2F0ZWdvcnldLCBvcGVuZXIpOm51bGw7XG5cbiAgICB2YXIgZm9sZGVyID0gbmV3IFVJLlRhYkZvbGRlcigpO1xuXG4gICAgZm9sZGVyLmFkZChcIlJlc291cmNlc1wiLFxuICAgICAgICBVSS5JY29uLlNFQVJDSCwgb3V0bGluZSwgJ3JhbWwtaWNvbi1jdXN0b20nKTtcbiAgICBmb2xkZXIuYWRkKFwiU2NoZW1hcyZUeXBlc1wiLFxuICAgICAgICBVSS5JY29uLlNFQVJDSCwgc2NoZW1hcywgJ3JhbWwtaWNvbi1jdXN0b20nKTtcbiAgICBmb2xkZXIuYWRkKFwiUmVzb3VyY2VUeXBlcyZUcmFpdHNcIixcbiAgICAgICAgVUkuSWNvbi5TRUFSQ0gsIHR5cGVzLCAncmFtbC1pY29uLWN1c3RvbScpO1xuICAgIGZvbGRlci5hZGQoXCJPdGhlclwiLFxuICAgICAgICBVSS5JY29uLlNFQVJDSCwgb3RoZXIsICdyYW1sLWljb24tY3VzdG9tJyk7XG5cbiAgICBmb2xkZXIuc2V0U2VsZWN0ZWRJbmRleCgwKVxuXG4gICAgZm9sZGVyLnNldE9uU2VsZWN0ZWQoKCk9PntcbiAgICAgICAgdmFyIHNlbGVjdGVkVGFiIDogYW55ID0gZm9sZGVyLnNlbGVjdGVkQ29tcG9uZW50KCk7XG4gICAgICAgIGlmIChzZWxlY3RlZFRhYikge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHNlbGVjdGVkVGFiLmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24uZWxlbWVudHMgJiYgc2VsZWN0aW9uLmVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25MaXN0ZW5lcihuZXcgVUkuU2VsZWN0aW9uQ2hhbmdlZEV2ZW50KHNlbGVjdGVkVGFiLCBudWxsLCBzZWxlY3Rpb24pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZWN0ZWRUYWIuY3VzdG9taXplUGFuZWwodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBmb2xkZXI7XG59XG5cblxuZXhwb3J0IGNsYXNzIEhMUmVuZGVyZXIgaW1wbGVtZW50cyBVSS5JQ2VsbFJlbmRlcmVyPHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04+e1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBvcGVuZXI6ICh4OiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKSA9PiB2b2lkKSB7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIGljb25OYW1lVG9JY29uRW51bShpY29uTmFtZSA6IHN0cmluZykgOiBVSS5JY29uIHtcbiAgICAgICAgaWYgKCFpY29uTmFtZSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIFVJLkljb25baWNvbk5hbWVdO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGV4dEhpZ2hsaWdodE5hbWVUb1RleHRDbGFzcyhoaWdobGlnaHROYW1lIDogc3RyaW5nKSA6IFVJLlRleHRDbGFzc2VzIHtcbiAgICAgICAgaWYgKCFoaWdobGlnaHROYW1lKSByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gVUkuVGV4dENsYXNzZXNbaGlnaGxpZ2h0TmFtZV07XG4gICAgfVxuXG4gICAgcmVuZGVyKG1vZGVsOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKTogVUkuQmFzaWNDb21wb25lbnQ8YW55PiB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIC8vIGlmIChyYW1sT3V0bGluZS5pc1R5cGVkU3RydWN0dXJlTm9kZShtb2RlbClcbiAgICAgICAgICAgIC8vICAgICAmJiAoPHJhbWxPdXRsaW5lLlR5cGVkU3RydWN0dXJlTm9kZT5tb2RlbCkudHlwZVxuICAgICAgICAgICAgLy8gICAgICYmICg8cmFtbE91dGxpbmUuVHlwZWRTdHJ1Y3R1cmVOb2RlPm1vZGVsKS50eXBlID09IHJhbWxPdXRsaW5lLk5vZGVUeXBlLkFUVFJJQlVURSkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICB2YXIgYXR0ciA9IDxobC5JQXR0cmlidXRlPig8YW55Pm1vZGVsLmdldFNvdXJjZSgpKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgLy9UT0RPIGNoZWNrIGlmIHdlIHJlYWxseSBuZWVkIGN1c3RvbSBzZWxlY3Rpb24gaGVyZSwgb3RoZXJ3aXNlIHRoZSB3aG9sZSBcImlzIGF0dHJpYnV0ZVwiIGNvbmRpdGlvbiBpcyByZWR1bmRhbnRcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gVUkuaGMoVUkubGFiZWwobW9kZWwudGV4dCksIFVJLmEoXCJcIiwgeD0+IHtcbiAgICAgICAgICAgIC8vICAgICAgICAgdmFyIHAxID0gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldEN1cnJlbnRFZGl0b3IoKS5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgoYXR0ci5sb3dMZXZlbCgpLnN0YXJ0KCkpO1xuICAgICAgICAgICAgLy8gICAgICAgICB2YXIgcDIgPSBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpLlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChhdHRyLmxvd0xldmVsKCkuZW5kKCkpO1xuICAgICAgICAgICAgLy8gICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpLnNldFNlbGVjdGVkQnVmZmVyUmFuZ2UoeyBzdGFydDogcDEsIGVuZDogcDEgfSwge30pO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICB9LCBVSS5JY29uLkFSUk9XX1NNQUxMX0xFRlQsIG51bGwsIG51bGwpKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIHZhciBpY29uID0gVUkuSWNvbi5EQVNIO1xuICAgICAgICAgICAgdmFyIGhpZ2hMaWdodCA9IFVJLlRleHRDbGFzc2VzLk5PUk1BTDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaWNvbk5hbWVUb0ljb25FbnVtKG1vZGVsLmljb24pKSB7XG4gICAgICAgICAgICAgICAgaWNvbiA9IHRoaXMuaWNvbk5hbWVUb0ljb25FbnVtKG1vZGVsLmljb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0SGlnaGxpZ2h0TmFtZVRvVGV4dENsYXNzKG1vZGVsLnRleHRTdHlsZSkpIHtcbiAgICAgICAgICAgICAgICBoaWdoTGlnaHQgPSB0aGlzLnRleHRIaWdobGlnaHROYW1lVG9UZXh0Q2xhc3MobW9kZWwudGV4dFN0eWxlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGV4dHJhVGV4dD1cIlwiO1xuICAgICAgICAgICAgdmFyIGV4dHJhQ2xhc3M9VUkuVGV4dENsYXNzZXMuTk9STUFMO1xuXG4gICAgICAgICAgICB2YXIgaGM9VUkuaGMoVUkubGFiZWwobW9kZWwudGV4dCwgaWNvbiwgaGlnaExpZ2h0KSlcblxuICAgICAgICAgICAgaWYgKG1vZGVsLnR5cGVUZXh0KXtcbiAgICAgICAgICAgICAgICBoYy5hZGRDaGlsZChVSS5sYWJlbChtb2RlbC50eXBlVGV4dCwgVUkuSWNvbi5OT05FLCBVSS5UZXh0Q2xhc3Nlcy5XQVJOSU5HKS5tYXJnaW4oMiwwLDAsMCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiAobW9kZWwuZ2V0U291cmNlKCkubG93TGV2ZWwoKS51bml0KCkhPW1vZGVsLmdldFNvdXJjZSgpLnJvb3QoKS5sb3dMZXZlbCgpLnVuaXQoKSl7XG4gICAgICAgICAgICAvLyAgICAgaGlnaExpZ2h0PVVJLlRleHRDbGFzc2VzLlNVQlRMRTtcbiAgICAgICAgICAgIC8vICAgICBoYy5hZGRDaGlsZChVSS5sYWJlbChcIihcIittb2RlbC5nZXRTb3VyY2UoKS5sb3dMZXZlbCgpLnVuaXQoKS5wYXRoKCkrXCIpXCIsVUkuSWNvbi5OT05FLGhpZ2hMaWdodCkubWFyZ2luKDUsMCwwLDApKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgaGMuYWRkQ2xhc3MoXCJvdXRsaW5lXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGhjO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIHJldHVybiBVSS5oYyhVSS5sYWJlbChcIklsbGVnYWwgbm9kZVwiLCBVSS5JY29uLkFSUk9XX1NNQUxMX0xFRlQsIG51bGwsIG51bGwpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ramlServer = __webpack_require__(17);\n\tfunction markOccurences(editor, occurences) {\n\t    var layer = getOccurencesLayer(editor);\n\t    layer.clear();\n\t    occurences.forEach(function (occurence) {\n\t        layer.markBufferRange(occurence);\n\t    });\n\t    editor.decorateMarkerLayer(layer, {\n\t        type: 'highlight',\n\t        class: 'raml-occurence'\n\t    });\n\t}\n\texports.markOccurences = markOccurences;\n\tfunction clearOccurences(editor) {\n\t    var layer = getOccurencesLayer(editor);\n\t    layer.clear();\n\t}\n\texports.clearOccurences = clearOccurences;\n\tfunction getOccurencesLayer(editor) {\n\t    var layerId = editor.occurencesLayerId;\n\t    var layer = layerId && editor.getMarkerLayer(layerId);\n\t    if (!layer) {\n\t        layer = editor.addMarkerLayer();\n\t    }\n\t    editor.occurencesLayerId = layer.id;\n\t    return layer;\n\t}\n\tvar MarkOccurrenceRunnable = /** @class */ (function () {\n\t    function MarkOccurrenceRunnable(editor, position) {\n\t        this.editor = editor;\n\t        this.position = position;\n\t        this.cancelled = false;\n\t        this.offset = editor.getBuffer().characterIndexForPosition(position);\n\t    }\n\t    /**\n\t     * Performs the actual business logics.\n\t     * Should resolve the promise when finished.\n\t     */\n\t    MarkOccurrenceRunnable.prototype.run = function () {\n\t        var _this = this;\n\t        return ramlServer.getNodeClientConnection().markOccurrences(this.getMarkOccurrencesPath(), this.offset)\n\t            .then(function (ranges) {\n\t            var currentPosition = _this.editor.getCursorBufferPosition();\n\t            if (currentPosition.row != _this.position.row || currentPosition.column != _this.position.column) {\n\t                //data is outdated\n\t                return;\n\t            }\n\t            var bufferRanges = ranges.map(function (range) {\n\t                return {\n\t                    start: _this.editor.getBuffer().positionForCharacterIndex(range.start),\n\t                    end: _this.editor.getBuffer().positionForCharacterIndex(range.end),\n\t                };\n\t            });\n\t            markOccurences(_this.editor, bufferRanges);\n\t        });\n\t    };\n\t    /**\n\t     * Performs the actual business logics synchronously.\n\t     */\n\t    MarkOccurrenceRunnable.prototype.runSynchronously = function () {\n\t    };\n\t    /**\n\t     * Whether two runnable conflict with each other.\n\t     * Must work fast as its called often.\n\t     * @param other\n\t     */\n\t    MarkOccurrenceRunnable.prototype.conflicts = function (other) {\n\t        if (!other.getMarkOccurrencesPath)\n\t            return false;\n\t        var otherPath = other.getMarkOccurrencesPath();\n\t        return this.getMarkOccurrencesPath() == otherPath;\n\t    };\n\t    /**\n\t     * Cancels the runnable. run() method should do nothing if launched later,\n\t     * if cancel is called during the run() method execution, run() should stop as soon as it can.\n\t     */\n\t    MarkOccurrenceRunnable.prototype.cancel = function () {\n\t        this.cancelled = true;\n\t    };\n\t    /**\n\t     * Whether cancel() method was called at least once.\n\t     */\n\t    MarkOccurrenceRunnable.prototype.isCanceled = function () {\n\t        return this.cancelled;\n\t    };\n\t    MarkOccurrenceRunnable.prototype.getMarkOccurrencesPath = function () {\n\t        return this.editor.getPath();\n\t    };\n\t    return MarkOccurrenceRunnable;\n\t}());\n\texports.MarkOccurrenceRunnable = MarkOccurrenceRunnable;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvbWFya09jY3VyZW5jZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7QUFHbkQsaURBQW9EO0FBRXBELHdCQUErQixNQUF3QixFQUFFLFVBQXdCO0lBQzdFLElBQUksS0FBSyxHQUFRLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRTVDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUVkLFVBQVUsQ0FBQyxPQUFPLENBQUMsVUFBQSxTQUFTO1FBQ3hCLEtBQUssQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckMsQ0FBQyxDQUFDLENBQUM7SUFFRyxNQUFPLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFO1FBQ3JDLElBQUksRUFBRSxXQUFXO1FBQ2pCLEtBQUssRUFBRSxnQkFBZ0I7S0FDMUIsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQWJELHdDQWFDO0FBRUQseUJBQWdDLE1BQXdCO0lBQ3BELElBQUksS0FBSyxHQUFRLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRTVDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNsQixDQUFDO0FBSkQsMENBSUM7QUFFRCw0QkFBNEIsTUFBd0I7SUFDaEQsSUFBSSxPQUFPLEdBQVMsTUFBTyxDQUFDLGlCQUFpQixDQUFDO0lBRTlDLElBQUksS0FBSyxHQUFHLE9BQU8sSUFBVSxNQUFPLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRTdELEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNSLEtBQUssR0FBUyxNQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUVLLE1BQU8sQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDO0lBRTNDLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQUVEO0lBS0ksZ0NBQW9CLE1BQXdCLEVBQVUsUUFBb0I7UUFBdEQsV0FBTSxHQUFOLE1BQU0sQ0FBa0I7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFZO1FBSGxFLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFJdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMseUJBQXlCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDekUsQ0FBQztJQUNEOzs7T0FHRztJQUNILG9DQUFHLEdBQUg7UUFBQSxpQkFrQkM7UUFqQkcsTUFBTSxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ2xHLElBQUksQ0FBQyxVQUFBLE1BQU07WUFFUixJQUFJLGVBQWUsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLHVCQUF1QixFQUFFLENBQUM7WUFDNUQsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsSUFBSSxLQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxlQUFlLENBQUMsTUFBTSxJQUFJLEtBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDN0Ysa0JBQWtCO2dCQUNsQixNQUFNLENBQUM7WUFDWCxDQUFDO1lBRUQsSUFBSSxZQUFZLEdBQWlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQSxLQUFLO2dCQUM3QyxNQUFNLENBQUM7b0JBQ0gsS0FBSyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztvQkFDckUsR0FBRyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztpQkFDcEUsQ0FBQTtZQUNMLENBQUMsQ0FBQyxDQUFBO1lBQ0YsY0FBYyxDQUFDLEtBQUksQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBQ0Q7O09BRUc7SUFDSCxpREFBZ0IsR0FBaEI7SUFDQSxDQUFDO0lBQ0Q7Ozs7T0FJRztJQUNILDBDQUFTLEdBQVQsVUFBVSxLQUErQjtRQUNyQyxFQUFFLENBQUMsQ0FBQyxDQUFPLEtBQU0sQ0FBQyxzQkFBc0IsQ0FBQztZQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFFdkQsSUFBSSxTQUFTLEdBQWtCLEtBQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBRS9ELE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsSUFBSSxTQUFTLENBQUM7SUFDdEQsQ0FBQztJQUNEOzs7T0FHRztJQUNILHVDQUFNLEdBQU47UUFDSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDSCwyQ0FBVSxHQUFWO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELHVEQUFzQixHQUF0QjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2pDLENBQUM7SUFDTCw2QkFBQztBQUFELENBakVBLEFBaUVDLElBQUE7QUFqRVksd0RBQXNCIiwiZmlsZSI6InNyYy9hdG9tL2NvcmUvbWFya09jY3VyZW5jZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgYXRvbSA9IHJlcXVpcmUoJy4uL2NvcmUvYXRvbVdyYXBwZXInKTtcbmltcG9ydCByYW1sU2VydmVyID0gcmVxdWlyZShcInJhbWwtbGFuZ3VhZ2Utc2VydmVyXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFya09jY3VyZW5jZXMoZWRpdG9yOiBhdG9tLklUZXh0RWRpdG9yLCBvY2N1cmVuY2VzOiBhdG9tLlJhbmdlW10pIHtcbiAgICB2YXIgbGF5ZXI6IGFueSA9IGdldE9jY3VyZW5jZXNMYXllcihlZGl0b3IpO1xuXG4gICAgbGF5ZXIuY2xlYXIoKTtcblxuICAgIG9jY3VyZW5jZXMuZm9yRWFjaChvY2N1cmVuY2UgPT4ge1xuICAgICAgICBsYXllci5tYXJrQnVmZmVyUmFuZ2Uob2NjdXJlbmNlKTtcbiAgICB9KTtcblxuICAgICg8YW55PmVkaXRvcikuZGVjb3JhdGVNYXJrZXJMYXllcihsYXllciwge1xuICAgICAgICB0eXBlOiAnaGlnaGxpZ2h0JyxcbiAgICAgICAgY2xhc3M6ICdyYW1sLW9jY3VyZW5jZSdcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT2NjdXJlbmNlcyhlZGl0b3I6IGF0b20uSVRleHRFZGl0b3IpIHtcbiAgICB2YXIgbGF5ZXI6IGFueSA9IGdldE9jY3VyZW5jZXNMYXllcihlZGl0b3IpO1xuXG4gICAgbGF5ZXIuY2xlYXIoKTtcbn1cblxuZnVuY3Rpb24gZ2V0T2NjdXJlbmNlc0xheWVyKGVkaXRvcjogYXRvbS5JVGV4dEVkaXRvcik6IGFueSB7XG4gICAgdmFyIGxheWVySWQgPSAoPGFueT5lZGl0b3IpLm9jY3VyZW5jZXNMYXllcklkO1xuXG4gICAgdmFyIGxheWVyID0gbGF5ZXJJZCAmJiAoPGFueT5lZGl0b3IpLmdldE1hcmtlckxheWVyKGxheWVySWQpO1xuXG4gICAgaWYoIWxheWVyKSB7XG4gICAgICAgIGxheWVyID0gKDxhbnk+ZWRpdG9yKS5hZGRNYXJrZXJMYXllcigpO1xuICAgIH1cblxuICAgICg8YW55PmVkaXRvcikub2NjdXJlbmNlc0xheWVySWQgPSBsYXllci5pZDtcblxuICAgIHJldHVybiBsYXllcjtcbn1cblxuZXhwb3J0IGNsYXNzIE1hcmtPY2N1cnJlbmNlUnVubmFibGUgaW1wbGVtZW50cyByYW1sU2VydmVyLlJ1bm5hYmxlPHZvaWQ+IHtcblxuICAgIHByaXZhdGUgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBvZmZzZXQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWRpdG9yOiBhdG9tLklUZXh0RWRpdG9yLCBwcml2YXRlIHBvc2l0aW9uOiBhdG9tLlBvaW50KSB7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gZWRpdG9yLmdldEJ1ZmZlcigpLmNoYXJhY3RlckluZGV4Rm9yUG9zaXRpb24ocG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyB0aGUgYWN0dWFsIGJ1c2luZXNzIGxvZ2ljcy5cbiAgICAgKiBTaG91bGQgcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aGVuIGZpbmlzaGVkLlxuICAgICAqL1xuICAgIHJ1bigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5tYXJrT2NjdXJyZW5jZXModGhpcy5nZXRNYXJrT2NjdXJyZW5jZXNQYXRoKCksIHRoaXMub2Zmc2V0KVxuICAgICAgICAgICAgLnRoZW4ocmFuZ2VzID0+IHtcblxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSB0aGlzLmVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9zaXRpb24ucm93ICE9IHRoaXMucG9zaXRpb24ucm93IHx8IGN1cnJlbnRQb3NpdGlvbi5jb2x1bW4gIT0gdGhpcy5wb3NpdGlvbi5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy9kYXRhIGlzIG91dGRhdGVkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgYnVmZmVyUmFuZ2VzOiBhdG9tLlJhbmdlW10gPSByYW5nZXMubWFwKHJhbmdlPT57XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogdGhpcy5lZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChyYW5nZS5zdGFydCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuZWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgocmFuZ2UuZW5kKSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgbWFya09jY3VyZW5jZXModGhpcy5lZGl0b3IsIGJ1ZmZlclJhbmdlcyk7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIHRoZSBhY3R1YWwgYnVzaW5lc3MgbG9naWNzIHN5bmNocm9ub3VzbHkuXG4gICAgICovXG4gICAgcnVuU3luY2hyb25vdXNseSgpOiB2b2lkIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0d28gcnVubmFibGUgY29uZmxpY3Qgd2l0aCBlYWNoIG90aGVyLlxuICAgICAqIE11c3Qgd29yayBmYXN0IGFzIGl0cyBjYWxsZWQgb2Z0ZW4uXG4gICAgICogQHBhcmFtIG90aGVyXG4gICAgICovXG4gICAgY29uZmxpY3RzKG90aGVyOiByYW1sU2VydmVyLlJ1bm5hYmxlPGFueT4pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCEoPGFueT5vdGhlcikuZ2V0TWFya09jY3VycmVuY2VzUGF0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGxldCBvdGhlclBhdGggOiBzdHJpbmcgPSAoPGFueT5vdGhlcikuZ2V0TWFya09jY3VycmVuY2VzUGF0aCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hcmtPY2N1cnJlbmNlc1BhdGgoKSA9PSBvdGhlclBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIHJ1bm5hYmxlLiBydW4oKSBtZXRob2Qgc2hvdWxkIGRvIG5vdGhpbmcgaWYgbGF1bmNoZWQgbGF0ZXIsXG4gICAgICogaWYgY2FuY2VsIGlzIGNhbGxlZCBkdXJpbmcgdGhlIHJ1bigpIG1ldGhvZCBleGVjdXRpb24sIHJ1bigpIHNob3VsZCBzdG9wIGFzIHNvb24gYXMgaXQgY2FuLlxuICAgICAqL1xuICAgIGNhbmNlbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIGNhbmNlbCgpIG1ldGhvZCB3YXMgY2FsbGVkIGF0IGxlYXN0IG9uY2UuXG4gICAgICovXG4gICAgaXNDYW5jZWxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsbGVkO1xuICAgIH1cblxuICAgIGdldE1hcmtPY2N1cnJlbmNlc1BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRQYXRoKCk7XG4gICAgfVxufVxuXG4iXX0=\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar qcui = __webpack_require__(23);\n\tvar atom = __webpack_require__(3);\n\t// import contextActions = require(\"raml-actions\")\n\tvar cc = __webpack_require__(24);\n\tvar et = __webpack_require__(1);\n\t/*\n\t * Quick command is a command object that stores command info, body and filtering function\n\t */\n\tvar QuickCommand = /** @class */ (function () {\n\t    function QuickCommand(id, title, command, priority, when) {\n\t        this.id = id;\n\t        this.title = title;\n\t        this.command = command;\n\t        this.priority = priority;\n\t        this.when = when;\n\t    }\n\t    QuickCommand.prototype.registerAsAtomCommand = function (target) {\n\t        if (this.atomCommand && this.atomCommand.disposed == false)\n\t            this.atomCommand.dispose();\n\t        this.atomCommand = atom.commands.add(target, this.id, this.command);\n\t    };\n\t    QuickCommand.prototype.dispose = function () {\n\t        if (this.atomCommand && this.atomCommand.disposed == false)\n\t            this.atomCommand.dispose();\n\t        cm.unregister(this);\n\t    };\n\t    return QuickCommand;\n\t}());\n\texports.QuickCommand = QuickCommand;\n\t/*\n\t * Command manager manages quick commands.\n\t * All quick commands should be registered here.\n\t * For usage example, see registerCommands\n\t */\n\tvar CommandManager = /** @class */ (function () {\n\t    function CommandManager() {\n\t        this.commands = {};\n\t        this.panel = new qcui.SelectListView(function (command) { return command.command(); }, function (command) { return command.title; }, 'title');\n\t    }\n\t    CommandManager.prototype.register = function (cmd) {\n\t        if (this.commands[cmd.id] != null)\n\t            this.unregister(cmd.id);\n\t        this.commands[cmd.id] = cmd;\n\t        return cmd;\n\t    };\n\t    CommandManager.prototype.unregister = function (cmd) {\n\t        if (typeof (cmd) == \"string\")\n\t            this.unregister(this.commands[cmd]);\n\t        var qcmd = cmd;\n\t        if (qcmd == null)\n\t            return null;\n\t        delete this.commands[qcmd.id];\n\t        return qcmd;\n\t    };\n\t    CommandManager.prototype.add = function (id, title, command, when, priority, atomTarget) {\n\t        var cmd = new QuickCommand(id, title, command, priority ? priority : 0, when ? when : function () { return true; });\n\t        if (atomTarget)\n\t            cmd.registerAsAtomCommand(atomTarget);\n\t        this.register(cmd);\n\t        return cmd;\n\t    };\n\t    CommandManager.prototype.show = function (predicate) {\n\t        var joinedCommands = {};\n\t        for (var commandId in this.commands) {\n\t            joinedCommands[commandId] = this.commands[commandId];\n\t        }\n\t        this.getDynamicCommands().forEach(function (currentCommand) {\n\t            joinedCommands[currentCommand.id] = currentCommand;\n\t        });\n\t        var list = Object.keys(joinedCommands)\n\t            .map(function (key) { return joinedCommands[key]; })\n\t            .sort(function (a, b) { return b.priority - a.priority; })\n\t            .filter(function (cmd) { return cmd.when(); });\n\t        if (predicate)\n\t            list = list.filter(predicate);\n\t        this.panel.show(list);\n\t    };\n\t    CommandManager.prototype.getDynamicCommands = function () {\n\t        var result = [];\n\t        // var currentActions = contextActions.calculateCurrentActions(contextActions.TARGET_RAML_EDITOR_NODE)\n\t        //\n\t        // currentActions.forEach(action => {\n\t        // \tvar convertedQuickCommand : QuickCommand = new QuickCommand(action.name,\n\t        // \t\taction.label?action.label:action.name, action.onClick, 1, ()=>{return true})\n\t        //\n\t        // \tvar cmd : any = convertedQuickCommand\n\t        // \tcmd['__module__'] = 'editorTools'\n\t        // \tresult.push(convertedQuickCommand)\n\t        // })\n\t        return result;\n\t    };\n\t    return CommandManager;\n\t}());\n\texports.CommandManager = CommandManager;\n\tvar cm;\n\t/*\n\t * Always return working copy of manager.\n\t */\n\tfunction manager() {\n\t    if (!cm)\n\t        cm = new CommandManager();\n\t    return cm;\n\t}\n\texports.manager = manager;\n\t/*\n\t * function for RAML -> Show Quick Commands (^Q)\n\t */\n\tfunction showCommands() {\n\t    manager().show();\n\t}\n\texports.showCommands = showCommands;\n\t/*\n\t * registerCommands is called at the plugin initialization for registering global commands\n\t */\n\tfunction registerCommands() {\n\t    cc.registerQuickCommands(manager());\n\t    cm.add('api-workbench:editor-tools', 'Show Editor Tools', function () { return et.initEditorTools(); }, function () { return et.editorToolsStatus() == false; });\n\t}\n\texports.registerCommands = registerCommands;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbURBQW1EO0FBQ25ELDBDQUE2QztBQUM3QywwQ0FBNkM7QUFDN0Msa0RBQWtEO0FBQ2xELG9DQUF1QztBQUN2QyxpREFBb0Q7QUFFcEQ7O0dBRUc7QUFDSDtJQUNJLHNCQUNLLEVBQVUsRUFDSixLQUFhLEVBQ2IsT0FBbUIsRUFDekIsUUFBZ0IsRUFDVixJQUFtQjtRQUp6QixPQUFFLEdBQUYsRUFBRSxDQUFRO1FBQ0osVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUNiLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDekIsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNWLFNBQUksR0FBSixJQUFJLENBQWU7SUFDM0IsQ0FBQztJQUdQLDRDQUFxQixHQUFyQixVQUFzQixNQUFjO1FBQ25DLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDO1lBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2RixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsOEJBQU8sR0FBUDtRQUNDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDO1lBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2RixFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDRixtQkFBQztBQUFELENBbkJBLEFBbUJDLElBQUE7QUFuQlksb0NBQVk7QUFxQnpCOzs7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ay1jb21tYW5kcy9xdWljay1jb21tYW5kcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5pbXBvcnQgcWN1aSA9IHJlcXVpcmUoJy4vcXVpY2stY29tbWFuZHMtdWknKTtcbmltcG9ydCBhdG9tID0gcmVxdWlyZSgnLi4vY29yZS9hdG9tV3JhcHBlcicpO1xuLy8gaW1wb3J0IGNvbnRleHRBY3Rpb25zID0gcmVxdWlyZShcInJhbWwtYWN0aW9uc1wiKVxuaW1wb3J0IGNjID0gcmVxdWlyZSgnLi9jb2RlLWNvbW1hbmRzJyk7XG5pbXBvcnQgZXQgPSByZXF1aXJlKCcuLi9lZGl0b3ItdG9vbHMvZWRpdG9yLXRvb2xzJyk7XG5cbi8qXG4gKiBRdWljayBjb21tYW5kIGlzIGEgY29tbWFuZCBvYmplY3QgdGhhdCBzdG9yZXMgY29tbWFuZCBpbmZvLCBib2R5IGFuZCBmaWx0ZXJpbmcgZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFF1aWNrQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG5cdFx0cHVibGljIGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgY29tbWFuZDogKCkgPT4gdm9pZCxcblx0XHRwdWJsaWMgcHJpb3JpdHk6IG51bWJlcixcbiAgICAgICAgcHVibGljIHdoZW46ICgpID0+IGJvb2xlYW5cbiAgICApIHt9XG5cblx0cHJpdmF0ZSBhdG9tQ29tbWFuZDogQXRvbUNvcmUuRGlzcG9zYWJsZTtcblx0cmVnaXN0ZXJBc0F0b21Db21tYW5kKHRhcmdldDogc3RyaW5nKSB7XG5cdFx0aWYgKHRoaXMuYXRvbUNvbW1hbmQgJiYgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlZCA9PSBmYWxzZSkgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlKCk7XG5cdFx0dGhpcy5hdG9tQ29tbWFuZCA9IGF0b20uY29tbWFuZHMuYWRkKHRhcmdldCwgdGhpcy5pZCwgdGhpcy5jb21tYW5kKTtcblx0fVxuXG5cdGRpc3Bvc2UoKSB7XG5cdFx0aWYgKHRoaXMuYXRvbUNvbW1hbmQgJiYgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlZCA9PSBmYWxzZSkgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlKCk7XG5cdFx0Y20udW5yZWdpc3Rlcih0aGlzKTtcblx0fVxufVxuXG4vKlxuICogQ29tbWFuZCBtYW5hZ2VyIG1hbmFnZXMgcXVpY2sgY29tbWFuZHMuXG4gKiBBbGwgcXVpY2sgY29tbWFuZHMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgaGVyZS5cbiAqIEZvciB1c2FnZSBleGFtcGxlLCBzZWUgcmVnaXN0ZXJDb21tYW5kc1xuICovXG5leHBvcnQgY2xhc3MgQ29tbWFuZE1hbmFnZXIge1xuXHRwcml2YXRlIGNvbW1hbmRzID0ge307XG4gICAgcHJpdmF0ZSBwYW5lbCA9IG5ldyBxY3VpLlNlbGVjdExpc3RWaWV3PFF1aWNrQ29tbWFuZD4oY29tbWFuZCA9PiBjb21tYW5kLmNvbW1hbmQoKSwgY29tbWFuZCA9PiBjb21tYW5kLnRpdGxlLCAndGl0bGUnKTtcblxuXHRyZWdpc3RlcihjbWQ6IFF1aWNrQ29tbWFuZCkge1xuXHRcdGlmICh0aGlzLmNvbW1hbmRzW2NtZC5pZF0gIT0gbnVsbCkgdGhpcy51bnJlZ2lzdGVyKGNtZC5pZCk7XG5cdFx0dGhpcy5jb21tYW5kc1tjbWQuaWRdID0gY21kO1xuXHRcdHJldHVybiBjbWQ7XG5cdH1cblxuXHR1bnJlZ2lzdGVyKGNtZDogc3RyaW5nIHwgUXVpY2tDb21tYW5kKSB7XG5cdFx0aWYgKHR5cGVvZihjbWQpID09IFwic3RyaW5nXCIpIHRoaXMudW5yZWdpc3Rlcih0aGlzLmNvbW1hbmRzWzxzdHJpbmc+Y21kXSk7XG5cdFx0dmFyIHFjbWQgPSA8UXVpY2tDb21tYW5kPiBjbWQ7XG5cdFx0aWYgKHFjbWQgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cdFx0ZGVsZXRlIHRoaXMuY29tbWFuZHNbcWNtZC5pZF07XG5cdFx0cmV0dXJuIHFjbWQ7XG5cdH1cblxuICAgIGFkZChpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBjb21tYW5kOiAoKT0+dm9pZCwgd2hlbj86KCk9PmJvb2xlYW4sIHByaW9yaXR5PzogbnVtYmVyLCBhdG9tVGFyZ2V0Pzogc3RyaW5nKSB7XG4gICAgICAgIHZhciBjbWQgPSBuZXcgUXVpY2tDb21tYW5kKGlkLCB0aXRsZSwgY29tbWFuZCwgcHJpb3JpdHkgPyBwcmlvcml0eSA6IDAsICB3aGVuID8gd2hlbiA6ICgpID0+IHRydWUpO1xuICAgICAgICBpZiAoYXRvbVRhcmdldCkgY21kLnJlZ2lzdGVyQXNBdG9tQ29tbWFuZChhdG9tVGFyZ2V0KTtcblx0XHR0aGlzLnJlZ2lzdGVyKGNtZCk7XG5cdFx0cmV0dXJuIGNtZDtcbiAgICB9XG5cblx0c2hvdyhwcmVkaWNhdGU/OiAoY21kOiBRdWlja0NvbW1hbmQpID0+IGJvb2xlYW4pIHtcblx0XHR2YXIgam9pbmVkQ29tbWFuZHMgOiB7W2lkOnN0cmluZ106UXVpY2tDb21tYW5kfSA9IHt9XG5cblx0XHRmb3IgKHZhciBjb21tYW5kSWQgaW4gdGhpcy5jb21tYW5kcykge1xuXHRcdFx0am9pbmVkQ29tbWFuZHNbY29tbWFuZElkXSA9IHRoaXMuY29tbWFuZHNbY29tbWFuZElkXVxuXHRcdH1cblxuXHRcdHRoaXMuZ2V0RHluYW1pY0NvbW1hbmRzKCkuZm9yRWFjaChjdXJyZW50Q29tbWFuZD0+e1xuXHRcdFx0am9pbmVkQ29tbWFuZHNbY3VycmVudENvbW1hbmQuaWRdID0gY3VycmVudENvbW1hbmRcblx0XHR9KVxuXG5cdFx0dmFyIGxpc3QgPSBPYmplY3Qua2V5cyhqb2luZWRDb21tYW5kcylcblx0XHRcdFx0XHRcdC5tYXAoa2V5PT4gPFF1aWNrQ29tbWFuZD5qb2luZWRDb21tYW5kc1trZXldKVxuXHRcdFx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KVxuXHRcdFx0XHRcdFx0LmZpbHRlcihjbWQ9PiBjbWQud2hlbigpKTtcblxuXHRcdGlmIChwcmVkaWNhdGUpIGxpc3QgPSBsaXN0LmZpbHRlcihwcmVkaWNhdGUpO1xuXHRcdHRoaXMucGFuZWwuc2hvdyhsaXN0KTtcblx0fVxuXG5cdGdldER5bmFtaWNDb21tYW5kcygpIDogUXVpY2tDb21tYW5kW10ge1xuXHRcdHZhciByZXN1bHQgOiBRdWlja0NvbW1hbmRbXSA9IFtdXG5cdFx0Ly8gdmFyIGN1cnJlbnRBY3Rpb25zID0gY29udGV4dEFjdGlvbnMuY2FsY3VsYXRlQ3VycmVudEFjdGlvbnMoY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUpXG4gICAgICAgIC8vXG5cdFx0Ly8gY3VycmVudEFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xuXHRcdC8vIFx0dmFyIGNvbnZlcnRlZFF1aWNrQ29tbWFuZCA6IFF1aWNrQ29tbWFuZCA9IG5ldyBRdWlja0NvbW1hbmQoYWN0aW9uLm5hbWUsXG5cdFx0Ly8gXHRcdGFjdGlvbi5sYWJlbD9hY3Rpb24ubGFiZWw6YWN0aW9uLm5hbWUsIGFjdGlvbi5vbkNsaWNrLCAxLCAoKT0+e3JldHVybiB0cnVlfSlcbiAgICAgICAgLy9cblx0XHQvLyBcdHZhciBjbWQgOiBhbnkgPSBjb252ZXJ0ZWRRdWlja0NvbW1hbmRcblx0XHQvLyBcdGNtZFsnX19tb2R1bGVfXyddID0gJ2VkaXRvclRvb2xzJ1xuXHRcdC8vIFx0cmVzdWx0LnB1c2goY29udmVydGVkUXVpY2tDb21tYW5kKVxuXHRcdC8vIH0pXG5cblx0XHRyZXR1cm4gcmVzdWx0XG5cdH1cbn1cblxudmFyIGNtOiBDb21tYW5kTWFuYWdlcjtcblxuLypcbiAqIEFsd2F5cyByZXR1cm4gd29ya2luZyBjb3B5IG9mIG1hbmFnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYW5hZ2VyKCkge1xuXHRpZiAoIWNtKSBjbSA9IG5ldyBDb21tYW5kTWFuYWdlcigpO1xuXHRyZXR1cm4gY207XG59XG5cbi8qXG4gKiBmdW5jdGlvbiBmb3IgUkFNTCAtPiBTaG93IFF1aWNrIENvbW1hbmRzICheUSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dDb21tYW5kcygpIHtcblx0bWFuYWdlcigpLnNob3coKTtcbn1cblxuLypcbiAqIHJlZ2lzdGVyQ29tbWFuZHMgaXMgY2FsbGVkIGF0IHRoZSBwbHVnaW4gaW5pdGlhbGl6YXRpb24gZm9yIHJlZ2lzdGVyaW5nIGdsb2JhbCBjb21tYW5kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcygpIHtcblx0Y2MucmVnaXN0ZXJRdWlja0NvbW1hbmRzKG1hbmFnZXIoKSk7XG5cdGNtLmFkZCgnYXBpLXdvcmtiZW5jaDplZGl0b3ItdG9vbHMnLCAnU2hvdyBFZGl0b3IgVG9vbHMnLCAoKT0+ZXQuaW5pdEVkaXRvclRvb2xzKCksICgpPT5ldC5lZGl0b3JUb29sc1N0YXR1cygpID09IGZhbHNlKTtcbn1cbiJdfQ==\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar atom = __webpack_require__(3);\n\tvar aspv = __webpack_require__(7);\n\t/*\n\t * List viewer for commands. accepts confirmation function, label function and key for fuzzy filtering.\n\t */\n\tvar SelectListView = /** @class */ (function (_super) {\n\t    __extends(SelectListView, _super);\n\t    function SelectListView(_confirmed, label, filterKey) {\n\t        if (filterKey === void 0) { filterKey = ''; }\n\t        var _this = _super.call(this, []) || this;\n\t        _this._confirmed = _confirmed;\n\t        _this.label = label;\n\t        _this.filterKey = filterKey;\n\t        return _this;\n\t    }\n\t    SelectListView.prototype.getFilterKey = function () { return this.filterKey; };\n\t    SelectListView.prototype.viewForItem = function (item) {\n\t        return \"<li>\" + this.label(item) + \"</li>\";\n\t    };\n\t    SelectListView.prototype.cancel = function () {\n\t        this.panel.hide();\n\t        _super.prototype.cancel.call(this);\n\t    };\n\t    SelectListView.prototype.hide = function () {\n\t        if (!this.panel)\n\t            return;\n\t        this.panel.hide();\n\t    };\n\t    SelectListView.prototype.confirmed = function (item) {\n\t        this._confirmed(item);\n\t        this.hide();\n\t        return this.getSelectedItemView();\n\t    };\n\t    SelectListView.prototype.show = function (commands) {\n\t        this.storeFocusedElement();\n\t        if (!this.panel)\n\t            this.panel = atom.workspace.addModalPanel({ item: this });\n\t        this.setItems(commands);\n\t        this.panel.show();\n\t        this.focusFilterEditor();\n\t    };\n\t    return SelectListView;\n\t}(aspv.SelectListView));\n\texports.SelectListView = SelectListView;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzLXVpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtREFBbUQ7Ozs7Ozs7Ozs7OztBQUVuRCwwQ0FBNkM7QUFDN0MsMkNBQThDO0FBRzlDOztHQUVHO0FBQ0g7SUFBdUMsa0NBQW1CO0lBRXhELHdCQUFtQixVQUE2QixFQUFVLEtBQXFCLEVBQVUsU0FBc0I7UUFBdEIsMEJBQUEsRUFBQSxjQUFzQjtRQUEvRyxZQUNFLGtCQUFNLEVBQUUsQ0FBQyxTQUNWO1FBRmtCLGdCQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUFVLFdBQUssR0FBTCxLQUFLLENBQWdCO1FBQVUsZUFBUyxHQUFULFNBQVMsQ0FBYTs7SUFFL0csQ0FBQztJQUVELHFDQUFZLEdBQVosY0FBaUIsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBRXpDLG9DQUFXLEdBQVgsVUFBWSxJQUFJO1FBQ2QsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQztJQUM3QyxDQUFDO0lBRUQsK0JBQU0sR0FBTjtRQUNFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEIsaUJBQU0sTUFBTSxXQUFFLENBQUM7SUFDakIsQ0FBQztJQUVELDZCQUFJLEdBQUo7UUFDRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFBQyxNQUFNLENBQUM7UUFDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRUQsa0NBQVMsR0FBVCxVQUFVLElBQUk7UUFDWixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNaLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUNwQyxDQUFDO0lBSUQsNkJBQUksR0FBSixVQUFLLFFBQWE7UUFDaEIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxFQUFFLElBQUksRUFBTyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBQ0gscUJBQUM7QUFBRCxDQXJDQSxBQXFDQyxDQXJDc0MsSUFBSSxDQUFDLGNBQWMsR0FxQ3pEO0FBckNZLHdDQUFjIiwiZmlsZSI6InNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzLXVpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuaW1wb3J0IGF0b20gPSByZXF1aXJlKCcuLi9jb3JlL2F0b21XcmFwcGVyJyk7XG5pbXBvcnQgYXNwdiA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJyk7XG5cblxuLypcbiAqIExpc3Qgdmlld2VyIGZvciBjb21tYW5kcy4gYWNjZXB0cyBjb25maXJtYXRpb24gZnVuY3Rpb24sIGxhYmVsIGZ1bmN0aW9uIGFuZCBrZXkgZm9yIGZ1enp5IGZpbHRlcmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdExpc3RWaWV3PFQ+IGV4dGVuZHMgYXNwdi5TZWxlY3RMaXN0VmlldyB7XG5cbiAgY29uc3RydWN0b3IocHVibGljIF9jb25maXJtZWQ6IChpdGVtOiBUKSA9PiB2b2lkLCBwcml2YXRlIGxhYmVsOiAoaXRlbTogVCk9PmFueSwgcHJpdmF0ZSBmaWx0ZXJLZXk6IHN0cmluZyA9ICcnKSB7XG4gICAgc3VwZXIoW10pO1xuICB9XG5cbiAgZ2V0RmlsdGVyS2V5KCkgeyByZXR1cm4gdGhpcy5maWx0ZXJLZXk7IH1cblxuICB2aWV3Rm9ySXRlbShpdGVtKSB7XG4gICAgcmV0dXJuIFwiPGxpPlwiICsgdGhpcy5sYWJlbChpdGVtKSArIFwiPC9saT5cIjtcbiAgfVxuXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLnBhbmVsLmhpZGUoKTtcbiAgICBzdXBlci5jYW5jZWwoKTtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgaWYgKCF0aGlzLnBhbmVsKSByZXR1cm47XG4gICAgdGhpcy5wYW5lbC5oaWRlKCk7XG4gIH1cblxuICBjb25maXJtZWQoaXRlbSkge1xuICAgIHRoaXMuX2NvbmZpcm1lZChpdGVtKTtcbiAgICB0aGlzLmhpZGUoKTtcbiAgICByZXR1cm4gdGhpcy5nZXRTZWxlY3RlZEl0ZW1WaWV3KCk7XG4gIH1cblxuICBwcml2YXRlIHBhbmVsOiBhbnk7XG5cbiAgc2hvdyhjb21tYW5kczogVFtdKSB7XG4gICAgdGhpcy5zdG9yZUZvY3VzZWRFbGVtZW50KCk7XG4gICAgaWYgKCF0aGlzLnBhbmVsKSB0aGlzLnBhbmVsID0gYXRvbS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbCh7IGl0ZW06IDxhbnk+dGhpcyB9KTtcbiAgICB0aGlzLnNldEl0ZW1zKGNvbW1hbmRzKTtcbiAgICB0aGlzLnBhbmVsLnNob3coKTtcbiAgICB0aGlzLmZvY3VzRmlsdGVyRWRpdG9yKCk7XG4gIH1cbn1cbiJdfQ==\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t// import dialogs=require(\"../dialogs/dialogs\")\n\t// import path=require('path')\n\t// import rp=require(\"raml-1-parser\")\n\t//\n\t// import hl=rp.hl;\n\t// import universe = rp.universes;\n\t// import services =rp.ds;\n\t//\n\t// import universeHelpers =rp.universeHelpers;\n\t//\n\t// class AddNewResourceStateCalculator extends contextActions.CommonASTStateCalculator {\n\t//     calculate () : any {\n\t//\n\t//         //usually we dont need to check the editor, CommonASTStateCalculator does this for us\n\t//         //but in this case we accept null generalState, so double-checking for opened file\n\t//         var editor=this.getEditor()\n\t//         if (!editor) return null\n\t//\n\t//         if (path.extname(editor.getPath()) != '.raml') return null\n\t//\n\t//         var generalState = this.getGeneralState()\n\t//         if (!generalState) return null;\n\t//\n\t//         var highLevelNode = <hl.IHighLevelNode><any>generalState.node;\n\t//\n\t//         if (!universeHelpers.isResourceType(highLevelNode.definition()) &&\n\t//             !universeHelpers.isApiType(highLevelNode.definition()))\n\t//             return null\n\t//\n\t//         if(!highLevelNode.lowLevel()) {\n\t//             return null;\n\t//         }\n\t//\n\t//         return highLevelNode\n\t//     }\n\t// }\n\t//\n\t// class CreateNewAPIStateCalculator extends contextActions.CommonASTStateCalculator {\n\t//     calculate () : any {\n\t//\n\t//         var generalState = this.getGeneralState()\n\t//         if (generalState) return null\n\t//\n\t//         var editor=this.getEditor()\n\t//         if (!editor) return null\n\t//\n\t//         if (path.extname(editor.getPath()) != '.raml') return null\n\t//\n\t//         var text = editor.getText().trim()\n\t//         if (text != \"\") return null\n\t//\n\t//         return {}\n\t//     }\n\t// }\n\t//\n\t//\n\t// export function getResourceParent(node: hl.IHighLevelNode) {\n\t//     if (!node || !node.property()) return null;\n\t//     if ((universeHelpers.isResourcesProperty(node.property()) || universeHelpers.isResourceTypesProperty(node.property()))\n\t//         && (universeHelpers.isResourceType(node.definition()) || universeHelpers.isResourceTypeType(node.definition()))) return node;\n\t//     return getResourceParent(node.parent());\n\t// }\n\t// function getMethodParent(node: hl.IHighLevelNode) {\n\t//     if (!node || !node.property()) return null;\n\t//     if ((universeHelpers.isMethodType(node.definition())||universeHelpers.isTraitType(node.definition()))&&!node.definition().getAdapter(services.RAMLService).isUserDefined()){\n\t//         return node;\n\t//     }\n\t//     return null;\n\t// }\n\t// function getParent(node: hl.IHighLevelNode,name:string) {\n\t//     if (!node || !node.property()) return null;\n\t//     if ((node.definition().isAssignableFrom(name))){\n\t//         return node;\n\t//     }\n\t//     return null;\n\t// }\n\t//\n\t// function getResourceParentOrRoot(node: hl.IHighLevelNode) {\n\t//     var rp = getResourceParent(node);\n\t//     return rp ? rp : editorTools.aquireManager().ast;\n\t// }\n\t//\n\t// export function toResource(node: hl.IHighLevelNode) {\n\t//     if (!node || !node.property()) return null;\n\t//\n\t//     if ((universeHelpers.isResourcesProperty(node.property()) || universeHelpers.isResourceTypesProperty(node.property()))\n\t//         && (universeHelpers.isResourceType(node.definition()) || universeHelpers.isResourceTypeType(node.definition()))) return node;\n\t//\n\t//     return null;\n\t// }\n\t//\n\tfunction registerQuickCommands(cm) {\n\t    //     if (!editorTools.aquireManager()) editorTools.initEditorTools(false);\n\t    //\n\t    //     var commands = [\n\t    //         //cm.add( 'raml-labs:re-parse',\n\t    //         //    \"Parse current file again\",\n\t    //         //    () => {\n\t    //         //        editorTools.aquireManager().doParse(editorTools.aquireManager().getCurrentEditor().getPath());\n\t    //         //        editorTools.aquireManager().getView().forEachViewer(viewer=>viewer.clear());\n\t    //         //        editorTools.aquireManager().getView().setUnit(editorTools.aquireManager().ast, true); },\n\t    //         //    () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && editorTools.aquireManager().ast != null,\n\t    //         //    -100)\n\t    //\n\t    //     ];\n\t    //\n\t    //     commands.forEach(x=>x['__module__'] = 'editorTools');\n\t    //\n\t    //     contextActions.addAction({\n\t    //         name : \"Add new resource\",\n\t    //         target : contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         category : [\"Add new...\"],\n\t    //         onClick : state=>dialogs.newResource(editorTools.aquireManager().getSelectedNode()),\n\t    //         stateCalculator : new AddNewResourceStateCalculator(),\n\t    //         shouldDisplay : state=>state != null\n\t    //     })\n\t    //\n\t    //     contextActions.addAction({\n\t    //         name : \"Create new API\",\n\t    //         target : contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         category : [\"Add new...\"],\n\t    //         onClick : state=>dialogs.newApi(),\n\t    //         stateCalculator : new CreateNewAPIStateCalculator(),\n\t    //         shouldDisplay : state=>state != null\n\t    //     })\n\t    //\n\t    //     contextActions.addSimpleAction(\"Add new method\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newMethod(toResource(editorTools.aquireManager().getSelectedNode())),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && toResource(editorTools.aquireManager().getSelectedNode()) != null);\n\t    //\n\t    //     contextActions.addSimpleAction(\"Create new URI Parameter\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(toResource(editorTools.aquireManager().getSelectedNode()),\"Create new URI Parameter\",\"uriParameters\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (toResource(editorTools.aquireManager().getSelectedNode()) != null));\n\t    //\n\t    //     contextActions.addSimpleAction(\"Create new Query Parameter\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Query Parameter\",\"queryParameters\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n\t    //\n\t    //     contextActions.addSimpleAction(\"Create new Header\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Header\",\"headers\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n\t    //\n\t    //     contextActions.addSimpleAction(\"Create new Response Header\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getParent(editorTools.aquireManager().getSelectedNode(),\"Response\"),\"Create new Header\",\"headers\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getParent(editorTools.aquireManager().getSelectedNode(),\"Response\" )!= null));\n\t    //     contextActions.addSimpleAction(\"Create new Response Body\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getParent(editorTools.aquireManager().getSelectedNode(),\"Response\"),\"Create new Response Body\",\"body\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getParent(editorTools.aquireManager().getSelectedNode(),\"Response\" )!= null));\n\t    //     contextActions.addSimpleAction(\"Create new Property\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getParent(editorTools.aquireManager().getSelectedNode(),\"ObjectTypeDeclaration\"),\"Create new Property\",\"properties\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getParent(editorTools.aquireManager().getSelectedNode(),\"ObjectTypeDeclaration\" )!= null));\n\t    //\n\t    //     contextActions.addSimpleAction(\"Create new Body\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Body\",\"body\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n\t    //     contextActions.addSimpleAction(\"Create new Response\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n\t    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Response\",\"responses\",\"200\"),\n\t    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n\t}\n\texports.registerQuickCommands = registerQuickCommands;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvZGUtY29tbWFuZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSwrQ0FBK0M7QUFDL0MsOEJBQThCO0FBQzlCLHFDQUFxQztBQUNyQyxFQUFFO0FBQ0YsbUJBQW1CO0FBQ25CLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsRUFBRTtBQUNGLDhDQUE4QztBQUM5QyxFQUFFO0FBQ0Ysd0ZBQXdGO0FBQ3hGLDJCQUEyQjtBQUMzQixFQUFFO0FBQ0YsZ0dBQWdHO0FBQ2hHLDZGQUE2RjtBQUM3RixzQ0FBc0M7QUFDdEMsbUNBQW1DO0FBQ25DLEVBQUU7QUFDRixxRUFBcUU7QUFDckUsRUFBRTtBQUNGLG9EQUFvRDtBQUNwRCwwQ0FBMEM7QUFDMUMsRUFBRTtBQUNGLHlFQUF5RTtBQUN6RSxFQUFFO0FBQ0YsNkVBQTZFO0FBQzdFLHNFQUFzRTtBQUN0RSwwQkFBMEI7QUFDMUIsRUFBRTtBQUNGLDBDQUEwQztBQUMxQywyQkFBMkI7QUFDM0IsWUFBWTtBQUNaLEVBQUU7QUFDRiwrQkFBK0I7QUFDL0IsUUFBUTtBQUNSLElBQUk7QUFDSixFQUFFO0FBQ0Ysc0ZBQXNGO0FBQ3RGLDJCQUEyQjtBQUMzQixFQUFFO0FBQ0Ysb0RBQW9EO0FBQ3BELHdDQUF3QztBQUN4QyxFQUFFO0FBQ0Ysc0NBQXNDO0FBQ3RDLG1DQUFtQztBQUNuQyxFQUFFO0FBQ0YscUVBQXFFO0FBQ3JFLEVBQUU7QUFDRiw2Q0FBNkM7QUFDN0Msc0NBQXNDO0FBQ3RDLEVBQUU7QUFDRixvQkFBb0I7QUFDcEIsUUFBUTtBQUNSLElBQUk7QUFDSixFQUFFO0FBQ0YsRUFBRTtBQUNGLCtEQUErRDtBQUMvRCxrREFBa0Q7QUFDbEQsNkhBQTZIO0FBQzdILHdJQUF3STtBQUN4SSwrQ0FBK0M7QUFDL0MsSUFBSTtBQUNKLHNEQUFzRDtBQUN0RCxrREFBa0Q7QUFDbEQsbUxBQW1MO0FBQ25MLHVCQUF1QjtBQUN2QixRQUFRO0FBQ1IsbUJBQW1CO0FBQ25CLElBQUk7QUFDSiw0REFBNEQ7QUFDNUQsa0RBQWtEO0FBQ2xELHVEQUF1RDtBQUN2RCx1QkFBdUI7QUFDdkIsUUFBUTtBQUNSLG1CQUFtQjtBQUNuQixJQUFJO0FBQ0osRUFBRTtBQUNGLDhEQUE4RDtBQUM5RCx3Q0FBd0M7QUFDeEMsd0RBQXdEO0FBQ3hELElBQUk7QUFDSixFQUFFO0FBQ0Ysd0RBQXdEO0FBQ3hELGtEQUFrRDtBQUNsRCxFQUFFO0FBQ0YsNkhBQTZIO0FBQzdILHdJQUF3STtBQUN4SSxFQUFFO0FBQ0YsbUJBQW1CO0FBQ25CLElBQUk7QUFDSixFQUFFO0FBQ0YsK0JBQXNDLEVBQXFCO0lBQzNELDRFQUE0RTtJQUM1RSxFQUFFO0lBQ0YsdUJBQXVCO0lBQ3ZCLDBDQUEwQztJQUMxQyw0Q0FBNEM7SUFDNUMsd0JBQXdCO0lBQ3hCLG1IQUFtSDtJQUNuSCxpR0FBaUc7SUFDakcsNkdBQTZHO0lBQzdHLGdKQUFnSjtJQUNoSixzQkFBc0I7SUFDdEIsRUFBRTtJQUNGLFNBQVM7SUFDVCxFQUFFO0lBQ0YsNERBQTREO0lBQzVELEVBQUU7SUFDRixpQ0FBaUM7SUFDakMscUNBQXFDO0lBQ3JDLDJEQUEyRDtJQUMzRCxxQ0FBcUM7SUFDckMsK0ZBQStGO0lBQy9GLGlFQUFpRTtJQUNqRSwrQ0FBK0M7SUFDL0MsU0FBUztJQUNULEVBQUU7SUFDRixpQ0FBaUM7SUFDakMsbUNBQW1DO0lBQ25DLDJEQUEyRDtJQUMzRCxxQ0FBcUM7SUFDckMsNkNBQTZDO0lBQzdDLCtEQUErRDtJQUMvRCwrQ0FBK0M7SUFDL0MsU0FBUztJQUNULEVBQUU7SUFDRiwrR0FBK0c7SUFDL0csOEZBQThGO0lBQzlGLHFLQUFxSztJQUNySyxFQUFFO0lBQ0YseUhBQXlIO0lBQ3pILHVJQUF1STtJQUN2SSx1S0FBdUs7SUFDdkssRUFBRTtJQUNGLDJIQUEySDtJQUMzSCxnSkFBZ0o7SUFDaEosNEtBQTRLO0lBQzVLLEVBQUU7SUFDRixrSEFBa0g7SUFDbEgsK0hBQStIO0lBQy9ILDRLQUE0SztJQUM1SyxFQUFFO0lBQ0YsMkhBQTJIO0lBQzNILG9JQUFvSTtJQUNwSSxpTEFBaUw7SUFDakwseUhBQXlIO0lBQ3pILHdJQUF3STtJQUN4SSxpTEFBaUw7SUFDakwsb0hBQW9IO0lBQ3BILHNKQUFzSjtJQUN0Siw4TEFBOEw7SUFDOUwsRUFBRTtJQUNGLGdIQUFnSDtJQUNoSCwwSEFBMEg7SUFDMUgsNEtBQTRLO0lBQzVLLG9IQUFvSDtJQUNwSCx5SUFBeUk7SUFDekksNEtBQTRLO0FBQzVLLENBQUM7QUFuRUQsc0RBbUVDIiwiZmlsZSI6InNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvZGUtY29tbWFuZHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgZWRpdG9yVG9vbHM9cmVxdWlyZShcIi4uL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHNcIilcbi8vIGltcG9ydCBjb250ZXh0QWN0aW9ucyA9IHJlcXVpcmUoXCJyYW1sLWFjdGlvbnNcIilcbi8vIGltcG9ydCBjb21tb25Db250ZXh0QWN0aW9ucyA9IHJlcXVpcmUoXCIuLi9jb250ZXh0LW1lbnUvY29tbW9uQ29udGV4dEFjdGlvbnNcIilcbmltcG9ydCBxYyA9IHJlcXVpcmUoJy4vcXVpY2stY29tbWFuZHMnKTtcbi8vIGltcG9ydCBkaWFsb2dzPXJlcXVpcmUoXCIuLi9kaWFsb2dzL2RpYWxvZ3NcIilcbi8vIGltcG9ydCBwYXRoPXJlcXVpcmUoJ3BhdGgnKVxuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vL1xuLy8gaW1wb3J0IGhsPXJwLmhsO1xuLy8gaW1wb3J0IHVuaXZlcnNlID0gcnAudW5pdmVyc2VzO1xuLy8gaW1wb3J0IHNlcnZpY2VzID1ycC5kcztcbi8vXG4vLyBpbXBvcnQgdW5pdmVyc2VIZWxwZXJzID1ycC51bml2ZXJzZUhlbHBlcnM7XG4vL1xuLy8gY2xhc3MgQWRkTmV3UmVzb3VyY2VTdGF0ZUNhbGN1bGF0b3IgZXh0ZW5kcyBjb250ZXh0QWN0aW9ucy5Db21tb25BU1RTdGF0ZUNhbGN1bGF0b3Ige1xuLy8gICAgIGNhbGN1bGF0ZSAoKSA6IGFueSB7XG4vL1xuLy8gICAgICAgICAvL3VzdWFsbHkgd2UgZG9udCBuZWVkIHRvIGNoZWNrIHRoZSBlZGl0b3IsIENvbW1vbkFTVFN0YXRlQ2FsY3VsYXRvciBkb2VzIHRoaXMgZm9yIHVzXG4vLyAgICAgICAgIC8vYnV0IGluIHRoaXMgY2FzZSB3ZSBhY2NlcHQgbnVsbCBnZW5lcmFsU3RhdGUsIHNvIGRvdWJsZS1jaGVja2luZyBmb3Igb3BlbmVkIGZpbGVcbi8vICAgICAgICAgdmFyIGVkaXRvcj10aGlzLmdldEVkaXRvcigpXG4vLyAgICAgICAgIGlmICghZWRpdG9yKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgaWYgKHBhdGguZXh0bmFtZShlZGl0b3IuZ2V0UGF0aCgpKSAhPSAnLnJhbWwnKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgdmFyIGdlbmVyYWxTdGF0ZSA9IHRoaXMuZ2V0R2VuZXJhbFN0YXRlKClcbi8vICAgICAgICAgaWYgKCFnZW5lcmFsU3RhdGUpIHJldHVybiBudWxsO1xuLy9cbi8vICAgICAgICAgdmFyIGhpZ2hMZXZlbE5vZGUgPSA8aGwuSUhpZ2hMZXZlbE5vZGU+PGFueT5nZW5lcmFsU3RhdGUubm9kZTtcbi8vXG4vLyAgICAgICAgIGlmICghdW5pdmVyc2VIZWxwZXJzLmlzUmVzb3VyY2VUeXBlKGhpZ2hMZXZlbE5vZGUuZGVmaW5pdGlvbigpKSAmJlxuLy8gICAgICAgICAgICAgIXVuaXZlcnNlSGVscGVycy5pc0FwaVR5cGUoaGlnaExldmVsTm9kZS5kZWZpbml0aW9uKCkpKVxuLy8gICAgICAgICAgICAgcmV0dXJuIG51bGxcbi8vXG4vLyAgICAgICAgIGlmKCFoaWdoTGV2ZWxOb2RlLmxvd0xldmVsKCkpIHtcbi8vICAgICAgICAgICAgIHJldHVybiBudWxsO1xuLy8gICAgICAgICB9XG4vL1xuLy8gICAgICAgICByZXR1cm4gaGlnaExldmVsTm9kZVxuLy8gICAgIH1cbi8vIH1cbi8vXG4vLyBjbGFzcyBDcmVhdGVOZXdBUElTdGF0ZUNhbGN1bGF0b3IgZXh0ZW5kcyBjb250ZXh0QWN0aW9ucy5Db21tb25BU1RTdGF0ZUNhbGN1bGF0b3Ige1xuLy8gICAgIGNhbGN1bGF0ZSAoKSA6IGFueSB7XG4vL1xuLy8gICAgICAgICB2YXIgZ2VuZXJhbFN0YXRlID0gdGhpcy5nZXRHZW5lcmFsU3RhdGUoKVxuLy8gICAgICAgICBpZiAoZ2VuZXJhbFN0YXRlKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgdmFyIGVkaXRvcj10aGlzLmdldEVkaXRvcigpXG4vLyAgICAgICAgIGlmICghZWRpdG9yKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgaWYgKHBhdGguZXh0bmFtZShlZGl0b3IuZ2V0UGF0aCgpKSAhPSAnLnJhbWwnKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgdmFyIHRleHQgPSBlZGl0b3IuZ2V0VGV4dCgpLnRyaW0oKVxuLy8gICAgICAgICBpZiAodGV4dCAhPSBcIlwiKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgcmV0dXJuIHt9XG4vLyAgICAgfVxuLy8gfVxuLy9cbi8vXG4vLyBleHBvcnQgZnVuY3Rpb24gZ2V0UmVzb3VyY2VQYXJlbnQobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUpIHtcbi8vICAgICBpZiAoIW5vZGUgfHwgIW5vZGUucHJvcGVydHkoKSkgcmV0dXJuIG51bGw7XG4vLyAgICAgaWYgKCh1bml2ZXJzZUhlbHBlcnMuaXNSZXNvdXJjZXNQcm9wZXJ0eShub2RlLnByb3BlcnR5KCkpIHx8IHVuaXZlcnNlSGVscGVycy5pc1Jlc291cmNlVHlwZXNQcm9wZXJ0eShub2RlLnByb3BlcnR5KCkpKVxuLy8gICAgICAgICAmJiAodW5pdmVyc2VIZWxwZXJzLmlzUmVzb3VyY2VUeXBlKG5vZGUuZGVmaW5pdGlvbigpKSB8fCB1bml2ZXJzZUhlbHBlcnMuaXNSZXNvdXJjZVR5cGVUeXBlKG5vZGUuZGVmaW5pdGlvbigpKSkpIHJldHVybiBub2RlO1xuLy8gICAgIHJldHVybiBnZXRSZXNvdXJjZVBhcmVudChub2RlLnBhcmVudCgpKTtcbi8vIH1cbi8vIGZ1bmN0aW9uIGdldE1ldGhvZFBhcmVudChub2RlOiBobC5JSGlnaExldmVsTm9kZSkge1xuLy8gICAgIGlmICghbm9kZSB8fCAhbm9kZS5wcm9wZXJ0eSgpKSByZXR1cm4gbnVsbDtcbi8vICAgICBpZiAoKHVuaXZlcnNlSGVscGVycy5pc01ldGhvZFR5cGUobm9kZS5kZWZpbml0aW9uKCkpfHx1bml2ZXJzZUhlbHBlcnMuaXNUcmFpdFR5cGUobm9kZS5kZWZpbml0aW9uKCkpKSYmIW5vZGUuZGVmaW5pdGlvbigpLmdldEFkYXB0ZXIoc2VydmljZXMuUkFNTFNlcnZpY2UpLmlzVXNlckRlZmluZWQoKSl7XG4vLyAgICAgICAgIHJldHVybiBub2RlO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gbnVsbDtcbi8vIH1cbi8vIGZ1bmN0aW9uIGdldFBhcmVudChub2RlOiBobC5JSGlnaExldmVsTm9kZSxuYW1lOnN0cmluZykge1xuLy8gICAgIGlmICghbm9kZSB8fCAhbm9kZS5wcm9wZXJ0eSgpKSByZXR1cm4gbnVsbDtcbi8vICAgICBpZiAoKG5vZGUuZGVmaW5pdGlvbigpLmlzQXNzaWduYWJsZUZyb20obmFtZSkpKXtcbi8vICAgICAgICAgcmV0dXJuIG5vZGU7XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiBudWxsO1xuLy8gfVxuLy9cbi8vIGZ1bmN0aW9uIGdldFJlc291cmNlUGFyZW50T3JSb290KG5vZGU6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgdmFyIHJwID0gZ2V0UmVzb3VyY2VQYXJlbnQobm9kZSk7XG4vLyAgICAgcmV0dXJuIHJwID8gcnAgOiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuYXN0O1xuLy8gfVxuLy9cbi8vIGV4cG9ydCBmdW5jdGlvbiB0b1Jlc291cmNlKG5vZGU6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgaWYgKCFub2RlIHx8ICFub2RlLnByb3BlcnR5KCkpIHJldHVybiBudWxsO1xuLy9cbi8vICAgICBpZiAoKHVuaXZlcnNlSGVscGVycy5pc1Jlc291cmNlc1Byb3BlcnR5KG5vZGUucHJvcGVydHkoKSkgfHwgdW5pdmVyc2VIZWxwZXJzLmlzUmVzb3VyY2VUeXBlc1Byb3BlcnR5KG5vZGUucHJvcGVydHkoKSkpXG4vLyAgICAgICAgICYmICh1bml2ZXJzZUhlbHBlcnMuaXNSZXNvdXJjZVR5cGUobm9kZS5kZWZpbml0aW9uKCkpIHx8IHVuaXZlcnNlSGVscGVycy5pc1Jlc291cmNlVHlwZVR5cGUobm9kZS5kZWZpbml0aW9uKCkpKSkgcmV0dXJuIG5vZGU7XG4vL1xuLy8gICAgIHJldHVybiBudWxsO1xuLy8gfVxuLy9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclF1aWNrQ29tbWFuZHMoY206IHFjLkNvbW1hbmRNYW5hZ2VyKSB7XG4vLyAgICAgaWYgKCFlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkpIGVkaXRvclRvb2xzLmluaXRFZGl0b3JUb29scyhmYWxzZSk7XG4vL1xuLy8gICAgIHZhciBjb21tYW5kcyA9IFtcbi8vICAgICAgICAgLy9jbS5hZGQoICdyYW1sLWxhYnM6cmUtcGFyc2UnLFxuLy8gICAgICAgICAvLyAgICBcIlBhcnNlIGN1cnJlbnQgZmlsZSBhZ2FpblwiLFxuLy8gICAgICAgICAvLyAgICAoKSA9PiB7XG4vLyAgICAgICAgIC8vICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZG9QYXJzZShlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpLmdldFBhdGgoKSk7XG4vLyAgICAgICAgIC8vICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0VmlldygpLmZvckVhY2hWaWV3ZXIodmlld2VyPT52aWV3ZXIuY2xlYXIoKSk7XG4vLyAgICAgICAgIC8vICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0VmlldygpLnNldFVuaXQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmFzdCwgdHJ1ZSk7IH0sXG4vLyAgICAgICAgIC8vICAgICgpID0+IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSAmJiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5hc3QgIT0gbnVsbCxcbi8vICAgICAgICAgLy8gICAgLTEwMClcbi8vXG4vLyAgICAgXTtcbi8vXG4vLyAgICAgY29tbWFuZHMuZm9yRWFjaCh4PT54WydfX21vZHVsZV9fJ10gPSAnZWRpdG9yVG9vbHMnKTtcbi8vXG4vLyAgICAgY29udGV4dEFjdGlvbnMuYWRkQWN0aW9uKHtcbi8vICAgICAgICAgbmFtZSA6IFwiQWRkIG5ldyByZXNvdXJjZVwiLFxuLy8gICAgICAgICB0YXJnZXQgOiBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgY2F0ZWdvcnkgOiBbXCJBZGQgbmV3Li4uXCJdLFxuLy8gICAgICAgICBvbkNsaWNrIDogc3RhdGU9PmRpYWxvZ3MubmV3UmVzb3VyY2UoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpKSxcbi8vICAgICAgICAgc3RhdGVDYWxjdWxhdG9yIDogbmV3IEFkZE5ld1Jlc291cmNlU3RhdGVDYWxjdWxhdG9yKCksXG4vLyAgICAgICAgIHNob3VsZERpc3BsYXkgOiBzdGF0ZT0+c3RhdGUgIT0gbnVsbFxuLy8gICAgIH0pXG4vL1xuLy8gICAgIGNvbnRleHRBY3Rpb25zLmFkZEFjdGlvbih7XG4vLyAgICAgICAgIG5hbWUgOiBcIkNyZWF0ZSBuZXcgQVBJXCIsXG4vLyAgICAgICAgIHRhcmdldCA6IGNvbnRleHRBY3Rpb25zLlRBUkdFVF9SQU1MX0VESVRPUl9OT0RFLFxuLy8gICAgICAgICBjYXRlZ29yeSA6IFtcIkFkZCBuZXcuLi5cIl0sXG4vLyAgICAgICAgIG9uQ2xpY2sgOiBzdGF0ZT0+ZGlhbG9ncy5uZXdBcGkoKSxcbi8vICAgICAgICAgc3RhdGVDYWxjdWxhdG9yIDogbmV3IENyZWF0ZU5ld0FQSVN0YXRlQ2FsY3VsYXRvcigpLFxuLy8gICAgICAgICBzaG91bGREaXNwbGF5IDogc3RhdGU9PnN0YXRlICE9IG51bGxcbi8vICAgICB9KVxuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJBZGQgbmV3IG1ldGhvZFwiLCBbXCJBZGQgbmV3Li4uXCJdLCBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgKCkgPT4gZGlhbG9ncy5uZXdNZXRob2QodG9SZXNvdXJjZShlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgdG9SZXNvdXJjZShlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFVSSSBQYXJhbWV0ZXJcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZSh0b1Jlc291cmNlKGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSksXCJDcmVhdGUgbmV3IFVSSSBQYXJhbWV0ZXJcIixcInVyaVBhcmFtZXRlcnNcIiksXG4vLyAgICAgICAgICgpID0+IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSAmJiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpICYmICh0b1Jlc291cmNlKGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSkgIT0gbnVsbCkpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFF1ZXJ5IFBhcmFtZXRlclwiLCBbXCJBZGQgbmV3Li4uXCJdLCBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgKCkgPT4gZGlhbG9ncy5uZXdOb2RlKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpLFwiQ3JlYXRlIG5ldyBRdWVyeSBQYXJhbWV0ZXJcIixcInF1ZXJ5UGFyYW1ldGVyc1wiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpKTtcbi8vXG4vLyAgICAgY29udGV4dEFjdGlvbnMuYWRkU2ltcGxlQWN0aW9uKFwiQ3JlYXRlIG5ldyBIZWFkZXJcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRNZXRob2RQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpKSxcIkNyZWF0ZSBuZXcgSGVhZGVyXCIsXCJoZWFkZXJzXCIpLFxuLy8gICAgICAgICAoKSA9PiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkgJiYgZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldEN1cnJlbnRFZGl0b3IoKSAmJiAoZ2V0TWV0aG9kUGFyZW50KGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSkgIT0gbnVsbCkpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEhlYWRlclwiLCBbXCJBZGQgbmV3Li4uXCJdLCBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgKCkgPT4gZGlhbG9ncy5uZXdOb2RlKGdldFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCksXCJSZXNwb25zZVwiKSxcIkNyZWF0ZSBuZXcgSGVhZGVyXCIsXCJoZWFkZXJzXCIpLFxuLy8gICAgICAgICAoKSA9PiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkgJiYgZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldEN1cnJlbnRFZGl0b3IoKSAmJiAoZ2V0UGFyZW50KGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSxcIlJlc3BvbnNlXCIgKSE9IG51bGwpKTtcbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEJvZHlcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpLFwiUmVzcG9uc2VcIiksXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEJvZHlcIixcImJvZHlcIiksXG4vLyAgICAgICAgICgpID0+IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSAmJiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpICYmIChnZXRQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpLFwiUmVzcG9uc2VcIiApIT0gbnVsbCkpO1xuLy8gICAgIGNvbnRleHRBY3Rpb25zLmFkZFNpbXBsZUFjdGlvbihcIkNyZWF0ZSBuZXcgUHJvcGVydHlcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpLFwiT2JqZWN0VHlwZURlY2xhcmF0aW9uXCIpLFwiQ3JlYXRlIG5ldyBQcm9wZXJ0eVwiLFwicHJvcGVydGllc1wiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCksXCJPYmplY3RUeXBlRGVjbGFyYXRpb25cIiApIT0gbnVsbCkpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IEJvZHlcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRNZXRob2RQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpKSxcIkNyZWF0ZSBuZXcgQm9keVwiLFwiYm9keVwiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpKTtcbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFJlc3BvbnNlXCIsIFtcIkFkZCBuZXcuLi5cIl0sIGNvbnRleHRBY3Rpb25zLlRBUkdFVF9SQU1MX0VESVRPUl9OT0RFLFxuLy8gICAgICAgICAoKSA9PiBkaWFsb2dzLm5ld05vZGUoZ2V0TWV0aG9kUGFyZW50KGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSksXCJDcmVhdGUgbmV3IFJlc3BvbnNlXCIsXCJyZXNwb25zZXNcIixcIjIwMFwiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpKTtcbn1cbiJdfQ==\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t// import suggestions = require('raml-suggestions');\n\tvar ramlServer = __webpack_require__(17);\n\t// import sharedAstInitializerInterfaces = require('../shared-ast-initializer-interfaces');\n\texports.selector = '.source.raml';\n\texports.disableForSelector = '.text.html .comment';\n\texports.filterSuggestions = true;\n\texports.inclusionPriority = 1;\n\texports.excludeLowerPriority = true;\n\t// export function initialize(astProvider : sharedAstInitializerInterfaces.IASTProvider) {\n\t//     suggestions.setDefaultASTProvider(<any>astProvider);\n\t// }\n\tfunction onDidInsertSuggestion(event) {\n\t    var offset = event.editor.getBuffer().characterIndexForPosition(event.triggerPosition);\n\t    if (event.suggestion.annotation) {\n\t        var txt = event.editor.getBuffer().getText();\n\t        for (var i = offset; i < txt.length; i++) {\n\t            var c = txt.charAt(i);\n\t            if (c == ')') {\n\t                offset = i + 1;\n\t                break;\n\t            }\n\t            if (c == '\\r' || c == '\\n') {\n\t                return;\n\t            }\n\t        }\n\t        var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n\t        event.editor.getBuffer().insert(newPos, ':');\n\t        return;\n\t    }\n\t    if ((event.suggestion.replacementPrefix && event.suggestion.extra) || event.suggestion.extra == \"%\") {\n\t        var newPos = event.editor.getBuffer().positionForCharacterIndex(offset - event.suggestion.replacementPrefix.length);\n\t        event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n\t    }\n\t    else {\n\t        //This actually looks exactly like a previous case but typing it as a separate case for now TODO\n\t        if (event.suggestion.extra == \" \") {\n\t            var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n\t            event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n\t        }\n\t        //FIXME\n\t        if (event.suggestion.extra == \" { \") {\n\t            var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n\t            event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n\t        }\n\t        if (event.suggestion.extra && event.suggestion.extra.indexOf(\"!include\") != -1) {\n\t            var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n\t            event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n\t        }\n\t    }\n\t}\n\texports.onDidInsertSuggestion = onDidInsertSuggestion;\n\t// class FSProvider implements suggestions.IFSProvider {\n\t//     contentDirName(content: suggestions.IEditorStateProvider): string {\n\t//         var contentPath = content.getPath();\n\t//\n\t//         return path.dirname(contentPath);\n\t//     }\n\t//\n\t//     dirName(childPath: string): string {\n\t//         return path.dirname(childPath);\n\t//     }\n\t//\n\t//     exists(checkPath: string): boolean {\n\t//         return fs.existsSync(checkPath);\n\t//     }\n\t//\n\t//     resolve(contextPath: string, relativePath: string): string {\n\t//         return path.resolve(contextPath, relativePath);\n\t//     }\n\t//\n\t//     isDirectory(dirPath: string): boolean {\n\t//         var stat = fs.statSync(dirPath);\n\t//\n\t//         return stat && stat.isDirectory();\n\t//     }\n\t//\n\t//     readDir(dirPath: string): string[] {\n\t//         return fs.readdirSync(dirPath);\n\t//     }\n\t//\n\t//     existsAsync(path: string): Promise<boolean> {\n\t//         return new Promise(resolve => {\n\t//             fs.exists(path, (result) => {resolve(result)})\n\t//         });\n\t//     }\n\t//\n\t//     /**\n\t//      * Returns directory content list.\n\t//      * @param fullPath\n\t//      */\n\t//     readDirAsync(path: string): Promise<string[]> {\n\t//         return new Promise(resolve => {\n\t//             fs.readdir(path, (err, result) => {resolve(result)})\n\t//         });\n\t//     }\n\t//\n\t//     /**\n\t//      * Check whether the path points to a directory.\n\t//      * @param fullPath\n\t//      */\n\t//     isDirectoryAsync(path: string): Promise<boolean> {\n\t//         return new Promise(resolve => {\n\t//             fs.stat(path, (err, stats) => {resolve(stats.isDirectory())})\n\t//         });\n\t//     }\n\t// }\n\t// class AtomEditorState implements suggestions.IEditorStateProvider {\n\t//     textEditor: AtomCore.IEditor;\n\t//\n\t//     constructor(textEditor: AtomCore.IEditor,private request: AtomCompletionRequest) {\n\t//         this.textEditor = textEditor;\n\t//     }\n\t//\n\t//     getText(): string {\n\t//         return this.textEditor.getBuffer().getText();\n\t//     }\n\t//\n\t//     getPath(): string {\n\t//         return this.textEditor.getPath();\n\t//     }\n\t//\n\t//     getBaseName(): string {\n\t//         return path.basename(this.getPath());\n\t//     }\n\t//\n\t//     getOffset(): number {\n\t//         return this.request.editor.getBuffer().characterIndexForPosition(this.request.bufferPosition);\n\t//     }\n\t// }\n\tfunction getSuggestions(request) {\n\t    // var editorState = new AtomEditorState(request.editor, request);\n\t    var editor = request.editor;\n\t    var offset = editor.getBuffer().characterIndexForPosition(request.bufferPosition);\n\t    ramlServer.getNodeClientConnection().documentChanged({\n\t        uri: request.editor.getPath(),\n\t        text: editor.getText()\n\t    });\n\t    return ramlServer.getNodeClientConnection().getSuggestions(request.editor.getPath(), offset);\n\t    // return suggestions.suggest(editorState, new FSProvider());\n\t}\n\texports.getSuggestions = getSuggestions;\n\t// export function getAstNode(request: AtomCompletionRequest,clearLastChar:boolean=true,allowNull:boolean=true):highlevel.IParseResult{\n\t//     var p=request.editor.getPath();\n\t//     var prj=rp.project.createProject(path.dirname(p));\n\t//     var offset=request.editor.getBuffer().characterIndexForPosition(request.bufferPosition);\n\t//     var text=request.editor.getBuffer().getText();\n\t//     var kind=search.determineCompletionKind(text,offset);\n\t//     if(kind==search.LocationKind.KEY_COMPLETION&&clearLastChar){\n\t//         var pos=offset>0?offset-1:offset;\n\t//         for (var i=pos;i>0;i--){\n\t//             var c=text[i];\n\t//             if (c=='\\r'||c=='\\n'){\n\t//                 break;\n\t//             }\n\t//             else{\n\t//                 if (c==' '||c=='\\t'){\n\t//                     ilevel++;\n\t//                 }\n\t//             }\n\t//         }\n\t//         var oldOfffset=offset;\n\t//\n\t//         text=text.substring(0,oldOfffset)+\"k:\"+text.substring(oldOfffset);\n\t//         //offset--;\n\t//     }\n\t//     var ilevel=0;\n\t//     var unit=prj.setCachedUnitContent(path.basename(p),text);\n\t//     var ast=<highlevel.IHighLevelNode>unit.highLevel();\n\t//     var cm=offset;\n\t//     for (var pm=offset-1;pm>=0;pm--){\n\t//         var c=text[pm];\n\t//         //if (c==' '||c=='\\t'||c=='\\r'||c=='\\n'){\n\t//         //    cm=pm-1;\n\t//         //    continue;\n\t//         //}\n\t//         if (c==' '||c=='\\t'){\n\t//             cm=pm-1;\n\t//             continue;\n\t//         }\n\t//         break;\n\t//     }\n\t//     var astNode=ast.findElementAtOffset(cm);\n\t//\n\t//     if (astNode&&astNode.parent()==null){\n\t//         if (ilevel>0&&kind==search.LocationKind.KEY_COMPLETION) {\n\t//             var attr=_.find(astNode.attrs(),attr=>{\n\t//                 var at=<any>attr;\n\t//                 return at.lowLevel().start()<offset&&at.lowLevel().end()>=offset&&!at.property().isKey()\n\t//             });\n\t//             if (!attr) {\n\t//                 if (allowNull) {\n\t//                     return null;\n\t//                 }\n\t//             }\n\t//         }\n\t//         //check if we are on correct indentation level\n\t//     }\n\t//     if (!allowNull&&!astNode){\n\t//         return ast;\n\t//     }\n\t//     return astNode;\n\t// }\n\t//\n\t// export function saveUnit(unit : lowLevel.ICompilationUnit) : void {\n\t//     var unitPath = unit.absolutePath()\n\t//     var unitText = unit.contents()\n\t//\n\t//     //first trying to find an opened text editor\n\t//     var openedEditor = _.find(atom.workspace.getTextEditors(), editor => {\n\t//         var editorPath = editor.getPath()\n\t//         return editorPath == unitPath\n\t//     })\n\t//\n\t//     if (openedEditor) {\n\t//         openedEditor.setText(unitText)\n\t//     } else {\n\t//         fs.writeFileSync(unitPath, unitText)\n\t//     }\n\t// }\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3N1Z2dlc3Rpb24vcHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFVQSxvREFBb0Q7QUFDcEQsaURBQW9EO0FBQ3BELDJGQUEyRjtBQUVoRixRQUFBLFFBQVEsR0FBRSxjQUFjLENBQUE7QUFDeEIsUUFBQSxrQkFBa0IsR0FBRSxxQkFBcUIsQ0FBQTtBQUN6QyxRQUFBLGlCQUFpQixHQUFFLElBQUksQ0FBQTtBQUN2QixRQUFBLGlCQUFpQixHQUFFLENBQUMsQ0FBQTtBQUNwQixRQUFBLG9CQUFvQixHQUFDLElBQUksQ0FBQztBQVVyQywwRkFBMEY7QUFDMUYsMkRBQTJEO0FBQzNELElBQUk7QUFFSiwrQkFBc0MsS0FBcUU7SUFDdkcsSUFBSSxNQUFNLEdBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDckYsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQSxDQUFDO1FBQzdCLElBQUksR0FBRyxHQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDM0MsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUMsTUFBTSxFQUFDLENBQUMsR0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLENBQUMsRUFBRSxFQUFDLENBQUM7WUFDaEMsSUFBSSxDQUFDLEdBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUUsR0FBRyxDQUFDLENBQUEsQ0FBQztnQkFDUixNQUFNLEdBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQztnQkFDWCxLQUFLLENBQUM7WUFDVixDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFFLElBQUksSUFBRSxDQUFDLElBQUUsSUFBSSxDQUFDLENBQUEsQ0FB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LElBQUk7QUFDSixFQUFFO0FBQ0Ysc0VBQXNFO0FBQ3RFLHlDQUF5QztBQUN6QyxxQ0FBcUM7QUFDckMsRUFBRTtBQUNGLG1EQUFtRDtBQUNuRCw2RUFBNkU7QUFDN0UsNENBQTRDO0FBQzVDLHdDQUF3QztBQUN4QyxTQUFTO0FBQ1QsRUFBRTtBQUNGLDBCQUEwQjtBQUMxQix5Q0FBeUM7QUFDekMsZUFBZTtBQUNmLCtDQUErQztBQUMvQyxRQUFRO0FBQ1IsSUFBSSIsImZpbGUiOiJzcmMvYXRvbS9zdWdnZXN0aW9uL3Byb3ZpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbmltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vLyBpbXBvcnQgaGlnaGxldmVsPXJwLmhsO1xuLy8gaW1wb3J0IGRlZj1ycC5kcztcbi8vIGltcG9ydCBzZWFyY2g9cnAuc2VhcmNoO1xuLy8gaW1wb3J0IGxvd0xldmVsPXJwLmxsO1xuXG5pbXBvcnQgXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTtcblxuLy8gaW1wb3J0IHN1Z2dlc3Rpb25zID0gcmVxdWlyZSgncmFtbC1zdWdnZXN0aW9ucycpO1xuaW1wb3J0IHJhbWxTZXJ2ZXIgPSByZXF1aXJlKFwicmFtbC1sYW5ndWFnZS1zZXJ2ZXJcIik7XG4vLyBpbXBvcnQgc2hhcmVkQXN0SW5pdGlhbGl6ZXJJbnRlcmZhY2VzID0gcmVxdWlyZSgnLi4vc2hhcmVkLWFzdC1pbml0aWFsaXplci1pbnRlcmZhY2VzJyk7XG5cbmV4cG9ydCB2YXIgc2VsZWN0b3I9ICcuc291cmNlLnJhbWwnXG5leHBvcnQgdmFyIGRpc2FibGVGb3JTZWxlY3Rvcj0gJy50ZXh0Lmh0bWwgLmNvbW1lbnQnXG5leHBvcnQgdmFyIGZpbHRlclN1Z2dlc3Rpb25zPSB0cnVlXG5leHBvcnQgdmFyIGluY2x1c2lvblByaW9yaXR5PSAxXG5leHBvcnQgdmFyIGV4Y2x1ZGVMb3dlclByaW9yaXR5PXRydWU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXRvbUNvbXBsZXRpb25SZXF1ZXN0IHtcbiAgICBidWZmZXJQb3NpdGlvbjpUZXh0QnVmZmVyLklQb2ludFxuICAgIGVkaXRvcjpBdG9tQ29yZS5JRWRpdG9yXG4gICAgcHJlZml4Pzogc3RyaW5nXG59XG5cbmltcG9ydCBlZGl0b3JUb29scz1yZXF1aXJlKFwiLi4vZWRpdG9yLXRvb2xzL2VkaXRvci10b29sc1wiKVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZShhc3RQcm92aWRlciA6IHNoYXJlZEFzdEluaXRpYWxpemVySW50ZXJmYWNlcy5JQVNUUHJvdmlkZXIpIHtcbi8vICAgICBzdWdnZXN0aW9ucy5zZXREZWZhdWx0QVNUUHJvdmlkZXIoPGFueT5hc3RQcm92aWRlcik7XG4vLyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBvbkRpZEluc2VydFN1Z2dlc3Rpb24oZXZlbnQ6e2VkaXRvcjpBdG9tQ29yZS5JRWRpdG9yOyB0cmlnZ2VyUG9zaXRpb246YW55OyBzdWdnZXN0aW9uOiBhbnl9KXtcbiAgICB2YXIgb2Zmc2V0PWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKGV2ZW50LnRyaWdnZXJQb3NpdGlvbik7XG4gICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uYW5ub3RhdGlvbil7XG4gICAgICAgIHZhciB0eHQ9ZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLmdldFRleHQoKTtcbiAgICAgICAgZm9yICh2YXIgaT1vZmZzZXQ7aTx0eHQubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICB2YXIgYz10eHQuY2hhckF0KGkpO1xuICAgICAgICAgICAgaWYgKGM9PScpJyl7XG4gICAgICAgICAgICAgICAgb2Zmc2V0PWkrMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjPT0nXFxyJ3x8Yz09J1xcbicpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3UG9zPWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KG9mZnNldClcblxuICAgICAgICBldmVudC5lZGl0b3IuZ2V0QnVmZmVyKCkuaW5zZXJ0KG5ld1BvcywgJzonKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoKGV2ZW50LnN1Z2dlc3Rpb24ucmVwbGFjZW1lbnRQcmVmaXgmJmV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEpfHxldmVudC5zdWdnZXN0aW9uLmV4dHJhPT1cIiVcIikge1xuICAgICAgICB2YXIgbmV3UG9zPWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KG9mZnNldC1ldmVudC5zdWdnZXN0aW9uLnJlcGxhY2VtZW50UHJlZml4Lmxlbmd0aClcbiAgICAgICAgZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLmluc2VydChuZXdQb3MsIGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgICAvL1RoaXMgYWN0dWFsbHkgbG9va3MgZXhhY3RseSBsaWtlIGEgcHJldmlvdXMgY2FzZSBidXQgdHlwaW5nIGl0IGFzIGEgc2VwYXJhdGUgY2FzZSBmb3Igbm93IFRPRE9cbiAgICAgICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmE9PVwiIFwiKXtcbiAgICAgICAgICAgIHZhciBuZXdQb3M9ZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgob2Zmc2V0KVxuICAgICAgICAgICAgZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLmluc2VydChuZXdQb3MsIGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEpO1xuICAgICAgICB9XG4gICAgICAgIC8vRklYTUVcbiAgICAgICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmE9PVwiIHsgXCIpe1xuICAgICAgICAgICAgdmFyIG5ld1Bvcz1ldmVudC5lZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChvZmZzZXQpXG4gICAgICAgICAgICBldmVudC5lZGl0b3IuZ2V0QnVmZmVyKCkuaW5zZXJ0KG5ld1BvcywgZXZlbnQuc3VnZ2VzdGlvbi5leHRyYSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEmJmV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEuaW5kZXhPZihcIiFpbmNsdWRlXCIpIT0tMSl7XG4gICAgICAgICAgICB2YXIgbmV3UG9zPWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KG9mZnNldClcbiAgICAgICAgICAgIGV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5pbnNlcnQobmV3UG9zLCBldmVudC5zdWdnZXN0aW9uLmV4dHJhKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBjbGFzcyBGU1Byb3ZpZGVyIGltcGxlbWVudHMgc3VnZ2VzdGlvbnMuSUZTUHJvdmlkZXIge1xuLy8gICAgIGNvbnRlbnREaXJOYW1lKGNvbnRlbnQ6IHN1Z2dlc3Rpb25zLklFZGl0b3JTdGF0ZVByb3ZpZGVyKTogc3RyaW5nIHtcbi8vICAgICAgICAgdmFyIGNvbnRlbnRQYXRoID0gY29udGVudC5nZXRQYXRoKCk7XG4vL1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5kaXJuYW1lKGNvbnRlbnRQYXRoKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIGRpck5hbWUoY2hpbGRQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5kaXJuYW1lKGNoaWxkUGF0aCk7XG4vLyAgICAgfVxuLy9cbi8vICAgICBleGlzdHMoY2hlY2tQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbi8vICAgICAgICAgcmV0dXJuIGZzLmV4aXN0c1N5bmMoY2hlY2tQYXRoKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIHJlc29sdmUoY29udGV4dFBhdGg6IHN0cmluZywgcmVsYXRpdmVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5yZXNvbHZlKGNvbnRleHRQYXRoLCByZWxhdGl2ZVBhdGgpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgaXNEaXJlY3RvcnkoZGlyUGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4vLyAgICAgICAgIHZhciBzdGF0ID0gZnMuc3RhdFN5bmMoZGlyUGF0aCk7XG4vL1xuLy8gICAgICAgICByZXR1cm4gc3RhdCAmJiBzdGF0LmlzRGlyZWN0b3J5KCk7XG4vLyAgICAgfVxuLy9cbi8vICAgICByZWFkRGlyKGRpclBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcbi8vICAgICAgICAgcmV0dXJuIGZzLnJlYWRkaXJTeW5jKGRpclBhdGgpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgZXhpc3RzQXN5bmMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4vLyAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbi8vICAgICAgICAgICAgIGZzLmV4aXN0cyhwYXRoLCAocmVzdWx0KSA9PiB7cmVzb2x2ZShyZXN1bHQpfSlcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuLy9cbi8vICAgICAvKipcbi8vICAgICAgKiBSZXR1cm5zIGRpcmVjdG9yeSBjb250ZW50IGxpc3QuXG4vLyAgICAgICogQHBhcmFtIGZ1bGxQYXRoXG4vLyAgICAgICovXG4vLyAgICAgcmVhZERpckFzeW5jKHBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbi8vICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuLy8gICAgICAgICAgICAgZnMucmVhZGRpcihwYXRoLCAoZXJyLCByZXN1bHQpID0+IHtyZXNvbHZlKHJlc3VsdCl9KVxuLy8gICAgICAgICB9KTtcbi8vICAgICB9XG4vL1xuLy8gICAgIC8qKlxuLy8gICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIHBhdGggcG9pbnRzIHRvIGEgZGlyZWN0b3J5LlxuLy8gICAgICAqIEBwYXJhbSBmdWxsUGF0aFxuLy8gICAgICAqL1xuLy8gICAgIGlzRGlyZWN0b3J5QXN5bmMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4vLyAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbi8vICAgICAgICAgICAgIGZzLnN0YXQocGF0aCwgKGVyciwgc3RhdHMpID0+IHtyZXNvbHZlKHN0YXRzLmlzRGlyZWN0b3J5KCkpfSlcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuLy8gfVxuXG4vLyBjbGFzcyBBdG9tRWRpdG9yU3RhdGUgaW1wbGVtZW50cyBzdWdnZXN0aW9ucy5JRWRpdG9yU3RhdGVQcm92aWRlciB7XG4vLyAgICAgdGV4dEVkaXRvcjogQXRvbUNvcmUuSUVkaXRvcjtcbi8vXG4vLyAgICAgY29uc3RydWN0b3IodGV4dEVkaXRvcjogQXRvbUNvcmUuSUVkaXRvcixwcml2YXRlIHJlcXVlc3Q6IEF0b21Db21wbGV0aW9uUmVxdWVzdCkge1xuLy8gICAgICAgICB0aGlzLnRleHRFZGl0b3IgPSB0ZXh0RWRpdG9yO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgZ2V0VGV4dCgpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gdGhpcy50ZXh0RWRpdG9yLmdldEJ1ZmZlcigpLmdldFRleHQoKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIGdldFBhdGgoKTogc3RyaW5nIHtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMudGV4dEVkaXRvci5nZXRQYXRoKCk7XG4vLyAgICAgfVxuLy9cbi8vICAgICBnZXRCYXNlTmFtZSgpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5iYXNlbmFtZSh0aGlzLmdldFBhdGgoKSk7XG4vLyAgICAgfVxuLy9cbi8vICAgICBnZXRPZmZzZXQoKTogbnVtYmVyIHtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdC5lZGl0b3IuZ2V0QnVmZmVyKCkuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbih0aGlzLnJlcXVlc3QuYnVmZmVyUG9zaXRpb24pO1xuLy8gICAgIH1cbi8vIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3Rpb25zKHJlcXVlc3Q6IEF0b21Db21wbGV0aW9uUmVxdWVzdCkge1xuXG4gICAgLy8gdmFyIGVkaXRvclN0YXRlID0gbmV3IEF0b21FZGl0b3JTdGF0ZShyZXF1ZXN0LmVkaXRvciwgcmVxdWVzdCk7XG5cbiAgICBsZXQgZWRpdG9yID0gcmVxdWVzdC5lZGl0b3I7XG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHJlcXVlc3QuYnVmZmVyUG9zaXRpb24pO1xuXG4gICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRvY3VtZW50Q2hhbmdlZCh7XG4gICAgICAgIHVyaTogcmVxdWVzdC5lZGl0b3IuZ2V0UGF0aCgpLFxuICAgICAgICB0ZXh0OiBlZGl0b3IuZ2V0VGV4dCgpXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmdldFN1Z2dlc3Rpb25zKHJlcXVlc3QuZWRpdG9yLmdldFBhdGgoKSwgb2Zmc2V0KTtcbiAgICAvLyByZXR1cm4gc3VnZ2VzdGlvbnMuc3VnZ2VzdChlZGl0b3JTdGF0ZSwgbmV3IEZTUHJvdmlkZXIoKSk7XG59XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBnZXRBc3ROb2RlKHJlcXVlc3Q6IEF0b21Db21wbGV0aW9uUmVxdWVzdCxjbGVhckxhc3RDaGFyOmJvb2xlYW49dHJ1ZSxhbGxvd051bGw6Ym9vbGVhbj10cnVlKTpoaWdobGV2ZWwuSVBhcnNlUmVzdWx0e1xuLy8gICAgIHZhciBwPXJlcXVlc3QuZWRpdG9yLmdldFBhdGgoKTtcbi8vICAgICB2YXIgcHJqPXJwLnByb2plY3QuY3JlYXRlUHJvamVjdChwYXRoLmRpcm5hbWUocCkpO1xuLy8gICAgIHZhciBvZmZzZXQ9cmVxdWVzdC5lZGl0b3IuZ2V0QnVmZmVyKCkuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihyZXF1ZXN0LmJ1ZmZlclBvc2l0aW9uKTtcbi8vICAgICB2YXIgdGV4dD1yZXF1ZXN0LmVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KCk7XG4vLyAgICAgdmFyIGtpbmQ9c2VhcmNoLmRldGVybWluZUNvbXBsZXRpb25LaW5kKHRleHQsb2Zmc2V0KTtcbi8vICAgICBpZihraW5kPT1zZWFyY2guTG9jYXRpb25LaW5kLktFWV9DT01QTEVUSU9OJiZjbGVhckxhc3RDaGFyKXtcbi8vICAgICAgICAgdmFyIHBvcz1vZmZzZXQ+MD9vZmZzZXQtMTpvZmZzZXQ7XG4vLyAgICAgICAgIGZvciAodmFyIGk9cG9zO2k+MDtpLS0pe1xuLy8gICAgICAgICAgICAgdmFyIGM9dGV4dFtpXTtcbi8vICAgICAgICAgICAgIGlmIChjPT0nXFxyJ3x8Yz09J1xcbicpe1xuLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgZWxzZXtcbi8vICAgICAgICAgICAgICAgICBpZiAoYz09JyAnfHxjPT0nXFx0Jyl7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlsZXZlbCsrO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICB2YXIgb2xkT2ZmZnNldD1vZmZzZXQ7XG4vL1xuLy8gICAgICAgICB0ZXh0PXRleHQuc3Vic3RyaW5nKDAsb2xkT2ZmZnNldCkrXCJrOlwiK3RleHQuc3Vic3RyaW5nKG9sZE9mZmZzZXQpO1xuLy8gICAgICAgICAvL29mZnNldC0tO1xuLy8gICAgIH1cbi8vICAgICB2YXIgaWxldmVsPTA7XG4vLyAgICAgdmFyIHVuaXQ9cHJqLnNldENhY2hlZFVuaXRDb250ZW50KHBhdGguYmFzZW5hbWUocCksdGV4dCk7XG4vLyAgICAgdmFyIGFzdD08aGlnaGxldmVsLklIaWdoTGV2ZWxOb2RlPnVuaXQuaGlnaExldmVsKCk7XG4vLyAgICAgdmFyIGNtPW9mZnNldDtcbi8vICAgICBmb3IgKHZhciBwbT1vZmZzZXQtMTtwbT49MDtwbS0tKXtcbi8vICAgICAgICAgdmFyIGM9dGV4dFtwbV07XG4vLyAgICAgICAgIC8vaWYgKGM9PScgJ3x8Yz09J1xcdCd8fGM9PSdcXHInfHxjPT0nXFxuJyl7XG4vLyAgICAgICAgIC8vICAgIGNtPXBtLTE7XG4vLyAgICAgICAgIC8vICAgIGNvbnRpbnVlO1xuLy8gICAgICAgICAvL31cbi8vICAgICAgICAgaWYgKGM9PScgJ3x8Yz09J1xcdCcpe1xuLy8gICAgICAgICAgICAgY209cG0tMTtcbi8vICAgICAgICAgICAgIGNvbnRpbnVlO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGJyZWFrO1xuLy8gICAgIH1cbi8vICAgICB2YXIgYXN0Tm9kZT1hc3QuZmluZEVsZW1lbnRBdE9mZnNldChjbSk7XG4vL1xuLy8gICAgIGlmIChhc3ROb2RlJiZhc3ROb2RlLnBhcmVudCgpPT1udWxsKXtcbi8vICAgICAgICAgaWYgKGlsZXZlbD4wJiZraW5kPT1zZWFyY2guTG9jYXRpb25LaW5kLktFWV9DT01QTEVUSU9OKSB7XG4vLyAgICAgICAgICAgICB2YXIgYXR0cj1fLmZpbmQoYXN0Tm9kZS5hdHRycygpLGF0dHI9Pntcbi8vICAgICAgICAgICAgICAgICB2YXIgYXQ9PGFueT5hdHRyO1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiBhdC5sb3dMZXZlbCgpLnN0YXJ0KCk8b2Zmc2V0JiZhdC5sb3dMZXZlbCgpLmVuZCgpPj1vZmZzZXQmJiFhdC5wcm9wZXJ0eSgpLmlzS2V5KClcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgICAgaWYgKCFhdHRyKSB7XG4vLyAgICAgICAgICAgICAgICAgaWYgKGFsbG93TnVsbCkge1xuLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgLy9jaGVjayBpZiB3ZSBhcmUgb24gY29ycmVjdCBpbmRlbnRhdGlvbiBsZXZlbFxuLy8gICAgIH1cbi8vICAgICBpZiAoIWFsbG93TnVsbCYmIWFzdE5vZGUpe1xuLy8gICAgICAgICByZXR1cm4gYXN0O1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gYXN0Tm9kZTtcbi8vIH1cbi8vXG4vLyBleHBvcnQgZnVuY3Rpb24gc2F2ZVVuaXQodW5pdCA6IGxvd0xldmVsLklDb21waWxhdGlvblVuaXQpIDogdm9pZCB7XG4vLyAgICAgdmFyIHVuaXRQYXRoID0gdW5pdC5hYnNvbHV0ZVBhdGgoKVxuLy8gICAgIHZhciB1bml0VGV4dCA9IHVuaXQuY29udGVudHMoKVxuLy9cbi8vICAgICAvL2ZpcnN0IHRyeWluZyB0byBmaW5kIGFuIG9wZW5lZCB0ZXh0IGVkaXRvclxuLy8gICAgIHZhciBvcGVuZWRFZGl0b3IgPSBfLmZpbmQoYXRvbS53b3Jrc3BhY2UuZ2V0VGV4dEVkaXRvcnMoKSwgZWRpdG9yID0+IHtcbi8vICAgICAgICAgdmFyIGVkaXRvclBhdGggPSBlZGl0b3IuZ2V0UGF0aCgpXG4vLyAgICAgICAgIHJldHVybiBlZGl0b3JQYXRoID09IHVuaXRQYXRoXG4vLyAgICAgfSlcbi8vXG4vLyAgICAgaWYgKG9wZW5lZEVkaXRvcikge1xuLy8gICAgICAgICBvcGVuZWRFZGl0b3Iuc2V0VGV4dCh1bml0VGV4dClcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHVuaXRQYXRoLCB1bml0VGV4dClcbi8vICAgICB9XG4vLyB9XG4iXX0=\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tfunction doPatch() {\n\t    var oldRegister = document.registerElement;\n\t    document.registerElement = function (name, options) {\n\t        if (name === \"atom-pane-resize-handle\") {\n\t            var proto = options.prototype;\n\t            if (proto) {\n\t                var oldAttachedCallback = proto.attachedCallback;\n\t                proto.attachedCallback = function () {\n\t                    if (this.parentElement) {\n\t                        return oldAttachedCallback.apply(this, []);\n\t                    }\n\t                };\n\t            }\n\t            document.registerElement = oldRegister;\n\t        }\n\t        return oldRegister.apply(document, [name, options]);\n\t    };\n\t}\n\texports.doPatch = doPatch;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvcGF0Y2hFbGVtZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBO0lBRUksSUFBSSxXQUFXLEdBQVMsUUFBUyxDQUFDLGVBQWUsQ0FBQztJQUU1QyxRQUFTLENBQUMsZUFBZSxHQUFHLFVBQVUsSUFBSSxFQUFFLE9BQU87UUFFckQsRUFBRSxDQUFBLENBQUMsSUFBSSxLQUFLLHlCQUF5QixDQUFDLENBQUMsQ0FBQztZQUNwQyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1lBRTlCLEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ1AsSUFBSSxtQkFBbUIsR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUM7Z0JBRWpELEtBQUssQ0FBQyxnQkFBZ0IsR0FBRztvQkFDckIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7d0JBQ3JCLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFBO29CQUM5QyxDQUFDO2dCQUNMLENBQUMsQ0FBQTtZQUNMLENBQUM7WUFFSyxRQUFTLENBQUMsZUFBZSxHQUFHLFdBQVcsQ0FBQztRQUNsRCxDQUFDO1FBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUE7SUFDdkQsQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQXhCRCwwQkF3QkMiLCJmaWxlIjoic3JjL2F0b20vY29yZS9wYXRjaEVsZW1lbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGRvUGF0Y2goKTogdm9pZCB7XG5cbiAgICB2YXIgb2xkUmVnaXN0ZXIgPSAoPGFueT5kb2N1bWVudCkucmVnaXN0ZXJFbGVtZW50O1xuXG4gICAgKDxhbnk+ZG9jdW1lbnQpLnJlZ2lzdGVyRWxlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBvcHRpb25zKSB7XG5cbiAgICAgICAgaWYobmFtZSA9PT0gXCJhdG9tLXBhbmUtcmVzaXplLWhhbmRsZVwiKSB7XG4gICAgICAgICAgICB2YXIgcHJvdG8gPSBvcHRpb25zLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgaWYocHJvdG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkQXR0YWNoZWRDYWxsYmFjayA9IHByb3RvLmF0dGFjaGVkQ2FsbGJhY2s7XG5cbiAgICAgICAgICAgICAgICBwcm90by5hdHRhY2hlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkQXR0YWNoZWRDYWxsYmFjay5hcHBseSh0aGlzLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgKDxhbnk+ZG9jdW1lbnQpLnJlZ2lzdGVyRWxlbWVudCA9IG9sZFJlZ2lzdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9sZFJlZ2lzdGVyLmFwcGx5KGRvY3VtZW50LCBbbmFtZSwgb3B0aW9uc10pXG4gICAgfVxufSJdfQ==\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"atom\");\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar _ = __webpack_require__(10);\n\texports.DYNAMIC_COMMAND_TAG = \"DYNAMIC_COMMAND_TAG\";\n\tvar commandIdToCommandInfo = {};\n\tvar tagToCommands = {};\n\t/**\n\t * Adds new managed command\n\t * @param selector - command CSS selector\n\t * @param id - command id. Must be unique across the managed commands.\n\t * @param callBack - called on command invocation\n\t * @param tag - optional action tag allowing to perform batch operations\n\t */\n\tfunction addCommand(selector, id, callBack, tag) {\n\t    if (_.find(listCommands(), function (commandId) {\n\t        if (commandId == id) {\n\t            return true;\n\t        }\n\t        return false;\n\t    })) {\n\t        return;\n\t    }\n\t    var disposable = atom.commands.add(selector, id, callBack);\n\t    var commandInfo = {\n\t        commandId: id,\n\t        tag: tag,\n\t        disposable: disposable\n\t    };\n\t    commandIdToCommandInfo[id] = commandInfo;\n\t    if (tag) {\n\t        var tagCommands = tagToCommands[tag];\n\t        if (!tagCommands) {\n\t            tagCommands = [];\n\t            tagToCommands[tag] = tagCommands;\n\t        }\n\t        tagCommands.push(commandInfo);\n\t    }\n\t}\n\texports.addCommand = addCommand;\n\t/**\n\t * Deletes unmanaged command.\n\t * Generally, should not be called for managed actions, use the managed\n\t * version instead.\n\t * @param id - command id\n\t */\n\tfunction deleteUnmanagedCommand(id) {\n\t    atom.commands.registeredCommands[id] = null;\n\t    atom.commands.selectorBasedListenersByCommandName[id] = null;\n\t}\n\texports.deleteUnmanagedCommand = deleteUnmanagedCommand;\n\t/**\n\t * Deletes managed action by id\n\t * @param id\n\t */\n\tfunction deleteManagedCommand(id) {\n\t    var commandInfo = commandIdToCommandInfo[id];\n\t    if (!commandInfo)\n\t        return;\n\t    commandInfo.disposable.dispose();\n\t    delete commandIdToCommandInfo[id];\n\t    if (commandInfo.tag) {\n\t        var tagCommands = tagToCommands[commandInfo.tag];\n\t        if (!tagCommands)\n\t            return;\n\t        var infoIndex = -1;\n\t        _.find(tagCommands, function (currentInfo, index) {\n\t            if (currentInfo.commandId == id) {\n\t                infoIndex = index;\n\t                return true;\n\t            }\n\t            return false;\n\t        });\n\t        if (infoIndex != -1)\n\t            tagCommands.splice(infoIndex, 1);\n\t    }\n\t}\n\texports.deleteManagedCommand = deleteManagedCommand;\n\t/**\n\t * Deletes all managed commands tagged the the specific tag\n\t * @param tag\n\t */\n\tfunction deleteCommandsByTag(tag) {\n\t    var tagCommands = tagToCommands[tag];\n\t    if (!tagCommands)\n\t        return;\n\t    for (var index in tagCommands) {\n\t        var currentInfo = tagCommands[index];\n\t        currentInfo.disposable.dispose();\n\t        delete commandIdToCommandInfo[currentInfo.commandId];\n\t    }\n\t    delete tagToCommands[tag];\n\t}\n\texports.deleteCommandsByTag = deleteCommandsByTag;\n\t/**\n\t * Lists all commands, both managed and unmanaged.\n\t * @returns {string[]}\n\t */\n\tfunction listCommands() {\n\t    var result = [];\n\t    for (var commandName in atom.commands.selectorBasedListenersByCommandName) {\n\t        result.push(commandName);\n\t    }\n\t    return result;\n\t}\n\texports.listCommands = listCommands;\n\tvar initialized = false;\n\tfunction initialize() {\n\t    if (initialized)\n\t        return;\n\t    initialized = true;\n\t    try {\n\t        //forcing command palette to register itself\n\t        atom.packages.activatePackage('command-palette');\n\t        //registering our own listener to command palette's command\n\t        var listener = function () {\n\t            prePanelDisplay();\n\t        };\n\t        listener.commandManager = true;\n\t        atom.commands.add('atom-workspace', 'command-palette:toggle', listener);\n\t        ////and now swapping those listeners, so our one is called first\n\t        //var listenersArray = (<any>atom.commands.selectorBasedListenersByCommandName)\n\t        //    [\"command-palette:toggle\"]\n\t        //listenersArray.splice(0,0,listenersArray[1])\n\t        //listenersArray.splice(1, 1)\n\t        var listenersArray = atom.commands.selectorBasedListenersByCommandName[\"command-palette:toggle\"];\n\t        listenersArray.forEach(function (listener) {\n\t            var callback = listener.callback || listener.didDispatch;\n\t            if (callback && callback.commandManager) {\n\t                listener.sequenceNumber = 100500000;\n\t            }\n\t        });\n\t    }\n\t    catch (Error) {\n\t        console.error(Error.message);\n\t    }\n\t}\n\texports.initialize = initialize;\n\tvar contributors = {};\n\tfunction registerContributor(contributor) {\n\t    contributors[contributor.id] = contributor;\n\t}\n\texports.registerContributor = registerContributor;\n\tfunction prePanelDisplay() {\n\t    deleteCommandsByTag(exports.DYNAMIC_COMMAND_TAG);\n\t    for (var contributorId in contributors) {\n\t        var contributor = contributors[contributorId];\n\t        if (contributor.calculationStarted) {\n\t            contributor.calculationStarted();\n\t        }\n\t    }\n\t    for (var contributorId in contributors) {\n\t        var contributor = contributors[contributorId];\n\t        contributor.calculateItems().forEach(function (item) {\n\t            addCommand(item.selector, \"api-workbench:\" + item.id, item.callBack, exports.DYNAMIC_COMMAND_TAG);\n\t        });\n\t    }\n\t    for (var contributorId in contributors) {\n\t        var contributor = contributors[contributorId];\n\t        if (contributor.calculationFinished) {\n\t            contributor.calculationFinished();\n\t        }\n\t    }\n\t}\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvbW1hbmQtbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbURBQW1EOztBQUVuRCw4QkFBZ0M7QUFHckIsUUFBQSxtQkFBbUIsR0FBRyxxQkFBcUIsQ0FBQTtBQUV0RCxJQUFJLHNCQUFzQixHQUFrQyxFQUFFLENBQUE7QUFFOUQsSUFBSSxhQUFhLEdBQXFDLEVBQUUsQ0FBQTtBQVF4RDs7Ozs7O0dBTUc7QUFDSCxvQkFBMkIsUUFBaUIsRUFBRSxFQUFXLEVBQzlCLFFBQW1CLEVBQUUsR0FBYTtJQUV6RCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLFVBQUEsU0FBUztRQUM1QixFQUFFLENBQUEsQ0FBRSxTQUFTLElBQUksRUFBRSxDQUFDLENBQUEsQ0FBQztZQUNqQixNQUFNLENBQUMsSUFBSSxDQUFBO1FBQ2YsQ0FBQztRQUNELE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsTUFBTSxDQUFBO0lBQ1YsQ0FBQztJQUVELElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUcsUUFBUSxDQUFDLENBQUE7SUFFM0QsSUFBSSxXQUFXLEdBQWtCO1FBQzdCLFNBQVMsRUFBRyxFQUFFO1FBQ2QsR0FBRyxFQUFHLEdBQUc7UUFDVCxVQUFVLEVBQUcsVUFBVTtLQUMxQixDQUFBO0lBRUQsc0JBQXNCLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFBO0lBRXhDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDTixJQUFJLFdBQVcsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ2YsV0FBVyxHQUFHLEVBQUUsQ0FBQTtZ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QUV4QyxHQUFHLENBQUMsQ0FBQyxJQUFJLGFBQWEsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRXJDLElBQUksV0FBVyxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUM5QyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQ3JDLENBQUM7SUFDTCxDQUFDO0lBRUQsR0FBRyxDQUFDLENBQUMsSUFBSSxhQUFhLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQztRQUVyQyxJQUFJLFdBQVcsR0FBeUIsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3BFLFdBQVcsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBQSxJQUFJO1lBQ3JDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLGdCQUFnQixHQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSwyQkFBbUIsQ0FBQyxDQUFBO1FBQzNGLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELEdBQUcsQ0FBQyxDQUFDLElBQUksYUFBYSxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFFckMsSUFBSSxXQUFXLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzlDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7WUFDbEMsV0FBVyxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDdEMsQ0FBQztJQUNMLENBQUM7QUFDTCxDQUFDIiwiZmlsZSI6InNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvbW1hbmQtbWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5cbmltcG9ydCBfID0gcmVxdWlyZShcInVuZGVyc2NvcmVcIilcblxuXG5leHBvcnQgdmFyIERZTkFNSUNfQ09NTUFORF9UQUcgPSBcIkRZTkFNSUNfQ09NTUFORF9UQUdcIlxuXG52YXIgY29tbWFuZElkVG9Db21tYW5kSW5mbyA6IHtbaWQ6c3RyaW5nXSA6IElDb21tYW5kSW5mb30gPSB7fVxuXG52YXIgdGFnVG9Db21tYW5kcyA6IHtbdGFnOnN0cmluZ10gOiBJQ29tbWFuZEluZm9bXX0gPSB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb21tYW5kIHtcbiAgICBzZWxlY3RvciA6IHN0cmluZ1xuICAgIGlkIDogc3RyaW5nXG4gICAgY2FsbEJhY2sgOiAoKT0+dm9pZFxufVxuXG4vKipcbiAqIEFkZHMgbmV3IG1hbmFnZWQgY29tbWFuZFxuICogQHBhcmFtIHNlbGVjdG9yIC0gY29tbWFuZCBDU1Mgc2VsZWN0b3JcbiAqIEBwYXJhbSBpZCAtIGNvbW1hbmQgaWQuIE11c3QgYmUgdW5pcXVlIGFjcm9zcyB0aGUgbWFuYWdlZCBjb21tYW5kcy5cbiAqIEBwYXJhbSBjYWxsQmFjayAtIGNhbGxlZCBvbiBjb21tYW5kIGludm9jYXRpb25cbiAqIEBwYXJhbSB0YWcgLSBvcHRpb25hbCBhY3Rpb24gdGFnIGFsbG93aW5nIHRvIHBlcmZvcm0gYmF0Y2ggb3BlcmF0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbWFuZChzZWxlY3RvciA6IHN0cmluZywgaWQgOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsQmFjayA6ICgpPT52b2lkLCB0YWc/IDogc3RyaW5nKSB7XG5cbiAgICBpZiAoXy5maW5kKGxpc3RDb21tYW5kcygpLCBjb21tYW5kSWQgPT4ge1xuICAgICAgICAgICAgaWYoIGNvbW1hbmRJZCA9PSBpZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgZGlzcG9zYWJsZSA9IGF0b20uY29tbWFuZHMuYWRkKHNlbGVjdG9yLCBpZCAsIGNhbGxCYWNrKVxuXG4gICAgdmFyIGNvbW1hbmRJbmZvIDogSUNvbW1hbmRJbmZvID0ge1xuICAgICAgICBjb21tYW5kSWQgOiBpZCxcbiAgICAgICAgdGFnIDogdGFnLFxuICAgICAgICBkaXNwb3NhYmxlIDogZGlzcG9zYWJsZVxuICAgIH1cblxuICAgIGNvbW1hbmRJZFRvQ29tbWFuZEluZm9baWRdID0gY29tbWFuZEluZm9cblxuICAgIGlmICh0YWcpIHtcbiAgICAgICAgdmFyIHRhZ0NvbW1hbmRzID0gdGFnVG9Db21tYW5kc1t0YWddXG4gICAgICAgIGlmICghdGFnQ29tbWFuZHMpIHtcbiAgICAgICAgICAgIHRhZ0NvbW1hbmRzID0gW11cbiAgICAgICAgICAgIHRhZ1RvQ29tbWFuZHNbdGFnXSA9IHRhZ0NvbW1hbmRzXG4gICAgICAgIH1cblxuICAgICAgICB0YWdDb21tYW5kcy5wdXNoKGNvbW1hbmRJbmZvKVxuICAgIH1cbn1cblxuLyoqXG4gKiBEZWxldGVzIHVubWFuYWdlZCBjb21tYW5kLlxuICogR2VuZXJhbGx5LCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgbWFuYWdlZCBhY3Rpb25zLCB1c2UgdGhlIG1hbmFnZWRcbiAqIHZlcnNpb24gaW5zdGVhZC5cbiAqIEBwYXJhbSBpZCAtIGNvbW1hbmQgaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVVubWFuYWdlZENvbW1hbmQoaWQgOiBzdHJpbmcpIHtcbiAgICBhdG9tLmNvbW1hbmRzLnJlZ2lzdGVyZWRDb21tYW5kc1tpZF0gPSBudWxsO1xuICAgIGF0b20uY29tbWFuZHMuc2VsZWN0b3JCYXNlZExpc3RlbmVyc0J5Q29tbWFuZE5hbWVbaWRdID0gbnVsbDtcbn1cblxuLyoqXG4gKiBEZWxldGVzIG1hbmFnZWQgYWN0aW9uIGJ5IGlkXG4gKiBAcGFyYW0gaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZU1hbmFnZWRDb21tYW5kKGlkIDogc3RyaW5nKSB7XG4gICAgdmFyIGNvbW1hbmRJbmZvID0gY29tbWFuZElkVG9Db21tYW5kSW5mb1tpZF1cbiAgICBpZiAoIWNvbW1hbmRJbmZvKSByZXR1cm5cblxuICAgIGNvbW1hbmRJbmZvLmRpc3Bvc2FibGUuZGlzcG9zZSgpXG5cbiAgICBkZWxldGUgY29tbWFuZElkVG9Db21tYW5kSW5mb1tpZF1cblxuICAgIGlmIChjb21tYW5kSW5mby50YWcpIHtcbiAgICAgICAgdmFyIHRhZ0NvbW1hbmRzID0gdGFnVG9Db21tYW5kc1tjb21tYW5kSW5mby50YWddXG4gICAgICAgIGlmICghdGFnQ29tbWFuZHMpIHJldHVyblxuXG4gICAgICAgIHZhciBpbmZvSW5kZXg6IG51bWJlciA9IC0xO1xuICAgICAgICBfLmZpbmQodGFnQ29tbWFuZHMsIChjdXJyZW50SW5mbywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5mby5jb21tYW5kSWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICBpbmZvSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChpbmZvSW5kZXggIT0gLTEpXG4gICAgICAgICAgICB0YWdDb21tYW5kcy5zcGxpY2UoaW5mb0luZGV4LCAxKVxuICAgIH1cbn1cblxuLyoqXG4gKiBEZWxldGVzIGFsbCBtYW5hZ2VkIGNvbW1hbmRzIHRhZ2dlZCB0aGUgdGhlIHNwZWNpZmljIHRhZ1xuICogQHBhcmFtIHRhZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ29tbWFuZHNCeVRhZyh0YWcgOiBzdHJpbmcpIHtcbiAgICB2YXIgdGFnQ29tbWFuZHMgPSB0YWdUb0NvbW1hbmRzW3RhZ11cbiAgICBpZiAoIXRhZ0NvbW1hbmRzKSByZXR1cm5cblxuICAgIGZvciAodmFyIGluZGV4IGluIHRhZ0NvbW1hbmRzKSB7XG4gICAgICAgIHZhciBjdXJyZW50SW5mbyA9IHRhZ0NvbW1hbmRzW2luZGV4XVxuXG4gICAgICAgIGN1cnJlbnRJbmZvLmRpc3Bvc2FibGUuZGlzcG9zZSgpXG4gICAgICAgIGRlbGV0ZSBjb21tYW5kSWRUb0NvbW1hbmRJbmZvW2N1cnJlbnRJbmZvLmNvbW1hbmRJZF1cbiAgICB9XG5cbiAgICBkZWxldGUgdGFnVG9Db21tYW5kc1t0YWddXG59XG5cbi8qKlxuICogTGlzdHMgYWxsIGNvbW1hbmRzLCBib3RoIG1hbmFnZWQgYW5kIHVubWFuYWdlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RDb21tYW5kcygpIHtcbiAgICB2YXIgcmVzdWx0IDogc3RyaW5nW10gPSBbXVxuXG4gICAgZm9yICh2YXIgY29tbWFuZE5hbWUgaW4gYXRvbS5jb21tYW5kcy5zZWxlY3RvckJhc2VkTGlzdGVuZXJzQnlDb21tYW5kTmFtZSl7XG4gICAgICAgIHJlc3VsdC5wdXNoKGNvbW1hbmROYW1lKVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbn1cblxuaW50ZXJmYWNlIElDb21tYW5kSW5mbyB7XG4gICAgY29tbWFuZElkIDogc3RyaW5nXG4gICAgdGFnIDogc3RyaW5nXG4gICAgZGlzcG9zYWJsZSA6IEF0b21Db3JlLkRpc3Bvc2FibGVcbn1cblxuLyoqXG4gKiBDb250cmlidXRlcyBjb21tYW5kcy5cbiAqIElzIGNhbGxlZCBiZWZvcmUgZWFjaCBjb21tYW5kIHBhbmVsIGRpc3BsYXkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRDb250cmlidXRvciB7XG5cbiAgICAvKipcbiAgICAgKiBVbmlxdWUgY29udHJpYnV0b3IgaWQuXG4gICAgICovXG4gICAgaWQgOiBzdHJpbmdcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgaXRlbXMgdG8gZGlzcGxheSBpbiB0aGUgY29udGV4dCBtZW51LlxuICAgICAqIFRoaXMgaXMgcnVudGltZSBtZXRob2QsIGNhbGxlZCBlYWNoIHRpbWUgZm9yIGVhY2ggY29udHJpYnV0b3IgYmVmb3JlXG4gICAgICogdGhlIG1lbnUgaXMgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUl0ZW1zICgpIDogSUNvbW1hbmRbXVxuXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWxseSBub3RpZmllcyBjb250cmlidXRvciB0aGF0IHRoZSBwYW5lbCBpcyBhYm91dCB0byBiZSBkaXNwbGF5ZWQgYW5kXG4gICAgICogaXRlbSBjYWxjdWxhdGlvbnMgYXJlIHN0YXJ0ZWRcbiAgICAgKi9cbiAgICBjYWxjdWxhdGlvblN0YXJ0ZWQ/IDogKCk9PnZvaWRcblxuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsbHkgbm90aWZpZXMgY29udHJpYnV0b3IgdGhhdCB0aGUgcGFuZWwgaXMgYWJvdXQgdG8gYmUgZGlzcGxheWVkIGFuZFxuICAgICAqIGl0ZW0gY2FsY3VsYXRpb25zIGFyZSBkb25lXG4gICAgICovXG4gICAgY2FsY3VsYXRpb25GaW5pc2hlZD8gOiAoKT0+dm9pZFxufVxuXG52YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICBpZiAoaW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgaW5pdGlhbGl6ZWQgPSB0cnVlXG5cbiAgICB0cnkge1xuICAgICAgICAvL2ZvcmNpbmcgY29tbWFuZCBwYWxldHRlIHRvIHJlZ2lzdGVyIGl0c2VsZlxuICAgICAgICBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgnY29tbWFuZC1wYWxldHRlJylcblxuICAgICAgICAvL3JlZ2lzdGVyaW5nIG91ciBvd24gbGlzdGVuZXIgdG8gY29tbWFuZCBwYWxldHRlJ3MgY29tbWFuZFxuICAgICAgICB2YXIgbGlzdGVuZXI6YW55ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJlUGFuZWxEaXNwbGF5KClcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lci5jb21tYW5kTWFuYWdlciA9IHRydWU7XG4gICAgICAgIGF0b20uY29tbWFuZHMuYWRkKCdhdG9tLXdvcmtzcGFjZScsICdjb21tYW5kLXBhbGV0dGU6dG9nZ2xlJywgbGlzdGVuZXIpO1xuXG4gICAgICAgIC8vLy9hbmQgbm93IHN3YXBwaW5nIHRob3NlIGxpc3RlbmVycywgc28gb3VyIG9uZSBpcyBjYWxsZWQgZmlyc3RcbiAgICAgICAgLy92YXIgbGlzdGVuZXJzQXJyYXkgPSAoPGFueT5hdG9tLmNvbW1hbmRzLnNlbGVjdG9yQmFzZWRMaXN0ZW5lcnNCeUNvbW1hbmROYW1lKVxuICAgICAgICAvLyAgICBbXCJjb21tYW5kLXBhbGV0dGU6dG9nZ2xlXCJdXG4gICAgICAgIC8vbGlzdGVuZXJzQXJyYXkuc3BsaWNlKDAsMCxsaXN0ZW5lcnNBcnJheVsxXSlcbiAgICAgICAgLy9saXN0ZW5lcnNBcnJheS5zcGxpY2UoMSwgMSlcblxuICAgICAgICB2YXIgbGlzdGVuZXJzQXJyYXkgPSAoPGFueT5hdG9tLmNvbW1hbmRzLnNlbGVjdG9yQmFzZWRMaXN0ZW5lcnNCeUNvbW1hbmROYW1lKVxuICAgICAgICAgICAgW1wiY29tbWFuZC1wYWxldHRlOnRvZ2dsZVwiXVxuICAgICAgICBsaXN0ZW5lcnNBcnJheS5mb3JFYWNoKGxpc3RlbmVyID0+IHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGxpc3RlbmVyLmNhbGxiYWNrIHx8IGxpc3RlbmVyLmRpZERpc3BhdGNoO1xuXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2suY29tbWFuZE1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5zZXF1ZW5jZU51bWJlciA9IDEwMDUwMDAwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0gY2F0Y2ggKEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoRXJyb3IubWVzc2FnZSlcbiAgICB9XG59XG52YXIgY29udHJpYnV0b3JzIDoge1tpZDpzdHJpbmddIDogSUNvbW1hbmRDb250cmlidXRvcn0gPSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb250cmlidXRvcihjb250cmlidXRvciA6IElDb21tYW5kQ29udHJpYnV0b3IpIHtcbiAgICBjb250cmlidXRvcnNbY29udHJpYnV0b3IuaWRdID0gY29udHJpYnV0b3I7XG59XG5cbmZ1bmN0aW9uIHByZVBhbmVsRGlzcGxheSgpIHtcbiAgICBkZWxldGVDb21tYW5kc0J5VGFnKERZTkFNSUNfQ09NTUFORF9UQUcpXG5cbiAgICBmb3IgKHZhciBjb250cmlidXRvcklkIGluIGNvbnRyaWJ1dG9ycykge1xuXG4gICAgICAgIHZhciBjb250cmlidXRvciA9IGNvbnRyaWJ1dG9yc1tjb250cmlidXRvcklkXTtcbiAgICAgICAgaWYgKGNvbnRyaWJ1dG9yLmNhbGN1bGF0aW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgY29udHJpYnV0b3IuY2FsY3VsYXRpb25TdGFydGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBjb250cmlidXRvcklkIGluIGNvbnRyaWJ1dG9ycykge1xuXG4gICAgICAgIHZhciBjb250cmlidXRvciA6IElDb21tYW5kQ29udHJpYnV0b3IgPSBjb250cmlidXRvcnNbY29udHJpYnV0b3JJZF07XG4gICAgICAgIGNvbnRyaWJ1dG9yLmNhbGN1bGF0ZUl0ZW1zKCkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGFkZENvbW1hbmQoaXRlbS5zZWxlY3RvciwgXCJhcGktd29ya2JlbmNoOlwiK2l0ZW0uaWQsIGl0ZW0uY2FsbEJhY2ssIERZTkFNSUNfQ09NTUFORF9UQUcpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGNvbnRyaWJ1dG9ySWQgaW4gY29udHJpYnV0b3JzKSB7XG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yID0gY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9ySWRdO1xuICAgICAgICBpZiAoY29udHJpYnV0b3IuY2FsY3VsYXRpb25GaW5pc2hlZCkge1xuICAgICAgICAgICAgY29udHJpYnV0b3IuY2FsY3VsYXRpb25GaW5pc2hlZCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../../../typings/main.d.ts\" />\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar _ = __webpack_require__(10);\n\tvar commandManager = __webpack_require__(28);\n\tvar contextMenuImpl = __webpack_require__(30);\n\tvar originalShowForEvent;\n\t/**\n\t * Must be called first, at startup, before the module is used.\n\t */\n\tfunction initialize() {\n\t    if (initialized) {\n\t        return;\n\t    }\n\t    initialized = true;\n\t    originalShowForEvent = atom.contextMenu.constructor.prototype.showForEvent;\n\t    atom.contextMenu.constructor.prototype.showForEvent = function (event) {\n\t        preMenuDisplay().then(function () {\n\t            originalShowForEvent.apply(atom.contextMenu, [event]);\n\t            postMenuDisplay();\n\t        });\n\t    };\n\t}\n\texports.initialize = initialize;\n\tvar initialized = false;\n\tfunction preMenuDisplay() {\n\t    try {\n\t        return contextMenuImpl.calculateMenuItemsTree().then(function (treeRoots) {\n\t            var nodeSets = {};\n\t            cleanExistingSets();\n\t            commandManager.deleteCommandsByTag(commandManager.DYNAMIC_COMMAND_TAG);\n\t            treeRoots.forEach(function (node) {\n\t                var itemSet = nodeSets[node.selector];\n\t                if (!itemSet) {\n\t                    itemSet = findOrCreateItemSet(node.selector);\n\t                    nodeSets[node.selector] = itemSet;\n\t                }\n\t                var menuItem = constructAtomMenuItem(node);\n\t                itemSet.items.push(menuItem);\n\t            });\n\t        });\n\t    }\n\t    catch (Error) {\n\t        console.log(Error.message);\n\t    }\n\t}\n\tfunction constructAtomMenuItem(node) {\n\t    var result = {\n\t        label: node.name,\n\t    };\n\t    if (node.children.length > 0) {\n\t        result.submenu = [];\n\t    }\n\t    else {\n\t        var commandName = \"api-workbench:\" + node.name;\n\t        var existingCommands = commandManager.listCommands();\n\t        commandManager.addCommand(node.selector, commandName, node.onClick, commandManager.DYNAMIC_COMMAND_TAG);\n\t        result.command = commandName;\n\t    }\n\t    node.children.forEach(function (child) {\n\t        var childMenuItem = constructAtomMenuItem(child);\n\t        result.submenu.push(childMenuItem);\n\t    });\n\t    return result;\n\t}\n\tvar DYNAMIC_SET_TAG = \"DYNAMIC_SET_TAG\";\n\t/**\n\t * Selector that were used at least once in the context menu\n\t * @type {Array}\n\t */\n\tvar usedSelectors = [];\n\tfunction findOrCreateItemSet(selector) {\n\t    var existingSet = _.find(atom.contextMenu.itemSets, function (currentSet) {\n\t        return currentSet.tag && currentSet.tag == DYNAMIC_SET_TAG;\n\t    });\n\t    if (!existingSet) {\n\t        existingSet = {\n\t            items: [],\n\t            selector: selector,\n\t            specificity: 11,\n\t            tag: DYNAMIC_SET_TAG\n\t        };\n\t        atom.contextMenu.itemSets.push(existingSet);\n\t        //saving used selector name\n\t        if (!_.find(usedSelectors, function (name) { return name == selector; })) {\n\t            usedSelectors.push(selector);\n\t        }\n\t    }\n\t    return existingSet;\n\t}\n\tfunction cleanExistingSets() {\n\t    var existingSets = _.filter(atom.contextMenu.itemSets, function (currentSet) {\n\t        return currentSet.tag && currentSet.tag == DYNAMIC_SET_TAG;\n\t    });\n\t    existingSets.forEach(function (existingSet) {\n\t        existingSet.items = [];\n\t    });\n\t}\n\tfunction postMenuDisplay() {\n\t    //commandManager.deleteCommandsByTag(commandManager.DYNAMIC_COMMAND_TAG)\n\t}\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9jb250ZXh0TWVudS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbURBQW1EOztBQUVuRCw4QkFBZ0M7QUFDaEMsa0VBQW9FO0FBRXBFLG1EQUFxRDtBQUVyRCxJQUFJLG9CQUF1RCxDQUFBO0FBRTNEOztHQUVHO0FBQ0g7SUFDSSxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2QsTUFBTSxDQUFDO0lBQ1gsQ0FBQztJQUVELFdBQVcsR0FBRyxJQUFJLENBQUM7SUFHbkIsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQTtJQUcxRSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLFVBQUMsS0FBVztRQUM5RCxjQUFjLEVBQUUsQ0FBQyxJQUFJLENBQUM7WUFDbEIsb0JBQW9CLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBRXRELGVBQWUsRUFBRSxDQUFBO1FBQ3JCLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQWxCRCxnQ0FrQkM7QUFFRCxJQUFJLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFFeEI7SUFDSSxJQUFJLENBQUM7UUFDRCxNQUFNLENBQUMsZUFBZSxDQUFDLHNCQUFzQixFQUFFLENBQUMsSUFBSSxDQUNoRCxVQUFDLFNBQWtEO1lBRW5ELElBQUksUUFBUSxHQUErQyxFQUFFLENBQUE7WUFFN0QsaUJBQWlCLEVBQUUsQ0FBQztZQUNwQixjQUFjLENBQUMsbUJBQW1CLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLENBQUE7WUFFdEUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7Z0JBQ2xCLElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFD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LFdBQVcsQ0FBQTtBQUN0QixDQUFDO0FBRUQ7SUFDSSxJQUFJLFlBQVksR0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLFVBQUEsVUFBVTtRQUU5RCxNQUFNLENBQWtCLFVBQVcsQ0FBQyxHQUFHLElBQXFCLFVBQVcsQ0FBQyxHQUFHLElBQUksZUFBZSxDQUFDO0lBQ25HLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBWSxDQUFDLE9BQU8sQ0FBQyxVQUFBLFdBQVc7UUFDNUIsV0FBVyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUE7SUFDMUIsQ0FBQyxDQUFDLENBQUE7QUFDTixDQUFDO0FBRUQ7SUFDSSx3RUFBd0U7QUFDNUUsQ0FBQyIsImZpbGUiOiJzcmMvYXRvbS9jb250ZXh0LW1lbnUvY29udGV4dE1lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgXyA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgY29tbWFuZE1hbmFnZXIgPSByZXF1aXJlKFwiLi4vcXVpY2stY29tbWFuZHMvY29tbWFuZC1tYW5hZ2VyXCIpXG5pbXBvcnQgY29udGV4dE1lbnVJbnRlcmZhY2VzID0gcmVxdWlyZShcIi4vY29udGV4dE1lbnVJbnRlcmZhY2VzXCIpXG5pbXBvcnQgY29udGV4dE1lbnVJbXBsID0gcmVxdWlyZShcIi4vY29udGV4dE1lbnVJbXBsXCIpXG5cbnZhciBvcmlnaW5hbFNob3dGb3JFdmVudCA6IChvYmplY3QgOiBhbnksIGFyZ3MgOiBhbnkpPT52b2lkXG5cbi8qKlxuICogTXVzdCBiZSBjYWxsZWQgZmlyc3QsIGF0IHN0YXJ0dXAsIGJlZm9yZSB0aGUgbW9kdWxlIGlzIHVzZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgIGlmIChpbml0aWFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG5cbiAgICBvcmlnaW5hbFNob3dGb3JFdmVudCA9IGF0b20uY29udGV4dE1lbnUuY29uc3RydWN0b3IucHJvdG90eXBlLnNob3dGb3JFdmVudFxuXG5cbiAgICBhdG9tLmNvbnRleHRNZW51LmNvbnN0cnVjdG9yLnByb3RvdHlwZS5zaG93Rm9yRXZlbnQgPSAoZXZlbnQgOiBhbnkpID0+IHtcbiAgICAgICAgcHJlTWVudURpc3BsYXkoKS50aGVuKCgpPT57XG4gICAgICAgICAgICBvcmlnaW5hbFNob3dGb3JFdmVudC5hcHBseShhdG9tLmNvbnRleHRNZW51LCBbZXZlbnRdKTtcblxuICAgICAgICAgICAgcG9zdE1lbnVEaXNwbGF5KClcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbnZhciBpbml0aWFsaXplZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBwcmVNZW51RGlzcGxheSgpIDogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRNZW51SW1wbC5jYWxjdWxhdGVNZW51SXRlbXNUcmVlKCkudGhlbihcbiAgICAgICAgICAgICh0cmVlUm9vdHM6Y29udGV4dE1lbnVJbnRlcmZhY2VzLklDb250ZXh0TWVudUl0ZW1bXSk9PntcblxuICAgICAgICAgICAgdmFyIG5vZGVTZXRzOntbczpzdHJpbmddIDogQXRvbUNvcmUuSUNvbnRleHRNZW51SXRlbVNldH0gPSB7fVxuXG4gICAgICAgICAgICBjbGVhbkV4aXN0aW5nU2V0cygpO1xuICAgICAgICAgICAgY29tbWFuZE1hbmFnZXIuZGVsZXRlQ29tbWFuZHNCeVRhZyhjb21tYW5kTWFuYWdlci5EWU5BTUlDX0NPTU1BTkRfVEFHKVxuXG4gICAgICAgICAgICB0cmVlUm9vdHMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbVNldCA9IG5vZGVTZXRzW25vZGUuc2VsZWN0b3JdXG5cbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW1TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNldCA9IGZpbmRPckNyZWF0ZUl0ZW1TZXQobm9kZS5zZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVTZXRzW25vZGUuc2VsZWN0b3JdID0gaXRlbVNldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbWVudUl0ZW0gPSBjb25zdHJ1Y3RBdG9tTWVudUl0ZW0obm9kZSlcblxuICAgICAgICAgICAgICAgIGl0ZW1TZXQuaXRlbXMucHVzaChtZW51SXRlbSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cblxuICAgIH0gY2F0Y2ggKEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKEVycm9yLm1lc3NhZ2UpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RBdG9tTWVudUl0ZW0obm9kZSA6IGNvbnRleHRNZW51SW50ZXJmYWNlcy5JQ29udGV4dE1lbnVJdGVtKSA6IEF0b21Db3JlLklDb250ZXh0TWVudUl0ZW0ge1xuICAgIHZhciByZXN1bHQgOiBBdG9tQ29yZS5JQ29udGV4dE1lbnVJdGVtID0ge1xuICAgICAgICBsYWJlbCA6IG5vZGUubmFtZSxcbiAgICB9XG5cbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdC5zdWJtZW51ID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY29tbWFuZE5hbWUgPSBcImFwaS13b3JrYmVuY2g6XCIrbm9kZS5uYW1lXG4gICAgICAgIHZhciBleGlzdGluZ0NvbW1hbmRzID0gY29tbWFuZE1hbmFnZXIubGlzdENvbW1hbmRzKClcbiAgICAgICAgY29tbWFuZE1hbmFnZXIuYWRkQ29tbWFuZChub2RlLnNlbGVjdG9yLCBjb21tYW5kTmFtZSwgbm9kZS5vbkNsaWNrLFxuICAgICAgICAgICAgY29tbWFuZE1hbmFnZXIuRFlOQU1JQ19DT01NQU5EX1RBRylcbiAgICAgICAgcmVzdWx0LmNvbW1hbmQgPSBjb21tYW5kTmFtZVxuICAgIH1cblxuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIHZhciBjaGlsZE1lbnVJdGVtID0gY29uc3RydWN0QXRvbU1lbnVJdGVtKGNoaWxkKVxuICAgICAgICByZXN1bHQuc3VibWVudS5wdXNoKGNoaWxkTWVudUl0ZW0pXG4gICAgfSlcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmludGVyZmFjZSBJVGFnZ2VkSXRlbVNldCBleHRlbmRzIEF0b21Db3JlLklDb250ZXh0TWVudUl0ZW1TZXQge1xuICAgIHRhZz8gOiBzdHJpbmdcbn1cblxudmFyIERZTkFNSUNfU0VUX1RBRyA9IFwiRFlOQU1JQ19TRVRfVEFHXCJcblxuLyoqXG4gKiBTZWxlY3RvciB0aGF0IHdlcmUgdXNlZCBhdCBsZWFzdCBvbmNlIGluIHRoZSBjb250ZXh0IG1lbnVcbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xudmFyIHVzZWRTZWxlY3RvcnMgOiBzdHJpbmdbXSA9IFtdXG5cbmZ1bmN0aW9uIGZpbmRPckNyZWF0ZUl0ZW1TZXQoc2VsZWN0b3IgOiBzdHJpbmcpIDogQXRvbUNvcmUuSUNvbnRleHRNZW51SXRlbVNldHtcbiAgICB2YXIgZXhpc3RpbmdTZXQgPSAgXy5maW5kKGF0b20uY29udGV4dE1lbnUuaXRlbVNldHMsIGN1cnJlbnRTZXQ9PntcblxuICAgICAgcmV0dXJuICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnICYmICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnID09IERZTkFNSUNfU0VUX1RBRztcbiAgICB9KVxuXG4gICAgaWYgKCFleGlzdGluZ1NldCkge1xuICAgICAgICBleGlzdGluZ1NldCA9IDxhbnk+e1xuICAgICAgICAgICAgaXRlbXMgOiBbXSxcbiAgICAgICAgICAgIHNlbGVjdG9yIDogc2VsZWN0b3IsXG4gICAgICAgICAgICBzcGVjaWZpY2l0eSA6IDExLFxuICAgICAgICAgICAgdGFnOiBEWU5BTUlDX1NFVF9UQUdcbiAgICAgICAgfVxuXG4gICAgICAgIGF0b20uY29udGV4dE1lbnUuaXRlbVNldHMucHVzaChleGlzdGluZ1NldClcblxuICAgICAgICAvL3NhdmluZyB1c2VkIHNlbGVjdG9yIG5hbWVcbiAgICAgICAgaWYoIV8uZmluZCh1c2VkU2VsZWN0b3JzLCBuYW1lPT57cmV0dXJuIG5hbWUgPT0gc2VsZWN0b3J9KSl7XG4gICAgICAgICAgICB1c2VkU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXhpc3RpbmdTZXRcbn1cblxuZnVuY3Rpb24gY2xlYW5FeGlzdGluZ1NldHMoKSB7XG4gICAgdmFyIGV4aXN0aW5nU2V0cyA9ICBfLmZpbHRlcihhdG9tLmNvbnRleHRNZW51Lml0ZW1TZXRzLCBjdXJyZW50U2V0PT57XG5cbiAgICAgICAgcmV0dXJuICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnICYmICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnID09IERZTkFNSUNfU0VUX1RBRztcbiAgICB9KVxuXG4gICAgZXhpc3RpbmdTZXRzLmZvckVhY2goZXhpc3RpbmdTZXQ9PntcbiAgICAgICAgZXhpc3RpbmdTZXQuaXRlbXMgPSBbXVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHBvc3RNZW51RGlzcGxheSgpIHtcbiAgICAvL2NvbW1hbmRNYW5hZ2VyLmRlbGV0ZUNvbW1hbmRzQnlUYWcoY29tbWFuZE1hbmFnZXIuRFlOQU1JQ19DT01NQU5EX1RBRylcbn1cblxuIl19\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar _ = __webpack_require__(10);\n\tvar ramlServer = __webpack_require__(17);\n\tvar editorTools = __webpack_require__(1);\n\tvar uilibsModule = __webpack_require__(5);\n\tvar fs = __webpack_require__(12);\n\tvar mkdirp = __webpack_require__(31);\n\tvar pathModule = __webpack_require__(2);\n\tvar actionUIManager = __webpack_require__(32);\n\tvar uiBuilder = __webpack_require__(9);\n\tvar contributors = {};\n\t/**\n\t * Adds new contributor to the list. All contributors are asked for the menu items\n\t * before the menu is displayed.\n\t * @param contributor\n\t */\n\tfunction registerContributor(contributor) {\n\t    contributors[contributor.id] = contributor;\n\t}\n\texports.registerContributor = registerContributor;\n\t/**\n\t * Generally it is recommended to use contributor-based architecture instead.\n\t * This method allows adding a single menu item manually, if needed.\n\t * @param name\n\t * @param onClick\n\t * @param categories\n\t * @param shouldDisplay\n\t */\n\tfunction addMenuItem(name, onClick, categories, shouldDisplay) {\n\t}\n\texports.addMenuItem = addMenuItem;\n\t/**\n\t * Generally it is recommended to use contributor-based architecture instead.\n\t * Deletes all menu items with a given selector. Should almost never be called.\n\t * Can not delete contributor-based menu items.\n\t * @param selector\n\t */\n\tfunction deleteMenuItems(selector) {\n\t    //TODO implement\n\t}\n\texports.deleteMenuItems = deleteMenuItems;\n\t/**\n\t * Generally it is recommended to use contributor-based architecture instead.\n\t * Deletes menu item by its selector, name, and optionally categories.\n\t * Can not delete contributor-based menu items.\n\t * @param selector\n\t * @param name\n\t * @param categories\n\t */\n\tfunction deleteMenuItem(selector, name, categories) {\n\t    //TODO implement\n\t}\n\texports.deleteMenuItem = deleteMenuItem;\n\tvar ContextMenuItemNode = /** @class */ (function () {\n\t    function ContextMenuItemNode(menuItem, nameOverride) {\n\t        this.selector = menuItem.selector;\n\t        if (nameOverride) {\n\t            this.name = nameOverride;\n\t        }\n\t        else {\n\t            this.name = menuItem.name;\n\t        }\n\t        this.categories = menuItem.categories;\n\t        this.onClick = menuItem.onClick;\n\t        this.children = [];\n\t    }\n\t    return ContextMenuItemNode;\n\t}());\n\t/**\n\t * Calculates current menu items tree.\n\t * @returns {IContextMenuItemNode[]}\n\t */\n\tfunction calculateMenuItemsTree() {\n\t    for (var contributorId in contributors) {\n\t        var contributor = contributors[contributorId];\n\t        if (contributor.calculationStarted) {\n\t            contributor.calculationStarted();\n\t        }\n\t    }\n\t    var contributorPromises = [];\n\t    for (var contributorId in contributors) {\n\t        var contributor = contributors[contributorId];\n\t        contributorPromises.push(contributor.calculateItems());\n\t    }\n\t    return Promise.all(contributorPromises).then(function (contributorItems) {\n\t        var result = [];\n\t        contributorItems.forEach(function (items) {\n\t            items.forEach(function (item) {\n\t                addItemsTreeNode(result, item);\n\t            });\n\t        });\n\t        for (var contributorId in contributors) {\n\t            var contributor = contributors[contributorId];\n\t            if (contributor.calculationFinished) {\n\t                contributor.calculationFinished();\n\t            }\n\t        }\n\t        return result;\n\t    });\n\t}\n\texports.calculateMenuItemsTree = calculateMenuItemsTree;\n\tfunction addItemsTreeNode(roots, item) {\n\t    var currentList = roots;\n\t    if (item.categories) {\n\t        for (var catIndex in item.categories) {\n\t            var currentSegment = item.categories[catIndex];\n\t            var existingNode = _.find(currentList, function (node) {\n\t                return node.name == currentSegment;\n\t            });\n\t            if (!existingNode) {\n\t                existingNode = new ContextMenuItemNode(item, currentSegment);\n\t                currentList.push(existingNode);\n\t            }\n\t            if (!existingNode.children) {\n\t                currentList = [];\n\t                existingNode.children = currentList;\n\t            }\n\t            else {\n\t                currentList = existingNode.children;\n\t            }\n\t        }\n\t    }\n\t    var leafNode = _.find(currentList, function (node) {\n\t        return node.name == item.name;\n\t    });\n\t    if (leafNode) {\n\t        var index = currentList.indexOf(leafNode, 0);\n\t        if (index != undefined) {\n\t            currentList.splice(index, 1);\n\t        }\n\t    }\n\t    leafNode = new ContextMenuItemNode(item);\n\t    currentList.push(leafNode);\n\t}\n\tvar actionBasedMenuInitialized = false;\n\tfunction onClickHandler(path, action, position) {\n\t    ramlServer.getNodeClientConnection().executeContextAction(path, action, position).then(function (changes) {\n\t        var editorManager = editorTools.aquireManager();\n\t        if (!editorManager)\n\t            return Promise.resolve([]);\n\t        var path = editorManager.getPath();\n\t        var _loop_1 = function (change) {\n\t            if (change.uri == path && change.text != null) {\n\t                editorManager.getCurrentEditor().getBuffer().setText(change.text);\n\t                ramlServer.getNodeClientConnection().documentChanged({\n\t                    uri: path,\n\t                    text: change.text\n\t                });\n\t            }\n\t            else if (change.text != null) {\n\t                var editorFound_1 = false;\n\t                atom.workspace.getTextEditors().forEach(function (currentEditor) {\n\t                    if (currentEditor.getPath && currentEditor.getPath() == change.uri) {\n\t                        currentEditor.getBuffer().setText(change.text);\n\t                        editorFound_1 = true;\n\t                    }\n\t                });\n\t                if (!editorFound_1) {\n\t                    mkdirp.sync(pathModule.dirname(change.uri));\n\t                    fs.writeFileSync(change.uri, change.text);\n\t                }\n\t            }\n\t        };\n\t        //TODO handle all cases\n\t        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n\t            var change = changes_1[_i];\n\t            _loop_1(change);\n\t        }\n\t    });\n\t}\n\t/**\n\t * Initializes and registers standard context menu contributor, based on currently available context actions.\n\t * @param selector - CSS selector, can be null if not used in the display.\n\t */\n\tfunction initializeActionBasedMenu(selector) {\n\t    var editorContextMenuContributor = {\n\t        id: \"editorContextActionContributor\",\n\t        calculateItems: function () {\n\t            var editorManager = editorTools.aquireManager();\n\t            if (!editorManager)\n\t                return Promise.resolve([]);\n\t            var path = editorManager.getPath();\n\t            if (!path)\n\t                return Promise.resolve([]);\n\t            var position = editorManager.getCurrentPosition();\n\t            return ramlServer.getNodeClientConnection()\n\t                .calculateEditorContextActions(path, position).then(function (currentActions) {\n\t                var result = [];\n\t                currentActions.forEach(function (action) {\n\t                    // if (action.hasUI) {\n\t                    //     return;\n\t                    // }\n\t                    result.push({\n\t                        selector: selector,\n\t                        name: action.label ? action.label : action.name,\n\t                        categories: action.category,\n\t                        onClick: function () {\n\t                            onClickHandler(path, action, position);\n\t                        },\n\t                        children: []\n\t                    });\n\t                });\n\t                return result;\n\t            });\n\t        }\n\t    };\n\t    registerContributor(editorContextMenuContributor);\n\t    handleActionUI();\n\t    configureServerActions();\n\t    actionBasedMenuInitialized = true;\n\t}\n\texports.initializeActionBasedMenu = initializeActionBasedMenu;\n\tfunction handleActionUI() {\n\t    ramlServer.getNodeClientConnection().onDisplayActionUI(function (uiDisplayRequest) {\n\t        ramlServer.getNodeClientConnection().debug(\"Got UI display request\", \"contextActions\", \"contextMenuImpl#handleActionUI\");\n\t        var actionUI = actionUIManager.getUICode(uiDisplayRequest.action.id);\n\t        if (!actionUI) {\n\t            ramlServer.getNodeClientConnection().error(\"Can not find UI for action \" +\n\t                uiDisplayRequest.action.id, \"contextActions\", \"handleActionUI\");\n\t            return Promise.resolve({});\n\t        }\n\t        global.IDE = atom;\n\t        global.UI = uilibsModule;\n\t        global.UIBuilder = uiBuilder;\n\t        return actionUI.run(uiDisplayRequest.initialUIState).then(function (result) {\n\t            ramlServer.getNodeClientConnection().debugDetail(\"Client: got result on dialog finish\", \"contextActions\", \"handleActionUI\");\n\t            return result;\n\t        });\n\t    });\n\t}\n\tfunction configureServerActions() {\n\t    ramlServer.getNodeClientConnection().setServerConfiguration({\n\t        actionsConfiguration: {\n\t            enableUIActions: true\n\t        }\n\t    });\n\t}\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9jb250ZXh0TWVudUltcGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw4QkFBZ0M7QUFFaEMsaURBQW1EO0FBRW5ELDBEQUE0RDtBQUU1RCwwQ0FBNEM7QUFDNUMsdUJBQXlCO0FBQ3pCLCtCQUFpQztBQUNqQyxpQ0FBbUM7QUFDbkMsbURBQXFEO0FBQ3JELDBEQUE0RDtBQUU1RCxJQUFJLFlBQVksR0FBMEQsRUFBRSxDQUFDO0FBRTdFOzs7O0dBSUc7QUFDSCw2QkFBb0MsV0FBaUQ7SUFDakYsWUFBWSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUM7QUFDL0MsQ0FBQztBQUZELGtEQUVDO0FBRUQ7Ozs7Ozs7R0FPRztBQUNILHFCQUE0QixJQUFhLEVBQ2IsT0FBcUQsRUFDckQsVUFBc0IsRUFBRSxhQUE0QjtBQUVoRixDQUFDO0FBSkQsa0NBSUM7QUFFRDs7Ozs7R0FLRztBQUNILHlCQUFnQyxRQUFpQjtJQUM3QyxnQkFBZ0I7QUFDcEIsQ0FBQztBQUZELDBDQUVDO0FBRUQ7Ozs7Ozs7R0FPRztBQUNILHdCQUErQixRQUFpQixFQUFFLElBQWEsRUFBRSxVQUFzQjtJQUNuRixnQkFBZ0I7QUFDcEIsQ0FBQztBQUZELHdDQUVDO0FBRUQ7SUFZSSw2QkFBWSxRQUF1QyxFQUFFLFlBQXNCO1FBQ3ZFLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQTtRQUVqQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQSxDQUFDO1lBQ2QsSUFBSSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUE7UUFDNUIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFBO1FBQzdCLENBQUM7UUFFRCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUE7UUFDckMsSUFBSSxDQUFDLE9BQU8s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Q0FBQyxDQUFDLElBQUksQ0FBQyxVQUFDLE1BQU07WUFFN0QsVUFBVSxDQUFDLHVCQUF1QixFQUFFLENBQUMsV0FBVyxDQUFDLHFDQUFxQyxFQUNsRixnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO1lBRXZDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDbEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUM7QUFFRDtJQUNJLFVBQVUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLHNCQUFzQixDQUFDO1FBQ3hELG9CQUFvQixFQUFFO1lBQ2xCLGVBQWUsRUFBRSxJQUFJO1NBQ3hCO0tBQ0osQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsImZpbGUiOiJzcmMvYXRvbS9jb250ZXh0LW1lbnUvY29udGV4dE1lbnVJbXBsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gPSByZXF1aXJlKFwidW5kZXJzY29yZVwiKVxuXG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKVxuaW1wb3J0IGNvbnRleHRNZW51ID0gcmVxdWlyZShcIi4vY29udGV4dE1lbnVJbnRlcmZhY2VzXCIpXG5pbXBvcnQgZWRpdG9yVG9vbHMgPSByZXF1aXJlKFwiLi4vZWRpdG9yLXRvb2xzL2VkaXRvci10b29sc1wiKVxuXG5pbXBvcnQgdWlsaWJzTW9kdWxlID0gcmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgZnMgPSByZXF1aXJlKFwiZnNcIilcbmltcG9ydCBta2RpcnAgPSByZXF1aXJlKFwibWtkaXJwXCIpXG5pbXBvcnQgcGF0aE1vZHVsZSA9IHJlcXVpcmUoXCJwYXRoXCIpXG5pbXBvcnQgYWN0aW9uVUlNYW5hZ2VyID0gcmVxdWlyZShcIi4vYWN0aW9uVUlNYW5hZ2VyXCIpXG5pbXBvcnQgdWlCdWlsZGVyID0gcmVxdWlyZShcIi4uL2VkaXRvci10b29scy9kZXRhaWxFbGVtZW50c1wiKVxuXG52YXIgY29udHJpYnV0b3JzOiB7IFtzOiBzdHJpbmddOiBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVDb250cmlidXRvcjsgfSA9IHt9O1xuXG4vKipcbiAqIEFkZHMgbmV3IGNvbnRyaWJ1dG9yIHRvIHRoZSBsaXN0LiBBbGwgY29udHJpYnV0b3JzIGFyZSBhc2tlZCBmb3IgdGhlIG1lbnUgaXRlbXNcbiAqIGJlZm9yZSB0aGUgbWVudSBpcyBkaXNwbGF5ZWQuXG4gKiBAcGFyYW0gY29udHJpYnV0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29udHJpYnV0b3IoY29udHJpYnV0b3IgOiBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVDb250cmlidXRvcikge1xuICAgIGNvbnRyaWJ1dG9yc1tjb250cmlidXRvci5pZF0gPSBjb250cmlidXRvcjtcbn1cblxuLyoqXG4gKiBHZW5lcmFsbHkgaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIGNvbnRyaWJ1dG9yLWJhc2VkIGFyY2hpdGVjdHVyZSBpbnN0ZWFkLlxuICogVGhpcyBtZXRob2QgYWxsb3dzIGFkZGluZyBhIHNpbmdsZSBtZW51IGl0ZW0gbWFudWFsbHksIGlmIG5lZWRlZC5cbiAqIEBwYXJhbSBuYW1lXG4gKiBAcGFyYW0gb25DbGlja1xuICogQHBhcmFtIGNhdGVnb3JpZXNcbiAqIEBwYXJhbSBzaG91bGREaXNwbGF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRNZW51SXRlbShuYW1lIDogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChpdGVtPyA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUl0ZW0pPT52b2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM/IDogc3RyaW5nW10sIHNob3VsZERpc3BsYXk/IDogKCk9PmJvb2xlYW4pIHtcblxufVxuXG4vKipcbiAqIEdlbmVyYWxseSBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgY29udHJpYnV0b3ItYmFzZWQgYXJjaGl0ZWN0dXJlIGluc3RlYWQuXG4gKiBEZWxldGVzIGFsbCBtZW51IGl0ZW1zIHdpdGggYSBnaXZlbiBzZWxlY3Rvci4gU2hvdWxkIGFsbW9zdCBuZXZlciBiZSBjYWxsZWQuXG4gKiBDYW4gbm90IGRlbGV0ZSBjb250cmlidXRvci1iYXNlZCBtZW51IGl0ZW1zLlxuICogQHBhcmFtIHNlbGVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVNZW51SXRlbXMoc2VsZWN0b3IgOiBzdHJpbmcpIHtcbiAgICAvL1RPRE8gaW1wbGVtZW50XG59XG5cbi8qKlxuICogR2VuZXJhbGx5IGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBjb250cmlidXRvci1iYXNlZCBhcmNoaXRlY3R1cmUgaW5zdGVhZC5cbiAqIERlbGV0ZXMgbWVudSBpdGVtIGJ5IGl0cyBzZWxlY3RvciwgbmFtZSwgYW5kIG9wdGlvbmFsbHkgY2F0ZWdvcmllcy5cbiAqIENhbiBub3QgZGVsZXRlIGNvbnRyaWJ1dG9yLWJhc2VkIG1lbnUgaXRlbXMuXG4gKiBAcGFyYW0gc2VsZWN0b3JcbiAqIEBwYXJhbSBuYW1lXG4gKiBAcGFyYW0gY2F0ZWdvcmllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlTWVudUl0ZW0oc2VsZWN0b3IgOiBzdHJpbmcsIG5hbWUgOiBzdHJpbmcsIGNhdGVnb3JpZXM/IDogc3RyaW5nW10pIHtcbiAgICAvL1RPRE8gaW1wbGVtZW50XG59XG5cbmNsYXNzIENvbnRleHRNZW51SXRlbU5vZGUgaW1wbGVtZW50cyBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtIHtcblxuICAgIHNlbGVjdG9yIDogc3RyaW5nXG5cbiAgICBuYW1lIDogc3RyaW5nXG5cbiAgICBjYXRlZ29yaWVzIDogc3RyaW5nW11cblxuICAgIG9uQ2xpY2s6IChpdGVtPyA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUl0ZW0pPT52b2lkXG5cbiAgICBjaGlsZHJlbiA6IENvbnRleHRNZW51SXRlbU5vZGVbXVxuXG4gICAgY29uc3RydWN0b3IobWVudUl0ZW0gOiBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtLCBuYW1lT3ZlcnJpZGU/IDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBtZW51SXRlbS5zZWxlY3RvclxuXG4gICAgICAgIGlmIChuYW1lT3ZlcnJpZGUpe1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZU92ZXJyaWRlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBtZW51SXRlbS5uYW1lXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSBtZW51SXRlbS5jYXRlZ29yaWVzXG4gICAgICAgIHRoaXMub25DbGljayA9IG1lbnVJdGVtLm9uQ2xpY2tcblxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW11cbiAgICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyBjdXJyZW50IG1lbnUgaXRlbXMgdHJlZS5cbiAqIEByZXR1cm5zIHtJQ29udGV4dE1lbnVJdGVtTm9kZVtdfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTWVudUl0ZW1zVHJlZSgpIDogUHJvbWlzZTxjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtW10+IHtcblxuICAgIGZvciAodmFyIGNvbnRyaWJ1dG9ySWQgaW4gY29udHJpYnV0b3JzKSB7XG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yID0gY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9ySWRdO1xuICAgICAgICBpZiAoY29udHJpYnV0b3IuY2FsY3VsYXRpb25TdGFydGVkKSB7XG4gICAgICAgICAgICBjb250cmlidXRvci5jYWxjdWxhdGlvblN0YXJ0ZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBjb250cmlidXRvclByb21pc2VzIDogUHJvbWlzZTxjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtW10+W10gPSBbXTtcbiAgICBmb3IgKHZhciBjb250cmlidXRvcklkIGluIGNvbnRyaWJ1dG9ycykge1xuXG4gICAgICAgIHZhciBjb250cmlidXRvciA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUNvbnRyaWJ1dG9yID0gY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9ySWRdO1xuICAgICAgICBjb250cmlidXRvclByb21pc2VzLnB1c2goY29udHJpYnV0b3IuY2FsY3VsYXRlSXRlbXMoKSlcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoY29udHJpYnV0b3JQcm9taXNlcykudGhlbigoY29udHJpYnV0b3JJdGVtczogY29udGV4dE1lbnUuSUNvbnRleHRNZW51SXRlbVtdW10pPT57XG5cbiAgICAgICAgdmFyIHJlc3VsdCA6IENvbnRleHRNZW51SXRlbU5vZGVbXSA9IFtdO1xuXG4gICAgICAgIGNvbnRyaWJ1dG9ySXRlbXMuZm9yRWFjaChpdGVtcz0+e1xuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBhZGRJdGVtc1RyZWVOb2RlKHJlc3VsdCwgaXRlbSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIGZvciAodmFyIGNvbnRyaWJ1dG9ySWQgaW4gY29udHJpYnV0b3JzKSB7XG5cbiAgICAgICAgICAgIHZhciBjb250cmlidXRvciA9IGNvbnRyaWJ1dG9yc1tjb250cmlidXRvcklkXTtcbiAgICAgICAgICAgIGlmIChjb250cmlidXRvci5jYWxjdWxhdGlvbkZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgY29udHJpYnV0b3IuY2FsY3VsYXRpb25GaW5pc2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBhZGRJdGVtc1RyZWVOb2RlKHJvb3RzIDogQ29udGV4dE1lbnVJdGVtTm9kZVtdLCBpdGVtIDogY29udGV4dE1lbnUuSUNvbnRleHRNZW51SXRlbSkge1xuXG4gICAgdmFyIGN1cnJlbnRMaXN0ID0gcm9vdHM7XG4gICAgaWYgKGl0ZW0uY2F0ZWdvcmllcykge1xuICAgICAgICBmb3IgKHZhciBjYXRJbmRleCBpbiBpdGVtLmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2VnbWVudCA9IGl0ZW0uY2F0ZWdvcmllc1tjYXRJbmRleF1cbiAgICAgICAgICAgIHZhciBleGlzdGluZ05vZGUgPSBfLmZpbmQoY3VycmVudExpc3QsIG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLm5hbWUgPT0gY3VycmVudFNlZ21lbnRcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdOb2RlKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdOb2RlID0gbmV3IENvbnRleHRNZW51SXRlbU5vZGUoaXRlbSwgY3VycmVudFNlZ21lbnQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0LnB1c2goZXhpc3RpbmdOb2RlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nTm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdOb2RlLmNoaWxkcmVuID0gY3VycmVudExpc3RcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExpc3QgPSBleGlzdGluZ05vZGUuY2hpbGRyZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsZWFmTm9kZSA9IF8uZmluZChjdXJyZW50TGlzdCwgbm9kZSA9PiB7XG4gICAgICAgIHJldHVybiBub2RlLm5hbWUgPT0gaXRlbS5uYW1lXG4gICAgfSlcblxuICAgIGlmIChsZWFmTm9kZSkge1xuICAgICAgICB2YXIgaW5kZXggPSBjdXJyZW50TGlzdC5pbmRleE9mKGxlYWZOb2RlLCAwKTtcbiAgICAgICAgaWYgKGluZGV4ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY3VycmVudExpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxlYWZOb2RlID0gbmV3IENvbnRleHRNZW51SXRlbU5vZGUoaXRlbSlcblxuICAgIGN1cnJlbnRMaXN0LnB1c2gobGVhZk5vZGUpXG59XG5cbnZhciBhY3Rpb25CYXNlZE1lbnVJbml0aWFsaXplZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBvbkNsaWNrSGFuZGxlcihwYXRoLCBhY3Rpb24sIHBvc2l0aW9uKSB7XG5cbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZXhlY3V0ZUNvbnRleHRBY3Rpb24oXG4gICAgICAgIHBhdGgsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgcG9zaXRpb25cbiAgICApLnRoZW4oY2hhbmdlcz0+e1xuICAgICAgICBsZXQgZWRpdG9yTWFuYWdlciA9IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKTtcbiAgICAgICAgaWYgKCFlZGl0b3JNYW5hZ2VyKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcblxuICAgICAgICBsZXQgcGF0aCA9IGVkaXRvck1hbmFnZXIuZ2V0UGF0aCgpO1xuXG4gICAgICAgIC8vVE9ETyBoYW5kbGUgYWxsIGNhc2VzXG4gICAgICAgIGZvciAobGV0IGNoYW5nZSBvZiBjaGFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlLnVyaSA9PSBwYXRoICYmIGNoYW5nZS50ZXh0ICE9IG51bGwpIHtcblxuICAgICAgICAgICAgICAgIGVkaXRvck1hbmFnZXIuZ2V0Q3VycmVudEVkaXRvcigpLmdldEJ1ZmZlcigpLnNldFRleHQoY2hhbmdlLnRleHQpO1xuXG4gICAgICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRvY3VtZW50Q2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgIHVyaTogcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY2hhbmdlLnRleHRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2UudGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkaXRvckZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYXRvbS53b3Jrc3BhY2UuZ2V0VGV4dEVkaXRvcnMoKS5mb3JFYWNoKChjdXJyZW50RWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWRpdG9yLmdldFBhdGggJiYgY3VycmVudEVkaXRvci5nZXRQYXRoKCkgPT0gY2hhbmdlLnVyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVkaXRvci5nZXRCdWZmZXIoKS5zZXRUZXh0KGNoYW5nZS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvckZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBpZiAoIWVkaXRvckZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG1rZGlycC5zeW5jKHBhdGhNb2R1bGUuZGlybmFtZShjaGFuZ2UudXJpKSk7XG4gICAgICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoY2hhbmdlLnVyaSwgY2hhbmdlLnRleHQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgcmVnaXN0ZXJzIHN0YW5kYXJkIGNvbnRleHQgbWVudSBjb250cmlidXRvciwgYmFzZWQgb24gY3VycmVudGx5IGF2YWlsYWJsZSBjb250ZXh0IGFjdGlvbnMuXG4gKiBAcGFyYW0gc2VsZWN0b3IgLSBDU1Mgc2VsZWN0b3IsIGNhbiBiZSBudWxsIGlmIG5vdCB1c2VkIGluIHRoZSBkaXNwbGF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUFjdGlvbkJhc2VkTWVudShzZWxlY3Rvcj8gOiBzdHJpbmcpIHtcbiAgICB2YXIgZWRpdG9yQ29udGV4dE1lbnVDb250cmlidXRvciA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUNvbnRyaWJ1dG9yID0ge1xuXG4gICAgICAgIGlkIDogXCJlZGl0b3JDb250ZXh0QWN0aW9uQ29udHJpYnV0b3JcIixcblxuXG4gICAgICAgIGNhbGN1bGF0ZUl0ZW1zIDogZnVuY3Rpb24gKCkgOiBQcm9taXNlPGNvbnRleHRNZW51LklDb250ZXh0TWVudUl0ZW1bXT4ge1xuXG4gICAgICAgICAgICBsZXQgZWRpdG9yTWFuYWdlciA9IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKTtcbiAgICAgICAgICAgIGlmICghZWRpdG9yTWFuYWdlcikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG5cbiAgICAgICAgICAgIGxldCBwYXRoID0gZWRpdG9yTWFuYWdlci5nZXRQYXRoKCk7XG4gICAgICAgICAgICBpZiAoIXBhdGgpIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuXG4gICAgICAgICAgICBsZXQgcG9zaXRpb24gPSBlZGl0b3JNYW5hZ2VyLmdldEN1cnJlbnRQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpXG4gICAgICAgICAgICAgICAgLmNhbGN1bGF0ZUVkaXRvckNvbnRleHRBY3Rpb25zKHBhdGgsIHBvc2l0aW9uKS50aGVuKGN1cnJlbnRBY3Rpb25zPT57XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0IDogY29udGV4dE1lbnUuSUNvbnRleHRNZW51SXRlbVtdID0gW11cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRBY3Rpb25zLmZvckVhY2goYWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGFjdGlvbi5oYXNVSSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA6IHNlbGVjdG9yLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogYWN0aW9uLmxhYmVsID8gYWN0aW9uLmxhYmVsIDogYWN0aW9uLm5hbWUsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgOiBhY3Rpb24uY2F0ZWdvcnksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXIocGF0aCwgYWN0aW9uLCBwb3NpdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICByZWdpc3RlckNvbnRyaWJ1dG9yKGVkaXRvckNvbnRleHRNZW51Q29udHJpYnV0b3IpXG4gICAgaGFuZGxlQWN0aW9uVUkoKTtcbiAgICBjb25maWd1cmVTZXJ2ZXJBY3Rpb25zKCk7XG5cblxuICAgIGFjdGlvbkJhc2VkTWVudUluaXRpYWxpemVkID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWN0aW9uVUkoKSB7XG4gICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLm9uRGlzcGxheUFjdGlvblVJKHVpRGlzcGxheVJlcXVlc3QgPT4ge1xuICAgICAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZGVidWcoXCJHb3QgVUkgZGlzcGxheSByZXF1ZXN0XCIsXG4gICAgICAgICAgICBcImNvbnRleHRBY3Rpb25zXCIsIFwiY29udGV4dE1lbnVJbXBsI2hhbmRsZUFjdGlvblVJXCIpXG5cbiAgICAgICAgY29uc3QgYWN0aW9uVUkgPSBhY3Rpb25VSU1hbmFnZXIuZ2V0VUlDb2RlKHVpRGlzcGxheVJlcXVlc3QuYWN0aW9uLmlkKTtcbiAgICAgICAgaWYgKCFhY3Rpb25VSSkge1xuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmVycm9yKFwiQ2FuIG5vdCBmaW5kIFVJIGZvciBhY3Rpb24gXCIgK1xuICAgICAgICAgICAgICAgIHVpRGlzcGxheVJlcXVlc3QuYWN0aW9uLmlkLFxuICAgICAgICAgICAgICAgIFwiY29udGV4dEFjdGlvbnNcIiwgXCJoYW5kbGVBY3Rpb25VSVwiKVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIChnbG9iYWwgYXMgYW55KS5JREUgPSBhdG9tO1xuICAgICAgICAoZ2xvYmFsIGFzIGFueSkuVUkgPSB1aWxpYnNNb2R1bGU7XG4gICAgICAgIChnbG9iYWwgYXMgYW55KS5VSUJ1aWxkZXIgPSB1aUJ1aWxkZXI7XG5cbiAgICAgICAgcmV0dXJuIGFjdGlvblVJLnJ1bih1aURpc3BsYXlSZXF1ZXN0LmluaXRpYWxVSVN0YXRlKS50aGVuKChyZXN1bHQpID0+IHtcblxuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRlYnVnRGV0YWlsKFwiQ2xpZW50OiBnb3QgcmVzdWx0IG9uIGRpYWxvZyBmaW5pc2hcIixcbiAgICAgICAgICAgICAgICBcImNvbnRleHRBY3Rpb25zXCIsIFwiaGFuZGxlQWN0aW9uVUlcIilcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gY29uZmlndXJlU2VydmVyQWN0aW9ucygpIHtcbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuc2V0U2VydmVyQ29uZmlndXJhdGlvbih7XG4gICAgICAgIGFjdGlvbnNDb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICBlbmFibGVVSUFjdGlvbnM6IHRydWVcbiAgICAgICAgfVxuICAgIH0pO1xufSJdfQ==\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"mkdirp\");\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar completeBodyUI = __webpack_require__(33);\n\tvar newMethodUI = __webpack_require__(34);\n\tvar simpleActionUi = __webpack_require__(35);\n\tfunction getUICode(actionID) {\n\t    if (actionID == \"completeBody\") {\n\t        return completeBodyUI;\n\t    }\n\t    if (actionID == \"newMethod\") {\n\t        return newMethodUI;\n\t    }\n\t    if (actionID == \"Create new Response\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new URI Parameter\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new Query Parameter\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new Header\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new Response Header\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new Response Body\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new Property\") {\n\t        return simpleActionUi;\n\t    }\n\t    if (actionID == \"Create new Body\") {\n\t        return simpleActionUi;\n\t    }\n\t    return null;\n\t}\n\texports.getUICode = getUICode;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25VSU1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwwREFBNEQ7QUFDNUQsb0RBQXNEO0FBRXRELDBEQUE0RDtBQU01RCxtQkFBMEIsUUFBZ0I7SUFDdEMsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDekIsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUN2QixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFRCxFQUFFLENBQUEsQ0FBQyxRQUFRLElBQUksMEJBQTBCLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUVELEVBQUUsQ0FBQSxDQUFDLFFBQVEsSUFBSSw0QkFBNEIsQ0FBQyxDQUFDLENBQUM7UUFDMUMsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLG1CQUFtQixDQUFDLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFRCxFQUFFLENBQUEsQ0FBQyxRQUFRLElBQUksNEJBQTRCLENBQUMsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUVELEVBQUUsQ0FBQSxDQUFDLFFBQVEsSUFBSSwwQkFBMEIsQ0FBQyxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFRCxFQUFFLENBQUEsQ0FBQyxRQUFRLElBQUksaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUVELE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDaEIsQ0FBQztBQTFDRCw4QkEwQ0MiLCJmaWxlIjoic3JjL2F0b20vY29udGV4dC1tZW51L2FjdGlvblVJTWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb21wbGV0ZUJvZHlVSSA9IHJlcXVpcmUoXCIuL2FjdGlvbnMvY29tcGxldGVCb2R5L3VpXCIpXG5pbXBvcnQgbmV3TWV0aG9kVUkgPSByZXF1aXJlKFwiLi9hY3Rpb25zL25ld01ldGhvZC91aVwiKVxuXG5pbXBvcnQgc2ltcGxlQWN0aW9uVWkgPSByZXF1aXJlKFwiLi9hY3Rpb25zL3NpbXBsZUFjdGlvbi91aVwiKVxuXG5pbnRlcmZhY2UgQWN0aW9uVUkge1xuICAgIHJ1bihpbml0aWFsU3RhdGU/OiBhbnkpOiBQcm9taXNlPGFueT47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVSUNvZGUoYWN0aW9uSUQ6IHN0cmluZyk6IEFjdGlvblVJIHtcbiAgICBpZihhY3Rpb25JRCA9PSBcImNvbXBsZXRlQm9keVwiKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZUJvZHlVSTtcbiAgICB9XG5cbiAgICBpZihhY3Rpb25JRCA9PSBcIm5ld01ldGhvZFwiKSB7XG4gICAgICAgIHJldHVybiBuZXdNZXRob2RVSTtcbiAgICB9XG5cbiAgICBpZihhY3Rpb25JRCA9PSBcIkNyZWF0ZSBuZXcgUmVzcG9uc2VcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFVSSSBQYXJhbWV0ZXJcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFF1ZXJ5IFBhcmFtZXRlclwiKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGVBY3Rpb25VaTtcbiAgICB9XG5cbiAgICBpZihhY3Rpb25JRCA9PSBcIkNyZWF0ZSBuZXcgSGVhZGVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZUFjdGlvblVpO1xuICAgIH1cblxuICAgIGlmKGFjdGlvbklEID09IFwiQ3JlYXRlIG5ldyBSZXNwb25zZSBIZWFkZXJcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEJvZHlcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFByb3BlcnR5XCIpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZUFjdGlvblVpO1xuICAgIH1cblxuICAgIGlmKGFjdGlvbklEID09IFwiQ3JlYXRlIG5ldyBCb2R5XCIpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZUFjdGlvblVpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufSJdfQ==\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar JsonSchemaGenerator = /** @class */ (function () {\n\t    function JsonSchemaGenerator() {\n\t    }\n\t    JsonSchemaGenerator.prototype.generateSchema = function (obj) {\n\t        var sch = {};\n\t        sch['required'] = true;\n\t        sch['$schema'] = 'http://json-schema.org/draft-03/schema';\n\t        this.pass(obj, sch);\n\t        return sch;\n\t    };\n\t    JsonSchemaGenerator.prototype.pass = function (value, property) {\n\t        var valueType = this.detectType(value);\n\t        property['type'] = valueType;\n\t        if (!value || value == null) {\n\t        }\n\t        else if (Array.isArray(value)) {\n\t            this.passArray(value, property);\n\t        }\n\t        else if (value instanceof Object) {\n\t            this.passObject(value, property);\n\t        }\n\t    };\n\t    JsonSchemaGenerator.prototype.passObject = function (obj, sch) {\n\t        var _this = this;\n\t        Object.keys(obj).forEach(function (x) { return _this.registerProperty(x, obj[x], sch); });\n\t    };\n\t    JsonSchemaGenerator.prototype.registerProperty = function (propName, value, sch) {\n\t        var properties = sch['properties'];\n\t        if (!properties) {\n\t            properties = {};\n\t            sch['properties'] = properties;\n\t        }\n\t        var property = properties[propName];\n\t        if (!property) {\n\t            property = {};\n\t            properties[propName] = property;\n\t        }\n\t        property['required'] = false;\n\t        this.pass(value, property);\n\t    };\n\t    JsonSchemaGenerator.prototype.passArray = function (array, property) {\n\t        var _this = this;\n\t        var items = property['items'];\n\t        if (!items) {\n\t            items = [];\n\t            property['items'] = items;\n\t        }\n\t        var l = array.length;\n\t        var itemSet = [];\n\t        array.forEach(function (value) {\n\t            var item = {};\n\t            _this.pass(value, item);\n\t            itemSet.push(item);\n\t        });\n\t        items.push(itemSet[0]);\n\t    };\n\t    JsonSchemaGenerator.prototype.detectType = function (value) {\n\t        if (Array.isArray(value)) {\n\t            return 'array';\n\t        }\n\t        return typeof value;\n\t    };\n\t    return JsonSchemaGenerator;\n\t}());\n\tfunction generateSchema(text, mediaType) {\n\t    var generator = new JsonSchemaGenerator();\n\t    var obj = JSON.parse(text);\n\t    var schemaObject = generator.generateSchema(obj);\n\t    var schemaString = JSON.stringify(schemaObject, null, 2);\n\t    return schemaString;\n\t}\n\texports.generateSchema = generateSchema;\n\tvar FillBodyDialog = /** @class */ (function () {\n\t    function FillBodyDialog(title) {\n\t        if (title === void 0) { title = \"Fill body\"; }\n\t        var _this = this;\n\t        this.title = title;\n\t        this.name = \"\";\n\t        this.needXML = true;\n\t        this.needJSON = true;\n\t        this.jsexample = '{\\n \"message\":\"Hello world\"\\n}';\n\t        this.xmlexample = \"\";\n\t        this.xmlschema = \"\";\n\t        this.jsschema = \"\";\n\t        this.resultPromise = new Promise(function (resolve, reject) {\n\t            _this.resolve = resolve;\n\t            _this.reject = reject;\n\t        });\n\t    }\n\t    FillBodyDialog.prototype.extraContent = function (s) {\n\t    };\n\t    FillBodyDialog.prototype.updateButtons = function () {\n\t        if (!this.createButton) {\n\t            return;\n\t        }\n\t        if (this.name.length == 0) {\n\t            this.createButton.setDisabled(true);\n\t            this.em.setDisplay(true);\n\t            this.em.setText(\"Please type name of your payload\");\n\t            return;\n\t        }\n\t        if (this.needJSON) {\n\t            try {\n\t                JSON.parse(this.jsexample);\n\t            }\n\t            catch (e) {\n\t                this.createButton.setDisabled(true);\n\t                this.em.setDisplay(true);\n\t                this.em.setText(\"JSON example is not correct\");\n\t                return;\n\t            }\n\t            // try {\n\t            //     var so = su.getJSONSchema(this.jsschema, null);\n\t            //\n\t            // } catch (e) {\n\t            //     this.createButton.setDisabled(true);\n\t            //     this.em.setDisplay(true)\n\t            //     this.em.setText(\"JSON schema is not correct\");\n\t            //     return;\n\t            // }\n\t        }\n\t        if (this.needXML) {\n\t            // try {\n\t            //     xmlutil(this.xmlexample);\n\t            // } catch (e) {\n\t            //     this.createButton.setDisabled(true);\n\t            //     this.em.setDisplay(true)\n\t            //     this.em.setText(\"XML example is not correct\");\n\t            //     return;\n\t            // }\n\t            // try {\n\t            //     var so = su.getXMLSchema(this.xmlschema);\n\t            //\n\t            // } catch (e) {\n\t            //     this.createButton.setDisabled(true);\n\t            //     this.em.setDisplay(true)\n\t            //     this.em.setText(\"XML schema is not correct\");\n\t            //     return;\n\t            // }\n\t        }\n\t        this.em.setDisplay(false);\n\t        this.createButton.setDisabled(false);\n\t    };\n\t    FillBodyDialog.prototype.show = function () {\n\t        var _this = this;\n\t        var zz = null;\n\t        this.em = UI.label(\"Please type name of your payload\", UI.Icon.BUG, UI.TextClasses.ERROR, UI.HighLightClasses.NONE);\n\t        var section = UI.section(this.title, UI.Icon.BOOK, false, false, this.em, UI.h3(\"Please type name for your payload\")).pad(10, 10);\n\t        section.addChild(UI.texfField(\"\", this.name, function (x) {\n\t            _this.name = x.getBinding().get();\n\t            _this.updateButtons();\n\t        }));\n\t        var r1 = UI.checkBox(\"Create XML body\");\n\t        r1.setValue(this.needXML);\n\t        r1.getBinding().addListener(function (x) {\n\t            _this.needXML = r1.getValue();\n\t            _this.updateButtons();\n\t        });\n\t        section.addChild(r1);\n\t        var r2 = UI.checkBox(\"Create JSON body\");\n\t        r2.setValue(this.needJSON);\n\t        r2.getBinding().addListener(function (x) {\n\t            _this.needJSON = r2.getValue();\n\t            _this.updateButtons();\n\t        });\n\t        section.addChild(r2);\n\t        var buttonBar = UI.hc().setPercentWidth(100).setStyle(\"display\", \"flex\");\n\t        buttonBar.addChild(UI.label(\"\", null, null, null).setStyle(\"flex\", \"1\"));\n\t        buttonBar.addChild(UI.button(\"Cancel\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.NO_HIGHLIGHT, UI.Icon.NONE, function (x) {\n\t            zz.destroy();\n\t        }).margin(10, 10));\n\t        this.createButton = UI.button(\"Create\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, function (x) {\n\t            _this.onOk(zz);\n\t            zz.destroy();\n\t        });\n\t        buttonBar.addChild(this.createButton);\n\t        var tf = new UI.TabFolder();\n\t        this.createButton.setDisabled(true);\n\t        this.createTextSection(tf, \"JSON Example\", \"source.json\", \"jsexample\");\n\t        this.createTextSection(tf, \"JSON Schema\", \"source.json\", \"jsschema\");\n\t        this.createTextSection(tf, \"XML Example\", \"text.xml\", \"xmlexample\");\n\t        this.createTextSection(tf, \"XML Schema\", \"text.xml\", \"xmlschema\");\n\t        tf.setOnSelected(function () {\n\t            var c = tf.selectedComponent();\n\t            var te = c.children()[1];\n\t            te.setText(_this[c.id()]);\n\t        });\n\t        section.addChild(tf);\n\t        section.addChild(buttonBar);\n\t        zz = IDE.workspace.addModalPanel({ item: section.renderUI() });\n\t    };\n\t    FillBodyDialog.prototype.createTextSection = function (tf, caption, lang, code) {\n\t        var _this = this;\n\t        var hs = UI.vc();\n\t        hs.setCaption(caption);\n\t        hs.setId(code);\n\t        var ts = new UI.AtomEditorElement(\"\", function (x) { return x; });\n\t        ts.setMini(false);\n\t        ts.getBinding().addListener(function (x) {\n\t            _this[code] = ts.getValue();\n\t            _this.updateButtons();\n\t        });\n\t        //ts.setCaption(code)\n\t        ts.setText(\"\" + this[code]);\n\t        ts.setCaption(caption);\n\t        ts.setGrammar(lang);\n\t        ts.setStyle(\"height\", \"400px\");\n\t        ts.setStyle(\"border\", \"solid\");\n\t        ts.setStyle(\"border-width\", \"1px\");\n\t        hs.addChild(UI.h3(\"Please type your example here:\"));\n\t        hs.addChild(ts);\n\t        if (code == 'jsexample') {\n\t            var b = UI.button(\"Generate JSON schema\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, function (x) {\n\t                try {\n\t                    var rs = generateSchema(_this.jsexample, \"application/json\");\n\t                    _this.jsschema = rs;\n\t                    tf.setSelectedIndex(1);\n\t                }\n\t                catch (e) {\n\t                    _this.jsschema = e.message;\n\t                    tf.setSelectedIndex(1);\n\t                }\n\t            });\n\t            hs.addChild(b.margin(5, 5, 5, 5));\n\t        }\n\t        // if (code == 'xmlexample') {\n\t        //     var b = UI.button(\"Generate JSON example\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, x=> {\n\t        //         try {\n\t        //             var rs = xmlutil(this.xmlexample)\n\t        //             this.jsexample = JSON.stringify(rs, null, 2);\n\t        //             tf.setSelectedIndex(0)\n\t        //         }\n\t        //         catch (e) {\n\t        //             this.jsexample = e.message;\n\t        //             tf.setSelectedIndex(0)\n\t        //         }\n\t        //     });\n\t        //     hs.addChild(b.margin(5, 5, 5, 5));\n\t        // }\n\t        tf.add(caption, null, hs);\n\t    };\n\t    FillBodyDialog.prototype.onOk = function (zz) {\n\t        this.resolve({\n\t            name: this.name,\n\t            needJSON: this.needJSON,\n\t            needXML: this.needXML,\n\t            jsexample: this.jsexample,\n\t            xmlexample: this.xmlexample,\n\t            jsschema: this.jsschema,\n\t            xmlschema: this.xmlschema,\n\t        });\n\t    };\n\t    FillBodyDialog.prototype.getResult = function () {\n\t        return this.resultPromise;\n\t    };\n\t    return FillBodyDialog;\n\t}());\n\tfunction run() {\n\t    var dialog = new FillBodyDialog();\n\t    dialog.show();\n\t    return dialog.getResult();\n\t}\n\texports.run = run;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL2NvbXBsZXRlQm9keS91aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQXFEQTtJQUFBO0lBeUVBLENBQUM7SUF2RUcsNENBQWMsR0FBZCxVQUFlLEdBQU87UUFFbEIsSUFBSSxHQUFHLEdBQVUsRUFBRSxDQUFBO1FBQ25CLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUE7UUFDdEIsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLHdDQUF3QyxDQUFBO1FBRXpELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3BCLE1BQU0sQ0FBQyxHQUFHLENBQUE7SUFDZCxDQUFDO0lBRU8sa0NBQUksR0FBWixVQUFhLEtBQVMsRUFBRSxRQUFlO1FBRW5DLElBQUksU0FBUyxHQUFVLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLFNBQVMsQ0FBQTtRQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztRQUU5QixDQUFDO1FBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3BDLENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxZQUFZLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDckMsQ0FBQztJQUNMLENBQUM7SUFFTyx3Q0FBVSxHQUFsQixVQUFtQixHQUFVLEVBQUUsR0FBVTtRQUF6QyxpQkFFQztRQURHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFFLFVBQUEsQ0FBQyxJQUFJLE9BQUEsS0FBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUMsR0FBRyxDQUFDLEVBQW5DLENBQW1DLENBQUUsQ0FBQTtJQUN4RSxDQUFDO0lBRU8sOENBQWdCLEdBQXhCLFVBQXlCLFFBQWUsRUFBRSxLQUFTLEVBQUUsR0FBVTtRQUUzRCxJQUFJLFVBQVUsR0FBVSxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDekMsRUFBRSxDQUFBLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQSxDQUFDO1lBQ1osVUFBVSxHQUFHLEVBQUUsQ0FBQTtZQUNmLEdBQUcsQ0FBQyxZQUFZLENBQUMsR0FBRyxVQUFVLENBQUE7UUFDbEMsQ0FBQztRQUVELElBQUksUUFBUSxHQUFVLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUMxQyxFQUFFLENBQUEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFBLENBQUM7WUFDVixRQUFRLEdBQUcsRUFBRSxDQUFBO1lBQ2IsVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBQTtRQUNuQyxDQUFDO1FBQ0QsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEtBQUssQ0FBQTtRQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU8sdUNBQVMsR0FBakIsVUFBa0IsS0FBVyxFQUFFLFFBQWU7UUFBOUMsaUJBaUJDO1FBZkcsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQzdCLEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUEsQ0FBQztZQUNQLEtBQUssR0FBRyxFQUFFLENBQUE7WUFDVixRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFBO1FBQzdCLENBQUM7UUFFRCxJQUFJLENBQUMsR0FBVSxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQzVCLElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQTtRQUNoQixLQUFLLENBQUMsT0FBTyxDQUFFLFVBQUEsS0FBSztZQUVoQixJQUFJLElBQUksR0FBVSxFQUFFLENBQUE7WUFDcEIsS0FBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEIsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN0QixDQUFDLENBQUMsQ0FBQTtRQUNGLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDMUIsQ0FBQztJQUVPLHdDQUFVLEdBQWxCLFVBQW1CLEtBQVM7UUFDeEIsRUFBRSxDQUFBLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsTUFBTSxDQUFDLE9BQU8sQ0FBQTtRQUNsQixDQUFDO1FBQ0QsTUFBTSxDQUFDLE9BQU8sS0FBSyxDQUFBO0lBQ3ZCLENBQUM7SUFDTCwwQkFBQztBQUFELENBekVBLEFBeUVDLElBQUE7QUFDRCx3QkFBK0IsSUFBVyxFQUFDLFNBQWdCO0lBQ3ZELElBQUksU0FBUyxHQUFHLElBQUksbUJBQW1CLEVBQUUsQ0FBQTtJQUN6QyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzNCLElBQUksWUFBWSxHQUFHLFNBQVMsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDaEQsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ3RELE1BQU0sQ0FBQyxZQUFZLENBQUE7QUFDdkIsQ0FBQztBQU5ELHdDQU1DO0FBRUQ7SUFPSSx3QkFBc0IsS0FBMEI7UUFBMUIsc0JBQUEsRUFBQSxtQkFBMEI7UUFBaEQsaUJBT0M7UUFQcUIsVUFBSyxHQUFMLEtBQUssQ0FBcUI7UUFMdEMsU0FBSSxHQUFVLEVBQUUsQ0FBQTtRQWtCMUIsWUFBTyxHQUFXLElBQUksQ0FBQztRQUN2QixhQUFRLEdBQVcsSUFBSSxDQUFDO1FBNEd4QixjQUFTLEdBQVUsZ0NBQWdDLENBQUE7UUFDbkQsZUFBVSxHQUFVLEVBQUUsQ0FBQztRQUN2QixjQUFTLEdBQVUsRUFBRSxDQUFDO1FBQ3RCLGFBQVEsR0FBVSxFQUFFLENBQUM7UUE1SGpCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFxRCxFQUNyRCxNQUE2QjtZQUUzRCxLQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUN2QixLQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxxQ0FBWSxHQUFaLFVBQWEsQ0FBcUI7SUFFbEMsQ0FBQztJQU1ELHNDQUFhLEdBQWI7UUFDSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sQ0FBQztRQUNYLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ3hCLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7WUFDcEQsTUFBTSxDQUFDO1FBQ1gsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLElBQUksQ0FBQztnQkFDRCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMvQixDQUFDO1lBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDVCxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDcEMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ3hCLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7Z0JBQy9DLE1BQU0sQ0FBQztZQUNYLENBQUM7WUFDRCxRQUFRO1lBQ1Isc0RBQXNEO1lBQ3RELEVBQUU7WUFDRixnQkFBZ0I7WUFDaEIsMkNBQTJDO1lBQzNDLCtCQUErQjtZQUMvQixxREFBcUQ7WUFDckQsY0FBYztZQUNkLElBQUk7UUFDUixDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDZixRQUFRO1lBQ1IsZ0NBQWdDO1lBQ2hDLGdCQUFnQjtZQUNoQiwyQ0FBMkM7WUFDM0MsK0JBQStCO1lBQy9CLHFEQUFxRDtZQUNyRCxjQUFjO1lBQ2QsSUFBSTtZQUNKLFFBQVE7WUFDUixnREFBZ0Q7WUFDaEQsRUFBRTtZQUNGLGdCQUFnQjtZQUNoQiwyQ0FBMkM7WUFDM0MsK0JBQStCO1lBQy9CLG9EQUFvRDtZQUNwRCxjQUFjO1lBQ2QsSUFBSTtRQUNSLENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBSUQsNkJBQUksR0FBSjtRQUFBLGlCQWlEQztRQWhERyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDZCxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsa0NBQWtDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BILElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUNqSSxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBQSxDQUFDO1lBQzFDLEtBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ2pDLEtBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ0gsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3hDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzFCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxXQUFXLENBQUMsVUFBQSxDQUFDO1lBQ3pCLEtBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzdCLEtBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckIsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3pDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzNCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxXQUFXLENBQUMsVUFBQSxDQUFDO1lBQ3pCLEtBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzlCLEtBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFckIsSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3pFLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7UUFDeEUsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFVBQUEsQ0FBQztZQUMzRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDaEIsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBRWxCLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFBLENBQUM7WUFDdkcsS0FBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNqQixDQUFDLENBQUMsQ0FBQztRQUNILFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBQ3JDLElBQUksRUFBRSxHQUFHLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ25DLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsY0FBYyxFQUFFLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUN2RSxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRSxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDckUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNsRSxFQUFFLENBQUMsYUFBYSxDQUFDO1lBQ2IsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDL0IsSUFBSSxFQUFFLEdBQXdDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUUsQ0FBQztZQUMvRCxFQUFFLENBQUMsT0FBTyxDQUFPLEtBQUssQ0FBbUMsQ0FBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUV2RSxDQUFDLENBQUMsQ0FBQTtRQUNGLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1QixFQUFFLEdBQVMsR0FBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFDLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBT08sMENBQWlCLEdBQXpCLFVBQTBCLEVBQXdCLEVBQUUsT0FBYyxFQUFFLElBQVcsRUFBRSxJQUFXO1FBQTVGLGlCQWlEQztRQWhERyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDakIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUN0QixFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ2QsSUFBSSxFQUFFLEdBQUcsSUFBSSxFQUFFLENBQUMsaUJBQWlCLENBQUMsRUFBRSxFQUFFLFVBQUEsQ0FBQyxJQUFFLE9BQUEsQ0FBQyxFQUFELENBQUMsQ0FBQyxDQUFDO1FBQzVDLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEIsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxVQUFBLENBQUM7WUFDekIsS0FBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUMzQixLQUFJLENBQUMsYUFBYSxFQUFFLENBQUE7UUFDeEIsQ0FBQyxDQUFDLENBQUE7UUFDRixxQkFBcUI7UUFDckIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQVMsSUFBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUN0QixFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ25CLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLEVBQUUsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ25DLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUE7UUFFcEQsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQixFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLHNCQUFzQixFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBQSxDQUFDO2dCQUN6RyxJQUFJLENBQUM7b0JBQ0QsSUFBSSxFQUFFLEdBQUcsY0FBYyxDQUFDLEtBQUksQ0FBQyxTQUFTLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtvQkFDM0QsS0FBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7b0JBQ25CLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQTtnQkFDMUIsQ0FBQztnQkFDRCxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNQLEtBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQztvQkFDMUIsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUMxQixDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDSCxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBQ0QsOEJBQThCO1FBQzlCLHlIQUF5SDtRQUN6SCxnQkFBZ0I7UUFDaEIsZ0RBQWdEO1FBQ2hELDREQUE0RDtRQUM1RCxxQ0FBcUM7UUFDckMsWUFBWTtRQUNaLHNCQUFzQjtRQUN0QiwwQ0FBMEM7UUFDMUMscUNBQXFDO1FBQ3JDLFlBQVk7UUFDWixVQUFVO1FBQ1YseUNBQXlDO1FBQ3pDLElBQUk7UUFDSixFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVTLDZCQUFJLEdBQWQsVUFBZSxFQUFFO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNULElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNmLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUN2QixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87WUFDckIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1lBQ3pCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUMzQixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDdkIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1NBQzVCLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSxrQ0FBUyxHQUFoQjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFDTCxxQkFBQztBQUFELENBeE1BLEFBd01DLElBQUE7QUFDRDtJQUNJLElBQUksTUFBTSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBRWQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUM5QixDQUFDO0FBTEQsa0JBS0MiLCJmaWxlIjoic3JjL2F0b20vY29udGV4dC1tZW51L2FjdGlvbnMvY29tcGxldGVCb2R5L3VpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgbGliVUlNb2R1bGUgPSByZXF1aXJlKFwiYXRvbS11aS1saWJcIilcblxuLyoqXG4gKiB1aS1saWJzIGluc3RhbmNlXG4gKi9cbmRlY2xhcmUgbGV0IFVJIDogdHlwZW9mIGxpYlVJTW9kdWxlXG5cbi8qKlxuICogSURFIFVJIGluc3RhbmNlXG4gKi9cbmRlY2xhcmUgbGV0IElERTogYW55O1xuXG4vKipcbiAqIE91dHB1dCBVSSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ29tcGxldGVCb2R5T3V0cHV0VUlTdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQm9keSBuYW1lLlxuICAgICAqL1xuICAgIG5hbWUgOiBzdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIEpTT04gY29udGVudCB0eXBlIG5lZWRzIHRvIGJlIGdlbmVyYXRlZFxuICAgICAqL1xuICAgIG5lZWRKU09OIDogYm9vbGVhbixcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgWE1MIGNvbnRlbnQgdHlwZSBuZWVkcyB0byBiZSBnZW5lcmF0ZWRcbiAgICAgKi9cbiAgICBuZWVkWE1MIDogYm9vbGVhbixcblxuICAgIC8qKlxuICAgICAqIEpTT04gZXhhbXBsZSBjb250ZW50c1xuICAgICAqL1xuICAgIGpzZXhhbXBsZSA6IHN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIFhNTCBleGFtcGxlIGNvbnRlbnRzXG4gICAgICovXG4gICAgeG1sZXhhbXBsZSA6IHN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIEpTT04gc2NoZW1hIGNvbnRlbnRzXG4gICAgICovXG4gICAganNzY2hlbWEgOiBzdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBYTUwgc2NoZW1hIGNvbnRlbnRzXG4gICAgICovXG4gICAgeG1sc2NoZW1hIDogc3RyaW5nXG59XG5cbmNsYXNzIEpzb25TY2hlbWFHZW5lcmF0b3Ige1xuXG4gICAgZ2VuZXJhdGVTY2hlbWEob2JqOmFueSk6T2JqZWN0e1xuXG4gICAgICAgIHZhciBzY2g6T2JqZWN0ID0ge31cbiAgICAgICAgc2NoWydyZXF1aXJlZCddID0gdHJ1ZVxuICAgICAgICBzY2hbJyRzY2hlbWEnXSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTAzL3NjaGVtYSdcblxuICAgICAgICB0aGlzLnBhc3Mob2JqLCBzY2gpO1xuICAgICAgICByZXR1cm4gc2NoXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXNzKHZhbHVlOmFueSwgcHJvcGVydHk6T2JqZWN0KXtcblxuICAgICAgICB2YXIgdmFsdWVUeXBlOnN0cmluZyA9IHRoaXMuZGV0ZWN0VHlwZSh2YWx1ZSk7XG4gICAgICAgIHByb3BlcnR5Wyd0eXBlJ10gPSB2YWx1ZVR5cGVcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZSA9PSBudWxsKSB7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5wYXNzQXJyYXkodmFsdWUsIHByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy5wYXNzT2JqZWN0KHZhbHVlLCBwcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBhc3NPYmplY3Qob2JqOk9iamVjdCwgc2NoOk9iamVjdCkge1xuICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goIHggPT4gdGhpcy5yZWdpc3RlclByb3BlcnR5KHgsb2JqW3hdLHNjaCkgKVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJQcm9wZXJ0eShwcm9wTmFtZTpzdHJpbmcsIHZhbHVlOmFueSwgc2NoOk9iamVjdCl7XG5cbiAgICAgICAgdmFyIHByb3BlcnRpZXM6T2JqZWN0ID0gc2NoWydwcm9wZXJ0aWVzJ11cbiAgICAgICAgaWYoIXByb3BlcnRpZXMpe1xuICAgICAgICAgICAgcHJvcGVydGllcyA9IHt9XG4gICAgICAgICAgICBzY2hbJ3Byb3BlcnRpZXMnXSA9IHByb3BlcnRpZXNcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcm9wZXJ0eTpPYmplY3QgPSBwcm9wZXJ0aWVzW3Byb3BOYW1lXVxuICAgICAgICBpZighcHJvcGVydHkpe1xuICAgICAgICAgICAgcHJvcGVydHkgPSB7fVxuICAgICAgICAgICAgcHJvcGVydGllc1twcm9wTmFtZV0gPSBwcm9wZXJ0eVxuICAgICAgICB9XG4gICAgICAgIHByb3BlcnR5WydyZXF1aXJlZCddID0gZmFsc2VcbiAgICAgICAgdGhpcy5wYXNzKHZhbHVlLCBwcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXNzQXJyYXkoYXJyYXk6YW55W10sIHByb3BlcnR5Ok9iamVjdCl7XG5cbiAgICAgICAgdmFyIGl0ZW1zID0gcHJvcGVydHlbJ2l0ZW1zJ11cbiAgICAgICAgaWYoIWl0ZW1zKXtcbiAgICAgICAgICAgIGl0ZW1zID0gW11cbiAgICAgICAgICAgIHByb3BlcnR5WydpdGVtcyddID0gaXRlbXNcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsOm51bWJlciA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgdmFyIGl0ZW1TZXQgPSBbXVxuICAgICAgICBhcnJheS5mb3JFYWNoKCB2YWx1ZSA9PiB7XG5cbiAgICAgICAgICAgIHZhciBpdGVtOk9iamVjdCA9IHt9XG4gICAgICAgICAgICB0aGlzLnBhc3ModmFsdWUsaXRlbSk7XG4gICAgICAgICAgICBpdGVtU2V0LnB1c2goaXRlbSlcbiAgICAgICAgfSlcbiAgICAgICAgaXRlbXMucHVzaChpdGVtU2V0WzBdKVxuICAgIH1cblxuICAgIHByaXZhdGUgZGV0ZWN0VHlwZSh2YWx1ZTphbnkpOnN0cmluZyB7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FycmF5J1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWVcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTY2hlbWEodGV4dDpzdHJpbmcsbWVkaWFUeXBlOnN0cmluZyk6c3RyaW5ne1xuICAgIHZhciBnZW5lcmF0b3IgPSBuZXcgSnNvblNjaGVtYUdlbmVyYXRvcigpXG4gICAgdmFyIG9iaiA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgdmFyIHNjaGVtYU9iamVjdCA9IGdlbmVyYXRvci5nZW5lcmF0ZVNjaGVtYShvYmopXG4gICAgdmFyIHNjaGVtYVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHNjaGVtYU9iamVjdCxudWxsLDIpXG4gICAgcmV0dXJuIHNjaGVtYVN0cmluZ1xufVxuXG5jbGFzcyBGaWxsQm9keURpYWxvZyB7XG5cbiAgICBwcm90ZWN0ZWQgbmFtZTpzdHJpbmcgPSBcIlwiXG4gICAgcHJpdmF0ZSByZXNvbHZlO1xuICAgIHByaXZhdGUgcmVqZWN0O1xuICAgIHByaXZhdGUgcmVzdWx0UHJvbWlzZTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB0aXRsZTpzdHJpbmcgPSBcIkZpbGwgYm9keVwiKSB7XG4gICAgICAgIHRoaXMucmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlOiAodmFsdWU/OiBJQ29tcGxldGVCb2R5T3V0cHV0VUlTdGF0ZSkgPT4gdm9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdDogKGVycm9yPzogYW55KSA9PiB2b2lkKSA9PiB7XG5cbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXh0cmFDb250ZW50KHM6bGliVUlNb2R1bGUuU2VjdGlvbikge1xuXG4gICAgfVxuXG4gICAgbmVlZFhNTDpib29sZWFuID0gdHJ1ZTtcbiAgICBuZWVkSlNPTjpib29sZWFuID0gdHJ1ZTtcbiAgICBjcmVhdGVCdXR0b246bGliVUlNb2R1bGUuQnV0dG9uO1xuXG4gICAgdXBkYXRlQnV0dG9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZUJ1dHRvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5hbWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbS5zZXREaXNwbGF5KHRydWUpXG4gICAgICAgICAgICB0aGlzLmVtLnNldFRleHQoXCJQbGVhc2UgdHlwZSBuYW1lIG9mIHlvdXIgcGF5bG9hZFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5uZWVkSlNPTikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHRoaXMuanNleGFtcGxlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgICAgICB0aGlzLmVtLnNldFRleHQoXCJKU09OIGV4YW1wbGUgaXMgbm90IGNvcnJlY3RcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIC8vICAgICB2YXIgc28gPSBzdS5nZXRKU09OU2NoZW1hKHRoaXMuanNzY2hlbWEsIG51bGwpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldFRleHQoXCJKU09OIHNjaGVtYSBpcyBub3QgY29ycmVjdFwiKTtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubmVlZFhNTCkge1xuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIC8vICAgICB4bWx1dGlsKHRoaXMueG1sZXhhbXBsZSk7XG4gICAgICAgICAgICAvLyB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5jcmVhdGVCdXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5lbS5zZXREaXNwbGF5KHRydWUpXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5lbS5zZXRUZXh0KFwiWE1MIGV4YW1wbGUgaXMgbm90IGNvcnJlY3RcIik7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIC8vICAgICB2YXIgc28gPSBzdS5nZXRYTUxTY2hlbWEodGhpcy54bWxzY2hlbWEpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldFRleHQoXCJYTUwgc2NoZW1hIGlzIG5vdCBjb3JyZWN0XCIpO1xuICAgICAgICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtLnNldERpc3BsYXkoZmFsc2UpO1xuICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgfVxuXG4gICAgZW06bGliVUlNb2R1bGUuTGFiZWw7XG5cbiAgICBzaG93KCkge1xuICAgICAgICB2YXIgenogPSBudWxsO1xuICAgICAgICB0aGlzLmVtID0gVUkubGFiZWwoXCJQbGVhc2UgdHlwZSBuYW1lIG9mIHlvdXIgcGF5bG9hZFwiLCBVSS5JY29uLkJVRywgVUkuVGV4dENsYXNzZXMuRVJST1IsIFVJLkhpZ2hMaWdodENsYXNzZXMuTk9ORSk7XG4gICAgICAgIHZhciBzZWN0aW9uID0gVUkuc2VjdGlvbih0aGlzLnRpdGxlLCBVSS5JY29uLkJPT0ssIGZhbHNlLCBmYWxzZSwgdGhpcy5lbSwgVUkuaDMoXCJQbGVhc2UgdHlwZSBuYW1lIGZvciB5b3VyIHBheWxvYWRcIikpLnBhZCgxMCwgMTApXG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQoVUkudGV4ZkZpZWxkKFwiXCIsIHRoaXMubmFtZSwgeD0+IHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHguZ2V0QmluZGluZygpLmdldCgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25zKCk7XG4gICAgICAgIH0pKVxuICAgICAgICB2YXIgcjEgPSBVSS5jaGVja0JveChcIkNyZWF0ZSBYTUwgYm9keVwiKTtcbiAgICAgICAgcjEuc2V0VmFsdWUodGhpcy5uZWVkWE1MKTtcbiAgICAgICAgcjEuZ2V0QmluZGluZygpLmFkZExpc3RlbmVyKHg9PiB7XG4gICAgICAgICAgICB0aGlzLm5lZWRYTUwgPSByMS5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25zKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKHIxKTtcbiAgICAgICAgdmFyIHIyID0gVUkuY2hlY2tCb3goXCJDcmVhdGUgSlNPTiBib2R5XCIpO1xuICAgICAgICByMi5zZXRWYWx1ZSh0aGlzLm5lZWRKU09OKTtcbiAgICAgICAgcjIuZ2V0QmluZGluZygpLmFkZExpc3RlbmVyKHg9PiB7XG4gICAgICAgICAgICB0aGlzLm5lZWRKU09OID0gcjIuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQnV0dG9ucygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChyMik7XG5cbiAgICAgICAgdmFyIGJ1dHRvbkJhciA9IFVJLmhjKCkuc2V0UGVyY2VudFdpZHRoKDEwMCkuc2V0U3R5bGUoXCJkaXNwbGF5XCIsIFwiZmxleFwiKTtcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKFVJLmxhYmVsKFwiXCIsIG51bGwsIG51bGwsIG51bGwpLnNldFN0eWxlKFwiZmxleFwiLCBcIjFcIikpXG4gICAgICAgIGJ1dHRvbkJhci5hZGRDaGlsZChVSS5idXR0b24oXCJDYW5jZWxcIiwgVUkuQnV0dG9uU2l6ZXMuTk9STUFMLCBVSS5CdXR0b25IaWdobGlnaHRzLk5PX0hJR0hMSUdIVCwgVUkuSWNvbi5OT05FLCB4PT4ge1xuICAgICAgICAgICAgenouZGVzdHJveSgpXG4gICAgICAgIH0pLm1hcmdpbigxMCwgMTApKVxuXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uID0gVUkuYnV0dG9uKFwiQ3JlYXRlXCIsIFVJLkJ1dHRvblNpemVzLk5PUk1BTCwgVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLCBVSS5JY29uLk5PTkUsIHg9PiB7XG4gICAgICAgICAgICB0aGlzLm9uT2soenopO1xuICAgICAgICAgICAgenouZGVzdHJveSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKHRoaXMuY3JlYXRlQnV0dG9uKVxuICAgICAgICB2YXIgdGYgPSBuZXcgVUkuVGFiRm9sZGVyKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uLnNldERpc2FibGVkKHRydWUpXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNlY3Rpb24odGYsIFwiSlNPTiBFeGFtcGxlXCIsIFwic291cmNlLmpzb25cIiwgXCJqc2V4YW1wbGVcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNlY3Rpb24odGYsIFwiSlNPTiBTY2hlbWFcIiwgXCJzb3VyY2UuanNvblwiLCBcImpzc2NoZW1hXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZWN0aW9uKHRmLCBcIlhNTCBFeGFtcGxlXCIsIFwidGV4dC54bWxcIiwgXCJ4bWxleGFtcGxlXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZWN0aW9uKHRmLCBcIlhNTCBTY2hlbWFcIiwgXCJ0ZXh0LnhtbFwiLCBcInhtbHNjaGVtYVwiKTtcbiAgICAgICAgdGYuc2V0T25TZWxlY3RlZCgoKT0+IHtcbiAgICAgICAgICAgIHZhciBjID0gdGYuc2VsZWN0ZWRDb21wb25lbnQoKTtcbiAgICAgICAgICAgIHZhciB0ZSA9ICg8bGliVUlNb2R1bGUuQXRvbUVkaXRvckVsZW1lbnQ+PGFueT5jLmNoaWxkcmVuKClbMV0pO1xuICAgICAgICAgICAgdGUuc2V0VGV4dCgoPGFueT50aGlzKVsoPGxpYlVJTW9kdWxlLkJhc2ljQ29tcG9uZW50PGFueT4+YykuaWQoKV0pO1xuXG4gICAgICAgIH0pXG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodGYpO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKGJ1dHRvbkJhcik7XG4gICAgICAgIHp6ID0gKDxhbnk+SURFKS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbCh7aXRlbTogc2VjdGlvbi5yZW5kZXJVSSgpfSk7XG4gICAgfVxuXG4gICAganNleGFtcGxlOnN0cmluZyA9ICd7XFxuIFwibWVzc2FnZVwiOlwiSGVsbG8gd29ybGRcIlxcbn0nXG4gICAgeG1sZXhhbXBsZTpzdHJpbmcgPSBcIlwiO1xuICAgIHhtbHNjaGVtYTpzdHJpbmcgPSBcIlwiO1xuICAgIGpzc2NoZW1hOnN0cmluZyA9IFwiXCI7XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRleHRTZWN0aW9uKHRmOmxpYlVJTW9kdWxlLlRhYkZvbGRlciwgY2FwdGlvbjpzdHJpbmcsIGxhbmc6c3RyaW5nLCBjb2RlOnN0cmluZykge1xuICAgICAgICB2YXIgaHMgPSBVSS52YygpO1xuICAgICAgICBocy5zZXRDYXB0aW9uKGNhcHRpb24pXG4gICAgICAgIGhzLnNldElkKGNvZGUpXG4gICAgICAgIHZhciB0cyA9IG5ldyBVSS5BdG9tRWRpdG9yRWxlbWVudChcIlwiLCB4PT54KTtcbiAgICAgICAgdHMuc2V0TWluaShmYWxzZSk7XG4gICAgICAgIHRzLmdldEJpbmRpbmcoKS5hZGRMaXN0ZW5lcih4PT4ge1xuICAgICAgICAgICAgdGhpc1tjb2RlXSA9IHRzLmdldFZhbHVlKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvbnMoKVxuICAgICAgICB9KVxuICAgICAgICAvL3RzLnNldENhcHRpb24oY29kZSlcbiAgICAgICAgdHMuc2V0VGV4dChcIlwiICsgKDxhbnk+dGhpcylbY29kZV0pO1xuICAgICAgICB0cy5zZXRDYXB0aW9uKGNhcHRpb24pXG4gICAgICAgIHRzLnNldEdyYW1tYXIobGFuZylcbiAgICAgICAgdHMuc2V0U3R5bGUoXCJoZWlnaHRcIiwgXCI0MDBweFwiKTtcbiAgICAgICAgdHMuc2V0U3R5bGUoXCJib3JkZXJcIiwgXCJzb2xpZFwiKTtcbiAgICAgICAgdHMuc2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIiwgXCIxcHhcIik7XG4gICAgICAgIGhzLmFkZENoaWxkKFVJLmgzKFwiUGxlYXNlIHR5cGUgeW91ciBleGFtcGxlIGhlcmU6XCIpKVxuXG4gICAgICAgIGhzLmFkZENoaWxkKHRzKTtcbiAgICAgICAgaWYgKGNvZGUgPT0gJ2pzZXhhbXBsZScpIHtcbiAgICAgICAgICAgIHZhciBiID0gVUkuYnV0dG9uKFwiR2VuZXJhdGUgSlNPTiBzY2hlbWFcIiwgVUkuQnV0dG9uU2l6ZXMuTk9STUFMLCBVSS5CdXR0b25IaWdobGlnaHRzLlNVQ0NFU1MsIFVJLkljb24uTk9ORSwgeD0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnMgPSBnZW5lcmF0ZVNjaGVtYSh0aGlzLmpzZXhhbXBsZSwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuanNzY2hlbWEgPSBycztcbiAgICAgICAgICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleCgxKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmpzc2NoZW1hID0gZS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB0Zi5zZXRTZWxlY3RlZEluZGV4KDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBocy5hZGRDaGlsZChiLm1hcmdpbig1LCA1LCA1LCA1KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgKGNvZGUgPT0gJ3htbGV4YW1wbGUnKSB7XG4gICAgICAgIC8vICAgICB2YXIgYiA9IFVJLmJ1dHRvbihcIkdlbmVyYXRlIEpTT04gZXhhbXBsZVwiLCBVSS5CdXR0b25TaXplcy5OT1JNQUwsIFVJLkJ1dHRvbkhpZ2hsaWdodHMuU1VDQ0VTUywgVUkuSWNvbi5OT05FLCB4PT4ge1xuICAgICAgICAvLyAgICAgICAgIHRyeSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBycyA9IHhtbHV0aWwodGhpcy54bWxleGFtcGxlKVxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmpzZXhhbXBsZSA9IEpTT04uc3RyaW5naWZ5KHJzLCBudWxsLCAyKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleCgwKVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmpzZXhhbXBsZSA9IGUubWVzc2FnZTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleCgwKVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvLyAgICAgaHMuYWRkQ2hpbGQoYi5tYXJnaW4oNSwgNSwgNSwgNSkpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRmLmFkZChjYXB0aW9uLCBudWxsLCBocyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG9uT2soenopIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlKHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIG5lZWRKU09OOiB0aGlzLm5lZWRKU09OLFxuICAgICAgICAgICAgbmVlZFhNTDogdGhpcy5uZWVkWE1MLFxuICAgICAgICAgICAganNleGFtcGxlOiB0aGlzLmpzZXhhbXBsZSxcbiAgICAgICAgICAgIHhtbGV4YW1wbGU6IHRoaXMueG1sZXhhbXBsZSxcbiAgICAgICAgICAgIGpzc2NoZW1hOiB0aGlzLmpzc2NoZW1hLFxuICAgICAgICAgICAgeG1sc2NoZW1hOiB0aGlzLnhtbHNjaGVtYSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlc3VsdCgpIDogUHJvbWlzZTxJQ29tcGxldGVCb2R5T3V0cHV0VUlTdGF0ZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQcm9taXNlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBydW4oKSA6IFByb21pc2U8YW55PiB7XG4gICAgbGV0IGRpYWxvZyA9IG5ldyBGaWxsQm9keURpYWxvZygpO1xuICAgIGRpYWxvZy5zaG93KCk7XG5cbiAgICByZXR1cm4gZGlhbG9nLmdldFJlc3VsdCgpO1xufVxuIl19\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar _dialogPanels = [];\n\tvar mdp = null;\n\tfunction _dialog(panel, onDone, toFocus, stretch) {\n\t    if (stretch === void 0) { stretch = false; }\n\t    return _dialog2(panel, [\n\t        { name: \"Ok\", isPrimary: true, highlight: UI.ButtonHighlights.PRIMARY, action: onDone },\n\t        { name: \"Cancel\", highlight: UI.ButtonHighlights.NO_HIGHLIGHT, action: function () { return true; } }\n\t    ], toFocus, stretch);\n\t}\n\tfunction _dialog2(panel, actions, toFocus, stretch) {\n\t    if (stretch === void 0) { stretch = false; }\n\t    var buttonBar = UI.hc().setPercentWidth(100);\n\t    actions.reverse().forEach(function (a) {\n\t        var button = UI.button(a.name, UI.ButtonSizes.NORMAL, a.highlight, UI.Icon.NONE, function (x) { if (a.action())\n\t            _closeDialog(); });\n\t        if (a.isPrimary) {\n\t            var st = panel.getBinding().status();\n\t            if (st) {\n\t                if (st.code == UI.StatusCode.ERROR) {\n\t                    button.setDisabled(true);\n\t                }\n\t            }\n\t            panel.getBinding().addStatusListener(function (x) {\n\t                var st = panel.getBinding().status();\n\t                if (st) {\n\t                    if (st.code != UI.StatusCode.ERROR) {\n\t                        button.setDisabled(false);\n\t                    }\n\t                    else {\n\t                        button.setDisabled(true);\n\t                    }\n\t                }\n\t            });\n\t        }\n\t        button.setStyle(\"float\", \"right\")\n\t            .margin(4, 10);\n\t        buttonBar.addChild(button);\n\t    });\n\t    panel.addChild(buttonBar);\n\t    var ui = panel.ui();\n\t    return function (e) {\n\t        _dialogPanels.push(panel);\n\t        var eventListener = function () {\n\t            if (!stretch) {\n\t                return;\n\t            }\n\t            var parent = ui.parentElement;\n\t            var height = document.body.clientHeight;\n\t            if (!parent) {\n\t                return;\n\t            }\n\t            var style = window.getComputedStyle(parent);\n\t            [\"paddingBottom\", \"paddingTop\", \"marginBottom\", \"marginTop\"].forEach(function (property) {\n\t                height -= parseFloat(style[property] || 0);\n\t            });\n\t            ui.style.height = height + \"px\";\n\t            ui.style.overflowY = \"scroll\";\n\t        };\n\t        window.addEventListener('resize', eventListener);\n\t        mdp = IDE.workspace.addModalPanel({ item: ui });\n\t        mdp.onDidDestroy(function () {\n\t            window.removeEventListener('resize', eventListener);\n\t        });\n\t        eventListener();\n\t        if (toFocus)\n\t            toFocus.ui().focus();\n\t    };\n\t}\n\tfunction _closeDialog() {\n\t    _dialogPanels.pop();\n\t    if (_dialogPanels.length == 0)\n\t        mdp.destroy();\n\t    else\n\t        mdp = IDE.workspace.addModalPanel({ item: _dialogPanels[_dialogPanels.length - 1].ui() });\n\t}\n\tfunction newMethod(inputState, method) {\n\t    var mdesc = inputState.methodDescriptions;\n\t    var cdesc = inputState.statusCodeDescriptions;\n\t    var NO_RESPONCE = \"No response\";\n\t    var NO_RESPONCE_BT = \"No response body type\";\n\t    var code = null, bodyType = null;\n\t    if (method == null)\n\t        method = \"get\";\n\t    var mdescLabel = new UI.LabelField();\n\t    var cdescLabel = new UI.LabelField();\n\t    [mdescLabel, cdescLabel].forEach(function (x) { return x.addClass('wizard-description'); });\n\t    mdescLabel.getActualField().margin(0, 0, 18, 8);\n\t    cdescLabel.getActualField().margin(0, 0, 8, 8);\n\t    var methodSelect = new UI.SelectField(\"Method:\", function (e, v) {\n\t        method = v;\n\t        mdescLabel.setText(\"Method \" + v + \" \" + mdesc[v]);\n\t    }, null);\n\t    methodSelect.getActualField().setOptions(Object.keys(mdesc));\n\t    methodSelect.getActualField().setValue(method, true);\n\t    var responseSelect = new UI.SelectField(\"Status code:\", function (e, v) {\n\t        if (v == NO_RESPONCE) {\n\t            v = null;\n\t            responseTypeSelect.getActualField().setValue(NO_RESPONCE_BT);\n\t        }\n\t        code = v;\n\t        responseTypeSelect.setDisabled(v == null);\n\t        cdescLabel.setText(v ? \"Status code \" + v + \" \" + cdesc[v] : '');\n\t    }, null);\n\t    responseSelect.getActualField().setOptions([NO_RESPONCE].concat(Object.keys(cdesc)));\n\t    var responseTypeSelect = new UI.SelectField(\"Generate default response with media type:\", function (e, v) {\n\t        if (v == NO_RESPONCE_BT) {\n\t            v = null;\n\t            typeOfValue.setDisabled(true);\n\t        }\n\t        else\n\t            typeOfValue.setDisabled(false);\n\t        bodyType = v;\n\t    }, null);\n\t    responseTypeSelect.getActualField().setOptions([NO_RESPONCE_BT, \"application/json\", \"application/xml\", \"application/x-www-form-urlencoded\"]);\n\t    responseTypeSelect.setDisabled(true);\n\t    responseTypeSelect.margin(0, 0, 0, 12);\n\t    var realBodyType = null;\n\t    var bodyTypeSelect = new UI.SelectField(\"Generate default body with media type:\", function (e, v) {\n\t        if (v == NO_RESPONCE_BT) {\n\t            v = null;\n\t            bodyTypeOfValue.setDisabled(true);\n\t        }\n\t        else\n\t            bodyTypeOfValue.setDisabled(false);\n\t        realBodyType = v;\n\t    }, null);\n\t    bodyTypeSelect.getActualField().setOptions([NO_RESPONCE_BT, \"application/json\", \"application/xml\", \"application/x-www-form-urlencoded\"]);\n\t    bodyTypeSelect.margin(0, 0, 0, 12);\n\t    var actualType = null;\n\t    var bodyTypeString = null;\n\t    var typeOfValue = new UI.SelectField(\"Generate default response body with type:\", function (e, v) {\n\t        if (v == NO_RESPONCE_BT)\n\t            v = null;\n\t        actualType = v;\n\t    }, null);\n\t    typeOfValue.setDisabled(true);\n\t    typeOfValue.margin(0, 0, 0, 12);\n\t    var __ret = inputState.typeValues;\n\t    var isSchema = __ret.isSchema;\n\t    var types = __ret.types;\n\t    if (types) {\n\t        types = [\"\"].concat(types);\n\t        typeOfValue.getActualField().setOptions(types);\n\t    }\n\t    var bodyTypeOfValue = new UI.SelectField(\"Generate default body with type:\", function (e, v) {\n\t        if (v == NO_RESPONCE_BT)\n\t            v = null;\n\t        bodyTypeString = v;\n\t    }, null);\n\t    bodyTypeOfValue.setDisabled(true);\n\t    bodyTypeOfValue.margin(0, 0, 0, 12);\n\t    var isSchema = __ret.isSchema;\n\t    var types = __ret.types;\n\t    if (types) {\n\t        types = [\"\"].concat(types);\n\t        bodyTypeOfValue.getActualField().setOptions(types);\n\t    }\n\t    var responseSection = UI.section(\"\");\n\t    responseSection.addChild(UI.h3(\"Body\"));\n\t    responseSection.addChild(bodyTypeSelect);\n\t    responseSection.addChild(bodyTypeOfValue);\n\t    responseSection.addChild(UI.h3(\"Response\"));\n\t    responseSection.addChild(responseSelect);\n\t    responseSection.addChild(cdescLabel);\n\t    responseSection.addChild(responseTypeSelect);\n\t    responseSection.addChild(typeOfValue);\n\t    responseSection.ui();\n\t    var panel = UI.section(\"Creating a new method\", UI.Icon.CODE, false, false, methodSelect, mdescLabel, responseSection);\n\t    var __ret = inputState.typeValues;\n\t    //panel.addChild(typeOfValue)\n\t    var savedResolve;\n\t    var savedReject;\n\t    var resultPromise = new Promise(function (resolve, reject) {\n\t        savedResolve = resolve;\n\t        savedReject = reject;\n\t    });\n\t    _dialog(panel, function () {\n\t        savedResolve({\n\t            method: method,\n\t            realBodyType: realBodyType,\n\t            code: code,\n\t            bodyTypeString: bodyTypeString,\n\t            bodyType: bodyType,\n\t            actualType: actualType,\n\t            isSchema: isSchema\n\t        });\n\t        return true;\n\t    })(this);\n\t    return resultPromise;\n\t}\n\texports.newMethod = newMethod;\n\tfunction run(inputState) {\n\t    return newMethod(inputState);\n\t}\n\texports.run = run;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL25ld01ldGhvZC91aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQTRDQSxJQUFJLGFBQWEsR0FBd0IsRUFBRSxDQUFDO0FBQzVDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQztBQUVmLGlCQUFpQixLQUF3QixFQUFFLE1BQXFCLEVBQUUsT0FBaUMsRUFBRSxPQUF3QjtJQUF4Qix3QkFBQSxFQUFBLGVBQXdCO0lBQ3pILE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQ25CLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBSSxTQUFTLEVBQUMsSUFBSSxFQUFLLFNBQVMsRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFVLE1BQU0sRUFBRSxNQUFNLEVBQUU7UUFDbkcsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFJLFNBQVMsRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFLLE1BQU0sRUFBRSxjQUFJLE9BQUEsSUFBSSxFQUFKLENBQUksRUFBRTtLQUN6RixFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBRUQsa0JBQWtCLEtBQXdCLEVBQUUsT0FBNkcsRUFBRSxPQUFpQyxFQUFFLE9BQXdCO0lBQXhCLHdCQUFBLEVBQUEsZUFBd0I7SUFDbE4sSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQUEsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFBLENBQUMsSUFBSyxFQUFF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QUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRVQsTUFBTSxDQUFDLGFBQWEsQ0FBQztBQUN6QixDQUFDO0FBdklELDhCQXVJQztBQUVELGFBQW9CLFVBQWtDO0lBQ2xELE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDakMsQ0FBQztBQUZELGtCQUVDIiwiZmlsZSI6InNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL25ld01ldGhvZC91aS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IGxpYlVJTW9kdWxlID0gcmVxdWlyZShcImF0b20tdWktbGliXCIpXG5cbi8qKlxuICogdWktbGlicyBpbnN0YW5jZVxuICovXG5kZWNsYXJlIGxldCBVSSA6IHR5cGVvZiBsaWJVSU1vZHVsZVxuXG4vKipcbiAqIElERSBVSSBpbnN0YW5jZVxuICovXG5kZWNsYXJlIGxldCBJREU6IGFueTtcblxuLyoqXG4gKiBJbnB1dCBVSSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTmV3TWV0aG9kSW5wdXRVSVN0YXRlIHtcblxuICAgIC8qKlxuICAgICAqIE1hcCBmcm9tIG1ldGhvZCBuYW1lIHRvIG1ldGhvZCBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBtZXRob2REZXNjcmlwdGlvbnM6IHtbbWV0aG9kTmFtZTogc3RyaW5nXSA6IHN0cmluZ307XG5cbiAgICAvKipcbiAgICAgKiBNYXAgZnJvbSBzdGF0dXMgY29kZSBuYW1lIHRvIGNvZGUgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgc3RhdHVzQ29kZURlc2NyaXB0aW9uczoge1tzdGF0dXNDb2RlTmFtZTogc3RyaW5nXSA6IHN0cmluZ307XG5cbiAgICB0eXBlVmFsdWVzOiB7aXNTY2hlbWE6IGJvb2xlYW4sIHR5cGVzOiBzdHJpbmdbXX1cbn1cblxuLyoqXG4gKiBPdXRwdXQgVUkgc3RhdGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU5ld01ldGhvZE91dHB1dFVJU3RhdGUge1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHJlYWxCb2R5VHlwZTogc3RyaW5nXG4gICAgY29kZTogc3RyaW5nO1xuICAgIGJvZHlUeXBlU3RyaW5nOiBzdHJpbmc7XG4gICAgYm9keVR5cGU6IHN0cmluZztcbiAgICBhY3R1YWxUeXBlOiBzdHJpbmc7XG4gICAgaXNTY2hlbWE6IHN0cmluZztcbn1cblxudmFyIF9kaWFsb2dQYW5lbHM6IGxpYlVJTW9kdWxlLlBhbmVsW10gPSBbXTtcbnZhciBtZHAgPSBudWxsO1xuXG5mdW5jdGlvbiBfZGlhbG9nKHBhbmVsOiBsaWJVSU1vZHVsZS5QYW5lbCwgb25Eb25lOiAoKSA9PiBib29sZWFuLCB0b0ZvY3VzPzogbGliVUlNb2R1bGUuVUlDb21wb25lbnQsIHN0cmV0Y2g6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHJldHVybiBfZGlhbG9nMihwYW5lbCwgW1xuICAgICAgICB7IG5hbWU6IFwiT2tcIiwgICBpc1ByaW1hcnk6dHJ1ZSwgICAgaGlnaGxpZ2h0OiBVSS5CdXR0b25IaWdobGlnaHRzLlBSSU1BUlksICAgICAgICAgYWN0aW9uOiBvbkRvbmUgfSxcbiAgICAgICAgeyBuYW1lOiBcIkNhbmNlbFwiLCAgIGhpZ2hsaWdodDogVUkuQnV0dG9uSGlnaGxpZ2h0cy5OT19ISUdITElHSFQsICAgIGFjdGlvbjogKCk9PnRydWUgfVxuICAgIF0sIHRvRm9jdXMsIHN0cmV0Y2gpO1xufVxuXG5mdW5jdGlvbiBfZGlhbG9nMihwYW5lbDogbGliVUlNb2R1bGUuUGFuZWwsIGFjdGlvbnM6IHsgbmFtZTogc3RyaW5nOyBpc1ByaW1hcnk/OmJvb2xlYW47aGlnaGxpZ2h0OiBsaWJVSU1vZHVsZS5CdXR0b25IaWdobGlnaHRzOyBhY3Rpb246ICgpID0+IGJvb2xlYW59W10sIHRvRm9jdXM/OiBsaWJVSU1vZHVsZS5VSUNvbXBvbmVudCwgc3RyZXRjaDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdmFyIGJ1dHRvbkJhciA9IFVJLmhjKCkuc2V0UGVyY2VudFdpZHRoKDEwMCk7XG5cbiAgICBhY3Rpb25zLnJldmVyc2UoKS5mb3JFYWNoKGEgPT4ge1xuICAgICAgICB2YXIgYnV0dG9uID0gVUkuYnV0dG9uKGEubmFtZSwgVUkuQnV0dG9uU2l6ZXMuTk9STUFMLCBhLmhpZ2hsaWdodCwgVUkuSWNvbi5OT05FLCB4PT4geyBpZiAoYS5hY3Rpb24oKSkgX2Nsb3NlRGlhbG9nKCk7IH0pO1xuICAgICAgICBpZiAoYS5pc1ByaW1hcnkpe1xuICAgICAgICAgICAgdmFyIHN0PXBhbmVsLmdldEJpbmRpbmcoKS5zdGF0dXMoKTtcbiAgICAgICAgICAgIGlmIChzdCkge1xuICAgICAgICAgICAgICAgIGlmIChzdC5jb2RlID09IFVJLlN0YXR1c0NvZGUuRVJST1IpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhbmVsLmdldEJpbmRpbmcoKS5hZGRTdGF0dXNMaXN0ZW5lcigoeCk9PntcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSBwYW5lbC5nZXRCaW5kaW5nKCkuc3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdC5jb2RlICE9IFVJLlN0YXR1c0NvZGUuRVJST1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbi5zZXRTdHlsZShcImZsb2F0XCIsIFwicmlnaHRcIilcbiAgICAgICAgICAgIC5tYXJnaW4oNCwxMCk7XG5cbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKGJ1dHRvbik7XG4gICAgfSk7XG5cbiAgICBwYW5lbC5hZGRDaGlsZChidXR0b25CYXIpO1xuXG4gICAgdmFyIHVpID0gcGFuZWwudWkoKTtcblxuICAgIHJldHVybiAoZSkgPT4ge1xuICAgICAgICBfZGlhbG9nUGFuZWxzLnB1c2gocGFuZWwpO1xuXG4gICAgICAgIHZhciBldmVudExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYoIXN0cmV0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB1aS5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGlmKCFwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCk7XG5cbiAgICAgICAgICAgIFtcInBhZGRpbmdCb3R0b21cIiwgXCJwYWRkaW5nVG9wXCIsIFwibWFyZ2luQm90dG9tXCIsIFwibWFyZ2luVG9wXCJdLmZvckVhY2gocHJvcGVydHkgPT4ge1xuICAgICAgICAgICAgICAgIGhlaWdodCAtPSBwYXJzZUZsb2F0KHN0eWxlW3Byb3BlcnR5XSB8fCAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB1aS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB1aS5zdHlsZS5vdmVyZmxvd1kgPSBcInNjcm9sbFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50TGlzdGVuZXIpO1xuXG4gICAgICAgIG1kcCA9ICg8YW55PklERSkud29ya3NwYWNlLmFkZE1vZGFsUGFuZWwoeyBpdGVtOiB1aX0pO1xuXG4gICAgICAgIG1kcC5vbkRpZERlc3Ryb3koKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBldmVudExpc3RlbmVyKCk7XG5cbiAgICAgICAgaWYgKHRvRm9jdXMpIHRvRm9jdXMudWkoKS5mb2N1cygpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9jbG9zZURpYWxvZygpIHtcbiAgICBfZGlhbG9nUGFuZWxzLnBvcCgpO1xuICAgIGlmIChfZGlhbG9nUGFuZWxzLmxlbmd0aCA9PSAwKVxuICAgICAgICBtZHAuZGVzdHJveSgpO1xuICAgIGVsc2VcbiAgICAgICAgbWRwID0gSURFLndvcmtzcGFjZS5hZGRNb2RhbFBhbmVsKHtpdGVtOiBfZGlhbG9nUGFuZWxzW19kaWFsb2dQYW5lbHMubGVuZ3RoIC0xXS51aSgpIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3TWV0aG9kKGlucHV0U3RhdGU6IElOZXdNZXRob2RJbnB1dFVJU3RhdGUsIG1ldGhvZD86IHN0cmluZykge1xuXG4gICAgdmFyIG1kZXNjID0gaW5wdXRTdGF0ZS5tZXRob2REZXNjcmlwdGlvbnNcbiAgICB2YXIgY2Rlc2MgPSBpbnB1dFN0YXRlLnN0YXR1c0NvZGVEZXNjcmlwdGlvbnM7XG5cblxuICAgIHZhciBOT19SRVNQT05DRSA9IFwiTm8gcmVzcG9uc2VcIjtcbiAgICB2YXIgTk9fUkVTUE9OQ0VfQlQgPSBcIk5vIHJlc3BvbnNlIGJvZHkgdHlwZVwiO1xuICAgIHZhciBjb2RlID0gbnVsbCwgYm9keVR5cGUgPSBudWxsO1xuICAgIGlmIChtZXRob2QgPT0gbnVsbCkgbWV0aG9kID0gXCJnZXRcIjtcblxuXG4gICAgdmFyIG1kZXNjTGFiZWwgPSBuZXcgVUkuTGFiZWxGaWVsZCgpO1xuICAgIHZhciBjZGVzY0xhYmVsID0gbmV3IFVJLkxhYmVsRmllbGQoKTtcblxuICAgIFttZGVzY0xhYmVsLCBjZGVzY0xhYmVsXS5mb3JFYWNoKHg9PnguYWRkQ2xhc3MoJ3dpemFyZC1kZXNjcmlwdGlvbicpKTtcblxuICAgIG1kZXNjTGFiZWwuZ2V0QWN0dWFsRmllbGQoKS5tYXJnaW4oMCwgMCwgMTgsIDgpO1xuICAgIGNkZXNjTGFiZWwuZ2V0QWN0dWFsRmllbGQoKS5tYXJnaW4oMCwgMCwgOCwgOCk7XG5cblxuICAgIHZhciBtZXRob2RTZWxlY3QgPSBuZXcgVUkuU2VsZWN0RmllbGQoXCJNZXRob2Q6XCIsIChlLCB2KSA9PiB7XG4gICAgICAgIG1ldGhvZCA9IHZcbiAgICAgICAgbWRlc2NMYWJlbC5zZXRUZXh0KGBNZXRob2QgJHt2fSAke21kZXNjW3ZdfWApO1xuICAgIH0sIG51bGwpO1xuICAgIG1ldGhvZFNlbGVjdC5nZXRBY3R1YWxGaWVsZCgpLnNldE9wdGlvbnMoT2JqZWN0LmtleXMobWRlc2MpKTtcbiAgICBtZXRob2RTZWxlY3QuZ2V0QWN0dWFsRmllbGQoKS5zZXRWYWx1ZShtZXRob2QsIHRydWUpO1xuXG4gICAgdmFyIHJlc3BvbnNlU2VsZWN0ID0gbmV3IFVJLlNlbGVjdEZpZWxkKFwiU3RhdHVzIGNvZGU6XCIsIChlLCB2KSA9PiB7XG4gICAgICAgIGlmICh2ID09IE5PX1JFU1BPTkNFKSB7XG4gICAgICAgICAgICB2ID0gbnVsbDtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZVNlbGVjdC5nZXRBY3R1YWxGaWVsZCgpLnNldFZhbHVlKE5PX1JFU1BPTkNFX0JUKTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlID0gdjtcbiAgICAgICAgcmVzcG9uc2VUeXBlU2VsZWN0LnNldERpc2FibGVkKHYgPT0gbnVsbCk7XG4gICAgICAgIGNkZXNjTGFiZWwuc2V0VGV4dCh2ID8gYFN0YXR1cyBjb2RlICR7dn0gJHtjZGVzY1t2XX1gIDogJycpO1xuICAgIH0sIG51bGwpO1xuICAgIHJlc3BvbnNlU2VsZWN0LmdldEFjdHVhbEZpZWxkKCkuc2V0T3B0aW9ucyhbTk9fUkVTUE9OQ0VdLmNvbmNhdChPYmplY3Qua2V5cyhjZGVzYykpKTtcblxuICAgIHZhciByZXNwb25zZVR5cGVTZWxlY3QgPSBuZXcgVUkuU2VsZWN0RmllbGQoXCJHZW5lcmF0ZSBkZWZhdWx0IHJlc3BvbnNlIHdpdGggbWVkaWEgdHlwZTpcIiwgKGUsIHYpID0+IHtcbiAgICAgICAgaWYgKHYgPT0gTk9fUkVTUE9OQ0VfQlQpIHtcbiAgICAgICAgICAgIHYgPSBudWxsO1xuICAgICAgICAgICAgdHlwZU9mVmFsdWUuc2V0RGlzYWJsZWQodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHR5cGVPZlZhbHVlLnNldERpc2FibGVkKGZhbHNlKVxuICAgICAgICBib2R5VHlwZSA9IHY7XG4gICAgfSwgbnVsbCk7XG4gICAgcmVzcG9uc2VUeXBlU2VsZWN0LmdldEFjdHVhbEZpZWxkKCkuc2V0T3B0aW9ucyhbTk9fUkVTUE9OQ0VfQlQsIFwiYXBwbGljYXRpb24vanNvblwiLCBcImFwcGxpY2F0aW9uL3htbFwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXSk7XG4gICAgcmVzcG9uc2VUeXBlU2VsZWN0LnNldERpc2FibGVkKHRydWUpO1xuICAgIHJlc3BvbnNlVHlwZVNlbGVjdC5tYXJnaW4oMCwgMCwgMCwgMTIpO1xuXG5cbiAgICB2YXIgcmVhbEJvZHlUeXBlPW51bGxcbiAgICB2YXIgYm9keVR5cGVTZWxlY3QgPSBuZXcgVUkuU2VsZWN0RmllbGQoXCJHZW5lcmF0ZSBkZWZhdWx0IGJvZHkgd2l0aCBtZWRpYSB0eXBlOlwiLCAoZSwgdikgPT4ge1xuICAgICAgICBpZiAodiA9PSBOT19SRVNQT05DRV9CVCkge1xuICAgICAgICAgICAgdiA9IG51bGw7XG4gICAgICAgICAgICBib2R5VHlwZU9mVmFsdWUuc2V0RGlzYWJsZWQodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGJvZHlUeXBlT2ZWYWx1ZS5zZXREaXNhYmxlZChmYWxzZSlcbiAgICAgICAgcmVhbEJvZHlUeXBlID0gdjtcbiAgICB9LCBudWxsKTtcbiAgICBib2R5VHlwZVNlbGVjdC5nZXRBY3R1YWxGaWVsZCgpLnNldE9wdGlvbnMoW05PX1JFU1BPTkNFX0JULCBcImFwcGxpY2F0aW9uL2pzb25cIiwgXCJhcHBsaWNhdGlvbi94bWxcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIl0pO1xuICAgIGJvZHlUeXBlU2VsZWN0Lm1hcmdpbigwLCAwLCAwLCAxMik7XG5cbiAgICB2YXIgYWN0dWFsVHlwZTpzdHJpbmcgPSBudWxsO1xuICAgIHZhciBib2R5VHlwZVN0cmluZzogc3RyaW5nPW51bGw7XG4gICAgdmFyIHR5cGVPZlZhbHVlID0gbmV3IFVJLlNlbGVjdEZpZWxkKFwiR2VuZXJhdGUgZGVmYXVsdCByZXNwb25zZSBib2R5IHdpdGggdHlwZTpcIiwgKGUsIHYpID0+IHtcbiAgICAgICAgaWYgKHYgPT0gTk9fUkVTUE9OQ0VfQlQpIHYgPSBudWxsO1xuICAgICAgICBhY3R1YWxUeXBlID0gdjtcbiAgICB9LCBudWxsKTtcbiAgICB0eXBlT2ZWYWx1ZS5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICB0eXBlT2ZWYWx1ZS5tYXJnaW4oMCwgMCwgMCwgMTIpO1xuICAgIHZhciBfX3JldD0gaW5wdXRTdGF0ZS50eXBlVmFsdWVzO1xuICAgIHZhciBpc1NjaGVtYSA9IF9fcmV0LmlzU2NoZW1hO1xuICAgIHZhciB0eXBlcyA9IF9fcmV0LnR5cGVzO1xuICAgIGlmICh0eXBlcykge1xuICAgICAgICB0eXBlcyA9IFtcIlwiXS5jb25jYXQodHlwZXMpO1xuICAgICAgICB0eXBlT2ZWYWx1ZS5nZXRBY3R1YWxGaWVsZCgpLnNldE9wdGlvbnModHlwZXMpO1xuICAgIH1cbiAgICB2YXIgYm9keVR5cGVPZlZhbHVlID0gbmV3IFVJLlNlbGVjdEZpZWxkKFwiR2VuZXJhdGUgZGVmYXVsdCBib2R5IHdpdGggdHlwZTpcIiwgKGUsIHYpID0+IHtcbiAgICAgICAgaWYgKHYgPT0gTk9fUkVTUE9OQ0VfQlQpIHYgPSBudWxsO1xuICAgICAgICBib2R5VHlwZVN0cmluZyA9IHY7XG4gICAgfSwgbnVsbCk7XG4gICAgYm9keVR5cGVPZlZhbHVlLnNldERpc2FibGVkKHRydWUpO1xuICAgIGJvZHlUeXBlT2ZWYWx1ZS5tYXJnaW4oMCwgMCwgMCwgMTIpO1xuICAgIHZhciBpc1NjaGVtYSA9IF9fcmV0LmlzU2NoZW1hO1xuICAgIHZhciB0eXBlcyA9IF9fcmV0LnR5cGVzO1xuICAgIGlmICh0eXBlcykge1xuICAgICAgICB0eXBlcyA9IFtcIlwiXS5jb25jYXQodHlwZXMpO1xuICAgICAgICBib2R5VHlwZU9mVmFsdWUuZ2V0QWN0dWFsRmllbGQoKS5zZXRPcHRpb25zKHR5cGVzKTtcbiAgICB9XG4gICAgdmFyIHJlc3BvbnNlU2VjdGlvbiA9IFVJLnNlY3Rpb24oXCJcIik7XG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKFVJLmgzKFwiQm9keVwiKSlcbiAgICByZXNwb25zZVNlY3Rpb24uYWRkQ2hpbGQoYm9keVR5cGVTZWxlY3QpO1xuICAgIHJlc3BvbnNlU2VjdGlvbi5hZGRDaGlsZChib2R5VHlwZU9mVmFsdWUpXG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKFVJLmgzKFwiUmVzcG9uc2VcIikpXG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKHJlc3BvbnNlU2VsZWN0KTtcbiAgICByZXNwb25zZVNlY3Rpb24uYWRkQ2hpbGQoY2Rlc2NMYWJlbCk7XG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKHJlc3BvbnNlVHlwZVNlbGVjdCk7XG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKHR5cGVPZlZhbHVlKTtcbiAgICByZXNwb25zZVNlY3Rpb24udWkoKTtcbiAgICB2YXIgcGFuZWwgPSBVSS5zZWN0aW9uKFwiQ3JlYXRpbmcgYSBuZXcgbWV0aG9kXCIsIFVJLkljb24uQ09ERSwgZmFsc2UsIGZhbHNlLFxuICAgICAgICBtZXRob2RTZWxlY3QsIG1kZXNjTGFiZWwsIHJlc3BvbnNlU2VjdGlvblxuICAgICk7XG5cblxuICAgIHZhciBfX3JldCA9IGlucHV0U3RhdGUudHlwZVZhbHVlcztcblxuICAgIC8vcGFuZWwuYWRkQ2hpbGQodHlwZU9mVmFsdWUpXG5cbiAgICB2YXIgc2F2ZWRSZXNvbHZlO1xuICAgIHZhciBzYXZlZFJlamVjdDtcblxuICAgIGNvbnN0IHJlc3VsdFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlPzogSU5ld01ldGhvZE91dHB1dFVJU3RhdGUpID0+IHZvaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdDogKGVycm9yPzogYW55KSA9PiB2b2lkKSA9PiB7XG5cbiAgICAgICAgc2F2ZWRSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgc2F2ZWRSZWplY3QgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICBfZGlhbG9nKHBhbmVsLCAoKT0+IHtcbiAgICAgICAgc2F2ZWRSZXNvbHZlKHtcbiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgcmVhbEJvZHlUeXBlOiByZWFsQm9keVR5cGUsXG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgYm9keVR5cGVTdHJpbmc6IGJvZHlUeXBlU3RyaW5nLFxuICAgICAgICAgICAgYm9keVR5cGU6IGJvZHlUeXBlLFxuICAgICAgICAgICAgYWN0dWFsVHlwZTogYWN0dWFsVHlwZSxcbiAgICAgICAgICAgIGlzU2NoZW1hOiBpc1NjaGVtYVxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pKHRoaXMpO1xuXG4gICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBydW4oaW5wdXRTdGF0ZTogSU5ld01ldGhvZElucHV0VUlTdGF0ZSkgOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXdNZXRob2QoaW5wdXRTdGF0ZSk7XG59Il19\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tfunction run(initialState) {\n\t    if (initialState.isParentNull) {\n\t        return Promise.resolve({\n\t            canceled: true\n\t        });\n\t    }\n\t    var changes = {};\n\t    var item = UIBuilder.buildItem(initialState.detailsTree, {\n\t        uri: \"localchanges\",\n\t        position: -1,\n\t        reconciler: {\n\t            schedule: function (runnable) { return runnable.run(); }\n\t        },\n\t        localModel: changes\n\t    });\n\t    item.setTitle(initialState.title);\n\t    var panel = item.render({\n\t        showDescription: true\n\t    });\n\t    panel.margin(8, 8, 8, 8);\n\t    return new Promise(function (resolve) {\n\t        UI.simpleModalDialog(panel, function () {\n\t            resolve(changes);\n\t            return true;\n\t        }, function () {\n\t            resolve({\n\t                canceled: true\n\t            });\n\t            return true;\n\t        });\n\t    });\n\t}\n\texports.run = run;\n\t\n\t//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL3NpbXBsZUFjdGlvbi91aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU1BLGFBQW9CLFlBQVk7SUFDNUIsRUFBRSxDQUFBLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7WUFDbkIsUUFBUSxFQUFFLElBQUk7U0FDakIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELElBQUksT0FBTyxHQUFRLEVBQUUsQ0FBQztJQUV0QixJQUFJLElBQUksR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUU7UUFDckQsR0FBRyxFQUFFLGNBQWM7UUFDbkIsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUNaLFVBQVUsRUFBRTtZQUNSLFFBQVEsRUFBRSxVQUFBLFFBQVEsSUFBSSxPQUFBLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBZCxDQUFjO1NBQ3ZDO1FBQ0QsVUFBVSxFQUFFLE9BQU87S0FDdEIsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFbEMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNwQixlQUFlLEVBQUUsSUFBSTtLQUN4QixDQUFDLENBQUM7SUFFSCxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXpCLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU87UUFDdkIsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRTtZQUN4QixPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFakIsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDLEVBQUU7WUFDQyxPQUFPLENBQUM7Z0JBQ0osUUFBUSxFQUFFLElBQUk7YUFDakIsQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQXZDRCxrQkF1Q0MiLCJmaWxlIjoic3JjL2F0b20vY29udGV4dC1tZW51L2FjdGlvbnMvc2ltcGxlQWN0aW9uL3VpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxpYlVJTW9kdWxlID0gcmVxdWlyZShcImF0b20tdWktbGliXCIpXG5cbmRlY2xhcmUgbGV0IFVJOiBhbnk7XG5kZWNsYXJlIGxldCBJREU6IGFueTtcbmRlY2xhcmUgbGV0IFVJQnVpbGRlcjogYW55O1xuXG5leHBvcnQgZnVuY3Rpb24gcnVuKGluaXRpYWxTdGF0ZSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYoaW5pdGlhbFN0YXRlLmlzUGFyZW50TnVsbCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGNhbmNlbGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB2YXIgY2hhbmdlczogYW55ID0ge307XG5cbiAgICB2YXIgaXRlbSA9IFVJQnVpbGRlci5idWlsZEl0ZW0oaW5pdGlhbFN0YXRlLmRldGFpbHNUcmVlLCB7XG4gICAgICAgIHVyaTogXCJsb2NhbGNoYW5nZXNcIixcbiAgICAgICAgcG9zaXRpb246IC0xLFxuICAgICAgICByZWNvbmNpbGVyOiB7XG4gICAgICAgICAgICBzY2hlZHVsZTogcnVubmFibGUgPT4gcnVubmFibGUucnVuKClcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYWxNb2RlbDogY2hhbmdlc1xuICAgIH0pO1xuXG4gICAgaXRlbS5zZXRUaXRsZShpbml0aWFsU3RhdGUudGl0bGUpO1xuXG4gICAgdmFyIHBhbmVsID0gaXRlbS5yZW5kZXIoe1xuICAgICAgICBzaG93RGVzY3JpcHRpb246IHRydWVcbiAgICB9KTtcblxuICAgIHBhbmVsLm1hcmdpbig4LCA4LCA4LCA4KTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBVSS5zaW1wbGVNb2RhbERpYWxvZyhwYW5lbCwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShjaGFuZ2VzKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGNhbmNlbGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSJdfQ==\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"atom-package-deps\");\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2bdb529e7aa78df1527a","\"use strict\";\n/// <reference path=\"../../typings/main.d.ts\" />\nvar editorTools = require(\"./editor-tools/editor-tools\");\nvar quickCommands = require(\"./quick-commands/quick-commands\");\nvar provider = require(\"./suggestion/provider\");\nvar decl = require(\"./dialogs/assist-utils\");\nvar linterUI = require(\"./core/linter-ui\");\nvar patchElements = require(\"./core/patchElements\");\nvar CompositeDisposable = require('atom').CompositeDisposable;\n// import sharedASTInitializer = require(\"./shared-ast-initializer\")\nvar commandManager = require(\"./quick-commands/command-manager\");\nvar contextMenu = require(\"./context-menu/contextMenu\");\n// import quickFixActions = require(\"./context-menu/quickFix\")\n// import actions = require(\"./context-menu/actions\")\nvar contextMenuImpl = require(\"./context-menu/contextMenuImpl\");\nvar package_entry_point;\n(function (package_entry_point) {\n    var subscriptions = new CompositeDisposable();\n    function activate(state) {\n        require('atom-package-deps').install('api-workbench', true)\n            .then(function () {\n            subscriptions.add(atom.commands.add('atom-workspace', {\n                /*'api-workbench:popular-apis': apiList.showPopularApis,*/\n                'api-workbench:editor-tools': editorTools.initEditorTools,\n                /*'api-workbench:console': Console.toggle,*/\n                'api-workbench:go-to-definition': decl.gotoDeclaration,\n                'api-workbench:find-usages': decl.findUsages,\n                /*'api-workbench:quick-outline':quickOutline.show,\n                'api-workbench:quick-commands': quickCommands.showCommands,*/\n                'api-workbench:rename': decl.renameRAMLElement,\n                'api-workbench:new-project': decl.newProject,\n            }));\n            //subscriptions.add(atom.workspace.addOpener(Console.opener))\n            ////subscriptions.add(atom.workspace.addOpener(RamlScriptReport.opener))\n            patchElements.doPatch();\n            commandManager.initialize();\n            contextMenu.initialize();\n            // sharedASTInitializer.initialize()\n            quickCommands.registerCommands();\n            // quickFixActions.initialize()\n            // actions.register();\n            editorTools.initEditorTools();\n            contextMenuImpl.initializeActionBasedMenu('atom-text-editor[data-grammar=\"source raml\"],.raml-outline');\n        });\n    }\n    package_entry_point.activate = activate;\n    function getProvider() {\n        return provider;\n    }\n    package_entry_point.getProvider = getProvider;\n    function provideLinter() {\n        return linterUI;\n    }\n    package_entry_point.provideLinter = provideLinter;\n    function consumeLinter(linterApi) {\n        subscriptions.add(linterUI.initEditorObservers(linterApi));\n    }\n    package_entry_point.consumeLinter = consumeLinter;\n    function deactivate() {\n        subscriptions.dispose();\n    }\n    package_entry_point.deactivate = deactivate;\n    package_entry_point.config = {\n        grammars: {\n            type: 'array',\n            default: [\n                'source.raml'\n            ]\n        },\n        openConsoleInSplitPane: {\n            type: 'boolean',\n            default: true\n        }\n    };\n})(package_entry_point || (package_entry_point = {}));\nmodule.exports = package_entry_point;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLGdEQUFnRDtBQUtoRCx5REFBeUQ7QUFDekQsK0RBQWlFO0FBQ2pFLGdEQUFnRDtBQUVoRCw2Q0FBNkM7QUFDN0MsMkNBQTJDO0FBQzNDLG9EQUFvRDtBQUNwRCxJQUFJLG1CQUFtQixHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQztBQUM5RCxvRUFBb0U7QUFDcEUsaUVBQW1FO0FBQ25FLHdEQUEwRDtBQUMxRCw4REFBOEQ7QUFDOUQscURBQXFEO0FBQ3JELGdFQUFrRTtBQUVsRSxJQUFPLG1CQUFtQixDQXFFekI7QUFyRUQsV0FBTyxtQkFBbUI7SUFFdEIsSUFBSSxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsRUFBRSxDQUFBO0lBRTdDLGtCQUEwQixLQUFLO1FBQzNCLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDO2FBQ3RELElBQUksQ0FBQztZQUNGLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2xELDBEQUEwRDtnQkFDMUQsNEJBQTRCLEVBQUMsV0FBVyxDQUFDLGVBQWU7Z0JBQ3hELDRDQUE0QztnQkFDNUMsZ0NBQWdDLEVBQUMsSUFBSSxDQUFDLGVBQWU7Z0JBQ3JELDJCQUEyQixFQUFDLElBQUksQ0FBQyxVQUFVO2dCQUMzQzs2RUFDNkQ7Z0JBQzdELHNCQUFzQixFQUFDLElBQUksQ0FBQyxpQkFBaUI7Z0JBQzdDLDJCQUEyQixFQUFDLElBQUksQ0FBQyxVQUFVO2FBRzlDLENBQUMsQ0FBQyxDQUFBO1lBRUgsNkRBQTZEO1lBQzdELHdFQUF3RTtZQUV4RSxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFeEIsY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUFBO1lBQzNCLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQTtZQUN4QixvQ0FBb0M7WUFFcEMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUE7WUFDaEMsK0JBQStCO1lBQy9CLHNCQUFzQjtZQUV0QixXQUFXLENBQUMsZUFBZSxFQUFFLENBQUE7WUFFN0IsZUFBZSxDQUFDLHlCQUF5QixDQUFDLDREQUE0RCxDQUFDLENBQUE7UUFDM0csQ0FBQyxDQUFDLENBQUE7SUFDVixDQUFDO0lBbENlLDRCQUFRLFdBa0N2QixDQUFBO0lBR0Q7UUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ3BCLENBQUM7SUFGZSwrQkFBVyxjQUUxQixDQUFBO0lBRUQ7UUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ3BCLENBQUM7SUFGZSxpQ0FBYSxnQkFFNUIsQ0FBQTtJQUVELHVCQUE4QixTQUFTO1FBQ25DLGFBQWEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUZlLGlDQUFhLGdCQUU1QixDQUFBO0lBRUQ7UUFDSSxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDM0IsQ0FBQztJQUZlLDhCQUFVLGFBRXpCLENBQUE7SUFFVSwwQkFBTSxHQUFHO1FBQ2hCLFFBQVEsRUFBRTtZQUNOLElBQUksRUFBRSxPQUFPO1lBQ2IsT0FBTyxFQUFFO2dCQUNMLGFBQWE7YUFDaEI7U0FDSjtRQUNELHNCQUFzQixFQUFFO1lBQ3BCLElBQUksRUFBRSxTQUFTO1lBQ2YsT0FBTyxFQUFFLElBQUk7U0FDaEI7S0FDSixDQUFBO0FBQ0wsQ0FBQyxFQXJFTSxtQkFBbUIsS0FBbkIsbUJBQW1CLFFBcUV6QjtBQUNELGlCQUFRLG1CQUFtQixDQUFBIiwiZmlsZSI6InNyYy9hdG9tL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG4vLyBpbXBvcnQgQ29uc29sZSA9IHJlcXVpcmUoJy4vY29uc29sZS9pbmRleCcpO1xuaW1wb3J0IGFwaUxpc3QgPSByZXF1aXJlKCcuL3BvcHVsYXItYXBpcy9wb3B1bGFyLWFwaXMnKTtcbmltcG9ydCBqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcbmltcG9ydCBlZGl0b3JUb29scz1yZXF1aXJlKCcuL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHMnKVxuaW1wb3J0IHF1aWNrQ29tbWFuZHMgPSByZXF1aXJlKCcuL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzJylcbmltcG9ydCBwcm92aWRlcj1yZXF1aXJlKFwiLi9zdWdnZXN0aW9uL3Byb3ZpZGVyXCIpXG5pbXBvcnQgcXVpY2tPdXRsaW5lPXJlcXVpcmUoXCIuL3F1aWNrLW91dGxpbmUvcXVpY2stb3V0bGluZVwiKVxuaW1wb3J0IGRlY2w9cmVxdWlyZShcIi4vZGlhbG9ncy9hc3Npc3QtdXRpbHNcIilcbmltcG9ydCBsaW50ZXJVST1yZXF1aXJlKFwiLi9jb3JlL2xpbnRlci11aVwiKVxuaW1wb3J0IHBhdGNoRWxlbWVudHM9cmVxdWlyZShcIi4vY29yZS9wYXRjaEVsZW1lbnRzXCIpXG52YXIgQ29tcG9zaXRlRGlzcG9zYWJsZSA9IHJlcXVpcmUoJ2F0b20nKS5Db21wb3NpdGVEaXNwb3NhYmxlO1xuLy8gaW1wb3J0IHNoYXJlZEFTVEluaXRpYWxpemVyID0gcmVxdWlyZShcIi4vc2hhcmVkLWFzdC1pbml0aWFsaXplclwiKVxuaW1wb3J0IGNvbW1hbmRNYW5hZ2VyID0gcmVxdWlyZShcIi4vcXVpY2stY29tbWFuZHMvY29tbWFuZC1tYW5hZ2VyXCIpXG5pbXBvcnQgY29udGV4dE1lbnUgPSByZXF1aXJlKFwiLi9jb250ZXh0LW1lbnUvY29udGV4dE1lbnVcIilcbi8vIGltcG9ydCBxdWlja0ZpeEFjdGlvbnMgPSByZXF1aXJlKFwiLi9jb250ZXh0LW1lbnUvcXVpY2tGaXhcIilcbi8vIGltcG9ydCBhY3Rpb25zID0gcmVxdWlyZShcIi4vY29udGV4dC1tZW51L2FjdGlvbnNcIilcbmltcG9ydCBjb250ZXh0TWVudUltcGwgPSByZXF1aXJlKFwiLi9jb250ZXh0LW1lbnUvY29udGV4dE1lbnVJbXBsXCIpXG5cbm1vZHVsZSBwYWNrYWdlX2VudHJ5X3BvaW50IHtcblxuICAgIHZhciBzdWJzY3JpcHRpb25zID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlIChzdGF0ZSkge1xuICAgICAgICByZXF1aXJlKCdhdG9tLXBhY2thZ2UtZGVwcycpLmluc3RhbGwoJ2FwaS13b3JrYmVuY2gnLCB0cnVlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuYWRkKGF0b20uY29tbWFuZHMuYWRkKCdhdG9tLXdvcmtzcGFjZScsIHtcbiAgICAgICAgICAgICAgICAgICAgLyonYXBpLXdvcmtiZW5jaDpwb3B1bGFyLWFwaXMnOiBhcGlMaXN0LnNob3dQb3B1bGFyQXBpcywqL1xuICAgICAgICAgICAgICAgICAgICAnYXBpLXdvcmtiZW5jaDplZGl0b3ItdG9vbHMnOmVkaXRvclRvb2xzLmluaXRFZGl0b3JUb29scyxcbiAgICAgICAgICAgICAgICAgICAgLyonYXBpLXdvcmtiZW5jaDpjb25zb2xlJzogQ29uc29sZS50b2dnbGUsKi9cbiAgICAgICAgICAgICAgICAgICAgJ2FwaS13b3JrYmVuY2g6Z28tdG8tZGVmaW5pdGlvbic6ZGVjbC5nb3RvRGVjbGFyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICdhcGktd29ya2JlbmNoOmZpbmQtdXNhZ2VzJzpkZWNsLmZpbmRVc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIC8qJ2FwaS13b3JrYmVuY2g6cXVpY2stb3V0bGluZSc6cXVpY2tPdXRsaW5lLnNob3csXG4gICAgICAgICAgICAgICAgICAgICdhcGktd29ya2JlbmNoOnF1aWNrLWNvbW1hbmRzJzogcXVpY2tDb21tYW5kcy5zaG93Q29tbWFuZHMsKi9cbiAgICAgICAgICAgICAgICAgICAgJ2FwaS13b3JrYmVuY2g6cmVuYW1lJzpkZWNsLnJlbmFtZVJBTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAnYXBpLXdvcmtiZW5jaDpuZXctcHJvamVjdCc6ZGVjbC5uZXdQcm9qZWN0LFxuICAgICAgICAgICAgICAgICAgICAvKidhcGktd29ya2JlbmNoOnNlbGVjdC1ub2RlJzpkZWNsLnNlbGVjdCwqL1xuICAgICAgICAgICAgICAgICAgICAvKidhcGktd29ya2JlbmNoOnJldmFsaWRhdGUnOmRlY2wucmV2YWxpZGF0ZSovXG4gICAgICAgICAgICAgICAgfSkpXG5cbiAgICAgICAgICAgICAgICAvL3N1YnNjcmlwdGlvbnMuYWRkKGF0b20ud29ya3NwYWNlLmFkZE9wZW5lcihDb25zb2xlLm9wZW5lcikpXG4gICAgICAgICAgICAgICAgLy8vL3N1YnNjcmlwdGlvbnMuYWRkKGF0b20ud29ya3NwYWNlLmFkZE9wZW5lcihSYW1sU2NyaXB0UmVwb3J0Lm9wZW5lcikpXG5cbiAgICAgICAgICAgICAgICBwYXRjaEVsZW1lbnRzLmRvUGF0Y2goKTtcblxuICAgICAgICAgICAgICAgIGNvbW1hbmRNYW5hZ2VyLmluaXRpYWxpemUoKVxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmluaXRpYWxpemUoKVxuICAgICAgICAgICAgICAgIC8vIHNoYXJlZEFTVEluaXRpYWxpemVyLmluaXRpYWxpemUoKVxuXG4gICAgICAgICAgICAgICAgcXVpY2tDb21tYW5kcy5yZWdpc3RlckNvbW1hbmRzKClcbiAgICAgICAgICAgICAgICAvLyBxdWlja0ZpeEFjdGlvbnMuaW5pdGlhbGl6ZSgpXG4gICAgICAgICAgICAgICAgLy8gYWN0aW9ucy5yZWdpc3RlcigpO1xuXG4gICAgICAgICAgICAgICAgZWRpdG9yVG9vbHMuaW5pdEVkaXRvclRvb2xzKClcblxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51SW1wbC5pbml0aWFsaXplQWN0aW9uQmFzZWRNZW51KCdhdG9tLXRleHQtZWRpdG9yW2RhdGEtZ3JhbW1hcj1cInNvdXJjZSByYW1sXCJdLC5yYW1sLW91dGxpbmUnKVxuICAgICAgICAgICAgfSlcbiAgICB9XG5cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlcigpe1xuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVMaW50ZXIoKXtcbiAgICAgICAgcmV0dXJuIGxpbnRlclVJO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjb25zdW1lTGludGVyKGxpbnRlckFwaSkge1xuICAgICAgICBzdWJzY3JpcHRpb25zLmFkZChsaW50ZXJVSS5pbml0RWRpdG9yT2JzZXJ2ZXJzKGxpbnRlckFwaSkpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlKCl7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMuZGlzcG9zZSgpXG4gICAgfVxuXG4gICAgZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgICAgIGdyYW1tYXJzOiB7XG4gICAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgICAgZGVmYXVsdDogW1xuICAgICAgICAgICAgICAgICdzb3VyY2UucmFtbCdcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgb3BlbkNvbnNvbGVJblNwbGl0UGFuZToge1xuICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0ID1wYWNrYWdlX2VudHJ5X3BvaW50XG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/main.js\n// module id = 0\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar path = require(\"path\");\nvar atom = require(\"../core/atomWrapper\");\nvar detailsView = require(\"./details-view\");\nvar outlineView = require(\"./outline-view\");\nvar ramlServer = require(\"raml-language-server\");\nvar markOccurrences = require(\"../core/markOccurences\");\nvar _bmc = 0;\nfunction benchmark(func) {\n    var t0 = new Date().getTime();\n    if (_bmc != 0 && func)\n        console.log(func + \" took \" + (t0 - _bmc) + \" miliseconds.\");\n    _bmc = t0;\n}\nvar EditorManager = /** @class */ (function () {\n    function EditorManager(display) {\n        if (display === void 0) { display = true; }\n        var _this = this;\n        this._initialized = false;\n        this.opened = false;\n        this.updateCount = 0;\n        this.outlineCount = 0;\n        this._cleanOutline = false;\n        this.performanceDebug = true;\n        this.fire = true;\n        this.placeholder = false;\n        manager = window[\"manager\"] = this;\n        this.markOccurrencesReconciler = new ramlServer.Reconciler(ramlServer.getNodeClientConnection(), 200);\n        atom.workspace.onDidChangeActivePaneItem(function (e) { return _this.updateEverything(display); });\n        atom.workspace.observeTextEditors(function (editor) {\n            editor.onDidDestroy(function () {\n                var path = editor.getPath();\n                ramlServer.getNodeClientConnection().documentClosed(path);\n            });\n            editor.onDidChangeCursorPosition(function (event) { return _this.cursorChanged(editor, event.newBufferPosition); });\n        });\n        this.updateEverything(display);\n        this.addAutoCloseListener();\n        this.addListenersForStructure();\n    }\n    EditorManager.prototype.getPath = function () {\n        console.log(\"ETM::GetPath\");\n        return this.currentEditor ? this.currentEditor.getPath() : null;\n    };\n    EditorManager.prototype.getCurrentEditor = function () { return this.currentEditor; };\n    EditorManager.prototype.getCurrentPosition = function () {\n        return this.currentPosition;\n    };\n    EditorManager.prototype.cursorChanged = function (editor, newBufferPosition) {\n        markOccurrences.clearOccurences(editor);\n        this.markOccurrencesReconciler.schedule(new markOccurrences.MarkOccurrenceRunnable(editor, newBufferPosition));\n        var buffer = editor.getBuffer();\n        var pos = buffer.characterIndexForPosition(editor.getCursorBufferPosition());\n        ramlServer.getNodeClientConnection().positionChanged(manager.unitPath, pos);\n        this.currentPosition = pos;\n    };\n    EditorManager.prototype.internalScheduleUpdateViews = function (count) {\n        var _this = this;\n        this.updateCount = count;\n        setTimeout(function () {\n            if (_this.updateCount == count) {\n                _this.updateViews();\n            }\n        }, 500);\n    };\n    EditorManager.prototype.scheduleViewsUpdate = function () {\n        if (this.fire) {\n            this.internalScheduleUpdateViews(this.updateCount + 1);\n        }\n    };\n    EditorManager.prototype.internalScheduleOutlineUpdate = function (count) {\n        var _this = this;\n        this.outlineCount = count;\n        setTimeout(function () {\n            if (_this.outlineCount == count) {\n                _this.updateOutline();\n            }\n        }, 500);\n    };\n    EditorManager.prototype.scheduleOutlineUpdate = function () {\n        this.internalScheduleOutlineUpdate(this.outlineCount + 1);\n    };\n    EditorManager.prototype.addAutoCloseListener = function () {\n        var _this = this;\n        atom.workspace.onDidDestroyPane(function (evt) {\n            try {\n                var edcount = atom.workspace.getPaneItems().filter(function (e) {\n                    return e['softTabs'] != undefined;\n                }).length;\n                if (edcount == 0) {\n                    // this.ast=null;\n                    // this.unit=null;\n                    // this._currentNode=null;\n                    _this.currentEditor = null;\n                    if (global.cleanCache) {\n                        global.cleanCache();\n                    }\n                    if (atom.workspace.paneForItem(_this._view))\n                        atom.workspace.paneForItem(_this._view).destroy();\n                    if (atom.workspace.paneForItem(_this._details))\n                        atom.workspace.paneForItem(_this._details).destroy();\n                    _this.opened = false;\n                }\n            }\n            catch (e) {\n                //TODO REMOVE IT LATER WE NEED TO BE PRETy DEFENSIVE AT THIS MOMENT\n                console.log(e);\n            }\n        });\n    };\n    EditorManager.prototype.getOrCreateView = function () {\n        if (!this._view) {\n            this._view = new outlineView.RamlOutline();\n            if (this.unitPath) {\n                this._view.setUnit(this.unitPath);\n            }\n            // if (this.ast){\n            //     this._view.setUnit(this.ast);\n            // }\n        }\n        return this._view;\n    };\n    EditorManager.prototype.getDetails = function () {\n        if (!EditorManager.DETAILS_SUPPORT)\n            return null;\n        if (!this._details)\n            this._details = new detailsView.RamlDetails();\n        return this._details;\n    };\n    EditorManager.prototype.updateDetails = function () {\n        this.getDetails().update();\n    };\n    EditorManager.prototype.reparseAST = function () {\n        if (this.currentEditor) {\n            var _path = this.currentEditor.getPath();\n            var bf = this.currentEditor.getBuffer();\n            this.unitPath = _path;\n            // var prj = project.createProject(path.dirname(_path));\n            // var unit = prj.setCachedUnitContent(path.basename(_path), this.currentEditor.getBuffer().getText());\n            //\n            // unit.project().addTextChangeListener(delta=>{\n            //     if (delta.unit!=unit){\n            //         return;\n            //     }\n            //     var cm=delta.offset;\n            //     var end=delta.replacementLength;\n            //     var text=delta.text;\n            //     var buffer=(<atom.IBuffer>this.currentEditor.getBuffer());\n            //     var start=buffer.positionForCharacterIndex(cm);\n            //     var endPosition=buffer.positionForCharacterIndex(cm+end);\n            //     try {\n            //         this.fire=false;\n            //         (<any>buffer).setTextInRange({start: start, end: endPosition}, text);\n            //         this.scheduleOutlineUpdate();\n            //     } finally{\n            //         this.fire=true;\n            //     }\n            // });\n            // this.ast = unit.highLevel();\n            // this.unit = unit;\n        }\n    };\n    EditorManager.prototype.isETPane = function (pane) {\n        if (!this._view) {\n            return;\n        }\n        var items = pane.getItems();\n        return ((EditorManager.DETAILS_SUPPORT && items.indexOf(this.getDetails()) >= 0)\n            || items.indexOf(this._view) >= 0);\n    };\n    EditorManager.prototype.display = function () {\n        console.log(\"ETM::Display\");\n        var aw = atom.workspace;\n        var fpane = atom.workspace.paneForItem(this.getCurrentEditor());\n        if (!fpane)\n            return;\n        if (!aw.paneForItem(this.getOrCreateView()))\n            doSplit(this.getOrCreateView());\n        if (EditorManager.DETAILS_SUPPORT) {\n            if (!aw.paneForItem(manager.getDetails()))\n                doSplit(this.getDetails(), SplitDirections.BOTTOM);\n        }\n        this.opened = true;\n    };\n    // updateText(node?: ll.ILowLevelASTNode) {\n    //     this.fire = false;\n    //     var editor = this.currentEditor;\n    //     var pos = node ? editor.getBuffer().positionForCharacterIndex(node.start()) : null;\n    //     editor.setText(this.unit.contents());\n    //     this.fire = true;\n    //     if (pos) (<any>editor).setCursorBufferPosition(pos);\n    // }\n    // selectNode(hnode: hl.IHighLevelNode) {\n    //     var node = hnode.lowLevel();\n    //     if (!node) return;\n    //     var editor = this.currentEditor;\n    //     if (!editor) return;\n    //     var pos = node ? editor.getBuffer().positionForCharacterIndex(node.start()) : null;\n    //     if (pos) (<any>editor).setCursorBufferPosition(pos);\n    // }\n    EditorManager.prototype.setViewsDisplayStyle = function (visible) {\n        if (this._details && this._details.element) {\n            this._details.element.style.display = visible ? null : \"none\";\n        }\n        if (this._view && this._view.element) {\n            this._view.element.style.display = visible ? null : \"none\";\n        }\n    };\n    EditorManager.prototype.isRaml = function (editor) {\n        if (!editor) {\n            return false;\n        }\n        var editorPath = editor.getPath();\n        if (!editorPath) {\n            return false;\n        }\n        var extName = path.extname(editorPath);\n        if (extName !== '.raml') {\n            return false;\n        }\n        return true;\n    };\n    EditorManager.prototype.updateEverything = function (display) {\n        if (display === void 0) { display = true; }\n        var editor = atom.workspace.getActiveTextEditor();\n        if (editor) {\n            this.setViewsDisplayStyle(this.isRaml(editor));\n        }\n        if (!editor || editor == this.currentEditor || !this.isRaml(editor)) {\n            return;\n        }\n        this.currentEditor = editor;\n        if (this.opened == false && display)\n            this.display();\n        //we are not listening to the editor changes any more,\n        //instead we are listening to the reports of the server that something is avilable, like the structure\n        if (!editor.patched) {\n            this.addListenersToEditor(editor);\n        }\n        this.reparseAST();\n        var pos = editor.getBuffer().characterIndexForPosition(editor.getCursorBufferPosition());\n        this.positionUpdated(pos);\n        this.scheduleViewsUpdate();\n    };\n    EditorManager.prototype.addListenersToEditor = function (cedit) {\n        var _this = this;\n        var buffer = cedit.getBuffer();\n        buffer.onDidChange(function (x) {\n            try {\n                //this.reparseAST();\n                var pos = buffer.characterIndexForPosition(cedit.getCursorBufferPosition());\n                _this.positionUpdated(pos);\n                //this.scheduleViewsUpdate();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        });\n        //updating ast node on position change\n        // cedit.getLastCursor().onDidChangePosition(x=> {\n        //     if (!this.fire) return;\n        //     this.positionUpdated(buffer.characterIndexForPosition(cedit.getCursorBufferPosition()));\n        //     this.scheduleViewsUpdate();\n        // });\n        this.addListenersOnMove(cedit);\n        this.currentEditor.patched = true;\n    };\n    EditorManager.prototype.addListenersForStructure = function () {\n        var _this = this;\n        ramlServer.getNodeClientConnection().onStructureReport(function (report) {\n            var categoryNames = [];\n            for (var categoryName in report.structure)\n                categoryNames.push(categoryName);\n            var categoryNamesString = categoryNames.join();\n            ramlServer.getNodeClientConnection().debug(\"Got new structure report with categories \"\n                + categoryNamesString, \"EditorManager\", \"addListenersForStructure\");\n            var editor = atom.workspace.getActiveTextEditor();\n            if (!editor || !_this.isRaml(editor)) {\n                return;\n            }\n            _this.updateOutline();\n        });\n    };\n    EditorManager.prototype.addListenersOnMove = function (cedit) {\n        var _this = this;\n        var movingPane = false;\n        atom.workspace.onDidAddPaneItem(function (event) {\n            if (movingPane || _this.isETPane(event.pane) == false || event.item == _this.getOrCreateView() || (EditorManager.DETAILS_SUPPORT && event.item == _this.getDetails()))\n                return event;\n            setTimeout(function () {\n                try {\n                    var fpane = atom.workspace.paneForItem(cedit);\n                    if (fpane) {\n                        movingPane = true;\n                        event.pane.moveItemToPane(event.item, fpane, null);\n                        movingPane = false;\n                        fpane.setActiveItem(event.item);\n                        fpane.activate();\n                    }\n                }\n                catch (e) {\n                    //TODO REMOVE IT LATER WE NEED TO BE PRETy DEFENSIVE AT THIS MOMENT\n                    console.log(e);\n                }\n            }, 18);\n        });\n    };\n    // _currentNode: hl.IHighLevelNode;\n    // //_selectedNode: hl.IHighLevelNode;\n    // patchCurrentNode(n:hl.IHighLevelNode){\n    //     this._currentNode=n;\n    // }\n    //\n    // getCurrentNode() {\n    //     if (this._currentNode == null) return this._currentNode = this.ast;\n    //     else return this._currentNode;\n    // }\n    // setSelectedNode(node: hl.IHighLevelNode) {\n    //     //this._selectedNode = node;\n    //\n    //     if (this.unit){\n    //         var unitPath=this.unit.absolutePath();\n    //         while (node.lowLevel().unit().absolutePath()!=unitPath){\n    //             if (!node.parent()){\n    //                 break;\n    //             }\n    //             else{\n    //                 node=node.parent();\n    //             }\n    //         }\n    //     }\n    //     var id=node.id();\n    //     var anode=this.ast.findById(id);\n    //     if (anode){\n    //         node=anode;\n    //     }\n    //     if (this._details){\n    //         this._details.show(node);\n    //     }\n    //     var editor = this.getCurrentEditor();\n    //     if (editor) {\n    //         this.fire=false;\n    //         try {\n    //             var buffer = editor.getBuffer();\n    //             var posStart = buffer.positionForCharacterIndex(node.lowLevel().start());\n    //             var posEnd = buffer.positionForCharacterIndex(node.lowLevel().end());\n    //             editor.setCursorBufferPosition(posStart);\n    //             this.positionUpdated(buffer.characterIndexForPosition(editor.getCursorBufferPosition()));\n    //         }finally{\n    //             this.fire=true;\n    //         }\n    //     }\n    // }\n    // getSelectedNode() {\n    //     return this.getCurrentNode()\n    //     //else return this._selectedNode;\n    // }\n    EditorManager.prototype.setText = function (text) {\n        console.log(\"ETM::SetText\");\n        var editor = this.currentEditor;\n        if (editor == null)\n            return;\n        editor.setText(text);\n    };\n    EditorManager.prototype.isFromEdgeRow = function () {\n        var editor = this.getCurrentEditor();\n        if (!editor) {\n            return false;\n        }\n        var currentPosition = editor.getCursorBufferPosition();\n        if (!currentPosition) {\n            return false;\n        }\n        var currentRow = currentPosition.row;\n        var previousRow = editor.previousRow;\n        editor.previousRow = currentRow;\n        if (previousRow === undefined) {\n            return false;\n        }\n        if (previousRow === currentRow) {\n            return false;\n        }\n        if (previousRow === editor.getBuffer().getLastRow() || previousRow === 0) {\n            return true;\n        }\n    };\n    EditorManager.prototype.updateViews = function () {\n        //var cNode = this.getCurrentNode();\n        var ds = new Date().getMilliseconds();\n        if (EditorManager.DETAILS_SUPPORT && this._details) {\n            this.getDetails().show(manager.unitPath, manager.currentPosition, this.isFromEdgeRow());\n        }\n        if (this._view) {\n            this.getOrCreateView().setUnit(manager.unitPath);\n            // this.getOrCreateView().setUnit(manager.ast);\n            //this.getOrCreateView().setSelection(cNode);\n        }\n        var d1 = new Date().getMilliseconds();\n        if (this.performanceDebug) {\n            console.log(\"Views update:\" + (d1 - ds));\n        }\n    };\n    EditorManager.prototype.updateOutline = function () {\n        ramlServer.getNodeClientConnection().debug(\"Updating outline\", \"EditorManager\", \"updateOutline\");\n        if (this._view) {\n            this.getOrCreateView().setUnit(manager.unitPath);\n        }\n    };\n    EditorManager.prototype.positionUpdated = function (newPosition) {\n        this.currentPosition = newPosition;\n        if (this._details) {\n            ramlServer.getNodeClientConnection().positionChanged(manager.unitPath, this.currentPosition);\n            // this.getDetails().show(manager.unitPath, this.currentPosition, this.isFromEdgeRow());\n        }\n        // if (this.ast){\n        //     this._currentNode=this.ast.findElementAtOffset(this.currentPosition);\n        // }\n    };\n    EditorManager.DETAILS_SUPPORT = true;\n    return EditorManager;\n}());\nvar manager = null;\nfunction initEditorTools(display) {\n    if (display === void 0) { display = true; }\n    if (manager == null)\n        manager = new EditorManager(display);\n    else if (display)\n        manager.display();\n}\nexports.initEditorTools = initEditorTools;\nfunction editorToolsStatus() {\n    return manager != null && manager.opened;\n}\nexports.editorToolsStatus = editorToolsStatus;\nfunction aquireManager() {\n    if (!manager) {\n        manager = new EditorManager(true);\n    }\n    return manager;\n}\nexports.aquireManager = aquireManager;\n// export function updateAndSelect(node:hl.IHighLevelNode){\n//     if (aquireManager()._view) {\n//         aquireManager()._view.refresh();\n//     }\n//     aquireManager().updateText();\n//     aquireManager().selectNode(node);\n// }\nvar SplitDirections;\n(function (SplitDirections) {\n    SplitDirections[SplitDirections[\"RIGHT\"] = 0] = \"RIGHT\";\n    SplitDirections[SplitDirections[\"LEFT\"] = 1] = \"LEFT\";\n    SplitDirections[SplitDirections[\"TOP\"] = 2] = \"TOP\";\n    SplitDirections[SplitDirections[\"BOTTOM\"] = 3] = \"BOTTOM\";\n})(SplitDirections = exports.SplitDirections || (exports.SplitDirections = {}));\nfunction doSplit(value, dir) {\n    if (dir === void 0) { dir = SplitDirections.RIGHT; }\n    var newPane = null;\n    switch (dir) {\n        case SplitDirections.BOTTOM:\n            newPane = atom.workspace.getActivePane().splitDown({});\n            break;\n        case SplitDirections.TOP:\n            newPane = atom.workspace.getActivePane().splitUp({});\n            break;\n        case SplitDirections.LEFT:\n            newPane = atom.workspace.getActivePane().splitLeft({});\n            break;\n        case SplitDirections.RIGHT:\n            newPane = atom.workspace.getActivePane().splitRight({});\n            break;\n    }\n    newPane.addItem(value);\n    return newPane;\n}\nexports.doSplit = doSplit;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBbUQ7QUFDbkQsMkJBQTJCO0FBRzNCLDBDQUE2QztBQU83Qyw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBRTVDLGlEQUFvRDtBQUNwRCx3REFBMEQ7QUFFMUQsSUFBSSxJQUFJLEdBQVksQ0FBQyxDQUFDO0FBQ3RCLG1CQUFtQixJQUFhO0lBQzVCLElBQUksRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDOUIsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsUUFBUSxHQUFHLENBQUMsRUFBRSxHQUFDLElBQUksQ0FBQyxHQUFHLGVBQWUsQ0FBQyxDQUFDO0lBRS9ELElBQUksR0FBRyxFQUFFLENBQUM7QUFDZCxDQUFDO0FBbUJEO0lBdUNJLHVCQUFZLE9BQXVCO1FBQXZCLHdCQUFBLEVBQUEsY0FBdUI7UUFBbkMsaUJBc0JDO1FBL0NPLGlCQUFZLEdBQVksS0FBSyxDQUFDO1FBSXRDLFdBQU0sR0FBWSxLQUFLLENBQUM7UUFJaEIsZ0JBQVcsR0FBUyxDQUFDLENBQUM7UUFFdEIsaUJBQVksR0FBUyxDQUFDLENBQUM7UUFFL0Isa0JBQWEsR0FBQyxLQUFLLENBQUM7UUFFcEIscUJBQWdCLEdBQUMsSUFBSSxDQUFDO1FBOEx0QixTQUFJLEdBQVksSUFBSSxDQUFDO1FBcVJyQixnQkFBVyxHQUFZLEtBQUssQ0FBQztRQXZjekIsT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7UUFFbkMsSUFBSSxDQUFDLHlCQUF5QixHQUFHLElBQUksVUFBVSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsdUJBQXVCLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUV0RyxJQUFJLENB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Q3ZCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUM7UUFDVixLQUFLLGVBQWUsQ0FBQyxHQUFHO1lBQ3BCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNuRCxLQUFLLENBQUM7UUFDVixLQUFLLGVBQWUsQ0FBQyxJQUFJO1lBQ3JCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUM7UUFDVixLQUFLLGVBQWUsQ0FBQyxLQUFLO1lBQ3RCLE9BQU8sR0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0RCxLQUFLLENBQUM7SUFDZCxDQUFDO0lBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUN0QixNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ25CLENBQUM7QUFsQkQsMEJBa0JDIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuaW1wb3J0IHBhdGg9cmVxdWlyZSgncGF0aCcpXG5pbXBvcnQgRGlzcG9zYWJsZSA9IFVJLklEaXNwb3NhYmxlXG5pbXBvcnQgQ29tcG9zaXRlRGlzcG9zYWJsZSA9IFVJLkNvbXBvc2l0ZURpc3Bvc2FibGVcbmltcG9ydCBhdG9tID0gcmVxdWlyZSgnLi4vY29yZS9hdG9tV3JhcHBlcicpO1xuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vLyBpbXBvcnQgaGw9cnAuaGw7XG4vLyBpbXBvcnQgbGw9cnAubGw7XG4vLyBpbXBvcnQgcHJvamVjdD1ycC5wcm9qZWN0O1xuaW1wb3J0IF89cmVxdWlyZShcInVuZGVyc2NvcmVcIilcbmltcG9ydCBwYWlyID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvcGFpclwiKTtcbmltcG9ydCBkZXRhaWxzVmlldz1yZXF1aXJlKFwiLi9kZXRhaWxzLXZpZXdcIilcbmltcG9ydCBvdXRsaW5lVmlldz1yZXF1aXJlKFwiLi9vdXRsaW5lLXZpZXdcIilcbmltcG9ydCBVST1yZXF1aXJlKFwiYXRvbS11aS1saWJcIilcbmltcG9ydCByYW1sU2VydmVyID0gcmVxdWlyZShcInJhbWwtbGFuZ3VhZ2Utc2VydmVyXCIpO1xuaW1wb3J0IG1hcmtPY2N1cnJlbmNlcyA9IHJlcXVpcmUoXCIuLi9jb3JlL21hcmtPY2N1cmVuY2VzXCIpXG5cbnZhciBfYm1jIDogbnVtYmVyID0gMDtcbmZ1bmN0aW9uIGJlbmNobWFyayhmdW5jPzogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIHQwID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgaWYgKF9ibWMgIT0gMCAmJiBmdW5jKVxuICAgICAgICBjb25zb2xlLmxvZyhmdW5jICsgXCIgdG9vayBcIiArICh0MC1fYm1jKSArIFwiIG1pbGlzZWNvbmRzLlwiKTtcblxuICAgIF9ibWMgPSB0MDtcbn1cblxuaW50ZXJmYWNlIFBvaW50IHtcbiAgICByb3c6IG51bWJlcjtcbiAgICBjb2x1bW46IG51bWJlcjtcbn1cbmludGVyZmFjZSBSYW5nZSB7XG4gICAgc3RhcnQ6IFBvaW50O1xuICAgIGVuZDogUG9pbnQ7XG59XG5pbnRlcmZhY2UgSUNoYW5nZUNvbW1hbmQge1xuICAgIG5ld1RleHQ6IHN0cmluZztcbiAgICBvbGRUZXh0OiBzdHJpbmc7XG4gICAgb2xkUmFuZ2U6IFJhbmdlO1xuICAgIG5ld1JhbmdlOiBSYW5nZTtcbn1cblxuXG5cbmNsYXNzIEVkaXRvck1hbmFnZXJ7XG5cbiAgICBwcml2YXRlIGN1cnJlbnRFZGl0b3I6YXRvbS5JVGV4dEVkaXRvcjtcblxuICAgIF92aWV3OiBvdXRsaW5lVmlldy5SYW1sT3V0bGluZTtcbiAgICBfZGV0YWlsczogZGV0YWlsc1ZpZXcuUmFtbERldGFpbHM7XG5cbiAgICAvLyBhc3Q6IGhsLklIaWdoTGV2ZWxOb2RlO1xuICAgIHVuaXRQYXRoIDogc3RyaW5nO1xuICAgIC8vIHVuaXQ6IGxsLklDb21waWxhdGlvblVuaXQ7XG5cbiAgICBjaGFuZ2luZzogYm9vbGVhbjtcbiAgICBleGVjdXRpbmdDb21tYW5kOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIHByaXZhdGUgbWFya09jY3VycmVuY2VzUmVjb25jaWxlcjtcblxuICAgIG9wZW5lZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBjdXJyZW50UG9zaXRpb246IG51bWJlcjtcblxuICAgIHByaXZhdGUgdXBkYXRlQ291bnQ6IG51bWJlcj0wO1xuXG4gICAgcHJpdmF0ZSBvdXRsaW5lQ291bnQ6IG51bWJlcj0wO1xuXG4gICAgX2NsZWFuT3V0bGluZT1mYWxzZTtcblxuICAgIHBlcmZvcm1hbmNlRGVidWc9dHJ1ZTtcblxuICAgIHByaXZhdGUgc3RhdGljIERFVEFJTFNfU1VQUE9SVCA9IHRydWVcblxuICAgIGdldFBhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFVE06OkdldFBhdGhcIik7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRFZGl0b3IgPyB0aGlzLmN1cnJlbnRFZGl0b3IuZ2V0UGF0aCgpIDogbnVsbDtcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50RWRpdG9yKCkgeyByZXR1cm4gdGhpcy5jdXJyZW50RWRpdG9yOyB9XG5cbiAgICBjb25zdHJ1Y3RvcihkaXNwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBtYW5hZ2VyID0gd2luZG93W1wibWFuYWdlclwiXSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5tYXJrT2NjdXJyZW5jZXNSZWNvbmNpbGVyID0gbmV3IHJhbWxTZXJ2ZXIuUmVjb25jaWxlcihyYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCksIDIwMCk7XG5cbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub25EaWRDaGFuZ2VBY3RpdmVQYW5lSXRlbShlID0+IHRoaXMudXBkYXRlRXZlcnl0aGluZyhkaXNwbGF5KSk7XG5cbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGVkaXRvcj0+e1xuICAgICAgICAgICAgZWRpdG9yLm9uRGlkRGVzdHJveSgoKT0+e1xuXG4gICAgICAgICAgICAgICAgbGV0IHBhdGggPSBlZGl0b3IuZ2V0UGF0aCgpO1xuXG4gICAgICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRvY3VtZW50Q2xvc2VkKHBhdGgpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgZWRpdG9yLm9uRGlkQ2hhbmdlQ3Vyc29yUG9zaXRpb24oZXZlbnQ9PnRoaXMuY3Vyc29yQ2hhbmdlZChlZGl0b3IsIGV2ZW50Lm5ld0J1ZmZlclBvc2l0aW9uKSlcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLnVwZGF0ZUV2ZXJ5dGhpbmcoZGlzcGxheSk7XG4gICAgICAgIHRoaXMuYWRkQXV0b0Nsb3NlTGlzdGVuZXIoKTtcblxuICAgICAgICB0aGlzLmFkZExpc3RlbmVyc0ZvclN0cnVjdHVyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDdXJyZW50UG9zaXRpb24oKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQb3NpdGlvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGN1cnNvckNoYW5nZWQoZWRpdG9yOiBhdG9tLklUZXh0RWRpdG9yLCBuZXdCdWZmZXJQb3NpdGlvbjogUG9pbnQpIHtcblxuICAgICAgICBtYXJrT2NjdXJyZW5jZXMuY2xlYXJPY2N1cmVuY2VzKGVkaXRvcik7XG5cbiAgICAgICAgdGhpcy5tYXJrT2NjdXJyZW5jZXNSZWNvbmNpbGVyLnNjaGVkdWxlKG5ldyBtYXJrT2NjdXJyZW5jZXMuTWFya09jY3VycmVuY2VSdW5uYWJsZShlZGl0b3IsIG5ld0J1ZmZlclBvc2l0aW9uKSk7XG5cbiAgICAgICAgbGV0IGJ1ZmZlciA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICAgICAgbGV0IHBvcyA9IGJ1ZmZlci5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKGVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpKTtcblxuICAgICAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkucG9zaXRpb25DaGFuZ2VkKG1hbmFnZXIudW5pdFBhdGgsIHBvcyk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBwb3M7XG4gICAgfVxuXG4gICAgaW50ZXJuYWxTY2hlZHVsZVVwZGF0ZVZpZXdzKGNvdW50Om51bWJlcil7XG4gICAgICAgIHRoaXMudXBkYXRlQ291bnQ9Y291bnQ7XG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgIGlmICh0aGlzLnVwZGF0ZUNvdW50PT1jb3VudCl7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LDUwMCk7XG4gICAgfVxuXG4gICAgc2NoZWR1bGVWaWV3c1VwZGF0ZSgpe1xuICAgICAgICBpZiAodGhpcy5maXJlKXtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxTY2hlZHVsZVVwZGF0ZVZpZXdzKHRoaXMudXBkYXRlQ291bnQrMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbnRlcm5hbFNjaGVkdWxlT3V0bGluZVVwZGF0ZShjb3VudDpudW1iZXIpe1xuICAgICAgICB0aGlzLm91dGxpbmVDb3VudD1jb3VudDtcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgaWYgKHRoaXMub3V0bGluZUNvdW50PT1jb3VudCl7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPdXRsaW5lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sNTAwKTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZU91dGxpbmVVcGRhdGUoKXtcbiAgICAgICAgdGhpcy5pbnRlcm5hbFNjaGVkdWxlT3V0bGluZVVwZGF0ZSh0aGlzLm91dGxpbmVDb3VudCsxKTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgYWRkQXV0b0Nsb3NlTGlzdGVuZXIoKSB7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9uRGlkRGVzdHJveVBhbmUoZXZ0PT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZWRjb3VudCA9IGF0b20ud29ya3NwYWNlLmdldFBhbmVJdGVtcygpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVsnc29mdFRhYnMnXSAhPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChlZGNvdW50ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5hc3Q9bnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy51bml0PW51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX2N1cnJlbnROb2RlPW51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRvcj1udWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKChnbG9iYWwgYXMgYW55KS5jbGVhbkNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2xvYmFsIGFzIGFueSkuY2xlYW5DYWNoZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0b20ud29ya3NwYWNlLnBhbmVGb3JJdGVtKHRoaXMuX3ZpZXcpKSBhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzLl92aWV3KS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdG9tLndvcmtzcGFjZS5wYW5lRm9ySXRlbSh0aGlzLl9kZXRhaWxzKSkgYXRvbS53b3Jrc3BhY2UucGFuZUZvckl0ZW0odGhpcy5fZGV0YWlscykuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE8gUkVNT1ZFIElUIExBVEVSIFdFIE5FRUQgVE8gQkUgUFJFVHkgREVGRU5TSVZFIEFUIFRISVMgTU9NRU5UXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRPckNyZWF0ZVZpZXcoKSB7XG4gICAgICAgIGlmICghdGhpcy5fdmlldykge1xuICAgICAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBvdXRsaW5lVmlldy5SYW1sT3V0bGluZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMudW5pdFBhdGgpe1xuICAgICAgICAgICAgICAgICB0aGlzLl92aWV3LnNldFVuaXQodGhpcy51bml0UGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiAodGhpcy5hc3Qpe1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuX3ZpZXcuc2V0VW5pdCh0aGlzLmFzdCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREZXRhaWxzKCkge1xuICAgICAgICBpZiAoIUVkaXRvck1hbmFnZXIuREVUQUlMU19TVVBQT1JUKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLl9kZXRhaWxzKSB0aGlzLl9kZXRhaWxzID0gbmV3IGRldGFpbHNWaWV3LlJhbWxEZXRhaWxzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXRhaWxzO1xuICAgIH1cblxuICAgIHVwZGF0ZURldGFpbHMoKSB7XG4gICAgICAgIHRoaXMuZ2V0RGV0YWlscygpLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIHJlcGFyc2VBU1QoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRFZGl0b3IpIHtcbiAgICAgICAgICAgIHZhciBfcGF0aCA9IHRoaXMuY3VycmVudEVkaXRvci5nZXRQYXRoKCk7XG4gICAgICAgICAgICB2YXIgYmY9dGhpcy5jdXJyZW50RWRpdG9yLmdldEJ1ZmZlcigpO1xuXG4gICAgICAgICAgICB0aGlzLnVuaXRQYXRoID0gX3BhdGg7XG4gICAgICAgICAgICAvLyB2YXIgcHJqID0gcHJvamVjdC5jcmVhdGVQcm9qZWN0KHBhdGguZGlybmFtZShfcGF0aCkpO1xuICAgICAgICAgICAgLy8gdmFyIHVuaXQgPSBwcmouc2V0Q2FjaGVkVW5pdENvbnRlbnQocGF0aC5iYXNlbmFtZShfcGF0aCksIHRoaXMuY3VycmVudEVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIHVuaXQucHJvamVjdCgpLmFkZFRleHRDaGFuZ2VMaXN0ZW5lcihkZWx0YT0+e1xuICAgICAgICAgICAgLy8gICAgIGlmIChkZWx0YS51bml0IT11bml0KXtcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICB2YXIgY209ZGVsdGEub2Zmc2V0O1xuICAgICAgICAgICAgLy8gICAgIHZhciBlbmQ9ZGVsdGEucmVwbGFjZW1lbnRMZW5ndGg7XG4gICAgICAgICAgICAvLyAgICAgdmFyIHRleHQ9ZGVsdGEudGV4dDtcbiAgICAgICAgICAgIC8vICAgICB2YXIgYnVmZmVyPSg8YXRvbS5JQnVmZmVyPnRoaXMuY3VycmVudEVkaXRvci5nZXRCdWZmZXIoKSk7XG4gICAgICAgICAgICAvLyAgICAgdmFyIHN0YXJ0PWJ1ZmZlci5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGNtKTtcbiAgICAgICAgICAgIC8vICAgICB2YXIgZW5kUG9zaXRpb249YnVmZmVyLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgoY20rZW5kKTtcbiAgICAgICAgICAgIC8vICAgICB0cnkge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmZpcmU9ZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgICAgICg8YW55PmJ1ZmZlcikuc2V0VGV4dEluUmFuZ2Uoe3N0YXJ0OiBzdGFydCwgZW5kOiBlbmRQb3NpdGlvbn0sIHRleHQpO1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnNjaGVkdWxlT3V0bGluZVVwZGF0ZSgpO1xuICAgICAgICAgICAgLy8gICAgIH0gZmluYWxseXtcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5maXJlPXRydWU7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvLyB0aGlzLmFzdCA9IHVuaXQuaGlnaExldmVsKCk7XG4gICAgICAgICAgICAvLyB0aGlzLnVuaXQgPSB1bml0O1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBpc0VUUGFuZShwYW5lKSB7XG4gICAgICAgaWYgKCF0aGlzLl92aWV3KXtcbiAgICAgICAgICAgcmV0dXJuO1xuICAgICAgIH1cbiAgICAgICB2YXIgaXRlbXMgPSBwYW5lLmdldEl0ZW1zKCk7XG4gICAgICAgcmV0dXJuICgoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQgJiYgaXRlbXMuaW5kZXhPZih0aGlzLmdldERldGFpbHMoKSkgPj0gMClcbiAgICAgICAgfHwgaXRlbXMuaW5kZXhPZih0aGlzLl92aWV3KSA+PSAwKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVUTTo6RGlzcGxheVwiKTtcbiAgICAgICAgdmFyIGF3ID0gYXRvbS53b3Jrc3BhY2U7XG4gICAgICAgIHZhciBmcGFuZSA9IGF0b20ud29ya3NwYWNlLnBhbmVGb3JJdGVtKHRoaXMuZ2V0Q3VycmVudEVkaXRvcigpKTtcbiAgICAgICAgaWYgKCFmcGFuZSkgcmV0dXJuO1xuICAgICAgICBpZiAoIWF3LnBhbmVGb3JJdGVtKHRoaXMuZ2V0T3JDcmVhdGVWaWV3KCkpKVxuICAgICAgICAgICAgZG9TcGxpdCh0aGlzLmdldE9yQ3JlYXRlVmlldygpKTtcblxuICAgICAgICBpZiAoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQpIHtcbiAgICAgICAgICAgIGlmICghYXcucGFuZUZvckl0ZW0obWFuYWdlci5nZXREZXRhaWxzKCkpKVxuICAgICAgICAgICAgICAgIGRvU3BsaXQodGhpcy5nZXREZXRhaWxzKCksIFNwbGl0RGlyZWN0aW9ucy5CT1RUT00pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vcGVuZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZpcmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgLy8gdXBkYXRlVGV4dChub2RlPzogbGwuSUxvd0xldmVsQVNUTm9kZSkge1xuICAgIC8vICAgICB0aGlzLmZpcmUgPSBmYWxzZTtcbiAgICAvLyAgICAgdmFyIGVkaXRvciA9IHRoaXMuY3VycmVudEVkaXRvcjtcbiAgICAvLyAgICAgdmFyIHBvcyA9IG5vZGUgPyBlZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLnN0YXJ0KCkpIDogbnVsbDtcbiAgICAvLyAgICAgZWRpdG9yLnNldFRleHQodGhpcy51bml0LmNvbnRlbnRzKCkpO1xuICAgIC8vICAgICB0aGlzLmZpcmUgPSB0cnVlO1xuICAgIC8vICAgICBpZiAocG9zKSAoPGFueT5lZGl0b3IpLnNldEN1cnNvckJ1ZmZlclBvc2l0aW9uKHBvcyk7XG4gICAgLy8gfVxuXG4gICAgLy8gc2VsZWN0Tm9kZShobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGUgPSBobm9kZS5sb3dMZXZlbCgpO1xuICAgIC8vICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAvLyAgICAgdmFyIGVkaXRvciA9IHRoaXMuY3VycmVudEVkaXRvcjtcbiAgICAvLyAgICAgaWYgKCFlZGl0b3IpIHJldHVybjtcbiAgICAvLyAgICAgdmFyIHBvcyA9IG5vZGUgPyBlZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLnN0YXJ0KCkpIDogbnVsbDtcbiAgICAvLyAgICAgaWYgKHBvcykgKDxhbnk+ZWRpdG9yKS5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihwb3MpO1xuICAgIC8vIH1cbiAgICBcbiAgICBwcml2YXRlIHNldFZpZXdzRGlzcGxheVN0eWxlKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYodGhpcy5fZGV0YWlscyAmJiAoPGFueT50aGlzKS5fZGV0YWlscy5lbGVtZW50KSB7XG4gICAgICAgICAgICAoPGFueT50aGlzKS5fZGV0YWlscy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gbnVsbCA6IFwibm9uZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5fdmlldyAmJiAoPGFueT50aGlzKS5fdmlldy5lbGVtZW50KSB7XG4gICAgICAgICAgICAoPGFueT50aGlzKS5fdmlldy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gbnVsbCA6IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaXNSYW1sKGVkaXRvcik6IGJvb2xlYW4ge1xuICAgICAgICBpZighZWRpdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWRpdG9yUGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG4gICAgICAgIFxuICAgICAgICBpZighZWRpdG9yUGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgZXh0TmFtZSA9IHBhdGguZXh0bmFtZShlZGl0b3JQYXRoKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGV4dE5hbWUgIT09ICcucmFtbCcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgdXBkYXRlRXZlcnl0aGluZyhkaXNwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICB2YXIgZWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuICAgICAgICBcbiAgICAgICAgaWYoZWRpdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpZXdzRGlzcGxheVN0eWxlKHRoaXMuaXNSYW1sKGVkaXRvcikpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZighZWRpdG9yIHx8IGVkaXRvciA9PSB0aGlzLmN1cnJlbnRFZGl0b3IgfHwgIXRoaXMuaXNSYW1sKGVkaXRvcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VycmVudEVkaXRvciA9IGVkaXRvcjtcblxuICAgICAgICBpZiAodGhpcy5vcGVuZWQgPT0gZmFsc2UgJiYgZGlzcGxheSkgdGhpcy5kaXNwbGF5KCk7XG5cbiAgICAgICAgLy93ZSBhcmUgbm90IGxpc3RlbmluZyB0byB0aGUgZWRpdG9yIGNoYW5nZXMgYW55IG1vcmUsXG4gICAgICAgIC8vaW5zdGVhZCB3ZSBhcmUgbGlzdGVuaW5nIHRvIHRoZSByZXBvcnRzIG9mIHRoZSBzZXJ2ZXIgdGhhdCBzb21ldGhpbmcgaXMgYXZpbGFibGUsIGxpa2UgdGhlIHN0cnVjdHVyZVxuICAgICAgICBpZiAoISg8YW55PmVkaXRvcikucGF0Y2hlZCkge1xuICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyc1RvRWRpdG9yKCBlZGl0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXBhcnNlQVNUKCk7XG5cbiAgICAgICAgdmFyIHBvcyA9ICg8YW55PmVkaXRvci5nZXRCdWZmZXIoKSkuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihlZGl0b3IuZ2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oKSk7XG5cbiAgICAgICAgdGhpcy5wb3NpdGlvblVwZGF0ZWQocG9zKTtcblxuICAgICAgICB0aGlzLnNjaGVkdWxlVmlld3NVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZExpc3RlbmVyc1RvRWRpdG9yKGNlZGl0KSB7XG4gICAgICAgIHZhciBidWZmZXIgPSBjZWRpdC5nZXRCdWZmZXIoKTtcbiAgICAgICAgYnVmZmVyLm9uRGlkQ2hhbmdlKHggPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvL3RoaXMucmVwYXJzZUFTVCgpO1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBidWZmZXIuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihjZWRpdC5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uVXBkYXRlZChwb3MpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5zY2hlZHVsZVZpZXdzVXBkYXRlKCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy91cGRhdGluZyBhc3Qgbm9kZSBvbiBwb3NpdGlvbiBjaGFuZ2VcbiAgICAgICAgLy8gY2VkaXQuZ2V0TGFzdEN1cnNvcigpLm9uRGlkQ2hhbmdlUG9zaXRpb24oeD0+IHtcbiAgICAgICAgLy8gICAgIGlmICghdGhpcy5maXJlKSByZXR1cm47XG4gICAgICAgIC8vICAgICB0aGlzLnBvc2l0aW9uVXBkYXRlZChidWZmZXIuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihjZWRpdC5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpKSk7XG4gICAgICAgIC8vICAgICB0aGlzLnNjaGVkdWxlVmlld3NVcGRhdGUoKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzT25Nb3ZlKGNlZGl0KTtcbiAgICAgICAgKDxhbnk+dGhpcy5jdXJyZW50RWRpdG9yKS5wYXRjaGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZExpc3RlbmVyc0ZvclN0cnVjdHVyZSgpIHtcbiAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLm9uU3RydWN0dXJlUmVwb3J0KHJlcG9ydD0+e1xuXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnlOYW1lcyA9IFtdXG4gICAgICAgICAgICBmb3IobGV0IGNhdGVnb3J5TmFtZSBpbiByZXBvcnQuc3RydWN0dXJlKSBjYXRlZ29yeU5hbWVzLnB1c2goY2F0ZWdvcnlOYW1lKTtcblxuICAgICAgICAgICAgbGV0IGNhdGVnb3J5TmFtZXNTdHJpbmcgPSBjYXRlZ29yeU5hbWVzLmpvaW4oKTtcbiAgICAgICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5kZWJ1ZyhcIkdvdCBuZXcgc3RydWN0dXJlIHJlcG9ydCB3aXRoIGNhdGVnb3JpZXMgXCJcbiAgICAgICAgICAgICAgICArIGNhdGVnb3J5TmFtZXNTdHJpbmcsIFwiRWRpdG9yTWFuYWdlclwiLCBcImFkZExpc3RlbmVyc0ZvclN0cnVjdHVyZVwiKTtcblxuICAgICAgICAgICAgdmFyIGVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKTtcblxuICAgICAgICAgICAgaWYoIWVkaXRvciB8fCAhdGhpcy5pc1JhbWwoZWRpdG9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVPdXRsaW5lKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRMaXN0ZW5lcnNPbk1vdmUoY2VkaXQpIHtcbiAgICAgICAgdmFyIG1vdmluZ1BhbmU9ZmFsc2U7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9uRGlkQWRkUGFuZUl0ZW0oZXZlbnQ9PiB7XG4gICAgICAgICAgICBpZiAobW92aW5nUGFuZSB8fCB0aGlzLmlzRVRQYW5lKGV2ZW50LnBhbmUpID09IGZhbHNlIHx8IGV2ZW50Lml0ZW0gPT0gdGhpcy5nZXRPckNyZWF0ZVZpZXcoKSB8fCAoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQgJiYgZXZlbnQuaXRlbSA9PSB0aGlzLmdldERldGFpbHMoKSkpIHJldHVybiBldmVudDtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZwYW5lID0gYXRvbS53b3Jrc3BhY2UucGFuZUZvckl0ZW0oY2VkaXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnBhbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZ1BhbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucGFuZS5tb3ZlSXRlbVRvUGFuZShldmVudC5pdGVtLCBmcGFuZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmdQYW5lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcGFuZS5zZXRBY3RpdmVJdGVtKGV2ZW50Lml0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnBhbmUuYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIFJFTU9WRSBJVCBMQVRFUiBXRSBORUVEIFRPIEJFIFBSRVR5IERFRkVOU0lWRSBBVCBUSElTIE1PTUVOVFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxOCk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLy8gX2N1cnJlbnROb2RlOiBobC5JSGlnaExldmVsTm9kZTtcbiAgICAvLyAvL19zZWxlY3RlZE5vZGU6IGhsLklIaWdoTGV2ZWxOb2RlO1xuXG4gICAgLy8gcGF0Y2hDdXJyZW50Tm9kZShuOmhsLklIaWdoTGV2ZWxOb2RlKXtcbiAgICAvLyAgICAgdGhpcy5fY3VycmVudE5vZGU9bjtcbiAgICAvLyB9XG4gICAgLy9cbiAgICAvLyBnZXRDdXJyZW50Tm9kZSgpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMuX2N1cnJlbnROb2RlID09IG51bGwpIHJldHVybiB0aGlzLl9jdXJyZW50Tm9kZSA9IHRoaXMuYXN0O1xuICAgIC8vICAgICBlbHNlIHJldHVybiB0aGlzLl9jdXJyZW50Tm9kZTtcbiAgICAvLyB9XG5cblxuICAgIC8vIHNldFNlbGVjdGVkTm9kZShub2RlOiBobC5JSGlnaExldmVsTm9kZSkge1xuICAgIC8vICAgICAvL3RoaXMuX3NlbGVjdGVkTm9kZSA9IG5vZGU7XG4gICAgLy9cbiAgICAvLyAgICAgaWYgKHRoaXMudW5pdCl7XG4gICAgLy8gICAgICAgICB2YXIgdW5pdFBhdGg9dGhpcy51bml0LmFic29sdXRlUGF0aCgpO1xuICAgIC8vICAgICAgICAgd2hpbGUgKG5vZGUubG93TGV2ZWwoKS51bml0KCkuYWJzb2x1dGVQYXRoKCkhPXVuaXRQYXRoKXtcbiAgICAvLyAgICAgICAgICAgICBpZiAoIW5vZGUucGFyZW50KCkpe1xuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgZWxzZXtcbiAgICAvLyAgICAgICAgICAgICAgICAgbm9kZT1ub2RlLnBhcmVudCgpO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB2YXIgaWQ9bm9kZS5pZCgpO1xuICAgIC8vICAgICB2YXIgYW5vZGU9dGhpcy5hc3QuZmluZEJ5SWQoaWQpO1xuICAgIC8vICAgICBpZiAoYW5vZGUpe1xuICAgIC8vICAgICAgICAgbm9kZT1hbm9kZTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZiAodGhpcy5fZGV0YWlscyl7XG4gICAgLy8gICAgICAgICB0aGlzLl9kZXRhaWxzLnNob3cobm9kZSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgdmFyIGVkaXRvciA9IHRoaXMuZ2V0Q3VycmVudEVkaXRvcigpO1xuICAgIC8vICAgICBpZiAoZWRpdG9yKSB7XG4gICAgLy8gICAgICAgICB0aGlzLmZpcmU9ZmFsc2U7XG4gICAgLy8gICAgICAgICB0cnkge1xuICAgIC8vICAgICAgICAgICAgIHZhciBidWZmZXIgPSBlZGl0b3IuZ2V0QnVmZmVyKCk7XG4gICAgLy8gICAgICAgICAgICAgdmFyIHBvc1N0YXJ0ID0gYnVmZmVyLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgobm9kZS5sb3dMZXZlbCgpLnN0YXJ0KCkpO1xuICAgIC8vICAgICAgICAgICAgIHZhciBwb3NFbmQgPSBidWZmZXIucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLmxvd0xldmVsKCkuZW5kKCkpO1xuICAgIC8vICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbihwb3NTdGFydCk7XG4gICAgLy8gICAgICAgICAgICAgdGhpcy5wb3NpdGlvblVwZGF0ZWQoYnVmZmVyLmNoYXJhY3RlckluZGV4Rm9yUG9zaXRpb24oZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCkpKTtcbiAgICAvLyAgICAgICAgIH1maW5hbGx5e1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuZmlyZT10cnVlO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gZ2V0U2VsZWN0ZWROb2RlKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50Tm9kZSgpXG4gICAgLy8gICAgIC8vZWxzZSByZXR1cm4gdGhpcy5fc2VsZWN0ZWROb2RlO1xuICAgIC8vIH1cblxuICAgIHNldFRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVRNOjpTZXRUZXh0XCIpO1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5jdXJyZW50RWRpdG9yO1xuICAgICAgICBpZiAoZWRpdG9yID09IG51bGwpIHJldHVybjtcbiAgICAgICAgZWRpdG9yLnNldFRleHQodGV4dCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0Zyb21FZGdlUm93KCk6IGJvb2xlYW4ge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5nZXRDdXJyZW50RWRpdG9yKClcblxuICAgICAgICBpZighZWRpdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3VycmVudFBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG5cbiAgICAgICAgaWYoIWN1cnJlbnRQb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRSb3cgPSBjdXJyZW50UG9zaXRpb24ucm93O1xuXG4gICAgICAgIHZhciBwcmV2aW91c1JvdyA9ICg8YW55PmVkaXRvcikucHJldmlvdXNSb3c7XG5cbiAgICAgICAgKDxhbnk+ZWRpdG9yKS5wcmV2aW91c1JvdyA9IGN1cnJlbnRSb3c7XG5cbiAgICAgICAgaWYocHJldmlvdXNSb3cgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYocHJldmlvdXNSb3cgPT09IGN1cnJlbnRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHByZXZpb3VzUm93ID09PSAoPGFueT5lZGl0b3IuZ2V0QnVmZmVyKCkpLmdldExhc3RSb3coKSB8fCBwcmV2aW91c1JvdyA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVWaWV3cygpIHtcbiAgICAgICAgLy92YXIgY05vZGUgPSB0aGlzLmdldEN1cnJlbnROb2RlKCk7XG4gICAgICAgIHZhciBkcz1uZXcgRGF0ZSgpLmdldE1pbGxpc2Vjb25kcygpO1xuICAgICAgICBpZiAoRWRpdG9yTWFuYWdlci5ERVRBSUxTX1NVUFBPUlQgJiYgdGhpcy5fZGV0YWlscykge1xuICAgICAgICAgICAgdGhpcy5nZXREZXRhaWxzKCkuc2hvdyhtYW5hZ2VyLnVuaXRQYXRoLCBtYW5hZ2VyLmN1cnJlbnRQb3NpdGlvbiwgdGhpcy5pc0Zyb21FZGdlUm93KCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl92aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFVuaXQobWFuYWdlci51bml0UGF0aCk7XG4gICAgICAgICAgICAvLyB0aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFVuaXQobWFuYWdlci5hc3QpO1xuICAgICAgICAgICAgLy90aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFNlbGVjdGlvbihjTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGQxPW5ldyBEYXRlKCkuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlRGVidWcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVmlld3MgdXBkYXRlOlwiICsgKGQxIC0gZHMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZU91dGxpbmUoKSB7XG5cbiAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRlYnVnKFwiVXBkYXRpbmcgb3V0bGluZVwiLCBcIkVkaXRvck1hbmFnZXJcIiwgXCJ1cGRhdGVPdXRsaW5lXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLl92aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmdldE9yQ3JlYXRlVmlldygpLnNldFVuaXQobWFuYWdlci51bml0UGF0aCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwb3NpdGlvblVwZGF0ZWQobmV3UG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBuZXdQb3NpdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuX2RldGFpbHMpIHtcbiAgICAgICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5wb3NpdGlvbkNoYW5nZWQobWFuYWdlci51bml0UGF0aCwgdGhpcy5jdXJyZW50UG9zaXRpb24pO1xuICAgICAgICAgICAgLy8gdGhpcy5nZXREZXRhaWxzKCkuc2hvdyhtYW5hZ2VyLnVuaXRQYXRoLCB0aGlzLmN1cnJlbnRQb3NpdGlvbiwgdGhpcy5pc0Zyb21FZGdlUm93KCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmICh0aGlzLmFzdCl7XG4gICAgICAgIC8vICAgICB0aGlzLl9jdXJyZW50Tm9kZT10aGlzLmFzdC5maW5kRWxlbWVudEF0T2Zmc2V0KHRoaXMuY3VycmVudFBvc2l0aW9uKTtcbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIHBsYWNlaG9sZGVyOiBib29sZWFuID0gZmFsc2U7XG5cbn1cbnZhciBtYW5hZ2VyIDogRWRpdG9yTWFuYWdlciA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0RWRpdG9yVG9vbHMoZGlzcGxheTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBpZiAobWFuYWdlciA9PSBudWxsKSBtYW5hZ2VyID0gbmV3IEVkaXRvck1hbmFnZXIoZGlzcGxheSk7XG4gICAgZWxzZSBpZiAoZGlzcGxheSkgbWFuYWdlci5kaXNwbGF5KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0b3JUb29sc1N0YXR1cygpIHtcbiAgICByZXR1cm4gbWFuYWdlciAhPSBudWxsICYmIG1hbmFnZXIub3BlbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXF1aXJlTWFuYWdlcigpe1xuICAgIGlmICghbWFuYWdlcil7XG4gICAgICAgIG1hbmFnZXI9bmV3IEVkaXRvck1hbmFnZXIodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiBtYW5hZ2VyO1xufVxuLy8gZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFuZFNlbGVjdChub2RlOmhsLklIaWdoTGV2ZWxOb2RlKXtcbi8vICAgICBpZiAoYXF1aXJlTWFuYWdlcigpLl92aWV3KSB7XG4vLyAgICAgICAgIGFxdWlyZU1hbmFnZXIoKS5fdmlldy5yZWZyZXNoKCk7XG4vLyAgICAgfVxuLy8gICAgIGFxdWlyZU1hbmFnZXIoKS51cGRhdGVUZXh0KCk7XG4vLyAgICAgYXF1aXJlTWFuYWdlcigpLnNlbGVjdE5vZGUobm9kZSk7XG4vLyB9XG5leHBvcnQgZW51bSBTcGxpdERpcmVjdGlvbnN7XG4gICAgUklHSFQsXG4gICAgTEVGVCxcbiAgICBUT1AsXG4gICAgQk9UVE9NXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1NwbGl0KHZhbHVlOmFueSxkaXI6U3BsaXREaXJlY3Rpb25zPVNwbGl0RGlyZWN0aW9ucy5SSUdIVCl7XG4gICAgdmFyIG5ld1BhbmU9bnVsbDtcbiAgICBzd2l0Y2goIGRpcikge1xuICAgICAgICBjYXNlIFNwbGl0RGlyZWN0aW9ucy5CT1RUT006XG4gICAgICAgICAgICBuZXdQYW5lPWF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmUoKS5zcGxpdERvd24oe30pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BsaXREaXJlY3Rpb25zLlRPUDpcbiAgICAgICAgICAgIG5ld1BhbmU9YXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZSgpLnNwbGl0VXAoe30pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BsaXREaXJlY3Rpb25zLkxFRlQ6XG4gICAgICAgICAgICBuZXdQYW5lPWF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmUoKS5zcGxpdExlZnQoe30pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BsaXREaXJlY3Rpb25zLlJJR0hUOlxuICAgICAgICAgICAgbmV3UGFuZT1hdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lKCkuc3BsaXRSaWdodCh7fSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgbmV3UGFuZS5hZGRJdGVtKHZhbHVlKVxuICAgIHJldHVybiBuZXdQYW5lO1xufVxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/editor-tools/editor-tools.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar Workspace = /** @class */ (function () {\n    function Workspace() {\n    }\n    Workspace.prototype.onDidChangeActivePaneItem = function (callback) {\n        return atom.workspace.onDidChangeActivePaneItem(callback);\n    };\n    Workspace.prototype.addModalPanel = function (arg) {\n        return atom.workspace.addModalPanel(arg);\n    };\n    Workspace.prototype.getActiveTextEditor = function () {\n        return atom.workspace.getActiveTextEditor();\n    };\n    Workspace.prototype.getActivePane = function () {\n        return atom.workspace.getActivePane();\n    };\n    Workspace.prototype.getActiveEditor = function () {\n        return atom.workspace.getActiveEditor();\n    };\n    Workspace.prototype.addRightPanel = function (arg) {\n        return atom.workspace.addRightPanel(arg);\n    };\n    Workspace.prototype.paneForItem = function (arg) {\n        return atom.workspace.paneForItem(arg);\n    };\n    Workspace.prototype.getPaneItems = function () {\n        return atom.workspace.getPaneItems();\n    };\n    Workspace.prototype.onDidAddPaneItem = function (callback) {\n        return atom.workspace.onDidAddPaneItem(callback);\n    };\n    Workspace.prototype.onDidDestroyPane = function (callback) {\n        return atom.workspace.onDidDestroyPane(callback);\n    };\n    Workspace.prototype.open = function (path, args) {\n        atom.workspace.open(path, args);\n    };\n    Workspace.prototype.observeTextEditors = function (callback) {\n        atom.workspace.observeTextEditors(callback);\n    };\n    return Workspace;\n}());\nexports.Workspace = Workspace;\nfunction open(pathsToOpen) {\n    atom.open(pathsToOpen);\n}\nexports.open = open;\nexports.workspace = new Workspace();\nvar CommandManager = /** @class */ (function () {\n    function CommandManager() {\n    }\n    CommandManager.prototype.add = function (selector, type, callback) {\n        return atom.commands.add(selector, type, callback);\n    };\n    return CommandManager;\n}());\nexports.CommandManager = CommandManager;\nexports.commands = new CommandManager();\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvYXRvbVdyYXBwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBbUQ7QUFDbkQ7SUFBQTtJQTRDQSxDQUFDO0lBM0NHLDZDQUF5QixHQUF6QixVQUEwQixRQUEwQjtRQUNoRCxNQUFNLENBQU8sSUFBSSxDQUFDLFNBQVUsQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsaUNBQWEsR0FBYixVQUFjLEdBQW9CO1FBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQsdUNBQW1CLEdBQW5CO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQsaUNBQWEsR0FBYjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQzFDLENBQUM7SUFFRCxtQ0FBZSxHQUFmO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDNUMsQ0FBQztJQUVELGlDQUFhLEdBQWIsVUFBYyxHQUFRO1FBQ2xCLE1BQU0sQ0FBTyxJQUFJLENBQUMsU0FBVSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsK0JBQVcsR0FBWCxVQUFZLEdBQVE7UUFDaEIsTUFBTSxDQUFPLElBQUksQ0FBQyxTQUFVLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDRCxnQ0FBWSxHQUFaO1FBQ0ksTUFBTSxDQUFRLElBQUksQ0FBQyxTQUFVLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDakQsQ0FBQztJQUNELG9DQUFnQixHQUFoQixVQUFpQixRQUFvRTtRQUNqRixNQUFNLENBQVEsSUFBSSxDQUFDLFNBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBQ0Qsb0NBQWdCLEdBQWhCLFVBQWlCLFFBQTBDO1FBQ3ZELE1BQU0sQ0FBUSxJQUFJLENBQUMsU0FBVSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFDRCx3QkFBSSxHQUFKLFVBQUssSUFBSSxFQUFFLElBQUk7UUFDWCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELHNDQUFrQixHQUFsQixVQUFtQixRQUFxQztRQUNwRCxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFDTCxnQkFBQztBQUFELENBNUNBLEFBNENDLElBQUE7QUE1Q1ksOEJBQVM7QUE4Q3RCLGNBQXFCLFdBQVc7SUFDdEIsSUFBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBRkQsb0JBRUM7QUE2RVUsUUFBQSxTQUFTLEdBQWEsSUFBSSxTQUFTLEVBQUUsQ0FBQztBQU1qRDtJQUFBO0lBSUEsQ0FBQztJQUhHLDRCQUFHLEdBQUgsVUFBSSxRQUFnQixFQUFFLElBQVksRUFBRSxRQUFvQjtRQUNwRCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBQ0wscUJBQUM7QUFBRCxDQUpBLEFBSUMsSUFBQTtBQUpZLHdDQUFjO0FBTWhCLFFBQUEsUUFBUSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUMiLCJmaWxlIjoic3JjL2F0b20vY29yZS9hdG9tV3JhcHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcbiAgICBvbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrOihhcmc6YW55KSA9PiB2b2lkKTp2b2lkIHtcbiAgICAgICAgcmV0dXJuICg8YW55PmF0b20ud29ya3NwYWNlKS5vbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBhZGRNb2RhbFBhbmVsKGFyZzpBZGRNb2RhbFBhbmVsQXJnKTphbnkge1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbChhcmcpO1xuICAgIH1cblxuICAgIGdldEFjdGl2ZVRleHRFZGl0b3IoKTogSVRleHRFZGl0b3Ige1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuICAgIH1cblxuICAgIGdldEFjdGl2ZVBhbmUoKTogSVBhbmUge1xuICAgICAgICByZXR1cm4gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZSgpO1xuICAgIH1cblxuICAgIGdldEFjdGl2ZUVkaXRvcigpOiBJRWRpdG9yIHtcbiAgICAgICAgcmV0dXJuIGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZUVkaXRvcigpO1xuICAgIH1cblxuICAgIGFkZFJpZ2h0UGFuZWwoYXJnOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuICg8YW55PmF0b20ud29ya3NwYWNlKS5hZGRSaWdodFBhbmVsKGFyZyk7XG4gICAgfVxuXG4gICAgcGFuZUZvckl0ZW0oYXJnOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuICg8YW55PmF0b20ud29ya3NwYWNlKS5wYW5lRm9ySXRlbShhcmcpO1xuICAgIH1cbiAgICBnZXRQYW5lSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiAoPGFueT4gYXRvbS53b3Jrc3BhY2UpLmdldFBhbmVJdGVtcygpO1xuICAgIH1cbiAgICBvbkRpZEFkZFBhbmVJdGVtKGNhbGxiYWNrOiAoZXZlbnQ6IHsgaXRlbTogYW55OyBwYW5lOiBJUGFuZTsgaW5kZXg6IG51bWJlciB9KSA9PiB2b2lkKSB7XG4gICAgICAgIHJldHVybiAoPGFueT4gYXRvbS53b3Jrc3BhY2UpLm9uRGlkQWRkUGFuZUl0ZW0oY2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRpZERlc3Ryb3lQYW5lKGNhbGxiYWNrOiAoZXZlbnQ6IHsgcGFuZTogSVBhbmUgfSkgPT4gdm9pZCkge1xuICAgICAgICByZXR1cm4gKDxhbnk+IGF0b20ud29ya3NwYWNlKS5vbkRpZERlc3Ryb3lQYW5lKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgb3BlbihwYXRoLCBhcmdzKSB7XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4ocGF0aCwgYXJncyk7XG4gICAgfVxuXG4gICAgb2JzZXJ2ZVRleHRFZGl0b3JzKGNhbGxiYWNrIDogKGVkaXRvcjpJVGV4dEVkaXRvcik9PnZvaWQpIHtcbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuKHBhdGhzVG9PcGVuKSB7XG4gICAgKDxhbnk+YXRvbSkub3BlbihwYXRoc1RvT3Blbik7XG59XG5cbmludGVyZmFjZSBJUGFuZSB7XG4gICAgc3BsaXRVcChhcmc6YW55KTogSVBhbmU7XG5cbiAgICBzcGxpdERvd24oYXJnOmFueSk6IElQYW5lO1xuXG4gICAgc3BsaXRMZWZ0KGFyZzphbnkpOiBJUGFuZTtcblxuICAgIHNwbGl0UmlnaHQoYXJnOmFueSk6IElQYW5lO1xuXG4gICAgYWRkSXRlbShpdGVtOmFueSwgaW5kZXg6bnVtYmVyKTtcblxuICAgIGFjdGl2YXRlSXRlbUF0SW5kZXgoYXJnOiBhbnkpO1xuICAgIFxuICAgIG1vdmVJdGVtVG9QYW5lKGl0ZW06YW55LCBwYW5lOklQYW5lLCBpbmRleDpudW1iZXIpOnZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnR7XG4gICAgcm93Om51bWJlcjtcbiAgICBjb2x1bW46bnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhbmdlIHtcbiAgICBzdGFydDpQb2ludDtcbiAgICBlbmQ6UG9pbnQ7XG59XG5cbmV4cG9ydCAgaW50ZXJmYWNlICBJQ3Vyc29yIHtcbiAgICBnZXRCdWZmZXJQb3NpdGlvbigpOiBQb2ludDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSAgSUJ1ZmZlciB7XG4gICAgcG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChpbmRleE9mOmFueSk6IFBvaW50O1xuICAgIGNoYXJhY3RlckluZGV4Rm9yUG9zaXRpb24ocG9zaXRpb246UG9pbnQpOm51bWJlcjtcblxuICAgIHJhbmdlRm9yUm93KGFueSk6IFJhbmdlO1xuXG4gICAgc2V0VGV4dCh0ZXh0KTtcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlICBJVGV4dEVkaXRvciB7XG4gICAgZ2V0VGV4dCgpOiBzdHJpbmc7XG5cbiAgICBnZXRQYXRoKCk6IHN0cmluZztcblxuICAgIGdldExhc3RDdXJzb3IoKTogSUN1cnNvcjtcblxuICAgIGdldEJ1ZmZlcigpOiBJQnVmZmVyO1xuXG4gICAgc2V0VGV4dCh0ZXh0KTtcblxuICAgIGdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk6UG9pbnQ7XG5cbiAgICBvbkRpZERlc3Ryb3koY2FsbGJhY2s6KCk9PnZvaWQpO1xuXG4gICAgb25EaWRDaGFuZ2VDdXJzb3JQb3NpdGlvbihjYWxsYmFjazogKGV2ZW50OntcbiAgICAgICAgIG9sZEJ1ZmZlclBvc2l0aW9uOlBvaW50LFxuICAgICAgICAgb2xkU2NyZWVuUG9zaXRpb246UG9pbnQsXG4gICAgICAgICBuZXdCdWZmZXJQb3NpdGlvbjpQb2ludCxcbiAgICAgICAgIG5ld1NjcmVlblBvc2l0aW9uOlBvaW50LFxuICAgICAgICAgdGV4dENoYW5nZWQ6Ym9vbGVhbixcbiAgICAgICAgIGN1cnNvcjogSUN1cnNvclxuICAgICB9KT0+dm9pZCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgIElFZGl0b3Ige1xuICAgIGdldEJ1ZmZlcigpOiBJQnVmZmVyO1xuXG4gICAgc2V0U2VsZWN0ZWRCdWZmZXJSYW5nZShyYW5nZTogYW55LCBhcmc6IGFueSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRkTW9kYWxQYW5lbEFyZyB7XG4gICAgaXRlbTogYW55O1xufVxuXG5leHBvcnQgdmFyIHdvcmtzcGFjZTpXb3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKCk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRNYW5hZ2VyIHtcbiAgICBhZGQoc2VsZWN0b3I6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IEF0b21Db3JlLkRpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kTWFuYWdlciB7XG4gICAgYWRkKHNlbGVjdG9yOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgcmV0dXJuIGF0b20uY29tbWFuZHMuYWRkKHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnQgdmFyIGNvbW1hbmRzID0gbmV3IENvbW1hbmRNYW5hZ2VyKCk7Il19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/core/atomWrapper.js\n// module id = 3\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UI = require(\"atom-ui-lib\");\nvar SC = require(\"../util/ScrollViewUI\");\nvar CompositeDisposable = UI.CompositeDisposable;\nvar details = require(\"./details\");\nvar editorTools = require(\"./editor-tools\");\nvar ramlServer = require(\"raml-language-server\");\nvar reconciler_1 = require(\"./reconciler\");\nvar RamlDetails = /** @class */ (function (_super) {\n    __extends(RamlDetails, _super);\n    function RamlDetails(allowStructureChanges) {\n        if (allowStructureChanges === void 0) { allowStructureChanges = true; }\n        var _this = _super.call(this) || this;\n        _this.allowStructureChanges = allowStructureChanges;\n        _this.disposables = new CompositeDisposable();\n        _this.addClass('raml-details');\n        var connection = ramlServer.getNodeClientConnection();\n        connection.onDetailsReport(function (report) { return _this.onDetailsReport(report); });\n        _this.reconciler = new reconciler_1.Reconciler(connection, 800);\n        return _this;\n    }\n    RamlDetails.prototype.getTitle = function () {\n        return \"Details\";\n    };\n    RamlDetails.prototype.attached = function () {\n        try {\n            this.element.innerHTML = \"<div></div>\";\n            this._children = [];\n            this.container = UI.vc();\n            this.addChild(this.container);\n            this.ui().appendChild(this.container.ui());\n            _super.prototype.attached.call(this);\n        }\n        catch (e) {\n        }\n    };\n    RamlDetails.prototype.setResource = function (detailsNode, context) {\n        if (this.wasSchema) {\n            this.schemaView.dispose();\n            this.schemaView = null;\n        }\n        this.wasSchema = false;\n        window[\"detailsnode\"] = detailsNode;\n        window[\"detailscontext\"] = context;\n        if (detailsNode == null)\n            this.displayEmpty();\n        details.updateDetailsPanel(detailsNode, context, this.container, true);\n    };\n    RamlDetails.prototype.update = function () {\n        if (window[\"detailsnode\"]) {\n            this.setResource(window[\"detailsnode\"], window[\"detailscontext\"]);\n        }\n    };\n    RamlDetails.prototype.displayEmpty = function () {\n        this.container.clear();\n        // if (!editorTools.aquireManager().ast) {\n        //     this.container.addChild(UI.h3(\"Our API is fabulously empty\").margin(8, 8, 20, 8));\n        //     var create = new UI.Button(\"Create new API\", UI.ButtonSizes.LARGE, UI.ButtonHighlights.SUCCESS, UI.Icon.REPO_CLONE, ()=>dialogs.newApi());\n        //     create.margin(8, 8, 20, 0);\n        //     this.container.addChild(create);\n        // }\n    };\n    RamlDetails.prototype.destroy = function () {\n        editorTools.aquireManager()._details = null;\n        this.disposables.dispose();\n        this._unitPath = null;\n        this._position = null;\n        this.container.dispose();\n        this.container = null;\n        window[\"detailsnode\"] = null;\n        window[\"detailscontext\"] = null;\n        this._children = [];\n        if (details.oldItem) {\n            details.oldItem.detach();\n        }\n        if (this.wasSchema) {\n            this.schemaView.dispose();\n            this.schemaView = null;\n        }\n        details.oldItem = null;\n    };\n    RamlDetails.prototype.show = function (unitPath, position, force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        if (!force && this._unitPath == unitPath && this._position === position)\n            return;\n        this._unitPath = unitPath;\n        this._position = position;\n        var reconciler = this.reconciler;\n        try {\n            // if (isSchema(node))\n            //     this.setSchema(this._node);\n            // else\n            //     this.setResource(node);\n            ramlServer.getNodeClientConnection().getDetails(unitPath, position).then(function (detailsNode) {\n                _this.setResource(detailsNode, {\n                    uri: unitPath,\n                    position: position,\n                    localModel: false,\n                    reconciler: reconciler\n                });\n            });\n        }\n        catch (e) { }\n    };\n    RamlDetails.prototype.onDetailsReport = function (report) {\n        var _this = this;\n        if (report.uri != this._unitPath)\n            return;\n        var reconciler = this.reconciler;\n        //if (this._position == report.position) return;\n        ramlServer.getNodeClientConnection().getLatestVersion(report.uri).then(function (latestVersion) {\n            //ignoring outdated reports\n            if (report.version != null && report.version < latestVersion)\n                return;\n            _this.setResource(report.details, {\n                uri: report.uri,\n                position: report.position,\n                localModel: false,\n                reconciler: reconciler,\n            });\n        });\n    };\n    return RamlDetails;\n}(SC.Scrollable));\nexports.RamlDetails = RamlDetails;\n// function isSchema(p: hl.IHighLevelNode) {\n//     if (!p){\n//         return false;\n//     }\n//     return universeHelpers.isGlobalSchemaType(p.definition());\n// } \n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7Ozs7Ozs7Ozs7O0FBRW5ELGdDQUFnQztBQUNoQyx5Q0FBeUM7QUFHekMsSUFBTyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsbUJBQW1CLENBQUE7QUFDbkQsbUNBQW1DO0FBRW5DLDRDQUE0QztBQU01QyxpREFBb0Q7QUFDcEQsMkNBRXFCO0FBRXJCO0lBQWlDLCtCQUFhO0lBSTFDLHFCQUFvQixxQkFBcUM7UUFBckMsc0NBQUEsRUFBQSw0QkFBcUM7UUFBekQsWUFDSSxpQkFBTyxTQU9WO1FBUm1CLDJCQUFxQixHQUFyQixxQkFBcUIsQ0FBZ0I7UUFjekQsaUJBQVcsR0FBRyxJQUFJLG1CQUFtQixFQUFFLENBQUM7UUFaOUIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUVyQyxJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUN4RCxVQUFVLENBQUMsZUFBZSxDQUFDLFVBQUEsTUFBTSxJQUFFLE9BQUEsS0FBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBNUIsQ0FBNEIsQ0FBQyxDQUFBO1FBRWhFLEtBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSx1QkFBVSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQzs7SUFDdEQsQ0FBQztJQUVELDhCQUFRLEdBQVI7UUFDSSxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ3JCLENBQUM7SUFXRCw4QkFBUSxHQUFSO1FBQ0ksSUFBSSxDQUFDO1lBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUMsYUFBYSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxTQUFTLEdBQUMsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFB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QUFDO1lBRXJFLEtBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtnQkFDN0IsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHO2dCQUNmLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUTtnQkFDekIsVUFBVSxFQUFFLEtBQUs7Z0JBQ2pCLFVBQVUsWUFBQTthQUNiLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUNMLGtCQUFDO0FBQUQsQ0EzTUEsQUEyTUMsQ0EzTWdDLEVBQUUsQ0FBQyxVQUFVLEdBMk03QztBQTNNWSxrQ0FBVztBQTZNeEIsNENBQTRDO0FBQzVDLGVBQWU7QUFDZix3QkFBd0I7QUFDeEIsUUFBUTtBQUNSLGlFQUFpRTtBQUNqRSxJQUFJIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLXZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgVUk9cmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgU0M9cmVxdWlyZShcIi4uL3V0aWwvU2Nyb2xsVmlld1VJXCIpXG5pbXBvcnQgcGF0aD1yZXF1aXJlKCdwYXRoJylcbmltcG9ydCBEaXNwb3NhYmxlID0gVUkuSURpc3Bvc2FibGVcbmltcG9ydCBDb21wb3NpdGVEaXNwb3NhYmxlID0gVUkuQ29tcG9zaXRlRGlzcG9zYWJsZVxuaW1wb3J0IGRldGFpbHM9cmVxdWlyZShcIi4vZGV0YWlsc1wiKVxuaW1wb3J0IHNjaGVtYVVJPXJlcXVpcmUoXCIuL3NjaGVtYVVJXCIpXG5pbXBvcnQgZWRpdG9yVG9vbHM9cmVxdWlyZShcIi4vZWRpdG9yLXRvb2xzXCIpXG5pbXBvcnQgZGlhbG9ncz1yZXF1aXJlKFwiLi4vZGlhbG9ncy9kaWFsb2dzXCIpXG5pbXBvcnQgZnM9cmVxdWlyZShcImZzXCIpXG5pbXBvcnQgYXRvbSA9IHJlcXVpcmUoJy4uL2NvcmUvYXRvbVdyYXBwZXInKTtcbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgcGFpciA9IHJlcXVpcmUoXCIuLi8uLi91dGlsL3BhaXJcIik7XG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKTtcbmltcG9ydCB7XG4gICAgUmVjb25jaWxlclxufSBmcm9tIFwiLi9yZWNvbmNpbGVyXCJcblxuZXhwb3J0IGNsYXNzIFJhbWxEZXRhaWxzIGV4dGVuZHMgU0MuU2Nyb2xsYWJsZSB7XG5cbiAgICBwcml2YXRlIHJlY29uY2lsZXI6IFJlY29uY2lsZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFsbG93U3RydWN0dXJlQ2hhbmdlczogYm9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgKDxhbnk+dGhpcykuYWRkQ2xhc3MoJ3JhbWwtZGV0YWlscycpO1xuXG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24ub25EZXRhaWxzUmVwb3J0KHJlcG9ydD0+dGhpcy5vbkRldGFpbHNSZXBvcnQocmVwb3J0KSlcblxuICAgICAgICB0aGlzLnJlY29uY2lsZXIgPSBuZXcgUmVjb25jaWxlcihjb25uZWN0aW9uLCA4MDApO1xuICAgIH1cblxuICAgIGdldFRpdGxlKCkge1xuICAgICAgICByZXR1cm4gXCJEZXRhaWxzXCI7XG4gICAgfVxuXG4gICAgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgX2lzQXR0YWNoZWQ6IGJvb2xlYW47XG5cbiAgICAvLyBwcml2YXRlIF9ub2RlOmhsLklIaWdoTGV2ZWxOb2RlO1xuICAgIHByaXZhdGUgX3VuaXRQYXRoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcG9zaXRpb246IG51bWJlcjtcblxuICAgIGNvbnRhaW5lcjogVUkuUGFuZWw7XG4gICAgYXR0YWNoZWQoKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUw9XCI8ZGl2PjwvZGl2PlwiO1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IFVJLnZjKCk7XG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMudWkoKS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lci51aSgpKTtcbiAgICAgICAgICAgIHN1cGVyLmF0dGFjaGVkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB3YXNTY2hlbWE6Ym9vbGVhbjtcblxuICAgIC8vIHByaXZhdGUgc2V0U2NoZW1hKHVuaXRQYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMud2FzU2NoZW1hKXtcbiAgICAvLyAgICAgICAgIHRoaXMuc2NoZW1hVmlldy5kaXNwb3NlKCk7XG4gICAgLy8gICAgICAgICB0aGlzLnNjaGVtYVZpZXc9bnVsbDtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB2YXIga2V5ID0gbm9kZS5hdHRyKFwia2V5XCIpLFxuICAgIC8vICAgICAgICAgdmFsdWUgPSBub2RlLmF0dHIoXCJ2YWx1ZVwiKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgc3N0byA9IDEyO1xuICAgIC8vXG4gICAgLy8gICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgLy8gICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGVhcigpO1xuICAgIC8vICAgICAgICAgdmFyIGVyckxhYmVsID0gVUkuaDMoXCJTZWxlY3RlZCBzY2hlbWEgaGFzIGluY29ycmVjdCBub2RlIHNvIGNhbm5vdCBiZSBkaXNwbGF5ZWQuXCIpO1xuICAgIC8vICAgICAgICAgVUkuYXBwbHlTdHlsaW5nKFVJLlRleHRDbGFzc2VzLldBUk5JTkcsIGVyckxhYmVsKTtcbiAgICAvLyAgICAgICAgIGVyckxhYmVsLnNldFN0eWxlKFwidGV4dC1hbGlnblwiLCBcImNlbnRlclwiKS5tYXJnaW4oMCwgMCwgMjQsIDEyKTtcbiAgICAvLyAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGVyckxhYmVsKTtcbiAgICAvLyAgICAgICAgIHJldHVybjtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICAvL0ZJWE1FXG4gICAgLy8gICAgIHNldEludGVydmFsKCgpPT57XG4gICAgLy8gICAgICAgICBpZiAoc3N0bysrICE9IDEyKSByZXR1cm47XG4gICAgLy8gICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAvLyAgICAgICAgICAgICB2YWx1ZS5zZXRWYWx1ZShzY2hlbWFUZXh0KTtcbiAgICAvLyAgICAgICAgICAgICBzY2hlbWFVSS5fdXBkYXRlUHJldmlldyh0cmVlVmlldywgc2NoZW1hVGV4dCk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH0sIDEwMCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIHNjaGVtYVRleHQgPSB2YWx1ZS52YWx1ZSgpO1xuICAgIC8vXG4gICAgLy8gICAgIHRoaXMuY29udGFpbmVyLmNsZWFyKCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIHRleHRWaWV3ID0gZGlhbG9ncy5zbWFsbEVkaXRvcigoZSx2KT0+e1xuICAgIC8vICAgICAgICAgaWYgKHZhbHVlLmxvd0xldmVsKCkuaW5jbHVkZVBhdGgoKSl7XG4gICAgLy8gICAgICAgICAgICAgdHJ5IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFyIHNtID0gcGF0aC5kaXJuYW1lKG5vZGUubG93TGV2ZWwoKS51bml0KCkuYWJzb2x1dGVQYXRoKCkpO1xuICAgIC8vICAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmUgPSBwYXRoLnJlc29sdmUoc20sIHZhbHVlLmxvd0xldmVsKCkuaW5jbHVkZVBhdGgoKSk7XG4gICAgLy8gICAgICAgICAgICAgICAgIGlmICghdmFsdWUubG93TGV2ZWwoKS5pbmNsdWRlUmVmZXJlbmNlKCkpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMocmVsYXRpdmUsIHYpO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIC8vIGlmICh2IT1zY2hlbWFUZXh0KSB0ZXh0Vmlldy5zZXRUZXh0KHNjaGVtYVRleHQpOyAvLyByZWFkLW9ubHkgdmFyaWFudFxuICAgIC8vICAgICAgICAgc2NoZW1hVGV4dCA9IHY7XG4gICAgLy8gICAgICAgICBzc3RvID0gMDtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gICAgIGRpYWxvZ3MuX3VwZGF0ZUVkaXRvcih0ZXh0Vmlldywgc2NoZW1hVGV4dCk7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIHRyZWVWaWV3ID0gc2NoZW1hVUkuX3NjaGVtYVByZXZpZXcoKTtcbiAgICAvLyAgICAgc2NoZW1hVUkuX3VwZGF0ZVByZXZpZXcodHJlZVZpZXcsIHNjaGVtYVRleHQpO1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBzY2hlbWFUYWIgPSBuZXcgVUkuVGFiRm9sZGVyKCk7XG4gICAgLy8gICAgIHNjaGVtYVRhYi5hZGQoXCJUcmVlIHZpZXdcIiwgVUkuSWNvbi5HSVRfTUVSR0UsIHRyZWVWaWV3KTtcbiAgICAvLyAgICAgc2NoZW1hVGFiLmFkZChcIlRleHQgdmlld1wiLCBVSS5JY29uLkZJTEVfVEVYVCwgdGV4dFZpZXcpO1xuICAgIC8vICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZChzY2hlbWFUYWIpO1xuICAgIC8vXG4gICAgLy8gICAgIHdpbmRvd1snZGV0YWlsc25vZGUnXSA9IG5vZGU7XG4gICAgLy8gICAgIGlmIChkZXRhaWxzLm9sZEl0ZW0pe1xuICAgIC8vICAgICAgICAgZGV0YWlscy5vbGRJdGVtLmRldGFjaCgpO1xuICAgIC8vICAgICAgICAgZGV0YWlscy5vbGRJdGVtPW51bGw7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgdGhpcy5zY2hlbWFWaWV3PXRleHRWaWV3O1xuICAgIC8vICAgICB0aGlzLndhc1NjaGVtYT10cnVlO1xuICAgIC8vIH1cbiAgICBzY2hlbWFWaWV3OlVJLkJhc2ljQ29tcG9uZW50PGFueT47XG5cblxuICAgIHByaXZhdGUgc2V0UmVzb3VyY2UoZGV0YWlsc05vZGU6IHJhbWxTZXJ2ZXIuRGV0YWlsc0l0ZW1KU09OLCBjb250ZXh0OiBkZXRhaWxzLkRldGFpbHNDb250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLndhc1NjaGVtYSl7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYVZpZXcuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWFWaWV3PW51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXNTY2hlbWE9ZmFsc2U7XG5cbiAgICAgICAgd2luZG93W1wiZGV0YWlsc25vZGVcIl0gPSBkZXRhaWxzTm9kZTtcbiAgICAgICAgd2luZG93W1wiZGV0YWlsc2NvbnRleHRcIl0gPSBjb250ZXh0O1xuXG4gICAgICAgIGlmIChkZXRhaWxzTm9kZSA9PSBudWxsKSB0aGlzLmRpc3BsYXlFbXB0eSgpO1xuICAgICAgICBkZXRhaWxzLnVwZGF0ZURldGFpbHNQYW5lbChkZXRhaWxzTm9kZSwgY29udGV4dCwgdGhpcy5jb250YWluZXIsIHRydWUpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYod2luZG93W1wiZGV0YWlsc25vZGVcIl0pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzb3VyY2Uod2luZG93W1wiZGV0YWlsc25vZGVcIl0sIHdpbmRvd1tcImRldGFpbHNjb250ZXh0XCJdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BsYXlFbXB0eSgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xlYXIoKTtcbiAgICAgICAgLy8gaWYgKCFlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuYXN0KSB7XG4gICAgICAgIC8vICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZChVSS5oMyhcIk91ciBBUEkgaXMgZmFidWxvdXNseSBlbXB0eVwiKS5tYXJnaW4oOCwgOCwgMjAsIDgpKTtcbiAgICAgICAgLy8gICAgIHZhciBjcmVhdGUgPSBuZXcgVUkuQnV0dG9uKFwiQ3JlYXRlIG5ldyBBUElcIiwgVUkuQnV0dG9uU2l6ZXMuTEFSR0UsIFVJLkJ1dHRvbkhpZ2hsaWdodHMuU1VDQ0VTUywgVUkuSWNvbi5SRVBPX0NMT05FLCAoKT0+ZGlhbG9ncy5uZXdBcGkoKSk7XG4gICAgICAgIC8vICAgICBjcmVhdGUubWFyZ2luKDgsIDgsIDIwLCAwKTtcbiAgICAgICAgLy8gICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGNyZWF0ZSk7XG4gICAgICAgIC8vIH1cbiAgICB9XG4gICAgZGVzdHJveSAoKTogdm9pZCB7XG4gICAgICAgIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5fZGV0YWlscz1udWxsO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGVzLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fdW5pdFBhdGg9bnVsbDtcbiAgICAgICAgdGhpcy5fcG9zaXRpb249bnVsbDtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lcj1udWxsO1xuICAgICAgICB3aW5kb3dbXCJkZXRhaWxzbm9kZVwiXT1udWxsO1xuICAgICAgICB3aW5kb3dbXCJkZXRhaWxzY29udGV4dFwiXT1udWxsO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbj1bXTtcbiAgICAgICAgaWYgKGRldGFpbHMub2xkSXRlbSl7XG4gICAgICAgICAgICBkZXRhaWxzLm9sZEl0ZW0uZGV0YWNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud2FzU2NoZW1hKXtcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hVmlldy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYVZpZXc9bnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkZXRhaWxzLm9sZEl0ZW09bnVsbDtcbiAgICB9XG5cbiAgICBzaG93KHVuaXRQYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIsIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFmb3JjZSAmJiB0aGlzLl91bml0UGF0aCA9PSB1bml0UGF0aCAmJiB0aGlzLl9wb3NpdGlvbiA9PT0gcG9zaXRpb24pIHJldHVybjtcbiAgICAgICAgdGhpcy5fdW5pdFBhdGggPSB1bml0UGF0aDtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgY29uc3QgcmVjb25jaWxlciA9IHRoaXMucmVjb25jaWxlcjtcblxuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICAvLyBpZiAoaXNTY2hlbWEobm9kZSkpXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5zZXRTY2hlbWEodGhpcy5fbm9kZSk7XG4gICAgICAgICAgICAvLyBlbHNlXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5zZXRSZXNvdXJjZShub2RlKTtcblxuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmdldERldGFpbHModW5pdFBhdGgsIHBvc2l0aW9uKS50aGVuKGRldGFpbHNOb2RlPT57XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXNvdXJjZShkZXRhaWxzTm9kZSwge1xuICAgICAgICAgICAgICAgICAgICB1cmk6IHVuaXRQYXRoLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsTW9kZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByZWNvbmNpbGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuXG4gICAgb25EZXRhaWxzUmVwb3J0KHJlcG9ydCA6IHJhbWxTZXJ2ZXIuSURldGFpbHNSZXBvcnQpIHtcbiAgICAgICAgaWYgKHJlcG9ydC51cmkgIT0gdGhpcy5fdW5pdFBhdGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVjb25jaWxlciA9IHRoaXMucmVjb25jaWxlcjtcblxuICAgICAgICAvL2lmICh0aGlzLl9wb3NpdGlvbiA9PSByZXBvcnQucG9zaXRpb24pIHJldHVybjtcblxuICAgICAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZ2V0TGF0ZXN0VmVyc2lvbihyZXBvcnQudXJpKS50aGVuKGxhdGVzdFZlcnNpb249PntcblxuICAgICAgICAgICAgLy9pZ25vcmluZyBvdXRkYXRlZCByZXBvcnRzXG4gICAgICAgICAgICBpZiAocmVwb3J0LnZlcnNpb24gIT0gbnVsbCAmJiByZXBvcnQudmVyc2lvbiA8IGxhdGVzdFZlcnNpb24pIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zZXRSZXNvdXJjZShyZXBvcnQuZGV0YWlscywge1xuICAgICAgICAgICAgICAgIHVyaTogcmVwb3J0LnVyaSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVwb3J0LnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGxvY2FsTW9kZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlY29uY2lsZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8vIGZ1bmN0aW9uIGlzU2NoZW1hKHA6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgaWYgKCFwKXtcbi8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gdW5pdmVyc2VIZWxwZXJzLmlzR2xvYmFsU2NoZW1hVHlwZShwLmRlZmluaXRpb24oKSk7XG4vLyB9Il19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/editor-tools/details-view.js\n// module id = 4\n// module chunks = 0","module.exports = require(\"atom-ui-lib\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"atom-ui-lib\"\n// module id = 5\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Created by kor on 22/06/15.\n */\nvar SpacePenViews = require(\"atom-space-pen-views\");\nvar Scrollable = /** @class */ (function (_super) {\n    __extends(Scrollable, _super);\n    function Scrollable() {\n        var _this = _super.call(this) || this;\n        _this._children = [];\n        return _this;\n    }\n    Scrollable.content = function () {\n        var v = this.div({ class: 'scrollpad pane-item padded', tabindex: -1, style: \"overflow:scroll;\" });\n        return v;\n    };\n    Scrollable.prototype.dispose = function () {\n    };\n    Scrollable.prototype.caption = function () { return \"\"; };\n    Scrollable.prototype.scroll = function (top, left) {\n        this.element.scrollTop = top;\n        this.element.scrollLeft = left;\n    };\n    Scrollable.prototype.size = function () {\n        return {\n            top: this.element.scrollTop,\n            left: this.element.scrollLeft,\n            bottom: this.element.scrollTop + this.element.clientHeight,\n            right: this.element.scrollLeft + this.element.clientWidth\n        };\n    };\n    Scrollable.prototype.changed = function () { };\n    Scrollable.prototype.refresh = function () { };\n    Scrollable.prototype.ui = function () {\n        return this.element;\n    };\n    Scrollable.prototype.setParent = function (p) {\n        if (this._parent != null)\n            this._parent.removeChild(this);\n        this._parent = p;\n    };\n    //TODO REMOVE COPY PASTE\n    Scrollable.prototype.addChild = function (child) {\n        child.setParent(this);\n        this._children.push(child);\n        //this.changed();\n    };\n    Scrollable.prototype.removeChild = function (child) {\n        this._children = this._children.filter(function (x) { return x != child; });\n        // this.changed();\n    };\n    Scrollable.prototype.doRender = function () {\n        return this.innerRenderUI();\n    };\n    /**\n     *\n     * @returns not null element;\n     */\n    Scrollable.prototype.selfRender = function () {\n        return document.createElement(\"div\");\n    };\n    Scrollable.prototype.attached = function () {\n        this.html(this.innerRenderUI());\n    };\n    Scrollable.prototype.innerRenderUI = function () {\n        var start = this.selfRender();\n        this._children.forEach(function (x) {\n            var el = x.renderUI();\n            if (el) {\n                start.appendChild(el);\n            }\n        });\n        return start;\n    };\n    Scrollable.prototype.renderUI = function () {\n        return this.element;\n    };\n    Scrollable.prototype.parent = function () {\n        return null;\n    };\n    Scrollable.prototype.children = function () {\n        return this._children;\n    };\n    Scrollable.prototype.isAttached = function () {\n        return true;\n    };\n    return Scrollable;\n}(SpacePenViews.ScrollView));\nexports.Scrollable = Scrollable;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3V0aWwvU2Nyb2xsVmlld1VJLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOztHQUVHO0FBQ0gsb0RBQXVEO0FBRXZEO0lBQWdDLDhCQUF3QjtJQUlwRDtRQUFBLFlBQ0ksaUJBQU8sU0FDVjtRQUpBLGVBQVMsR0FBcUIsRUFBRSxDQUFBOztJQUlqQyxDQUFDO0lBQ00sa0JBQU8sR0FBZDtRQUNJLElBQUksQ0FBQyxHQUFTLElBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsNEJBQTRCLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRSxDQUFDLENBQUE7UUFFekcsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNiLENBQUM7SUFDRCw0QkFBTyxHQUFQO0lBRUEsQ0FBQztJQUlELDRCQUFPLEdBQVAsY0FBWSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV4QiwyQkFBTSxHQUFOLFVBQU8sR0FBVyxFQUFFLElBQVk7UUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO1FBQzdCLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztJQUNuQyxDQUFDO0lBRUQseUJBQUksR0FBSjtRQUNJLE1BQU0sQ0FBQztZQUNILEdBQUcsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVM7WUFDM0IsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVTtZQUM3QixNQUFNLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZO1lBQzFELEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVc7U0FDNUQsQ0FBQTtJQUNMLENBQUM7SUFFRCw0QkFBTyxHQUFQLGNBQVksQ0FBQztJQUNiLDRCQUFPLEdBQVAsY0FBWSxDQUFDO0lBR2IsdUJBQUUsR0FBRjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFJRCw4QkFBUyxHQUFULFVBQVUsQ0FBaUI7UUFDdkIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUM7WUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDckIsQ0FBQztJQUVELHdCQUF3QjtJQUN4Qiw2QkFBUSxHQUFSLFVBQVMsS0FBNEM7UUFDakQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixpQkFBaUI7SUFDckIsQ0FBQztJQUNELGdDQUFXLEdBQVgsVUFBWSxLQUFxQjtRQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQUEsQ0FBQyxJQUFHLE9BQUEsQ0FBQyxJQUFJLEtBQUssRUFBVixDQUFVLENBQUMsQ0FBQztRQUN2RCxrQkFBa0I7SUFDdEIsQ0FBQztJQUNELDZCQUFRLEdBQVI7UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFDRDs7O09BR0c7SUFDSywrQkFBVSxHQUFsQjtRQUNJLE1BQU0sQ0FBTSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ1UsSUFBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQTtJQUMxQyxDQUFDO0lBRUQsa0NBQWEsR0FBYjtRQUNJLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFBLENBQUM7WUFDcEIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFBO1lBQ3JCLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ0wsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMxQixDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUVELDJCQUFNLEdBQU47UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCw2QkFBUSxHQUFSO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELCtCQUFVLEdBQVY7UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTCxpQkFBQztBQUFELENBdkdBLEFBdUdDLENBdkcrQixhQUFhLENBQUMsVUFBVSxHQXVHdkQ7QUF2R1ksZ0NBQVUiLCJmaWxlIjoic3JjL2F0b20vdXRpbC9TY3JvbGxWaWV3VUkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkga29yIG9uIDIyLzA2LzE1LlxuICovXG5pbXBvcnQgU3BhY2VQZW5WaWV3cyA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJyk7XG5pbXBvcnQgVUkgPSByZXF1aXJlKFwiYXRvbS11aS1saWJcIilcbmV4cG9ydCBjbGFzcyBTY3JvbGxhYmxlIGV4dGVuZHMgU3BhY2VQZW5WaWV3cy5TY3JvbGxWaWV3IGltcGxlbWVudHMgVUkuVUlDb21wb25lbnQge1xuXG4gICAgIF9jaGlsZHJlbjogVUkuVUlDb21wb25lbnRbXSA9IFtdXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbnRlbnQoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICB2YXIgdiA9ICg8YW55PnRoaXMpLmRpdih7IGNsYXNzOiAnc2Nyb2xscGFkIHBhbmUtaXRlbSBwYWRkZWQnLCB0YWJpbmRleDogLTEsIHN0eWxlOiBcIm92ZXJmbG93OnNjcm9sbDtcIiB9KVxuXG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuXG4gICAgfVxuICAgIGVsZW1lbnQ6SFRNTEVsZW1lbnRcblxuXG4gICAgY2FwdGlvbigpIHsgcmV0dXJuIFwiXCI7IH1cblxuICAgIHNjcm9sbCh0b3A6IG51bWJlciwgbGVmdDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0ID0gbGVmdDsgICAgXG4gICAgfVxuICAgIFxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC5zY3JvbGxUb3AsXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIGJvdHRvbTogdGhpcy5lbGVtZW50LnNjcm9sbFRvcCArIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICByaWdodDogdGhpcy5lbGVtZW50LnNjcm9sbExlZnQgKyB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGhcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoYW5nZWQoKSB7IH1cbiAgICByZWZyZXNoKCkgeyB9XG5cbiAgICBwcml2YXRlIF91aTogVUkuSFRNTFR5cGVzO1xuICAgIHVpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgX3BhcmVudDogVUkuVUlDb21wb25lbnQ7XG5cbiAgICBzZXRQYXJlbnQocDogVUkuVUlDb21wb25lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhcmVudCAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5fcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHA7XG4gICAgfVxuXG4gICAgLy9UT0RPIFJFTU9WRSBDT1BZIFBBU1RFXG4gICAgYWRkQ2hpbGQoY2hpbGQ6IFVJLlVJQ29tcG9uZW50fFVJLkJhc2ljQ29tcG9uZW50PGFueT4pIHtcbiAgICAgICAgY2hpbGQuc2V0UGFyZW50KHRoaXMpO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgLy90aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQ6IFVJLlVJQ29tcG9uZW50KSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW4uZmlsdGVyKHg9PiB4ICE9IGNoaWxkKTtcbiAgICAgICAgLy8gdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICAgIGRvUmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lclJlbmRlclVJKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHJldHVybnMgbm90IG51bGwgZWxlbWVudDtcbiAgICAgKi9cbiAgICBwcml2YXRlIHNlbGZSZW5kZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gPGFueT5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIH1cblxuICAgIGF0dGFjaGVkKCkge1xuICAgICAgICAoPGFueT50aGlzKS5odG1sKHRoaXMuaW5uZXJSZW5kZXJVSSgpKVxuICAgIH1cblxuICAgIGlubmVyUmVuZGVyVUkoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnNlbGZSZW5kZXIoKTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCh4PT4ge1xuICAgICAgICAgICAgdmFyIGVsID0geC5yZW5kZXJVSSgpXG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICBzdGFydC5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzdGFydDtcbiAgICB9XG5cbiAgICByZW5kZXJVSSgpOiBVSS5IVE1MVHlwZXMge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIHBhcmVudCgpOiBhbnkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjaGlsZHJlbigpOiBVSS5VSUNvbXBvbmVudFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuO1xuICAgIH1cblxuICAgIGlzQXR0YWNoZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/util/ScrollViewUI.js\n// module id = 6\n// module chunks = 0","module.exports = require(\"atom-space-pen-views\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"atom-space-pen-views\"\n// module id = 7\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UI = require(\"atom-ui-lib\");\nvar detailElements = require(\"./detailElements\");\nvar HTTPANDHTTPS = \"HTTP, HTTPS\";\nvar HTTPHTTPS = \"HTTP/HTTPS\";\nexports.nodes = {\n    Api: {\n        properties: [\"title\", \"version\", \"baseUri\", \"mediaType\", \"protocols\"],\n        actions: []\n    },\n    Resource: {\n        properties: [\"relativeUri\", \"displayName\", \"description\", \"is\", \"type\"]\n    },\n    Method: {\n        properties: [\"method\", \"displayName\", \"description\", \"is\", \"type\", \"protocols\", \"securedBy\"]\n    },\n    DataElement: {\n        properties: [\"name\", \"displayName\", \"description\", \"default\", \"required\"]\n    },\n    Response: {\n        properties: [\"code\", \"description\"]\n    }\n};\nexports.filterOut = {\n    properties: [\"location\", \"annotations\", \"repeat\", \"locationKind\", \"signature\"]\n};\nvar focusedPropertyName = null;\nvar focusedPosition = -1;\nvar toFocus = null;\nfunction updateDetailsPanel(detailsReport, context, panel, updateTextOnDone) {\n    if (updateTextOnDone === void 0) { updateTextOnDone = false; }\n    panel.clear();\n    var cfg = atom.config;\n    var l = atom.styles.emitter.handlersByEventName;\n    var sadd = [].concat(l['did-add-style-element']);\n    var sremove = [].concat(l['did-remove-style-element']);\n    var schange = [].concat(l['did-update-style-element']);\n    var cfgCh = [].concat(cfg.emitter.handlersByEventName['did-change']);\n    var grammars = atom.grammars.emitter.handlersByEventName;\n    var addGrammar = [].concat(grammars[\"did-add-grammar\"]);\n    var updateGrammar = [].concat(grammars[\"did-update-grammar\"]);\n    var emptyGrammarListeners = [].concat(atom.grammars.nullGrammar.emitter.handlersByEventName[\"did-update\"]);\n    try {\n        var empty = true;\n        var item = detailElements.buildItem(detailsReport, context, false);\n        // item.addListener(x=> {\n        //     editorTools.aquireManager().updateText(null);\n        // })\n        var rend;\n        try {\n            rend = item.render({});\n        }\n        finally {\n            if (exports.oldItem) {\n                exports.oldItem.detach();\n            }\n            exports.oldItem = item;\n            if (rend) {\n                panel.addChild(rend);\n            }\n            empty = false;\n        }\n        if (toFocus) {\n            var field = toFocus.getActualField().ui();\n            field.focus();\n            field.getModel().setCursorBufferPosition(focusedPosition);\n            toFocus = null;\n            focusedPosition = null;\n            focusedPropertyName = null;\n        }\n        if (empty) {\n            var errLabel = UI.h3(\"Object has no additional properties.\");\n            UI.applyStyling(UI.TextClasses.WARNING, errLabel);\n            errLabel.setStyle(\"text-align\", \"center\").margin(0, 0, 24, 12);\n            panel.addChild(errLabel);\n        }\n    }\n    catch (Error) {\n        throw Error;\n    }\n    finally {\n        cfg.emitter.handlersByEventName['did-change'] = cfgCh;\n        l['did-add-style-element'] = sadd;\n        l['did-remove-style-element'] = sremove;\n        l['did-update-style-element'] = schange;\n        grammars[\"did-add-grammar\"] = addGrammar;\n        grammars[\"did-update-grammar\"] = updateGrammar;\n        atom.grammars.nullGrammar.emitter.handlersByEventName[\"did-update\"] = emptyGrammarListeners;\n    }\n}\nexports.updateDetailsPanel = updateDetailsPanel;\n// function getSchemaType(value: string)\n// {\n//     var schema = schemautil.createSchema(value, null);\n//     if (!schema || !schema.getType) return \"Invalid\";\n//     switch (schema.getType()) {\n//         case \"source.json\":\n//             return \"JSON\";\n//         case \"text.xml\":\n//             return \"XML\";\n//         default :\n//             return \"Unknown type\";\n//     }\n// }\n// export function getStringValue(x : string | hl.IStructuredValue) : string {\n//     if (typeof x ===\"object\") return (<hl.IStructuredValue>x).valueName();\n//     else return <string>x;\n// }\n//\n// export function propertyInfo(node: hl.IHighLevelNode, name: string) {\n//     var prop = node.definition().property(name);\n//     if (prop.isValueProperty() == false) return null;\n//     var isMulti = prop.isMultiValue();\n//     var required = prop.isRequired();\n//     var value : string;\n//     var values = [];\n//     var type : string;\n//     var ipath: string;\n//     var rangeName = prop.range().nameId();\n//\n//     if (isMulti) {\n//         values = node.attributes(name).map(x=>x.value());\n//         value = values.map(x=>getStringValue(x)).join(\", \");\n//         switch (rangeName) {\n//             case \"StringType\":\n//                 type = 'enum';\n//                 if (!node.definition().getAdapter(def.RAMLService).isUserDefined()&&name==\"protocols\"){\n//                     type=\"protocols\"\n//                 }\n//                 break;\n//             case \"TraitRef\":\n//                 type = 'trait';\n//                 break;\n//             default:\n//                 type = 'unknown';\n//         }\n//     } else {\n//         var attr = node.attr(name);\n//         value = attr && attr.value() ? attr.value() : \"\";\n//\n//         switch (rangeName) {\n//             case \"MarkdownString\":\n//                 type = 'markdown';\n//                 values = value.split(\"\\n\");\n//                 value =  values[0];\n//                 break;\n//             case \"SchemaString\":\n//                 type = 'schema';\n//                 if (value.indexOf(\"\\n\") >= 0) {\n//                     values = [value];\n//                     value = \"(\" + getSchemaType(value) + \" Schema)\";\n//                 }\n//                 break;\n//             case \"ExampleString\":\n//                 type = 'schexample';\n//                 try {\n//                     ipath = attr.lowLevel().includePath();\n//                 } catch(e) { ipath = \"\"; }\n//                 values = [value, ipath];\n//                 value =  \"Example\" + (ipath != \"\" ? \" (referenced from \" + ipath + \")\" : \"\");\n//                 break;\n//             case \"ResourceTypeRef\":\n//                 type = \"type\";\n//                 break;\n//             default:\n//                 type = 'string';\n//         }\n//         if (type == \"string\") {\n//             if (value.indexOf(\"\\n\") >= 0) {\n//                 values = value.split(\"\\n\");\n//                 value = \"(\" + values.length + \" lines) \" + values[0].substring(0, 20) + \" ...\";\n//                 type = \"multiline\";\n//             }\n//             if (attr)\n//                 ipath = attr.lowLevel().includePath();\n//\n//             if (ipath) {\n//                 value = \"(included from \" + ipath +\")\";\n//                 type = \"include\";\n//             }\n//         }\n//     }\n//     var ret = {\n//         value: value,\n//         values: values,\n//         type: type,\n//         include: ipath,\n//         required: required,\n//     };\n//     return ret;\n// }\n// export function stringView(node: hl.IHighLevelNode, name: string) {\n//     return getStringValue(propertyInfo(node, name).value);\n// } \n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEsZ0NBQWdDO0FBSWhDLGlEQUFpRDtBQUlqRCxJQUFJLFlBQVksR0FBQyxhQUFhLENBQUE7QUFDOUIsSUFBSSxTQUFTLEdBQUMsWUFBWSxDQUFBO0FBR2YsUUFBQSxLQUFLLEdBQUM7SUFDYixHQUFHLEVBQUM7UUFDQSxVQUFVLEVBQUMsQ0FBQyxPQUFPLEVBQUMsU0FBUyxFQUFDLFNBQVMsRUFBQyxXQUFXLEVBQUMsV0FBVyxDQUFDO1FBQ2hFLE9BQU8sRUFBQyxFQUNQO0tBQ0o7SUFFRCxRQUFRLEVBQUM7UUFDTCxVQUFVLEVBQUMsQ0FBQyxhQUFhLEVBQUMsYUFBYSxFQUFDLGFBQWEsRUFBQyxJQUFJLEVBQUMsTUFBTSxDQUFDO0tBQ3JFO0lBQ0QsTUFBTSxFQUFDO1FBQ0gsVUFBVSxFQUFDLENBQUMsUUFBUSxFQUFDLGFBQWEsRUFBQyxhQUFhLEVBQUMsSUFBSSxFQUFDLE1BQU0sRUFBQyxXQUFXLEVBQUMsV0FBVyxDQUFDO0tBQ3hGO0lBRUQsV0FBVyxFQUFDO1FBQ1IsVUFBVSxFQUFDLENBQUMsTUFBTSxFQUFDLGFBQWEsRUFBQyxhQUFhLEVBQUMsU0FBUyxFQUFDLFVBQVUsQ0FBQztLQUN2RTtJQUNELFFBQVEsRUFBQztRQUNMLFVBQVUsRUFBQyxDQUFDLE1BQU0sRUFBQyxhQUFhLENBQUM7S0FDcEM7Q0FDSixDQUFBO0FBQ1UsUUFBQSxTQUFTLEdBQUM7SUFDakIsVUFBVSxFQUFDLENBQUMsVUFBVSxFQUFDLGFBQWEsRUFBQyxRQUFRLEVBQUMsY0FBYyxFQUFDLFdBQVcsQ0FBQztDQUU1RSxDQUFBO0FBRUQsSUFBSyxtQkFBbUIsR0FBVyxJQUFJLENBQUM7QUFDeEMsSUFBSSxlQUFlLEdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDakMsSUFBSSxPQUFPLEdBQWtCLElBQUksQ0FBQztBQUdsQyw0QkFBbUMsYUFBeUMsRUFDekMsT0FBc0Ms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QXNCO0FBQ3RCLDBCQUEwQjtBQUMxQiw4QkFBOEI7QUFDOUIsU0FBUztBQUNULGtCQUFrQjtBQUNsQixJQUFJO0FBQ0osc0VBQXNFO0FBQ3RFLDZEQUE2RDtBQUM3RCxJQUFJIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cbmltcG9ydCBmcyA9IHJlcXVpcmUgKCdmcycpXG5pbXBvcnQgcGF0aD1yZXF1aXJlKCdwYXRoJylcbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgVUk9cmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgU3BhY2VQZW5WaWV3cyA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJylcbmltcG9ydCBkaWFsb2dzPXJlcXVpcmUoXCIuLi9kaWFsb2dzL2RpYWxvZ3NcIilcbmltcG9ydCBlZGl0b3JUb29scz1yZXF1aXJlKFwiLi9lZGl0b3ItdG9vbHNcIilcbmltcG9ydCBkZXRhaWxFbGVtZW50cz1yZXF1aXJlKFwiLi9kZXRhaWxFbGVtZW50c1wiKVxuXG5leHBvcnQgdHlwZSBEZXRhaWxzQ29udGV4dCA9IGRldGFpbEVsZW1lbnRzLkRldGFpbHNDb250ZXh0O1xuXG52YXIgSFRUUEFOREhUVFBTPVwiSFRUUCwgSFRUUFNcIlxudmFyIEhUVFBIVFRQUz1cIkhUVFAvSFRUUFNcIlxuaW1wb3J0IHJhbWxTZXJ2ZXIgPSByZXF1aXJlKFwicmFtbC1sYW5ndWFnZS1zZXJ2ZXJcIik7XG5cbmV4cG9ydCB2YXIgbm9kZXM9e1xuICAgIEFwaTp7XG4gICAgICAgIHByb3BlcnRpZXM6W1widGl0bGVcIixcInZlcnNpb25cIixcImJhc2VVcmlcIixcIm1lZGlhVHlwZVwiLFwicHJvdG9jb2xzXCJdLFxuICAgICAgICBhY3Rpb25zOltcbiAgICAgICAgXVxuICAgIH1cbiAgICAsXG4gICAgUmVzb3VyY2U6e1xuICAgICAgICBwcm9wZXJ0aWVzOltcInJlbGF0aXZlVXJpXCIsXCJkaXNwbGF5TmFtZVwiLFwiZGVzY3JpcHRpb25cIixcImlzXCIsXCJ0eXBlXCJdXG4gICAgfSxcbiAgICBNZXRob2Q6e1xuICAgICAgICBwcm9wZXJ0aWVzOltcIm1ldGhvZFwiLFwiZGlzcGxheU5hbWVcIixcImRlc2NyaXB0aW9uXCIsXCJpc1wiLFwidHlwZVwiLFwicHJvdG9jb2xzXCIsXCJzZWN1cmVkQnlcIl1cbiAgICB9XG4gICAgLFxuICAgIERhdGFFbGVtZW50OntcbiAgICAgICAgcHJvcGVydGllczpbXCJuYW1lXCIsXCJkaXNwbGF5TmFtZVwiLFwiZGVzY3JpcHRpb25cIixcImRlZmF1bHRcIixcInJlcXVpcmVkXCJdXG4gICAgfSxcbiAgICBSZXNwb25zZTp7XG4gICAgICAgIHByb3BlcnRpZXM6W1wiY29kZVwiLFwiZGVzY3JpcHRpb25cIl1cbiAgICB9XG59XG5leHBvcnQgdmFyIGZpbHRlck91dD17XG4gICAgcHJvcGVydGllczpbXCJsb2NhdGlvblwiLFwiYW5ub3RhdGlvbnNcIixcInJlcGVhdFwiLFwibG9jYXRpb25LaW5kXCIsXCJzaWduYXR1cmVcIl1cblxufVxuXG52YXIgIGZvY3VzZWRQcm9wZXJ0eU5hbWU6IHN0cmluZyA9IG51bGw7XG52YXIgZm9jdXNlZFBvc2l0aW9uOiBudW1iZXIgPSAtMTtcbnZhciB0b0ZvY3VzIDogVUkuVGV4dEZpZWxkID0gbnVsbDtcblxuZXhwb3J0IHZhciBvbGRJdGVtO1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURldGFpbHNQYW5lbChkZXRhaWxzUmVwb3J0OiByYW1sU2VydmVyLkRldGFpbHNJdGVtSlNPTixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogZGV0YWlsRWxlbWVudHMuRGV0YWlsc0NvbnRleHQsIHBhbmVsOiBVSS5QYW5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGV4dE9uRG9uZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgcGFuZWwuY2xlYXIoKTtcbiAgICB2YXIgY2ZnPSg8YW55PmF0b20pLmNvbmZpZ1xuICAgIHZhciBsPSg8YW55PmF0b20pLnN0eWxlcy5lbWl0dGVyLmhhbmRsZXJzQnlFdmVudE5hbWU7XG4gICAgdmFyIHNhZGQ6YW55W109W10uY29uY2F0KGxbJ2RpZC1hZGQtc3R5bGUtZWxlbWVudCddKTtcbiAgICB2YXIgc3JlbW92ZTphbnlbXT1bXS5jb25jYXQobFsnZGlkLXJlbW92ZS1zdHlsZS1lbGVtZW50J10pO1xuICAgIHZhciBzY2hhbmdlOmFueVtdPVtdLmNvbmNhdChsWydkaWQtdXBkYXRlLXN0eWxlLWVsZW1lbnQnXSk7XG4gICAgdmFyIGNmZ0NoOmFueVtdPVtdLmNvbmNhdChjZmcuZW1pdHRlci5oYW5kbGVyc0J5RXZlbnROYW1lWydkaWQtY2hhbmdlJ10pO1xuICAgIHZhciBncmFtbWFycz0oPGFueT5hdG9tKS5ncmFtbWFycy5lbWl0dGVyLmhhbmRsZXJzQnlFdmVudE5hbWU7XG4gICAgdmFyIGFkZEdyYW1tYXI6YW55W109W10uY29uY2F0KGdyYW1tYXJzW1wiZGlkLWFkZC1ncmFtbWFyXCJdKTtcbiAgICB2YXIgdXBkYXRlR3JhbW1hcjphbnlbXT1bXS5jb25jYXQoZ3JhbW1hcnNbXCJkaWQtdXBkYXRlLWdyYW1tYXJcIl0pO1xuICAgIHZhciBlbXB0eUdyYW1tYXJMaXN0ZW5lcnM9W10uY29uY2F0KCg8YW55PmF0b20pLmdyYW1tYXJzLm51bGxHcmFtbWFyLmVtaXR0ZXIuaGFuZGxlcnNCeUV2ZW50TmFtZVtcImRpZC11cGRhdGVcIl0pO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBlbXB0eSA9IHRydWU7XG5cbiAgICAgICAgdmFyIGl0ZW0gPSBkZXRhaWxFbGVtZW50cy5idWlsZEl0ZW0oZGV0YWlsc1JlcG9ydCwgY29udGV4dCwgZmFsc2UpO1xuICAgICAgICAvLyBpdGVtLmFkZExpc3RlbmVyKHg9PiB7XG4gICAgICAgIC8vICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkudXBkYXRlVGV4dChudWxsKTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgdmFyIHJlbmQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZW5kID0gaXRlbS5yZW5kZXIoe30pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKG9sZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICBvbGRJdGVtLmRldGFjaCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvbGRJdGVtID0gaXRlbTtcblxuICAgICAgICAgICAgaWYgKHJlbmQpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC5hZGRDaGlsZChyZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b0ZvY3VzKSB7XG4gICAgICAgICAgICB2YXIgZmllbGQgPSB0b0ZvY3VzLmdldEFjdHVhbEZpZWxkKCkudWkoKTtcbiAgICAgICAgICAgIGZpZWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAoPGFueT4gZmllbGQpLmdldE1vZGVsKCkuc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oZm9jdXNlZFBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRvRm9jdXMgPSBudWxsO1xuICAgICAgICAgICAgZm9jdXNlZFBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGZvY3VzZWRQcm9wZXJ0eU5hbWUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVtcHR5KSB7XG4gICAgICAgICAgICB2YXIgZXJyTGFiZWwgPSBVSS5oMyhcIk9iamVjdCBoYXMgbm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLlwiKTtcbiAgICAgICAgICAgIFVJLmFwcGx5U3R5bGluZyhVSS5UZXh0Q2xhc3Nlcy5XQVJOSU5HLCBlcnJMYWJlbCk7XG4gICAgICAgICAgICBlcnJMYWJlbC5zZXRTdHlsZShcInRleHQtYWxpZ25cIiwgXCJjZW50ZXJcIikubWFyZ2luKDAsIDAsIDI0LCAxMik7XG4gICAgICAgICAgICBwYW5lbC5hZGRDaGlsZChlcnJMYWJlbCk7XG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2goRXJyb3Ipe1xuICAgICAgICB0aHJvdyBFcnJvcjtcbiAgICB9IGZpbmFsbHkge1xuXG4gICAgICAgIGNmZy5lbWl0dGVyLmhhbmRsZXJzQnlFdmVudE5hbWVbJ2RpZC1jaGFuZ2UnXT1jZmdDaDtcbiAgICAgICAgbFsnZGlkLWFkZC1zdHlsZS1lbGVtZW50J109c2FkZDtcbiAgICAgICAgbFsnZGlkLXJlbW92ZS1zdHlsZS1lbGVtZW50J109c3JlbW92ZTtcbiAgICAgICAgbFsnZGlkLXVwZGF0ZS1zdHlsZS1lbGVtZW50J109c2NoYW5nZTtcbiAgICAgICAgZ3JhbW1hcnNbXCJkaWQtYWRkLWdyYW1tYXJcIl09YWRkR3JhbW1hcjtcbiAgICAgICAgZ3JhbW1hcnNbXCJkaWQtdXBkYXRlLWdyYW1tYXJcIl09dXBkYXRlR3JhbW1hcjtcbiAgICAgICAgKDxhbnk+YXRvbSkuZ3JhbW1hcnMubnVsbEdyYW1tYXIuZW1pdHRlci5oYW5kbGVyc0J5RXZlbnROYW1lW1wiZGlkLXVwZGF0ZVwiXT1lbXB0eUdyYW1tYXJMaXN0ZW5lcnM7XG4gICAgfVxufVxuXG5cblxuXG5cbi8vIGZ1bmN0aW9uIGdldFNjaGVtYVR5cGUodmFsdWU6IHN0cmluZylcbi8vIHtcbi8vICAgICB2YXIgc2NoZW1hID0gc2NoZW1hdXRpbC5jcmVhdGVTY2hlbWEodmFsdWUsIG51bGwpO1xuLy8gICAgIGlmICghc2NoZW1hIHx8ICFzY2hlbWEuZ2V0VHlwZSkgcmV0dXJuIFwiSW52YWxpZFwiO1xuLy8gICAgIHN3aXRjaCAoc2NoZW1hLmdldFR5cGUoKSkge1xuLy8gICAgICAgICBjYXNlIFwic291cmNlLmpzb25cIjpcbi8vICAgICAgICAgICAgIHJldHVybiBcIkpTT05cIjtcbi8vICAgICAgICAgY2FzZSBcInRleHQueG1sXCI6XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJYTUxcIjtcbi8vICAgICAgICAgZGVmYXVsdCA6XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJVbmtub3duIHR5cGVcIjtcbi8vICAgICB9XG4vLyB9XG4vLyBleHBvcnQgZnVuY3Rpb24gZ2V0U3RyaW5nVmFsdWUoeCA6IHN0cmluZyB8IGhsLklTdHJ1Y3R1cmVkVmFsdWUpIDogc3RyaW5nIHtcbi8vICAgICBpZiAodHlwZW9mIHggPT09XCJvYmplY3RcIikgcmV0dXJuICg8aGwuSVN0cnVjdHVyZWRWYWx1ZT54KS52YWx1ZU5hbWUoKTtcbi8vICAgICBlbHNlIHJldHVybiA8c3RyaW5nPng7XG4vLyB9XG4vL1xuLy8gZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5SW5mbyhub2RlOiBobC5JSGlnaExldmVsTm9kZSwgbmFtZTogc3RyaW5nKSB7XG4vLyAgICAgdmFyIHByb3AgPSBub2RlLmRlZmluaXRpb24oKS5wcm9wZXJ0eShuYW1lKTtcbi8vICAgICBpZiAocHJvcC5pc1ZhbHVlUHJvcGVydHkoKSA9PSBmYWxzZSkgcmV0dXJuIG51bGw7XG4vLyAgICAgdmFyIGlzTXVsdGkgPSBwcm9wLmlzTXVsdGlWYWx1ZSgpO1xuLy8gICAgIHZhciByZXF1aXJlZCA9IHByb3AuaXNSZXF1aXJlZCgpO1xuLy8gICAgIHZhciB2YWx1ZSA6IHN0cmluZztcbi8vICAgICB2YXIgdmFsdWVzID0gW107XG4vLyAgICAgdmFyIHR5cGUgOiBzdHJpbmc7XG4vLyAgICAgdmFyIGlwYXRoOiBzdHJpbmc7XG4vLyAgICAgdmFyIHJhbmdlTmFtZSA9IHByb3AucmFuZ2UoKS5uYW1lSWQoKTtcbi8vXG4vLyAgICAgaWYgKGlzTXVsdGkpIHtcbi8vICAgICAgICAgdmFsdWVzID0gbm9kZS5hdHRyaWJ1dGVzKG5hbWUpLm1hcCh4PT54LnZhbHVlKCkpO1xuLy8gICAgICAgICB2YWx1ZSA9IHZhbHVlcy5tYXAoeD0+Z2V0U3RyaW5nVmFsdWUoeCkpLmpvaW4oXCIsIFwiKTtcbi8vICAgICAgICAgc3dpdGNoIChyYW5nZU5hbWUpIHtcbi8vICAgICAgICAgICAgIGNhc2UgXCJTdHJpbmdUeXBlXCI6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICdlbnVtJztcbi8vICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuZGVmaW5pdGlvbigpLmdldEFkYXB0ZXIoZGVmLlJBTUxTZXJ2aWNlKS5pc1VzZXJEZWZpbmVkKCkmJm5hbWU9PVwicHJvdG9jb2xzXCIpe1xuLy8gICAgICAgICAgICAgICAgICAgICB0eXBlPVwicHJvdG9jb2xzXCJcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBjYXNlIFwiVHJhaXRSZWZcIjpcbi8vICAgICAgICAgICAgICAgICB0eXBlID0gJ3RyYWl0Jztcbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGRlZmF1bHQ6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICd1bmtub3duJztcbi8vICAgICAgICAgfVxuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIHZhciBhdHRyID0gbm9kZS5hdHRyKG5hbWUpO1xuLy8gICAgICAgICB2YWx1ZSA9IGF0dHIgJiYgYXR0ci52YWx1ZSgpID8gYXR0ci52YWx1ZSgpIDogXCJcIjtcbi8vXG4vLyAgICAgICAgIHN3aXRjaCAocmFuZ2VOYW1lKSB7XG4vLyAgICAgICAgICAgICBjYXNlIFwiTWFya2Rvd25TdHJpbmdcIjpcbi8vICAgICAgICAgICAgICAgICB0eXBlID0gJ21hcmtkb3duJztcbi8vICAgICAgICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZS5zcGxpdChcIlxcblwiKTtcbi8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICB2YWx1ZXNbMF07XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBjYXNlIFwiU2NoZW1hU3RyaW5nXCI6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICdzY2hlbWEnO1xuLy8gICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKFwiXFxuXCIpID49IDApIHtcbi8vICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gW3ZhbHVlXTtcbi8vICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBcIihcIiArIGdldFNjaGVtYVR5cGUodmFsdWUpICsgXCIgU2NoZW1hKVwiO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGNhc2UgXCJFeGFtcGxlU3RyaW5nXCI6XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9ICdzY2hleGFtcGxlJztcbi8vICAgICAgICAgICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgICAgICAgICBpcGF0aCA9IGF0dHIubG93TGV2ZWwoKS5pbmNsdWRlUGF0aCgpO1xuLy8gICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkgeyBpcGF0aCA9IFwiXCI7IH1cbi8vICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBbdmFsdWUsIGlwYXRoXTtcbi8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICBcIkV4YW1wbGVcIiArIChpcGF0aCAhPSBcIlwiID8gXCIgKHJlZmVyZW5jZWQgZnJvbSBcIiArIGlwYXRoICsgXCIpXCIgOiBcIlwiKTtcbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGNhc2UgXCJSZXNvdXJjZVR5cGVSZWZcIjpcbi8vICAgICAgICAgICAgICAgICB0eXBlID0gXCJ0eXBlXCI7XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBkZWZhdWx0OlxuLy8gICAgICAgICAgICAgICAgIHR5cGUgPSAnc3RyaW5nJztcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAodHlwZSA9PSBcInN0cmluZ1wiKSB7XG4vLyAgICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZihcIlxcblwiKSA+PSAwKSB7XG4vLyAgICAgICAgICAgICAgICAgdmFsdWVzID0gdmFsdWUuc3BsaXQoXCJcXG5cIik7XG4vLyAgICAgICAgICAgICAgICAgdmFsdWUgPSBcIihcIiArIHZhbHVlcy5sZW5ndGggKyBcIiBsaW5lcykgXCIgKyB2YWx1ZXNbMF0uc3Vic3RyaW5nKDAsIDIwKSArIFwiIC4uLlwiO1xuLy8gICAgICAgICAgICAgICAgIHR5cGUgPSBcIm11bHRpbGluZVwiO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgaWYgKGF0dHIpXG4vLyAgICAgICAgICAgICAgICAgaXBhdGggPSBhdHRyLmxvd0xldmVsKCkuaW5jbHVkZVBhdGgoKTtcbi8vXG4vLyAgICAgICAgICAgICBpZiAoaXBhdGgpIHtcbi8vICAgICAgICAgICAgICAgICB2YWx1ZSA9IFwiKGluY2x1ZGVkIGZyb20gXCIgKyBpcGF0aCArXCIpXCI7XG4vLyAgICAgICAgICAgICAgICAgdHlwZSA9IFwiaW5jbHVkZVwiO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIHZhciByZXQgPSB7XG4vLyAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbi8vICAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4vLyAgICAgICAgIHR5cGU6IHR5cGUsXG4vLyAgICAgICAgIGluY2x1ZGU6IGlwYXRoLFxuLy8gICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQsXG4vLyAgICAgfTtcbi8vICAgICByZXR1cm4gcmV0O1xuLy8gfVxuLy8gZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1ZpZXcobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUsIG5hbWU6IHN0cmluZykge1xuLy8gICAgIHJldHVybiBnZXRTdHJpbmdWYWx1ZShwcm9wZXJ0eUluZm8obm9kZSwgbmFtZSkudmFsdWUpO1xuLy8gfSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/editor-tools/details.js\n// module id = 8\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = require(\"underscore\");\nvar UI = require(\"atom-ui-lib\");\n//import contextActions = require(\"raml-actions\")\nvar assistUtils = require(\"../dialogs/assist-utils\");\nvar ramlServer = require(\"raml-language-server\");\nvar lastSelectedCaption;\nvar inRender = false;\n/**\n * Runnable that updates details values remotely\n */\nvar UpdateModelRunnable = /** @class */ (function () {\n    function UpdateModelRunnable(context, item, newValue) {\n        this.context = context;\n        this.item = item;\n        this.newValue = newValue;\n        this.cancelled = false;\n    }\n    /**\n     * Performs the actual business logics.\n     * Should resolve the promise when finished.\n     */\n    UpdateModelRunnable.prototype.run = function () {\n        if (this.context.localModel) {\n            this.context.localModel[this.item.id] = this.newValue;\n            return Promise.resolve();\n        }\n        var connection = ramlServer.getNodeClientConnection();\n        return connection.changeDetailValue(this.context.uri, this.context.position, this.item.id, this.newValue);\n    };\n    /**\n     * Whether two runnable conflict with each other.\n     * Must work fast as its called often.\n     * @param other\n     */\n    UpdateModelRunnable.prototype.conflicts = function (other) {\n        if (isUpdateModelRunnable(other)) {\n            return this.getUri() === other.getUri();\n        }\n        return false;\n    };\n    /**\n     * Cancels the runnable. run() method should do nothing if launched later,\n     * if cancel is called during the run() method execution, run() should stop as soon as it can.\n     */\n    UpdateModelRunnable.prototype.cancel = function () {\n        this.cancelled = true;\n    };\n    /**\n     * Whether cancel() method was called at least once.\n     */\n    UpdateModelRunnable.prototype.isCanceled = function () {\n        return this.cancelled;\n    };\n    UpdateModelRunnable.prototype.getUri = function () {\n        return this.context.uri;\n    };\n    return UpdateModelRunnable;\n}());\n/**\n * Instanceof for UpdateModelRunnable\n * @param runnable\n */\nfunction isUpdateModelRunnable(runnable) {\n    return runnable.getUri != null;\n}\nvar Item = /** @class */ (function () {\n    function Item(_title, description) {\n        if (description === void 0) { description = \"\"; }\n        this._title = _title;\n        this.description = description;\n        this.listeners = [];\n    }\n    Item.prototype.needsSeparateLabel = function () {\n        return false;\n    };\n    Item.prototype.detach = function () {\n        this.dispose();\n        this.children().forEach(function (x) {\n            if (x.detach)\n                x.detach();\n        });\n    };\n    Item.prototype.addListener = function (r) {\n        this.listeners.push(r);\n    };\n    Item.prototype.removeListener = function (r) {\n        this.listeners = this.listeners.filter(function (x) { return x != r; });\n    };\n    Item.prototype.add = function (i) {\n        throw new Error(\"Not supported\");\n    };\n    Item.prototype.root = function () {\n        if (this.parent) {\n            return this.parent.root();\n        }\n        return this;\n    };\n    Item.prototype.title = function () {\n        return this._title;\n    };\n    Item.prototype.children = function () {\n        return [];\n    };\n    Item.prototype.setDescription = function (desc) {\n        this.description = desc;\n    };\n    Item.prototype.setTitle = function (t) {\n        this._title = t;\n    };\n    Item.prototype.render = function (r) {\n        if (r === void 0) { r = {}; }\n        throw new Error(\"Not Implemented\");\n    };\n    Item.prototype.item = function (name) {\n        return null;\n    };\n    Item.prototype.setError = function (text) {\n    };\n    Item.prototype.clearErrors = function () {\n    };\n    return Item;\n}());\nexports.Item = Item;\nvar TypeDisplayItem = /** @class */ (function (_super) {\n    __extends(TypeDisplayItem, _super);\n    function TypeDisplayItem(detailsNode, context) {\n        var _this = _super.call(this, \"Type \" + detailsNode.title, \"\") || this;\n        _this.detailsNode = detailsNode;\n        _this.context = context;\n        return _this;\n    }\n    TypeDisplayItem.prototype.render = function (r) {\n        var container = new UI.WrapPanel();\n        container.setCaption(this.title());\n        return container;\n        //return typeDisplay.render(this.detailsNode);\n    };\n    TypeDisplayItem.prototype.dispose = function () {\n    };\n    return TypeDisplayItem;\n}(Item));\nexports.TypeDisplayItem = TypeDisplayItem;\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._children = [];\n        return _this;\n    }\n    Category.prototype.add = function (i) {\n        i.parent = this;\n        this._children.push(i);\n    };\n    Category.prototype.children = function () {\n        return this._children;\n    };\n    Category.prototype.plainChildren = function () {\n        return this._children.filter(function (x) { return !(x instanceof Category); });\n    };\n    Category.prototype.categories = function () {\n        return this._children.filter(function (x) { return (x instanceof Category); });\n    };\n    Category.prototype.item = function (name) {\n        var it;\n        this._children.forEach(function (x) {\n            if (x.title() == name) {\n                it = x;\n            }\n            var rr = x.item(name);\n            if (rr) {\n                it = rr;\n            }\n        });\n        return it;\n    };\n    Category.prototype.render = function (r) {\n        var _this = this;\n        if (r === void 0) { r = {}; }\n        var section = this.createSection(r);\n        this._result = section;\n        if (this.description && r.showDescription) {\n            this.descriptionLabel = UI.label(this.description);\n            section.addChild(this.descriptionLabel);\n        }\n        this.contributeTop(section);\n        this.plainChildren().forEach(function (x) { return _this.addChild(section, x); });\n        var wrappedChild = this.createWrappedChild(section);\n        this.subCategories = wrappedChild;\n        var cats = this.categories();\n        var remap = {};\n        cats.forEach(function (x) { return remap[x.title()] = x; });\n        var newCats = [];\n        if (remap[\"General\"]) {\n            newCats.push(remap[\"General\"]);\n            delete remap[\"General\"];\n        }\n        if (remap[\"Facets\"]) {\n            newCats.push(remap[\"Facets\"]);\n            delete remap[\"Facets\"];\n        }\n        for (var c in remap) {\n            newCats.push(remap[c]);\n        }\n        newCats.forEach(function (x) { return _this.addChild(wrappedChild, x); });\n        return section;\n    };\n    Category.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this._result.dispose();\n    };\n    Category.prototype.createSection = function (r) {\n        if (r.showHeader) {\n            return new UI.Section(UI.h3(this.title()), false);\n        }\n        var pnl = new UI.Panel();\n        pnl.setCaption(this.title());\n        return pnl;\n    };\n    Category.prototype.createWrappedChild = function (section) {\n        return section;\n    };\n    Category.prototype.addChild = function (section, item) {\n        var child = item.render();\n        if (section instanceof UI.TabFolder) {\n            var tf = section;\n            tf.add(child.caption(), UI.Icon.NONE, child);\n        }\n        else {\n            if (item.needsSeparateLabel()) {\n                var firstLabel = UI.label(item.title());\n                firstLabel.margin(0, 5, 0, 0);\n                section.addChild(firstLabel);\n                section.addChild(UI.label(item.description));\n            }\n            section.addChild(child);\n        }\n    };\n    Category.prototype.contributeTop = function (section) {\n    };\n    Category.prototype.dispose = function () {\n    };\n    Category.prototype.setError = function (text) {\n    };\n    Category.prototype.clearErrors = function () {\n        this._children.forEach(function (x) { return x.clearErrors(); });\n    };\n    Category.prototype.update = function (i) {\n    };\n    return Category;\n}(Item));\nvar TopLevelNode = /** @class */ (function (_super) {\n    __extends(TopLevelNode, _super);\n    function TopLevelNode(detailsNode, context) {\n        var _this = _super.call(this, detailsNode.title, detailsNode.description) || this;\n        _this.detailsNode = detailsNode;\n        _this.context = context;\n        _this.ep = null;\n        return _this;\n    }\n    TopLevelNode.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this._result.dispose();\n    };\n    TopLevelNode.prototype.createWrappedChild = function (section) {\n        var tf = new UI.TabFolder();\n        tf.setOnSelected(function () {\n            if (!inRender) {\n                lastSelectedCaption = (tf.selectedComponent().caption());\n            }\n        });\n        section.addChild(tf);\n        return tf;\n    };\n    TopLevelNode.prototype.subCategoryByNameOrCreate = function (name) {\n        var item = _.find(this.children(), function (x) { return x.title() == name; });\n        if (!item) {\n            var rs = new Category(name);\n            this.add(rs);\n            return rs;\n        }\n        return item;\n    };\n    TopLevelNode.prototype.addItemToCategory = function (name, it) {\n        if (name == null) {\n            this._children.push(it);\n            it.parent = this;\n            return;\n        }\n        this.subCategoryByNameOrCreate(name).add(it);\n    };\n    TopLevelNode.prototype.contributeTop = function (section) {\n        this.errorLabel = UI.label(\"\", UI.Icon.BUG, UI.TextClasses.ERROR);\n        this.ep = UI.hc(this.errorLabel);\n        this.ep.setDisplay(false);\n        section.addChild(this.ep);\n    };\n    TopLevelNode.prototype.render = function (r) {\n        if (r === void 0) { r = {}; }\n        inRender = true;\n        try {\n            var result = _super.prototype.render.call(this, r);\n            this._options = r;\n            this._panel = result;\n            var tf = this.subCategories;\n            for (var n = 0; n < tf.tabsCount(); n++) {\n                var item = tf.get(n);\n                if (item.header == lastSelectedCaption) {\n                    tf.setSelectedIndex(n);\n                    return result;\n                }\n            }\n            var documentation = \"\";\n            if (this.detailsNode.description) {\n                documentation = this.detailsNode.description;\n            }\n            if (documentation.length && !r.showDescription) {\n                result.addChild(UI.html(\"<hr/>\"));\n                result.addChild(UI.label(documentation, UI.Icon.INBOX, UI.TextClasses.SUBTLE));\n            }\n            this.update(this);\n            return result;\n        }\n        finally {\n            inRender = false;\n        }\n    };\n    TopLevelNode.prototype.dispose = function () {\n        this.detailsNode = null;\n    };\n    TopLevelNode.prototype.update = function (i) {\n        // if (!this._panel){\n        //     return;\n        // }\n        // if (i instanceof PropertyEditorInfo){\n        //     var prInfo=<PropertyEditorInfo>i;\n        //     if (prInfo.property.getAdapter(def.RAMLPropertyService).isTypeExpr()||prInfo.property.isDescriminator()){\n        //         rp.utils.updateType(this.node);\n        //         var extras=<Category>this.item(\"Facets\");\n        //         if (extras&&extras._result) {\n        //             extras._result.clear();\n        //         }\n        //\n        //         var item=buildItem(this.node,false);\n        //         var newExtras=<Category>item.item(\"Facets\");\n        //         if (newExtras) {\n        //             if (extras&&extras._result) {\n        //                 extras._children = newExtras._children;\n        //                 extras._children.forEach(x=>x.parent = extras);\n        //                 if (extras._children.length > 0) {\n        //                     extras._result.setDisplay(true);\n        //                     //workaroung events flow issue in UI.ts\n        //                 }\n        //                 newExtras.children().forEach(x=> {\n        //                     extras._result.addChild(x.render(this._options))\n        //                 })\n        //             }\n        //             else{\n        //                 this._children.push(newExtras);\n        //                 if (this._panel) {\n        //                     this._panel.addChild(newExtras.render(this._options))\n        //                 }\n        //             }\n        //         }\n        //         else{\n        //             if (extras&&extras._result) {\n        //                 extras._result.setDisplay(false);\n        //             }\n        //         }\n        //     }\n        // }\n        // var kp=null;\n        // this.node.definition().allProperties().forEach(x=>{\n        //     if (x.getAdapter(def.RAMLPropertyService).isKey()){\n        //         kp=x;\n        //     }\n        // })\n        // if (kp){\n        //     var keyItem=<PropertyEditorInfo>this.item(kp.nameId());\n        //     if (keyItem){\n        //         var m=keyItem.fld;\n        //         var vl=m.getBinding().get();\n        //         if ((!vl)||vl.trim().length==0){\n        //             this._panel.getBinding().setStatus(UI.errorStatus(\"\"));\n        //         }\n        //         else{\n        //             this._panel.getBinding().setStatus(UI.okStatus());\n        //         }\n        //     }\n        // }\n        //\n        // var errors;\n        //\n        // if(this.node.property() && universehelpers.isExampleProperty(this.node.property())) {\n        //     var parent = this.node.parent()\n        //\n        //     if(parent) {\n        //         var parsed = parent.parsedType();\n        //\n        //         var exampleMeta =  _.find((<any>parsed).metaInfo || [], (meta: any): boolean => {\n        //             return meta && meta._name === 'example';\n        //         });\n        //\n        //         if(exampleMeta) {\n        //             var validateObject = exampleMeta.validateSelf(this.node.types().getAnnotationTypeRegistry());\n        //\n        //             errors = ((validateObject && validateObject.getErrors()) || []).map(error => {\n        //                 return this.node.createIssue(error);\n        //             });\n        //         }\n        //     }\n        // } else {\n        //     errors = this.node.errors();\n        // }\n        //\n        // this.clearErrors();\n        // this.ep.setDisplay(false)\n        // if (!resourceRegistry.hasAsyncRequests() && errors&&errors.length>0){\n        //     var notFound=[];\n        //     errors.forEach(error=>{\n        //         if (error.extras&&error.extras.length>0){\n        //             error=error.extras[0];\n        //         }\n        //         var item = error.node && this.item(error.node.name());\n        //         if (item){\n        //             item.setError(error.message);\n        //         }\n        //         else{notFound.push(error);}\n        //     })\n        //     if (notFound.length>0){\n        //         this.errorLabel.setIcon(UI.Icon.BUG)\n        //         var et=notFound.map(x=>x.node.name()+\":\"+x.message).join(\",\");\n        //         if (et.length>100){\n        //             et=et.substring(0,100)+\"...\";\n        //         }\n        //         this.errorLabel.setText(et)\n        //         this.ep.setDisplay(true);\n        //     }\n        //     else{\n        //         this.ep.setDisplay(false);\n        //     }\n        // }\n    };\n    return TopLevelNode;\n}(Category));\nvar CheckBox2 = /** @class */ (function (_super) {\n    __extends(CheckBox2, _super);\n    function CheckBox2() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CheckBox2.prototype.setLabelWidth = function (n) {\n        this.setStyle(\"margin-left\", (n + 2) + \"ch\");\n    };\n    return CheckBox2;\n}(UI.CheckBox));\nvar PropertyEditorInfo = /** @class */ (function (_super) {\n    __extends(PropertyEditorInfo, _super);\n    function PropertyEditorInfo(outlineNode, context) {\n        var _this = _super.call(this, outlineNode.title, outlineNode.description) || this;\n        _this.outlineNode = outlineNode;\n        _this.context = context;\n        _this.rendered = false;\n        _this.update = function (newValue, oldValue) {\n            if (!_this.rendered) {\n                return;\n            }\n            _this.fromEditorToModel(newValue, oldValue);\n        };\n        return _this;\n    }\n    PropertyEditorInfo.prototype.dispose = function () {\n        this.outlineNode = null;\n        this.fld.getBinding().removeListener(this.update);\n    };\n    PropertyEditorInfo.prototype.clearErrors = function () {\n        this.setError(null);\n    };\n    PropertyEditorInfo.prototype.setError = function (text) {\n        if (text) {\n            this.errorLabel.setText(text);\n            this.errorLabel.setDisplay(true);\n        }\n        else {\n            if (this.errorLabel) {\n                this.errorLabel.setDisplay(false);\n            }\n        }\n    };\n    PropertyEditorInfo.prototype.fromEditorToModel = function (newValue, oldValue) {\n        var detailsChangeRunnable = new UpdateModelRunnable(this.context, this.outlineNode, newValue);\n        var context = this.context;\n        context.reconciler.schedule(detailsChangeRunnable).then(function (changedDocuments) {\n            if (context.localModel) {\n                return;\n            }\n            assistUtils.applyChangedDocuments(changedDocuments);\n            assistUtils.gotoPosition(context.position);\n        });\n    };\n    PropertyEditorInfo.prototype.toLocalValue = function (inputValue) {\n        return inputValue;\n    };\n    PropertyEditorInfo.prototype.toUIValue = function (value) {\n        return value;\n    };\n    PropertyEditorInfo.prototype.fromModelToEditor = function () {\n        this.fld.getBinding().set(this.outlineNode.valueText);\n    };\n    PropertyEditorInfo.prototype.render = function () {\n        var container = new UI.WrapPanel();\n        this.errorLabel = UI.label(\"\", UI.Icon.BUG, UI.TextClasses.ERROR);\n        this.errorLabel.setDisplay(false);\n        this.errorLabel.setStyle(\"margin-left\", (this._title.length + 1) + \"ch\");\n        var field = this.createField();\n        this.fld = field;\n        field.getBinding().addListener(this.update);\n        container.setCaption(this.title());\n        this.fromModelToEditor();\n        container.addChild(field);\n        container.addChild(this.errorLabel);\n        this.rendered = true;\n        return container;\n    };\n    PropertyEditorInfo.prototype.createField = function () {\n        return UI.texfField(this.needsSeparateLabel() ? \"\" : this.outlineNode.title, \"\", function (x) { });\n    };\n    return PropertyEditorInfo;\n}(Item));\nvar SimpleMultiEditor = /** @class */ (function (_super) {\n    __extends(SimpleMultiEditor, _super);\n    function SimpleMultiEditor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // fromEditorToModel(){\n    //     // var field=this.fld;\n    //     // var vl=field.getBinding().get();\n    //     // if (vl==null){\n    //     //     vl=\"\";\n    //     // }\n    //     // var attrs=this.node.attributes(this.property.nameId());\n    //     // var av=attrs.map(x=>escapeValue(\"\"+x.value())).join(\", \");\n    //     // if (av==vl){\n    //     //     return;\n    //     // }\n    //     // var ww=vl.split(\",\");\n    //     // var vl=ww.filter(x=>x.trim().length>0).map(x=>x.trim());\n    //     //\n    //     // if(this.node.lowLevel().includePath() && !this.node.lowLevel().unit().resolve(this.node.lowLevel().includePath())) {\n    //     //     return;\n    //     // }\n    //     //\n    //     // var attribute = this.node.attrOrCreate(this.property.nameId());\n    //     // attribute.setValues(vl)\n    //     //\n    //     // var root=this.root()\n    //     // if (root){\n    //     //     root.update(this);\n    //     // }\n    // }\n    SimpleMultiEditor.prototype.fromModelToEditor = function () {\n        this.fld.getBinding().set(this.outlineNode.valueText);\n    };\n    return SimpleMultiEditor;\n}(PropertyEditorInfo));\nfunction escapeValue(v) {\n    if (v.length > 0) {\n        if (v.charAt(0) == \"'\") {\n            return '\"' + v + '\"';\n        }\n        if (v.charAt(0) == '\"') {\n            return '\"' + v + '\"';\n        }\n    }\n    if (v.indexOf(' ') != -1 || v.indexOf(',') != -1) {\n        if (v.indexOf('\"') == -1) {\n            return '\"' + v + '\"';\n        }\n        if (v.indexOf(\"'\") == -1) {\n            return \"'\" + v + \"'\";\n        }\n    }\n    return v;\n}\nvar CheckBoxField = /** @class */ (function (_super) {\n    __extends(CheckBoxField, _super);\n    function CheckBoxField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CheckBoxField.prototype.createField = function () {\n        return new CheckBox2(this.outlineNode.title, UI.Icon.NONE, function (x) { });\n    };\n    CheckBoxField.prototype.toUIValue = function (value) {\n        if (!value) {\n            return false;\n        }\n        if (value === true || value.trim() === 'true') {\n            return true;\n        }\n        return false;\n    };\n    CheckBoxField.prototype.toLocalValue = function (value) {\n        return value + \"\";\n    };\n    return CheckBoxField;\n}(PropertyEditorInfo));\n// class ActionsItem extends Item{\n//\n//     constructor(private node:hl.IHighLevelNode){\n//         super(\"Actions\",\"\");\n//     }\n//     render(r:RenderingOptions){\n//         return suggestions.generateSuggestionsPanel(this.node);\n//     }\n//     dispose(){\n//         this.node=null;\n//     }\n//\n// }\n// class ContextActionsItem extends Item{\n//     constructor(node:hl.IHighLevelNode,name:string,private actions:contextActions.IContextDependedAction[]){\n//         super(name,\"\");\n//     }\n//     dispose(){\n//\n//     }\n//\n//     render(r:RenderingOptions){\n//         var result=UI.hc();\n//         result.addChild(UI.h3(this.title()))\n//         this.actions.forEach(x=>{\n//             result.addChild(UI.button(x.name,UI.ButtonSizes.EXTRA_SMALL,UI.ButtonHighlights.SUCCESS,UI.Icon.CHECKLIST,a=>x.onClick()).margin(3,3,3,3))\n//         })\n//         return result;\n//     }\n// }\nvar MarkdownFieldUI = /** @class */ (function (_super) {\n    __extends(MarkdownFieldUI, _super);\n    function MarkdownFieldUI(text, onchange) {\n        var _this = _super.call(this, text, onchange) || this;\n        _this.margin(0, 0, 6, 12);\n        _this.setMini(false);\n        _this.setStyle(\"min-height\", \"100px\");\n        //this.setStyle(\"max-height\",\"200px\");\n        _this.setStyle(\"border\", \"solid\");\n        _this.setStyle(\"border-width\", \"1px\");\n        _this.setStyle(\"border-radius\", \"2px\");\n        _this.setStyle(\"font-size\", \"1.15em\");\n        _this.setStyle(\"border-color\", \"rgba(0,0,0,0.2)\");\n        _this.setGrammar('source.mdcustom');\n        return _this;\n    }\n    MarkdownFieldUI.prototype.setLabelWidth = function () {\n    };\n    MarkdownFieldUI.prototype.setLabelHeight = function () {\n    };\n    MarkdownFieldUI.prototype.setRequired = function (v) {\n    };\n    return MarkdownFieldUI;\n}(UI.AtomEditorElement));\nvar XMLField = /** @class */ (function (_super) {\n    __extends(XMLField, _super);\n    function XMLField(text, onchange) {\n        var _this = _super.call(this, text, onchange) || this;\n        _this.margin(0, 0, 6, 12);\n        _this.setMini(false);\n        _this.setStyle(\"min-height\", \"100px\");\n        //this.setStyle(\"max-height\",\"200px\");\n        _this.setStyle(\"border\", \"solid\");\n        _this.setStyle(\"border-width\", \"1px\");\n        _this.setStyle(\"border-radius\", \"2px\");\n        _this.setStyle(\"font-size\", \"1.15em\");\n        _this.setStyle(\"border-color\", \"rgba(0,0,0,0.2)\");\n        _this.setGrammar('text.xml');\n        return _this;\n    }\n    XMLField.prototype.setLabelWidth = function () {\n    };\n    XMLField.prototype.setLabelHeight = function () {\n    };\n    XMLField.prototype.setRequired = function (v) {\n    };\n    return XMLField;\n}(UI.AtomEditorElement));\nvar JSONField = /** @class */ (function (_super) {\n    __extends(JSONField, _super);\n    function JSONField(text, onchange) {\n        var _this = _super.call(this, text, onchange) || this;\n        _this.margin(0, 0, 6, 12);\n        _this.setMini(false);\n        _this.setStyle(\"min-height\", \"100px\");\n        //this.setStyle(\"max-height\",\"200px\");\n        _this.setStyle(\"border\", \"solid\");\n        _this.setStyle(\"border-width\", \"1px\");\n        _this.setStyle(\"border-radius\", \"2px\");\n        _this.setStyle(\"font-size\", \"1.15em\");\n        _this.setStyle(\"border-color\", \"rgba(0,0,0,0.2)\");\n        _this.setGrammar('source.json');\n        return _this;\n    }\n    JSONField.prototype.setLabelWidth = function () {\n    };\n    JSONField.prototype.setLabelHeight = function () {\n    };\n    JSONField.prototype.setRequired = function (v) {\n    };\n    return JSONField;\n}(UI.AtomEditorElement));\nvar MarkdownField = /** @class */ (function (_super) {\n    __extends(MarkdownField, _super);\n    function MarkdownField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MarkdownField.prototype.createField = function () {\n        var editor = new MarkdownFieldUI(\"\", function (x) { });\n        return editor;\n    };\n    MarkdownField.prototype.needsSeparateLabel = function () {\n        return true;\n    };\n    return MarkdownField;\n}(PropertyEditorInfo));\nvar ExampleField = /** @class */ (function (_super) {\n    __extends(ExampleField, _super);\n    function ExampleField(outlineNode, context) {\n        return _super.call(this, outlineNode, context) || this;\n    }\n    ExampleField.prototype.createField = function () {\n        var editor = new JSONField(this.outlineNode.valueText, function (x) { });\n        return editor;\n    };\n    ExampleField.prototype.needsSeparateLabel = function () {\n        return true;\n    };\n    ExampleField.prototype.fromModelToEditor = function () {\n    };\n    ExampleField.prototype.fromEditorToModel = function (newValue, oldValue) {\n    };\n    return ExampleField;\n}(PropertyEditorInfo));\nvar XMLExampleField = /** @class */ (function (_super) {\n    __extends(XMLExampleField, _super);\n    function XMLExampleField(outlineNode, context) {\n        return _super.call(this, outlineNode, context) || this;\n    }\n    XMLExampleField.prototype.createField = function () {\n        var editor = new XMLField(this.outlineNode.valueText, function (x) { });\n        return editor;\n    };\n    XMLExampleField.prototype.needsSeparateLabel = function () {\n        return true;\n    };\n    XMLExampleField.prototype.fromModelToEditor = function () {\n    };\n    XMLExampleField.prototype.fromEditorToModel = function (newValue, oldValue) {\n    };\n    return XMLExampleField;\n}(PropertyEditorInfo));\nvar XMLSchemaField = /** @class */ (function (_super) {\n    __extends(XMLSchemaField, _super);\n    function XMLSchemaField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    XMLSchemaField.prototype.createField = function () {\n        var editor = new XMLField(\"\", function (x) { });\n        return editor;\n    };\n    XMLSchemaField.prototype.needsSeparateLabel = function () {\n        return true;\n    };\n    return XMLSchemaField;\n}(PropertyEditorInfo));\nvar JSONSchemaField = /** @class */ (function (_super) {\n    __extends(JSONSchemaField, _super);\n    function JSONSchemaField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    JSONSchemaField.prototype.createField = function () {\n        var editor = new JSONField(\"\", function (x) { });\n        return editor;\n    };\n    JSONSchemaField.prototype.needsSeparateLabel = function () {\n        return true;\n    };\n    return JSONSchemaField;\n}(PropertyEditorInfo));\nvar SelectBox = /** @class */ (function (_super) {\n    __extends(SelectBox, _super);\n    function SelectBox(outlineNode, context) {\n        var _this = _super.call(this, outlineNode, context) || this;\n        _this.outlineNode = outlineNode;\n        return _this;\n    }\n    SelectBox.prototype.createField = function () {\n        var options = this.outlineNode.options ? this.outlineNode.options : [];\n        var select = new UI.SelectField(this.outlineNode.title, function (x) { }, \"\", UI.Icon.NONE, options);\n        select.getActualField().setOptions(options);\n        return select;\n    };\n    return SelectBox;\n}(PropertyEditorInfo));\nvar TypeSelectBox = /** @class */ (function (_super) {\n    __extends(TypeSelectBox, _super);\n    function TypeSelectBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TypeSelectBox.prototype.fromEditorToModel = function (newValue, oldValue) {\n        // //current implementation only allows changing the facets of certain types for safety\n        // //TODO change this to arbitrary facets (remove type filtering)\n        //\n        // var oldNames : string[] = [];\n        // var savedAttrs = [];\n        // if (newValue && oldValue) {\n        //     try {\n        //         this.node.definition().allSuperTypes().forEach(superType=> {\n        //             if (this.isAllowedTypeToReplaceFacets(superType)) {\n        //                 this.addTypeFacets(superType, oldNames)\n        //             }\n        //         })\n        //\n        //         savedAttrs = [].concat(this.node.attrs())\n        //     } catch (err) {console.log(err)}\n        // }\n        //\n        // super.fromEditorToModel();\n        //\n        // if (newValue && oldValue) {\n        //     try {\n        //         //collecting facets allowed to remove\n        //         var currentUniverse = this.node.definition().universe();\n        //         var names : string[] = [];\n        //\n        //         this.node.definition().allSuperTypes().forEach(superType=>{\n        //             if (this.isAllowedTypeToReplaceFacets(superType)) {\n        //                 this.addTypeFacets(superType, names)\n        //             }\n        //         })\n        //\n        //         if (oldNames.length > 0 && names.length > 0) {\n        //             savedAttrs.forEach(attribute => {\n        //                 if (_.find(oldNames, facetName => facetName == attribute.name())\n        //                     && !_.find(names, facetName => facetName == attribute.name())) {\n        //\n        //                     this.node.remove(attribute)\n        //                 }\n        //             })\n        //         }\n        //     } catch (err) {console.log(err)}\n        // }\n    };\n    return TypeSelectBox;\n}(SelectBox));\nvar TreeField = /** @class */ (function (_super) {\n    __extends(TreeField, _super);\n    function TreeField(outlineNode, context) {\n        var _this = _super.call(this) || this;\n        _this.context = context;\n        var renderer = {\n            render: function (node) {\n                var left = UI.label(node.title, UI.Icon.CIRCUIT_BOARD, UI.TextClasses.HIGHLIGHT);\n                var right = UI.label(node.valueText ? (\":\" + node.valueText) : \"\", UI.Icon.NONE, UI.TextClasses.SUCCESS);\n                var result = UI.hc(left, right);\n                return result;\n            }\n        };\n        var getChildren = function (node) {\n            return node.children ? node.children : [];\n        };\n        var viewer = UI.treeViewer(getChildren, renderer, function (x) { return x.title; });\n        var inputValue = {\n            children: [outlineNode]\n        };\n        viewer.setInput(inputValue);\n        _this.addChild(UI.label(outlineNode.title));\n        _this.addChild(viewer);\n        return _this;\n    }\n    TreeField.prototype.setLabelWidth = function () {\n    };\n    TreeField.prototype.setLabelHeight = function () {\n    };\n    TreeField.prototype.setRequired = function (v) {\n    };\n    return TreeField;\n}(UI.Panel));\nvar StructuredField = /** @class */ (function (_super) {\n    __extends(StructuredField, _super);\n    function StructuredField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StructuredField.prototype.createField = function () {\n        var children = this.outlineNode.children;\n        if (!children || children.length != 1)\n            return null;\n        var tm = new TreeField(children[0], this.context);\n        return tm;\n    };\n    return StructuredField;\n}(PropertyEditorInfo));\nvar LowLevelTreeField = /** @class */ (function (_super) {\n    __extends(LowLevelTreeField, _super);\n    function LowLevelTreeField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LowLevelTreeField.prototype.createField = function () {\n        var children = this.outlineNode.children;\n        if (!children || children.length != 1)\n            return null;\n        var tm = new TreeField(children[0], this.context);\n        return tm;\n    };\n    return LowLevelTreeField;\n}(PropertyEditorInfo));\n// function category(p:hl.IProperty,node:hl.IHighLevelNode):string{\n//     if (p.getAdapter(def.RAMLPropertyService).isKey()||p.isRequired()){\n//         return null;\n//     }\n//     if (p.domain()&&!p.domain().getAdapter(def.RAMLService).isUserDefined()) {\n//         if (universehelpers.isDocumentationProperty(p) ||\n//             universehelpers.isUsageProperty(p) ||\n//             universehelpers.isDescriptionProperty(p) ||\n//             universehelpers.isDisplayNameProperty(p) ||\n//             universehelpers.isTitleProperty(p)) {\n//             return \"Documentation\";\n//         }\n//         if (universehelpers.isAnnotationsProperty(p) ||\n//             universehelpers.isIsProperty(p) ||\n//             universehelpers.isSecuredByProperty(p) ||\n//             (universehelpers.isTypeProperty(p)&&!p.getAdapter(def.RAMLPropertyService).isTypeExpr())) {\n//             return \"References\";\n//         }\n//         if (universehelpers.isProtocolsProperty(p)){\n//             return \"General\";\n//         }\n//     }\n//\n//     if (universehelpers.isTypeProperty(p)){\n//         if (p.domain()&&!p.domain().getAdapter(def.RAMLService).isUserDefined()){\n//             return null;\n//         }\n//     }\n//     if (node.property()) {\n//         if (p.domain() && p.domain() != node.property().range()) {\n//             return \"Facets\";\n//         }\n//     }\n//     return \"General\";\n// }\n//\n// var valueOptions = function (x:hl.IProperty, node:hl.IHighLevelNode):string[] {\n//     var vls = search.enumValues(x,node);\n//     if (universehelpers.isNameProperty(x)){\n//         if (node.definition().isAssignableFrom(universe.Universe10.TypeDeclaration.name)){\n//             if (node.property()&&universehelpers.isBodyProperty(node.property())){\n//                 if (!(node.property() instanceof def.UserDefinedProp)) {\n//                     if (node.parent()&&\n//                         universehelpers.isMethodType(node.parent().definition())){\n//                         return [\"application/json\", \"application/xml\",\"multipart/form-data\",\"application/x-www-form-urlencoded\"]\n//                     }\n//                     return [\"application/json\", \"application/xml\"]\n//                 }\n//             }\n//         }\n//     }\n//     if ((!vls) || vls.length == 0) {\n//         var sug = (<def.Property>x).suggester()\n//         if (sug) {\n//             vls = sug(node);\n//\n//         }\n//         if ((!vls) || vls.length == 0) {\n//             vls = (<def.Property>x).getOftenKeys();\n//\n//         }\n//     }\n//     return _.unique(vls);\n// };\n//\n// function addExampleControl(property: hl.IProperty, node : hl.IHighLevelNode,\n//                            exampleElement : hl.IHighLevelNode, example : def.rt.nominalTypes.IExpandableExample,\n//                            container : TopLevelNode) {\n//\n//     if (example.isYAML()) {\n//         container.addItemToCategory(category(property, node),\n//             new LowLevelTreeField(property, node, exampleElement.lowLevel(), example.name()));\n//     } else if (example.isJSONString()) {\n//         container.addItemToCategory(category(property, node),\n//             new ExampleField(property, node, example.asString(), example.name()));\n//     } else if (example.isXMLString()) {\n//         container.addItemToCategory(category(property, node),\n//             new XMLExampleField(property, node, example.asString(), example.name()));\n//     }\n// }\nfunction buildItem(detailsNode, context, dialog) {\n    var root = new TopLevelNode(detailsNode, context);\n    if (detailsNode.children) {\n        for (var _i = 0, _a = detailsNode.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child.type == \"CATEGORY\") {\n                var categoryName = child.title;\n                if (child.children) {\n                    for (var _b = 0, _c = child.children; _b < _c.length; _b++) {\n                        var childOfChild = _c[_b];\n                        buildItemInCategory(childOfChild, root, categoryName, context);\n                    }\n                }\n            }\n            else {\n                buildItemInCategory(child, root, null, context);\n            }\n        }\n    }\n    return root;\n}\nexports.buildItem = buildItem;\nfunction buildItemInCategory(detailsNode, root, categoryName, context) {\n    var item = null;\n    if (detailsNode.type == \"CHECKBOX\") {\n        item = new CheckBoxField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"JSONSCHEMA\"\n        && detailsNode.valueText !== null) {\n        item = new JSONSchemaField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"XMLSCHEMA\"\n        && detailsNode.valueText !== null) {\n        item = new XMLSchemaField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"MARKDOWN\") {\n        item = new MarkdownField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"SELECTBOX\"\n        && detailsNode.options !== null) {\n        item = new SelectBox(detailsNode, context);\n    }\n    else if (detailsNode.type == \"MULTIEDITOR\") {\n        item = new SimpleMultiEditor(detailsNode, context);\n    }\n    else if (detailsNode.type == \"TREE\") {\n        item = new LowLevelTreeField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"STRUCTURED\") {\n        item = new StructuredField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"TYPEDISPLAY\") {\n        item = new TypeDisplayItem(detailsNode, context);\n    }\n    else if (detailsNode.type == \"TYPESELECT\") {\n        item = new TypeSelectBox(detailsNode, context);\n    }\n    else if (detailsNode.type == \"JSONEXAMPLE\"\n        && detailsNode.valueText !== null) {\n        item = new ExampleField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"XMLEXAMPLE\"\n        && detailsNode.valueText !== null) {\n        item = new XMLExampleField(detailsNode, context);\n    }\n    else if (detailsNode.type == \"ATTRIBUTETEXT\") {\n        item = new PropertyEditorInfo(detailsNode, context);\n    }\n    if (item != null) {\n        root.addItemToCategory(categoryName, item);\n    }\n    else {\n        console.log(\"Can not recognize element \" + detailsNode.type);\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9kZXRhaWxFbGVtZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbURBQW1EOzs7Ozs7Ozs7Ozs7QUFNbkQsOEJBQThCO0FBRTlCLGdDQUFnQztBQUtoQyxpREFBaUQ7QUFDakQscURBQXdEO0FBQ3hELGlEQUFvRDtBQU1wRCxJQUFJLG1CQUEwQixDQUFDO0FBQy9CLElBQUksUUFBUSxHQUFTLEtBQUssQ0FBQztBQWUzQjs7R0FFRztBQUNIO0lBSUksNkJBQW9CLE9BQXVCLEVBQVUsSUFBZ0MsRUFDakUsUUFBaUM7UUFEakMsWUFBTyxHQUFQLE9BQU8sQ0FBZ0I7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUE0QjtRQUNqRSxhQUFRLEdBQVIsUUFBUSxDQUF5QjtRQUg3QyxjQUFTLEdBQUcsS0FBSyxDQUFDO0lBSzFCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxpQ0FBRyxHQUFIO1FBQ0ksRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUV0RCxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRCxJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUV4RCxNQUFNLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUN2QyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCx1Q0FBUyxHQUFULFVBQVUsS0FBb0I7UUFDMUIsRUFB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Q0FBQyxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakUsQ0FBQztBQUNMLENBQUMiLCJmaWxlIjoic3JjL2F0b20vZWRpdG9yLXRvb2xzL2RldGFpbEVsZW1lbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbmltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuXG5cbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgcHJvdmlkZXI9cmVxdWlyZShcIi4uL3N1Z2dlc3Rpb24vcHJvdmlkZXJcIilcbmltcG9ydCBVST1yZXF1aXJlKFwiYXRvbS11aS1saWJcIilcbmltcG9ydCB4bWx1dGlsPXJlcXVpcmUoXCIuLi8uLi91dGlsL3htbHV0aWxcIilcbmltcG9ydCBzaGVtYWdlbj1yZXF1aXJlKFwiLi4vLi4vdXRpbC9zY2hlbWFHZW5lcmF0b3JcIilcbmltcG9ydCBTcGFjZVBlblZpZXdzID0gcmVxdWlyZSgnYXRvbS1zcGFjZS1wZW4tdmlld3MnKVxuaW1wb3J0IHRvb2x0aXA9cmVxdWlyZShcIi4uL2NvcmUvdG9vbHRpcC1tYW5hZ2VyXCIpXG4vL2ltcG9ydCBjb250ZXh0QWN0aW9ucyA9IHJlcXVpcmUoXCJyYW1sLWFjdGlvbnNcIilcbmltcG9ydCBhc3Npc3RVdGlscyA9IHJlcXVpcmUoXCIuLi9kaWFsb2dzL2Fzc2lzdC11dGlsc1wiKTtcbmltcG9ydCByYW1sU2VydmVyID0gcmVxdWlyZShcInJhbWwtbGFuZ3VhZ2Utc2VydmVyXCIpO1xuaW1wb3J0IHtcbiAgICBSdW5uYWJsZSxcbiAgICBSZWNvbmNpbGVyXG59IGZyb20gXCIuL3JlY29uY2lsZXJcIlxuXG52YXIgbGFzdFNlbGVjdGVkQ2FwdGlvbjpzdHJpbmc7XG52YXIgaW5SZW5kZXI6Ym9vbGVhbj1mYWxzZTtcblxuaW50ZXJmYWNlIFJlbmRlcmluZ09wdGlvbnN7XG4gICAgc2hvd0Rlc2NyaXB0aW9uPzpib29sZWFuO1xuICAgIHNob3dIZWFkZXI/OmJvb2xlYW47XG4gICAgY29sbGFwc2libGU/OmJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV0YWlsc0NvbnRleHQge1xuICAgIHVyaTogc3RyaW5nLFxuICAgIHBvc2l0aW9uOiBudW1iZXIsXG4gICAgcmVjb25jaWxlcjogUmVjb25jaWxlcixcbiAgICBsb2NhbE1vZGVsOiBhbnlcbn1cblxuLyoqXG4gKiBSdW5uYWJsZSB0aGF0IHVwZGF0ZXMgZGV0YWlscyB2YWx1ZXMgcmVtb3RlbHlcbiAqL1xuY2xhc3MgVXBkYXRlTW9kZWxSdW5uYWJsZSBpbXBsZW1lbnRzIFJ1bm5hYmxlPHJhbWxTZXJ2ZXIuSUNoYW5nZWREb2N1bWVudFtdPiB7XG5cbiAgICBwcml2YXRlIGNhbmNlbGxlZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCwgcHJpdmF0ZSBpdGVtOiByYW1sU2VydmVyLkRldGFpbHNJdGVtSlNPTixcbiAgICAgICAgICAgICAgICBwcml2YXRlIG5ld1ZhbHVlOiBzdHJpbmd8IG51bWJlcnwgYm9vbGVhbikge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgdGhlIGFjdHVhbCBidXNpbmVzcyBsb2dpY3MuXG4gICAgICogU2hvdWxkIHJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiBmaW5pc2hlZC5cbiAgICAgKi9cbiAgICBydW4oKTogUHJvbWlzZTxyYW1sU2VydmVyLklDaGFuZ2VkRG9jdW1lbnRbXT4ge1xuICAgICAgICBpZih0aGlzLmNvbnRleHQubG9jYWxNb2RlbCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxvY2FsTW9kZWxbdGhpcy5pdGVtLmlkXSA9IHRoaXMubmV3VmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKTtcblxuICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5jaGFuZ2VEZXRhaWxWYWx1ZSh0aGlzLmNvbnRleHQudXJpLCB0aGlzLmNvbnRleHQucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbS5pZCwgdGhpcy5uZXdWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0d28gcnVubmFibGUgY29uZmxpY3Qgd2l0aCBlYWNoIG90aGVyLlxuICAgICAqIE11c3Qgd29yayBmYXN0IGFzIGl0cyBjYWxsZWQgb2Z0ZW4uXG4gICAgICogQHBhcmFtIG90aGVyXG4gICAgICovXG4gICAgY29uZmxpY3RzKG90aGVyOiBSdW5uYWJsZTxhbnk+KTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChpc1VwZGF0ZU1vZGVsUnVubmFibGUob3RoZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVcmkoKSA9PT0gb3RoZXIuZ2V0VXJpKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgcnVubmFibGUuIHJ1bigpIG1ldGhvZCBzaG91bGQgZG8gbm90aGluZyBpZiBsYXVuY2hlZCBsYXRlcixcbiAgICAgKiBpZiBjYW5jZWwgaXMgY2FsbGVkIGR1cmluZyB0aGUgcnVuKCkgbWV0aG9kIGV4ZWN1dGlvbiwgcnVuKCkgc2hvdWxkIHN0b3AgYXMgc29vbiBhcyBpdCBjYW4uXG4gICAgICovXG4gICAgY2FuY2VsKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciBjYW5jZWwoKSBtZXRob2Qgd2FzIGNhbGxlZCBhdCBsZWFzdCBvbmNlLlxuICAgICAqL1xuICAgIGlzQ2FuY2VsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbGxlZDtcbiAgICB9XG5cbiAgICBnZXRVcmkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQudXJpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnN0YW5jZW9mIGZvciBVcGRhdGVNb2RlbFJ1bm5hYmxlXG4gKiBAcGFyYW0gcnVubmFibGVcbiAqL1xuZnVuY3Rpb24gaXNVcGRhdGVNb2RlbFJ1bm5hYmxlKHJ1bm5hYmxlOiBSdW5uYWJsZTxhbnk+KSA6IHJ1bm5hYmxlIGlzIFVwZGF0ZU1vZGVsUnVubmFibGUge1xuICAgIHJldHVybiAocnVubmFibGUgYXMgVXBkYXRlTW9kZWxSdW5uYWJsZSkuZ2V0VXJpICE9IG51bGw7XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJdGVte1xuXG4gICAgcGFyZW50Okl0ZW07XG5cbiAgICBsaXN0ZW5lcnM6KChpOkl0ZW0pPT52b2lkKSBbXSA9W11cblxuICAgIGFic3RyYWN0IGRpc3Bvc2UoKTp2b2lkXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3RpdGxlOnN0cmluZyxwdWJsaWMgZGVzY3JpcHRpb246c3RyaW5nPVwiXCIpe1xuXG4gICAgfVxuXG4gICAgbmVlZHNTZXBhcmF0ZUxhYmVsKCl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBkZXRhY2goKXtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4oKS5mb3JFYWNoKHg9PntcbiAgICAgICAgICAgIGlmICh4LmRldGFjaCl4LmRldGFjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRMaXN0ZW5lcihyOihpOkl0ZW0pPT52b2lkKXtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChyKTtcbiAgICB9XG5cbiAgICByZW1vdmVMaXN0ZW5lcihyOihpOkl0ZW0pPT52b2lkKXtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnM9dGhpcy5saXN0ZW5lcnMuZmlsdGVyKHg9PnghPXIpO1xuICAgIH1cblxuICAgIGFkZChpOkl0ZW0pe1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBzdXBwb3J0ZWRcIilcbiAgICB9XG5cbiAgICByb290KCl7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQucm9vdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRpdGxlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgICB9XG5cbiAgICBjaGlsZHJlbigpOkl0ZW1bXXtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHNldERlc2NyaXB0aW9uKGRlc2M6c3RyaW5nKXtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbj1kZXNjO1xuICAgIH1cblxuICAgIHNldFRpdGxlKHQ6c3RyaW5nKXtcbiAgICAgICAgdGhpcy5fdGl0bGU9dDtcbiAgICB9XG5cbiAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zPXt9KTpVSS5VSUNvbXBvbmVudHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpXG4gICAgfVxuXG4gICAgaXRlbShuYW1lOnN0cmluZyk6SXRlbXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc2V0RXJyb3IodGV4dDpzdHJpbmcpe1xuXG4gICAgfVxuXG4gICAgY2xlYXJFcnJvcnMoKXtcblxuICAgIH1cblxufVxuXG5leHBvcnQgY2xhc3MgVHlwZURpc3BsYXlJdGVtIGV4dGVuZHMgSXRlbXtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGV0YWlsc05vZGU6cmFtbFNlcnZlci5EZXRhaWxzSXRlbUpTT04sIHByb3RlY3RlZCBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCl7XG4gICAgICAgIHN1cGVyKFwiVHlwZSBcIiArIGRldGFpbHNOb2RlLnRpdGxlLFwiXCIpO1xuICAgIH1cbiAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zKXtcbiAgICAgICAgbGV0IGNvbnRhaW5lcj1uZXcgVUkuV3JhcFBhbmVsKCk7XG5cbiAgICAgICAgY29udGFpbmVyLnNldENhcHRpb24odGhpcy50aXRsZSgpKTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICAvL3JldHVybiB0eXBlRGlzcGxheS5yZW5kZXIodGhpcy5kZXRhaWxzTm9kZSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKXtcblxuICAgIH1cbn1cbmNsYXNzIENhdGVnb3J5IGV4dGVuZHMgSXRlbXtcblxuICAgIF9jaGlsZHJlbjpJdGVtW109W11cbiAgICBkZXNjcmlwdGlvbkxhYmVsOlVJLlVJQ29tcG9uZW50O1xuICAgIHN1YkNhdGVnb3JpZXM6IFVJLlVJQ29tcG9uZW50O1xuICAgIF9yZXN1bHQ6VUkuUGFuZWw7XG5cbiAgICBhZGQoaTpJdGVtKXtcbiAgICAgICAgaS5wYXJlbnQ9dGhpcztcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChpKTtcbiAgICB9XG5cbiAgICBjaGlsZHJlbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47XG4gICAgfVxuICAgIHBsYWluQ2hpbGRyZW4oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuLmZpbHRlcih4PT4hKHggaW5zdGFuY2VvZiBDYXRlZ29yeSkpO1xuICAgIH1cbiAgICBjYXRlZ29yaWVzKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5maWx0ZXIoeD0+KHggaW5zdGFuY2VvZiBDYXRlZ29yeSkpO1xuICAgIH1cblxuICAgIGl0ZW0obmFtZTpzdHJpbmcpOkl0ZW17XG4gICAgICAgIHZhciBpdDpJdGVtO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5mb3JFYWNoKHg9PntcbiAgICAgICAgICAgIGlmICh4LnRpdGxlKCk9PW5hbWUpe1xuICAgICAgICAgICAgICAgIGl0PXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcnI9eC5pdGVtKG5hbWUpO1xuICAgICAgICAgICAgaWYgKHJyKXtcbiAgICAgICAgICAgICAgICBpdD1ycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpdDtcbiAgICB9XG5cbiAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zPXt9KTpVSS5VSUNvbXBvbmVudHtcbiAgICAgICAgdmFyIHNlY3Rpb249dGhpcy5jcmVhdGVTZWN0aW9uKHIpO1xuICAgICAgICB0aGlzLl9yZXN1bHQ9c2VjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24mJnIuc2hvd0Rlc2NyaXB0aW9uKXtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb25MYWJlbD1VSS5sYWJlbCh0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodGhpcy5kZXNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRyaWJ1dGVUb3Aoc2VjdGlvbik7XG4gICAgICAgIHRoaXMucGxhaW5DaGlsZHJlbigpLmZvckVhY2goeD0+dGhpcy5hZGRDaGlsZChzZWN0aW9uLHgpKTtcblxuICAgICAgICB2YXIgd3JhcHBlZENoaWxkPXRoaXMuY3JlYXRlV3JhcHBlZENoaWxkKHNlY3Rpb24pO1xuICAgICAgICB0aGlzLnN1YkNhdGVnb3JpZXM9d3JhcHBlZENoaWxkO1xuICAgICAgICB2YXIgY2F0cz10aGlzLmNhdGVnb3JpZXMoKVxuICAgICAgICB2YXIgcmVtYXA9e31cbiAgICAgICAgY2F0cy5mb3JFYWNoKHg9PnJlbWFwW3gudGl0bGUoKV09eCk7XG4gICAgICAgIHZhciBuZXdDYXRzPVtdO1xuICAgICAgICBpZiAocmVtYXBbXCJHZW5lcmFsXCJdKXtcbiAgICAgICAgICAgIG5ld0NhdHMucHVzaChyZW1hcFtcIkdlbmVyYWxcIl0pO1xuICAgICAgICAgICAgZGVsZXRlIHJlbWFwW1wiR2VuZXJhbFwiXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtYXBbXCJGYWNldHNcIl0pe1xuICAgICAgICAgICAgbmV3Q2F0cy5wdXNoKHJlbWFwW1wiRmFjZXRzXCJdKTtcbiAgICAgICAgICAgIGRlbGV0ZSByZW1hcFtcIkZhY2V0c1wiXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBjIGluIHJlbWFwKXtcbiAgICAgICAgICAgIG5ld0NhdHMucHVzaChyZW1hcFtjXSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3Q2F0cy5mb3JFYWNoKHg9PnRoaXMuYWRkQ2hpbGQod3JhcHBlZENoaWxkLHgpKTtcbiAgICAgICAgcmV0dXJuIHNlY3Rpb247XG4gICAgfVxuXG4gICAgZGV0YWNoKCl7XG4gICAgICAgIHN1cGVyLmRldGFjaCgpO1xuICAgICAgICB0aGlzLl9yZXN1bHQuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVNlY3Rpb24ocjpSZW5kZXJpbmdPcHRpb25zKTpVSS5QYW5lbHtcbiAgICAgICAgaWYgKHIuc2hvd0hlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVSS5TZWN0aW9uKDxhbnk+VUkuaDModGhpcy50aXRsZSgpKSwgZmFsc2UpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBubD1uZXcgVUkuUGFuZWwoKTtcbiAgICAgICAgcG5sLnNldENhcHRpb24odGhpcy50aXRsZSgpKTtcbiAgICAgICAgcmV0dXJuIHBubDtcbiAgICB9XG5cbiAgICBjcmVhdGVXcmFwcGVkQ2hpbGQoc2VjdGlvbjpVSS5VSUNvbXBvbmVudCl7XG4gICAgICAgIHJldHVybiBzZWN0aW9uO1xuICAgIH1cblxuICAgIGFkZENoaWxkKHNlY3Rpb246VUkuVUlDb21wb25lbnQsIGl0ZW06SXRlbSl7XG4gICAgICAgIHZhciBjaGlsZD1pdGVtLnJlbmRlcigpO1xuICAgICAgICBpZiAoc2VjdGlvbiBpbnN0YW5jZW9mIFVJLlRhYkZvbGRlcil7XG4gICAgICAgICAgICB2YXIgdGY9PFVJLlRhYkZvbGRlcj5zZWN0aW9uO1xuICAgICAgICAgICAgdGYuYWRkKGNoaWxkLmNhcHRpb24oKSxVSS5JY29uLk5PTkUsY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmVlZHNTZXBhcmF0ZUxhYmVsKCkpe1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdExhYmVsID0gVUkubGFiZWwoaXRlbS50aXRsZSgpKTtcblxuICAgICAgICAgICAgICAgIGZpcnN0TGFiZWwubWFyZ2luKDAsIDUsIDAsIDApO1xuXG4gICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChmaXJzdExhYmVsKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZENoaWxkKFVJLmxhYmVsKGl0ZW0uZGVzY3JpcHRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29udHJpYnV0ZVRvcChzZWN0aW9uOlVJLlBhbmVsKXtcblxuICAgIH1cblxuICAgIGRpc3Bvc2UoKTp2b2lke1xuXG4gICAgfVxuXG4gICAgc2V0RXJyb3IodGV4dDpzdHJpbmcpe1xuXG4gICAgfVxuXG4gICAgY2xlYXJFcnJvcnMoKXtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCh4PT54LmNsZWFyRXJyb3JzKCkpXG4gICAgfVxuXG4gICAgdXBkYXRlKGk6SXRlbSl7XG5cbiAgICB9XG59XG5cbmNsYXNzIFRvcExldmVsTm9kZSBleHRlbmRzIENhdGVnb3J5e1xuXG4gICAgZXJyb3JMYWJlbDpVSS5UZXh0RWxlbWVudDxhbnk+XG4gICAgZXA6VUkuUGFuZWw9bnVsbDtcbiAgICBfcGFuZWw6VUkuUGFuZWw7XG4gICAgX29wdGlvbnM6UmVuZGVyaW5nT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBkZXRhaWxzTm9kZTpyYW1sU2VydmVyLkRldGFpbHNJdGVtSlNPTixcbiAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgY29udGV4dDogRGV0YWlsc0NvbnRleHQpe1xuICAgICAgICBzdXBlcihkZXRhaWxzTm9kZS50aXRsZSxkZXRhaWxzTm9kZS5kZXNjcmlwdGlvbik7XG4gICAgfVxuXG4gICAgZGV0YWNoKCl7XG4gICAgICAgIHN1cGVyLmRldGFjaCgpO1xuICAgICAgICB0aGlzLl9yZXN1bHQuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVdyYXBwZWRDaGlsZChzZWN0aW9uOlVJLlVJQ29tcG9uZW50KXtcbiAgICAgICAgdmFyIHRmPW5ldyBVSS5UYWJGb2xkZXIoKVxuICAgICAgICB0Zi5zZXRPblNlbGVjdGVkKCgpPT57XG4gICAgICAgICAgICBpZiAoIWluUmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgbGFzdFNlbGVjdGVkQ2FwdGlvbiA9ICh0Zi5zZWxlY3RlZENvbXBvbmVudCgpLmNhcHRpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKHRmKTtcbiAgICAgICAgcmV0dXJuIHRmO1xuICAgIH1cblxuICAgIHN1YkNhdGVnb3J5QnlOYW1lT3JDcmVhdGUobmFtZTpzdHJpbmcpe1xuICAgICAgICB2YXIgaXRlbT1fLmZpbmQodGhpcy5jaGlsZHJlbigpLHg9PngudGl0bGUoKT09bmFtZSk7XG4gICAgICAgIGlmICghaXRlbSl7XG4gICAgICAgICAgICB2YXIgcnM9bmV3IENhdGVnb3J5KG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5hZGQocnMpO1xuICAgICAgICAgICAgcmV0dXJuIHJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIGFkZEl0ZW1Ub0NhdGVnb3J5KG5hbWU6c3RyaW5nLGl0Okl0ZW0pe1xuICAgICAgICBpZiAobmFtZT09bnVsbCl7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKGl0KTtcbiAgICAgICAgICAgIGl0LnBhcmVudD10aGlzO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ViQ2F0ZWdvcnlCeU5hbWVPckNyZWF0ZShuYW1lKS5hZGQoaXQpO1xuICAgIH1cblxuICAgIGNvbnRyaWJ1dGVUb3Aoc2VjdGlvbjpVSS5QYW5lbCl7XG4gICAgICAgIHRoaXMuZXJyb3JMYWJlbD1VSS5sYWJlbChcIlwiLFVJLkljb24uQlVHLFVJLlRleHRDbGFzc2VzLkVSUk9SKTtcbiAgICAgICAgdGhpcy5lcD1VSS5oYyh0aGlzLmVycm9yTGFiZWwpO1xuICAgICAgICB0aGlzLmVwLnNldERpc3BsYXkoZmFsc2UpXG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodGhpcy5lcCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKHI6IFJlbmRlcmluZ09wdGlvbnM9e30pe1xuICAgICAgICBpblJlbmRlcj10cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHN1cGVyLnJlbmRlcihyKTtcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSByO1xuICAgICAgICAgICAgdGhpcy5fcGFuZWwgPSA8YW55PnJlc3VsdDtcbiAgICAgICAgICAgIHZhciB0ZiA9IDxVSS5UYWJGb2xkZXI+dGhpcy5zdWJDYXRlZ29yaWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0Zi50YWJzQ291bnQoKTsgbisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0Zi5nZXQobik7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaGVhZGVyID09IGxhc3RTZWxlY3RlZENhcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleChuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRhdGlvbj1cIlwiO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGV0YWlsc05vZGUuZGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgICAgIGRvY3VtZW50YXRpb249dGhpcy5kZXRhaWxzTm9kZS5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRvY3VtZW50YXRpb24ubGVuZ3RoJiYhci5zaG93RGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hZGRDaGlsZChVSS5odG1sKFwiPGhyLz5cIikpXG4gICAgICAgICAgICAgICAgcmVzdWx0LmFkZENoaWxkKFVJLmxhYmVsKGRvY3VtZW50YXRpb24sVUkuSWNvbi5JTkJPWCxVSS5UZXh0Q2xhc3Nlcy5TVUJUTEUpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaW5SZW5kZXI9ZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNwb3NlKCk6dm9pZHtcbiAgICAgICAgdGhpcy5kZXRhaWxzTm9kZT1udWxsO1xuICAgIH1cblxuICAgIHVwZGF0ZShpOkl0ZW0pe1xuICAgICAgICAvLyBpZiAoIXRoaXMuX3BhbmVsKXtcbiAgICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBpZiAoaSBpbnN0YW5jZW9mIFByb3BlcnR5RWRpdG9ySW5mbyl7XG4gICAgICAgIC8vICAgICB2YXIgcHJJbmZvPTxQcm9wZXJ0eUVkaXRvckluZm8+aTtcbiAgICAgICAgLy8gICAgIGlmIChwckluZm8ucHJvcGVydHkuZ2V0QWRhcHRlcihkZWYuUkFNTFByb3BlcnR5U2VydmljZSkuaXNUeXBlRXhwcigpfHxwckluZm8ucHJvcGVydHkuaXNEZXNjcmltaW5hdG9yKCkpe1xuICAgICAgICAvLyAgICAgICAgIHJwLnV0aWxzLnVwZGF0ZVR5cGUodGhpcy5ub2RlKTtcbiAgICAgICAgLy8gICAgICAgICB2YXIgZXh0cmFzPTxDYXRlZ29yeT50aGlzLml0ZW0oXCJGYWNldHNcIik7XG4gICAgICAgIC8vICAgICAgICAgaWYgKGV4dHJhcyYmZXh0cmFzLl9yZXN1bHQpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgZXh0cmFzLl9yZXN1bHQuY2xlYXIoKTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgdmFyIGl0ZW09YnVpbGRJdGVtKHRoaXMubm9kZSxmYWxzZSk7XG4gICAgICAgIC8vICAgICAgICAgdmFyIG5ld0V4dHJhcz08Q2F0ZWdvcnk+aXRlbS5pdGVtKFwiRmFjZXRzXCIpO1xuICAgICAgICAvLyAgICAgICAgIGlmIChuZXdFeHRyYXMpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKGV4dHJhcyYmZXh0cmFzLl9yZXN1bHQpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGV4dHJhcy5fY2hpbGRyZW4gPSBuZXdFeHRyYXMuX2NoaWxkcmVuO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgZXh0cmFzLl9jaGlsZHJlbi5mb3JFYWNoKHg9PngucGFyZW50ID0gZXh0cmFzKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChleHRyYXMuX2NoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBleHRyYXMuX3Jlc3VsdC5zZXREaXNwbGF5KHRydWUpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC8vd29ya2Fyb3VuZyBldmVudHMgZmxvdyBpc3N1ZSBpbiBVSS50c1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbmV3RXh0cmFzLmNoaWxkcmVuKCkuZm9yRWFjaCh4PT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4dHJhcy5fcmVzdWx0LmFkZENoaWxkKHgucmVuZGVyKHRoaXMuX29wdGlvbnMpKVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgICAgICBlbHNle1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChuZXdFeHRyYXMpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhbmVsKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFuZWwuYWRkQ2hpbGQobmV3RXh0cmFzLnJlbmRlcih0aGlzLl9vcHRpb25zKSlcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICBlbHNle1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAoZXh0cmFzJiZleHRyYXMuX3Jlc3VsdCkge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgZXh0cmFzLl9yZXN1bHQuc2V0RGlzcGxheShmYWxzZSk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gdmFyIGtwPW51bGw7XG4gICAgICAgIC8vIHRoaXMubm9kZS5kZWZpbml0aW9uKCkuYWxsUHJvcGVydGllcygpLmZvckVhY2goeD0+e1xuICAgICAgICAvLyAgICAgaWYgKHguZ2V0QWRhcHRlcihkZWYuUkFNTFByb3BlcnR5U2VydmljZSkuaXNLZXkoKSl7XG4gICAgICAgIC8vICAgICAgICAga3A9eDtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gaWYgKGtwKXtcbiAgICAgICAgLy8gICAgIHZhciBrZXlJdGVtPTxQcm9wZXJ0eUVkaXRvckluZm8+dGhpcy5pdGVtKGtwLm5hbWVJZCgpKTtcbiAgICAgICAgLy8gICAgIGlmIChrZXlJdGVtKXtcbiAgICAgICAgLy8gICAgICAgICB2YXIgbT1rZXlJdGVtLmZsZDtcbiAgICAgICAgLy8gICAgICAgICB2YXIgdmw9bS5nZXRCaW5kaW5nKCkuZ2V0KCk7XG4gICAgICAgIC8vICAgICAgICAgaWYgKCghdmwpfHx2bC50cmltKCkubGVuZ3RoPT0wKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5fcGFuZWwuZ2V0QmluZGluZygpLnNldFN0YXR1cyhVSS5lcnJvclN0YXR1cyhcIlwiKSk7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIGVsc2V7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuX3BhbmVsLmdldEJpbmRpbmcoKS5zZXRTdGF0dXMoVUkub2tTdGF0dXMoKSk7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHZhciBlcnJvcnM7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIGlmKHRoaXMubm9kZS5wcm9wZXJ0eSgpICYmIHVuaXZlcnNlaGVscGVycy5pc0V4YW1wbGVQcm9wZXJ0eSh0aGlzLm5vZGUucHJvcGVydHkoKSkpIHtcbiAgICAgICAgLy8gICAgIHZhciBwYXJlbnQgPSB0aGlzLm5vZGUucGFyZW50KClcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgIGlmKHBhcmVudCkge1xuICAgICAgICAvLyAgICAgICAgIHZhciBwYXJzZWQgPSBwYXJlbnQucGFyc2VkVHlwZSgpO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgIHZhciBleGFtcGxlTWV0YSA9ICBfLmZpbmQoKDxhbnk+cGFyc2VkKS5tZXRhSW5mbyB8fCBbXSwgKG1ldGE6IGFueSk6IGJvb2xlYW4gPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gbWV0YSAmJiBtZXRhLl9uYW1lID09PSAnZXhhbXBsZSc7XG4gICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgaWYoZXhhbXBsZU1ldGEpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgdmFyIHZhbGlkYXRlT2JqZWN0ID0gZXhhbXBsZU1ldGEudmFsaWRhdGVTZWxmKHRoaXMubm9kZS50eXBlcygpLmdldEFubm90YXRpb25UeXBlUmVnaXN0cnkoKSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICAgICAgIGVycm9ycyA9ICgodmFsaWRhdGVPYmplY3QgJiYgdmFsaWRhdGVPYmplY3QuZ2V0RXJyb3JzKCkpIHx8IFtdKS5tYXAoZXJyb3IgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZS5jcmVhdGVJc3N1ZShlcnJvcik7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIGVycm9ycyA9IHRoaXMubm9kZS5lcnJvcnMoKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvL1xuICAgICAgICAvLyB0aGlzLmNsZWFyRXJyb3JzKCk7XG4gICAgICAgIC8vIHRoaXMuZXAuc2V0RGlzcGxheShmYWxzZSlcbiAgICAgICAgLy8gaWYgKCFyZXNvdXJjZVJlZ2lzdHJ5Lmhhc0FzeW5jUmVxdWVzdHMoKSAmJiBlcnJvcnMmJmVycm9ycy5sZW5ndGg+MCl7XG4gICAgICAgIC8vICAgICB2YXIgbm90Rm91bmQ9W107XG4gICAgICAgIC8vICAgICBlcnJvcnMuZm9yRWFjaChlcnJvcj0+e1xuICAgICAgICAvLyAgICAgICAgIGlmIChlcnJvci5leHRyYXMmJmVycm9yLmV4dHJhcy5sZW5ndGg+MCl7XG4gICAgICAgIC8vICAgICAgICAgICAgIGVycm9yPWVycm9yLmV4dHJhc1swXTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgdmFyIGl0ZW0gPSBlcnJvci5ub2RlICYmIHRoaXMuaXRlbShlcnJvci5ub2RlLm5hbWUoKSk7XG4gICAgICAgIC8vICAgICAgICAgaWYgKGl0ZW0pe1xuICAgICAgICAvLyAgICAgICAgICAgICBpdGVtLnNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICBlbHNle25vdEZvdW5kLnB1c2goZXJyb3IpO31cbiAgICAgICAgLy8gICAgIH0pXG4gICAgICAgIC8vICAgICBpZiAobm90Rm91bmQubGVuZ3RoPjApe1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuZXJyb3JMYWJlbC5zZXRJY29uKFVJLkljb24uQlVHKVxuICAgICAgICAvLyAgICAgICAgIHZhciBldD1ub3RGb3VuZC5tYXAoeD0+eC5ub2RlLm5hbWUoKStcIjpcIit4Lm1lc3NhZ2UpLmpvaW4oXCIsXCIpO1xuICAgICAgICAvLyAgICAgICAgIGlmIChldC5sZW5ndGg+MTAwKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgZXQ9ZXQuc3Vic3RyaW5nKDAsMTAwKStcIi4uLlwiO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB0aGlzLmVycm9yTGFiZWwuc2V0VGV4dChldClcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmVwLnNldERpc3BsYXkodHJ1ZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBlbHNle1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuZXAuc2V0RGlzcGxheShmYWxzZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cbiAgICB9XG59XG5cbmNsYXNzIENoZWNrQm94MiBleHRlbmRzIFVJLkNoZWNrQm94IGltcGxlbWVudHMgVUkuSUZpZWxkPGFueT57XG5cbiAgICBzZXRMYWJlbFdpZHRoKG46bnVtYmVyKXtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIsKG4rMikrXCJjaFwiKTtcbiAgICB9XG59XG5jbGFzcyBQcm9wZXJ0eUVkaXRvckluZm8gZXh0ZW5kcyBJdGVte1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIG91dGxpbmVOb2RlIDogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04sXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIGNvbnRleHQ6IERldGFpbHNDb250ZXh0KXtcbiAgICAgICAgc3VwZXIob3V0bGluZU5vZGUudGl0bGUsb3V0bGluZU5vZGUuZGVzY3JpcHRpb24pO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKXtcbiAgICAgICAgdGhpcy5vdXRsaW5lTm9kZT1udWxsO1xuICAgICAgICB0aGlzLmZsZC5nZXRCaW5kaW5nKCkucmVtb3ZlTGlzdGVuZXIodGhpcy51cGRhdGUpXG4gICAgfVxuXG4gICAgLy8gZ2V0RGVmYXVsdFZhbHVlKCkge1xuICAgIC8vICAgICByZXR1cm4gZGVmYXVsdFZhbHVlcy5nZXREZWZhdWx0VmFsdWUodGhpcy5ub2RlLCB0aGlzLnByb3BlcnR5KTtcbiAgICAvLyB9XG4gICAgLy9cbiAgICAvLyBoYXNEZWZhdWx0KCkge1xuICAgIC8vICAgICByZXR1cm4gZGVmYXVsdFZhbHVlcy5oYXNEZWZhdWx0KHRoaXMucHJvcGVydHkpO1xuICAgIC8vIH1cblxuICAgIGVycm9yTGFiZWw6VUkuVGV4dEVsZW1lbnQ8YW55PlxuICAgIGRlc2NMYWJlbDpVSS5UZXh0RWxlbWVudDxhbnk+XG5cbiAgICBmbGQ6VUkuQmFzaWNDb21wb25lbnQ8YW55PjtcbiAgICBjbGVhckVycm9ycygpe1xuICAgICAgICB0aGlzLnNldEVycm9yKG51bGwpO1xuICAgIH1cbiAgICBzZXRFcnJvcih0ZXh0OnN0cmluZyl7XG4gICAgICAgIGlmICh0ZXh0KXtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JMYWJlbC5zZXRUZXh0KHRleHQpO1xuICAgICAgICAgICAgdGhpcy5lcnJvckxhYmVsLnNldERpc3BsYXkodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmICh0aGlzLmVycm9yTGFiZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTGFiZWwuc2V0RGlzcGxheShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmcm9tRWRpdG9yVG9Nb2RlbChuZXdWYWx1ZT8gOiBhbnksIG9sZFZhbHVlPyA6IGFueSl7XG4gICAgICAgIGNvbnN0IGRldGFpbHNDaGFuZ2VSdW5uYWJsZSA9XG4gICAgICAgICAgICBuZXcgVXBkYXRlTW9kZWxSdW5uYWJsZSh0aGlzLmNvbnRleHQsIHRoaXMub3V0bGluZU5vZGUsIG5ld1ZhbHVlKTtcblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG4gICAgICAgIGNvbnRleHQucmVjb25jaWxlci5zY2hlZHVsZShkZXRhaWxzQ2hhbmdlUnVubmFibGUpLnRoZW4oKGNoYW5nZWREb2N1bWVudHMpID0+IHtcbiAgICAgICAgICAgIGlmKGNvbnRleHQubG9jYWxNb2RlbCkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhc3Npc3RVdGlscy5hcHBseUNoYW5nZWREb2N1bWVudHMoY2hhbmdlZERvY3VtZW50cyk7XG4gICAgICAgICAgICBhc3Npc3RVdGlscy5nb3RvUG9zaXRpb24oY29udGV4dC5wb3NpdGlvbik7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdG9Mb2NhbFZhbHVlKGlucHV0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWU7XG4gICAgfVxuXG4gICAgdG9VSVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBmcm9tTW9kZWxUb0VkaXRvcigpIHtcblxuICAgICAgICB0aGlzLmZsZC5nZXRCaW5kaW5nKCkuc2V0KHRoaXMub3V0bGluZU5vZGUudmFsdWVUZXh0KTtcbiAgICB9XG4gICAgcmVuZGVyZWQ6Ym9vbGVhbj1mYWxzZVxuICAgIHVwZGF0ZT0obmV3VmFsdWUsIG9sZFZhbHVlKT0+e1xuICAgICAgICBpZighdGhpcy5yZW5kZXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mcm9tRWRpdG9yVG9Nb2RlbChuZXdWYWx1ZSwgb2xkVmFsdWUpO1xuICAgIH1cblxuICAgIHJlbmRlcigpe1xuICAgICAgICB2YXIgY29udGFpbmVyPW5ldyBVSS5XcmFwUGFuZWwoKTtcblxuICAgICAgICB0aGlzLmVycm9yTGFiZWw9VUkubGFiZWwoXCJcIixVSS5JY29uLkJVRyxVSS5UZXh0Q2xhc3Nlcy5FUlJPUik7XG4gICAgICAgIHRoaXMuZXJyb3JMYWJlbC5zZXREaXNwbGF5KGZhbHNlKTtcbiAgICAgICAgdGhpcy5lcnJvckxhYmVsLnNldFN0eWxlKFwibWFyZ2luLWxlZnRcIiwodGhpcy5fdGl0bGUubGVuZ3RoKzEpK1wiY2hcIilcblxuICAgICAgICB2YXIgZmllbGQ9dGhpcy5jcmVhdGVGaWVsZCgpO1xuXG4gICAgICAgIHRoaXMuZmxkPTxVSS5CYXNpY0NvbXBvbmVudDxhbnk+PmZpZWxkO1xuXG4gICAgICAgIGZpZWxkLmdldEJpbmRpbmcoKS5hZGRMaXN0ZW5lcih0aGlzLnVwZGF0ZSlcblxuICAgICAgICBjb250YWluZXIuc2V0Q2FwdGlvbih0aGlzLnRpdGxlKCkpO1xuXG4gICAgICAgIHRoaXMuZnJvbU1vZGVsVG9FZGl0b3IoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQoZmllbGQpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmVycm9yTGFiZWwpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyZWQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgY3JlYXRlRmllbGQoKTpVSS5JRmllbGQ8YW55PntcbiAgICAgICAgcmV0dXJuIFVJLnRleGZGaWVsZCh0aGlzLm5lZWRzU2VwYXJhdGVMYWJlbCgpP1wiXCI6dGhpcy5vdXRsaW5lTm9kZS50aXRsZSxcIlwiLHg9Pnt9KTtcbiAgICB9XG59XG5cbmNsYXNzIFNpbXBsZU11bHRpRWRpdG9yIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIC8vIGZyb21FZGl0b3JUb01vZGVsKCl7XG4gICAgLy8gICAgIC8vIHZhciBmaWVsZD10aGlzLmZsZDtcbiAgICAvLyAgICAgLy8gdmFyIHZsPWZpZWxkLmdldEJpbmRpbmcoKS5nZXQoKTtcbiAgICAvLyAgICAgLy8gaWYgKHZsPT1udWxsKXtcbiAgICAvLyAgICAgLy8gICAgIHZsPVwiXCI7XG4gICAgLy8gICAgIC8vIH1cbiAgICAvLyAgICAgLy8gdmFyIGF0dHJzPXRoaXMubm9kZS5hdHRyaWJ1dGVzKHRoaXMucHJvcGVydHkubmFtZUlkKCkpO1xuICAgIC8vICAgICAvLyB2YXIgYXY9YXR0cnMubWFwKHg9PmVzY2FwZVZhbHVlKFwiXCIreC52YWx1ZSgpKSkuam9pbihcIiwgXCIpO1xuICAgIC8vICAgICAvLyBpZiAoYXY9PXZsKXtcbiAgICAvLyAgICAgLy8gICAgIHJldHVybjtcbiAgICAvLyAgICAgLy8gfVxuICAgIC8vICAgICAvLyB2YXIgd3c9dmwuc3BsaXQoXCIsXCIpO1xuICAgIC8vICAgICAvLyB2YXIgdmw9d3cuZmlsdGVyKHg9PngudHJpbSgpLmxlbmd0aD4wKS5tYXAoeD0+eC50cmltKCkpO1xuICAgIC8vICAgICAvL1xuICAgIC8vICAgICAvLyBpZih0aGlzLm5vZGUubG93TGV2ZWwoKS5pbmNsdWRlUGF0aCgpICYmICF0aGlzLm5vZGUubG93TGV2ZWwoKS51bml0KCkucmVzb2x2ZSh0aGlzLm5vZGUubG93TGV2ZWwoKS5pbmNsdWRlUGF0aCgpKSkge1xuICAgIC8vICAgICAvLyAgICAgcmV0dXJuO1xuICAgIC8vICAgICAvLyB9XG4gICAgLy8gICAgIC8vXG4gICAgLy8gICAgIC8vIHZhciBhdHRyaWJ1dGUgPSB0aGlzLm5vZGUuYXR0ck9yQ3JlYXRlKHRoaXMucHJvcGVydHkubmFtZUlkKCkpO1xuICAgIC8vICAgICAvLyBhdHRyaWJ1dGUuc2V0VmFsdWVzKHZsKVxuICAgIC8vICAgICAvL1xuICAgIC8vICAgICAvLyB2YXIgcm9vdD10aGlzLnJvb3QoKVxuICAgIC8vICAgICAvLyBpZiAocm9vdCl7XG4gICAgLy8gICAgIC8vICAgICByb290LnVwZGF0ZSh0aGlzKTtcbiAgICAvLyAgICAgLy8gfVxuICAgIC8vIH1cbiAgICBmcm9tTW9kZWxUb0VkaXRvcigpe1xuICAgICAgICB0aGlzLmZsZC5nZXRCaW5kaW5nKCkuc2V0KHRoaXMub3V0bGluZU5vZGUudmFsdWVUZXh0KTtcbiAgICB9XG59XG5mdW5jdGlvbiBlc2NhcGVWYWx1ZSh2OnN0cmluZyl7XG4gICAgaWYgKHYubGVuZ3RoPjApIHtcbiAgICAgICAgaWYgKHYuY2hhckF0KDApID09IFwiJ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1wiJyArIHYgKyAnXCInO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PSAnXCInKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1wiJyArIHYgKyAnXCInO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh2LmluZGV4T2YoJyAnKSE9LTF8fHYuaW5kZXhPZignLCcpIT0tMSl7XG4gICAgICAgIGlmICh2LmluZGV4T2YoJ1wiJyk9PS0xKXtcbiAgICAgICAgICAgIHJldHVybiAnXCInK3YrJ1wiJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmluZGV4T2YoXCInXCIpPT0tMSl7XG4gICAgICAgICAgICByZXR1cm4gXCInXCIrditcIidcIlxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG5jbGFzcyBDaGVja0JveEZpZWxkIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIHJldHVybiBuZXcgQ2hlY2tCb3gyKHRoaXMub3V0bGluZU5vZGUudGl0bGUsVUkuSWNvbi5OT05FLHg9Pnt9KTtcbiAgICB9XG5cbiAgICB0b1VJVmFsdWUodmFsdWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIGlmKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoKDxhbnk+dmFsdWUpID09PSB0cnVlIHx8IHZhbHVlLnRyaW0oKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0b0xvY2FsVmFsdWUodmFsdWU6IGFueSk6IGFueSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSArIFwiXCI7XG4gICAgfVxufVxuXG4vLyBjbGFzcyBBY3Rpb25zSXRlbSBleHRlbmRzIEl0ZW17XG4vL1xuLy8gICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbm9kZTpobC5JSGlnaExldmVsTm9kZSl7XG4vLyAgICAgICAgIHN1cGVyKFwiQWN0aW9uc1wiLFwiXCIpO1xuLy8gICAgIH1cbi8vICAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zKXtcbi8vICAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb25zLmdlbmVyYXRlU3VnZ2VzdGlvbnNQYW5lbCh0aGlzLm5vZGUpO1xuLy8gICAgIH1cbi8vICAgICBkaXNwb3NlKCl7XG4vLyAgICAgICAgIHRoaXMubm9kZT1udWxsO1xuLy8gICAgIH1cbi8vXG4vLyB9XG4vLyBjbGFzcyBDb250ZXh0QWN0aW9uc0l0ZW0gZXh0ZW5kcyBJdGVte1xuLy8gICAgIGNvbnN0cnVjdG9yKG5vZGU6aGwuSUhpZ2hMZXZlbE5vZGUsbmFtZTpzdHJpbmcscHJpdmF0ZSBhY3Rpb25zOmNvbnRleHRBY3Rpb25zLklDb250ZXh0RGVwZW5kZWRBY3Rpb25bXSl7XG4vLyAgICAgICAgIHN1cGVyKG5hbWUsXCJcIik7XG4vLyAgICAgfVxuLy8gICAgIGRpc3Bvc2UoKXtcbi8vXG4vLyAgICAgfVxuLy9cbi8vICAgICByZW5kZXIocjpSZW5kZXJpbmdPcHRpb25zKXtcbi8vICAgICAgICAgdmFyIHJlc3VsdD1VSS5oYygpO1xuLy8gICAgICAgICByZXN1bHQuYWRkQ2hpbGQoVUkuaDModGhpcy50aXRsZSgpKSlcbi8vICAgICAgICAgdGhpcy5hY3Rpb25zLmZvckVhY2goeD0+e1xuLy8gICAgICAgICAgICAgcmVzdWx0LmFkZENoaWxkKFVJLmJ1dHRvbih4Lm5hbWUsVUkuQnV0dG9uU2l6ZXMuRVhUUkFfU01BTEwsVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLFVJLkljb24uQ0hFQ0tMSVNULGE9Pngub25DbGljaygpKS5tYXJnaW4oMywzLDMsMykpXG4vLyAgICAgICAgIH0pXG4vLyAgICAgICAgIHJldHVybiByZXN1bHQ7XG4vLyAgICAgfVxuLy8gfVxuXG5jbGFzcyBNYXJrZG93bkZpZWxkVUkgZXh0ZW5kcyBVSS5BdG9tRWRpdG9yRWxlbWVudCBpbXBsZW1lbnRzIFVJLklGaWVsZDxhbnk+e1xuXG4gICAgY29uc3RydWN0b3IodGV4dDpzdHJpbmcsIG9uY2hhbmdlOlVJLkV2ZW50SGFuZGxlcikge1xuICAgICAgICBzdXBlcih0ZXh0LCBvbmNoYW5nZSk7XG4gICAgICAgIHRoaXMubWFyZ2luKDAsIDAsIDYsIDEyKTtcbiAgICAgICAgdGhpcy5zZXRNaW5pKGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcIm1pbi1oZWlnaHRcIixcIjEwMHB4XCIpO1xuICAgICAgICAvL3RoaXMuc2V0U3R5bGUoXCJtYXgtaGVpZ2h0XCIsXCIyMDBweFwiKTtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlclwiLFwic29saWRcIik7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIixcIjFweFwiKVxuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYm9yZGVyLXJhZGl1c1wiLFwiMnB4XCIpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwiZm9udC1zaXplXCIsXCIxLjE1ZW1cIilcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlci1jb2xvclwiLFwicmdiYSgwLDAsMCwwLjIpXCIpO1xuICAgICAgICB0aGlzLnNldEdyYW1tYXIoJ3NvdXJjZS5tZGN1c3RvbScpO1xuICAgIH1cblxuICAgIHNldExhYmVsV2lkdGgoKXtcblxuICAgIH1cbiAgICBzZXRMYWJlbEhlaWdodCgpe1xuXG4gICAgfVxuICAgIHNldFJlcXVpcmVkKHY6Ym9vbGVhbil7XG5cbiAgICB9XG59XG5jbGFzcyBYTUxGaWVsZCBleHRlbmRzIFVJLkF0b21FZGl0b3JFbGVtZW50IGltcGxlbWVudHMgVUkuSUZpZWxkPGFueT57XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0OnN0cmluZywgb25jaGFuZ2U6VUkuRXZlbnRIYW5kbGVyKSB7XG4gICAgICAgIHN1cGVyKHRleHQsIG9uY2hhbmdlKTtcbiAgICAgICAgdGhpcy5tYXJnaW4oMCwgMCwgNiwgMTIpO1xuICAgICAgICB0aGlzLnNldE1pbmkoZmFsc2UpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwibWluLWhlaWdodFwiLFwiMTAwcHhcIik7XG4gICAgICAgIC8vdGhpcy5zZXRTdHlsZShcIm1heC1oZWlnaHRcIixcIjIwMHB4XCIpO1xuXG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXJcIixcInNvbGlkXCIpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYm9yZGVyLXdpZHRoXCIsXCIxcHhcIilcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlci1yYWRpdXNcIixcIjJweFwiKTtcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImZvbnQtc2l6ZVwiLFwiMS4xNWVtXCIpXG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXItY29sb3JcIixcInJnYmEoMCwwLDAsMC4yKVwiKTtcbiAgICAgICAgdGhpcy5zZXRHcmFtbWFyKCd0ZXh0LnhtbCcpO1xuICAgIH1cblxuXG5cbiAgICBzZXRMYWJlbFdpZHRoKCl7XG5cbiAgICB9XG4gICAgc2V0TGFiZWxIZWlnaHQoKXtcblxuICAgIH1cbiAgICBzZXRSZXF1aXJlZCh2OmJvb2xlYW4pe1xuXG4gICAgfVxufVxuY2xhc3MgSlNPTkZpZWxkIGV4dGVuZHMgVUkuQXRvbUVkaXRvckVsZW1lbnQgaW1wbGVtZW50cyBVSS5JRmllbGQ8YW55PntcblxuICAgIGNvbnN0cnVjdG9yKHRleHQ6c3RyaW5nLCBvbmNoYW5nZTpVSS5FdmVudEhhbmRsZXIpIHtcbiAgICAgICAgc3VwZXIodGV4dCwgb25jaGFuZ2UpO1xuICAgICAgICB0aGlzLm1hcmdpbigwLCAwLCA2LCAxMik7XG4gICAgICAgIHRoaXMuc2V0TWluaShmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJtaW4taGVpZ2h0XCIsXCIxMDBweFwiKTtcbiAgICAgICAgLy90aGlzLnNldFN0eWxlKFwibWF4LWhlaWdodFwiLFwiMjAwcHhcIik7XG5cbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlclwiLFwic29saWRcIik7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIixcIjFweFwiKVxuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYm9yZGVyLXJhZGl1c1wiLFwiMnB4XCIpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKFwiZm9udC1zaXplXCIsXCIxLjE1ZW1cIilcbiAgICAgICAgdGhpcy5zZXRTdHlsZShcImJvcmRlci1jb2xvclwiLFwicmdiYSgwLDAsMCwwLjIpXCIpO1xuICAgICAgICB0aGlzLnNldEdyYW1tYXIoJ3NvdXJjZS5qc29uJyk7XG4gICAgfVxuXG5cblxuICAgIHNldExhYmVsV2lkdGgoKXtcblxuICAgIH1cbiAgICBzZXRMYWJlbEhlaWdodCgpe1xuXG4gICAgfVxuICAgIHNldFJlcXVpcmVkKHY6Ym9vbGVhbil7XG5cbiAgICB9XG59XG5jbGFzcyBNYXJrZG93bkZpZWxkIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIHZhciBlZGl0b3IgPSBuZXcgTWFya2Rvd25GaWVsZFVJKFwiXCIseD0+e30pO1xuICAgICAgICByZXR1cm4gZWRpdG9yO1xuICAgIH1cblxuICAgIG5lZWRzU2VwYXJhdGVMYWJlbCgpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbn1cbmNsYXNzIEV4YW1wbGVGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcbiAgICBjb25zdHJ1Y3RvcihvdXRsaW5lTm9kZTogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04sIGNvbnRleHQ6IERldGFpbHNDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKG91dGxpbmVOb2RlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICBjcmVhdGVGaWVsZCgpe1xuICAgICAgICB2YXIgZWRpdG9yID0gbmV3IEpTT05GaWVsZCh0aGlzLm91dGxpbmVOb2RlLnZhbHVlVGV4dCx4PT57fSk7XG4gICAgICAgIHJldHVybiBlZGl0b3I7XG4gICAgfVxuXG4gICAgbmVlZHNTZXBhcmF0ZUxhYmVsKCl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZyb21Nb2RlbFRvRWRpdG9yKCl7XG5cbiAgICB9XG5cbiAgICBmcm9tRWRpdG9yVG9Nb2RlbChuZXdWYWx1ZT8gOiBhbnksIG9sZFZhbHVlPyA6IGFueSl7XG5cbiAgICB9XG59XG5jbGFzcyBYTUxFeGFtcGxlRmllbGQgZXh0ZW5kcyBQcm9wZXJ0eUVkaXRvckluZm97XG5cbiAgICBjb25zdHJ1Y3RvcihvdXRsaW5lTm9kZTogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04sIGNvbnRleHQ6IERldGFpbHNDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKG91dGxpbmVOb2RlLCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICBjcmVhdGVGaWVsZCgpe1xuICAgICAgICB2YXIgZWRpdG9yID0gbmV3IFhNTEZpZWxkKHRoaXMub3V0bGluZU5vZGUudmFsdWVUZXh0LHg9Pnt9KTtcbiAgICAgICAgcmV0dXJuIGVkaXRvcjtcbiAgICB9XG5cbiAgICBuZWVkc1NlcGFyYXRlTGFiZWwoKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbU1vZGVsVG9FZGl0b3IoKXtcblxuICAgIH1cblxuICAgIGZyb21FZGl0b3JUb01vZGVsKG5ld1ZhbHVlPyA6IGFueSwgb2xkVmFsdWU/IDogYW55KXtcblxuICAgIH1cbn1cbmNsYXNzIFhNTFNjaGVtYUZpZWxkIGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIHZhciBlZGl0b3IgPSBuZXcgWE1MRmllbGQoXCJcIix4PT57fSk7XG4gICAgICAgIHJldHVybiBlZGl0b3I7XG4gICAgfVxuXG4gICAgbmVlZHNTZXBhcmF0ZUxhYmVsKCl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmNsYXNzIEpTT05TY2hlbWFGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcbiAgICBjcmVhdGVGaWVsZCgpe1xuICAgICAgICBsZXQgZWRpdG9yID0gbmV3IEpTT05GaWVsZChcIlwiLHg9Pnt9KTtcbiAgICAgICAgcmV0dXJuIGVkaXRvcjtcbiAgICB9XG5cbiAgICBuZWVkc1NlcGFyYXRlTGFiZWwoKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuY2xhc3MgU2VsZWN0Qm94IGV4dGVuZHMgUHJvcGVydHlFZGl0b3JJbmZve1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIG91dGxpbmVOb2RlIDogcmFtbFNlcnZlci5EZXRhaWxzSXRlbVdpdGhPcHRpb25zSlNPTiwgY29udGV4dDogRGV0YWlsc0NvbnRleHQpIHtcbiAgICAgICAgc3VwZXIob3V0bGluZU5vZGUsIGNvbnRleHQpXG4gICAgfVxuXG4gICAgY3JlYXRlRmllbGQoKXtcbiAgICAgICAgbGV0IG9wdGlvbnM9IHRoaXMub3V0bGluZU5vZGUub3B0aW9ucz90aGlzLm91dGxpbmVOb2RlLm9wdGlvbnM6W107XG5cbiAgICAgICAgbGV0IHNlbGVjdD0gbmV3IFVJLlNlbGVjdEZpZWxkKHRoaXMub3V0bGluZU5vZGUudGl0bGUseD0+e30sXCJcIixVSS5JY29uLk5PTkUsb3B0aW9ucyk7XG5cbiAgICAgICAgc2VsZWN0LmdldEFjdHVhbEZpZWxkKCkuc2V0T3B0aW9ucyhvcHRpb25zKVxuXG4gICAgICAgIHJldHVybiBzZWxlY3Q7XG4gICAgfVxuXG59XG5cbmNsYXNzIFR5cGVTZWxlY3RCb3ggZXh0ZW5kcyBTZWxlY3RCb3gge1xuXG4gICAgZnJvbUVkaXRvclRvTW9kZWwobmV3VmFsdWU/IDogYW55LCBvbGRWYWx1ZT8gOiBhbnkpe1xuICAgICAgICAvLyAvL2N1cnJlbnQgaW1wbGVtZW50YXRpb24gb25seSBhbGxvd3MgY2hhbmdpbmcgdGhlIGZhY2V0cyBvZiBjZXJ0YWluIHR5cGVzIGZvciBzYWZldHlcbiAgICAgICAgLy8gLy9UT0RPIGNoYW5nZSB0aGlzIHRvIGFyYml0cmFyeSBmYWNldHMgKHJlbW92ZSB0eXBlIGZpbHRlcmluZylcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdmFyIG9sZE5hbWVzIDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgLy8gdmFyIHNhdmVkQXR0cnMgPSBbXTtcbiAgICAgICAgLy8gaWYgKG5ld1ZhbHVlICYmIG9sZFZhbHVlKSB7XG4gICAgICAgIC8vICAgICB0cnkge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMubm9kZS5kZWZpbml0aW9uKCkuYWxsU3VwZXJUeXBlcygpLmZvckVhY2goc3VwZXJUeXBlPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAodGhpcy5pc0FsbG93ZWRUeXBlVG9SZXBsYWNlRmFjZXRzKHN1cGVyVHlwZSkpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuYWRkVHlwZUZhY2V0cyhzdXBlclR5cGUsIG9sZE5hbWVzKVxuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICBzYXZlZEF0dHJzID0gW10uY29uY2F0KHRoaXMubm9kZS5hdHRycygpKVxuICAgICAgICAvLyAgICAgfSBjYXRjaCAoZXJyKSB7Y29uc29sZS5sb2coZXJyKX1cbiAgICAgICAgLy8gfVxuICAgICAgICAvL1xuICAgICAgICAvLyBzdXBlci5mcm9tRWRpdG9yVG9Nb2RlbCgpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBpZiAobmV3VmFsdWUgJiYgb2xkVmFsdWUpIHtcbiAgICAgICAgLy8gICAgIHRyeSB7XG4gICAgICAgIC8vICAgICAgICAgLy9jb2xsZWN0aW5nIGZhY2V0cyBhbGxvd2VkIHRvIHJlbW92ZVxuICAgICAgICAvLyAgICAgICAgIHZhciBjdXJyZW50VW5pdmVyc2UgPSB0aGlzLm5vZGUuZGVmaW5pdGlvbigpLnVuaXZlcnNlKCk7XG4gICAgICAgIC8vICAgICAgICAgdmFyIG5hbWVzIDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICB0aGlzLm5vZGUuZGVmaW5pdGlvbigpLmFsbFN1cGVyVHlwZXMoKS5mb3JFYWNoKHN1cGVyVHlwZT0+e1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAodGhpcy5pc0FsbG93ZWRUeXBlVG9SZXBsYWNlRmFjZXRzKHN1cGVyVHlwZSkpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuYWRkVHlwZUZhY2V0cyhzdXBlclR5cGUsIG5hbWVzKVxuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICBpZiAob2xkTmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHNhdmVkQXR0cnMuZm9yRWFjaChhdHRyaWJ1dGUgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKF8uZmluZChvbGROYW1lcywgZmFjZXROYW1lID0+IGZhY2V0TmFtZSA9PSBhdHRyaWJ1dGUubmFtZSgpKVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICYmICFfLmZpbmQobmFtZXMsIGZhY2V0TmFtZSA9PiBmYWNldE5hbWUgPT0gYXR0cmlidXRlLm5hbWUoKSkpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlKGF0dHJpYnV0ZSlcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9IGNhdGNoIChlcnIpIHtjb25zb2xlLmxvZyhlcnIpfVxuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgLy8gcHJpdmF0ZSBpc0FsbG93ZWRUeXBlVG9SZXBsYWNlRmFjZXRzKGN1cnJlbnRUeXBlRGVmIDogaGwuSVR5cGVEZWZpbml0aW9uKSA6IGJvb2xlYW4ge1xuICAgIC8vICAgICByZXR1cm4gY3VycmVudFR5cGVEZWYua2V5KCkgPT0gdW5pdmVyc2UuVW5pdmVyc2UxMC5TdHJpbmdUeXBlRGVjbGFyYXRpb24gfHxcbiAgICAvLyAgICAgICAgIGN1cnJlbnRUeXBlRGVmLmtleSgpID09IHVuaXZlcnNlLlVuaXZlcnNlMTAuQm9vbGVhblR5cGVEZWNsYXJhdGlvbiB8fFxuICAgIC8vICAgICAgICAgY3VycmVudFR5cGVEZWYua2V5KCkgPT0gdW5pdmVyc2UuVW5pdmVyc2UxMC5OdW1iZXJUeXBlRGVjbGFyYXRpb24gfHxcbiAgICAvLyAgICAgICAgIGN1cnJlbnRUeXBlRGVmLmtleSgpID09IHVuaXZlcnNlLlVuaXZlcnNlMTAuSW50ZWdlclR5cGVEZWNsYXJhdGlvbjtcbiAgICAvLyB9XG5cbiAgICAvLyBwcml2YXRlIGFkZFR5cGVGYWNldHMoY3VycmVudFR5cGVEZWYgOiBobC5JVHlwZURlZmluaXRpb24gLCBuYW1lcyA6IHN0cmluZ1tdKSA6IHZvaWQge1xuICAgIC8vICAgICBjdXJyZW50VHlwZURlZi5wcm9wZXJ0aWVzKCkubWFwKHByb3BlcnR5PT5wcm9wZXJ0eS5uYW1lSWQoKSkuZm9yRWFjaChuYW1lPT5uYW1lcy5wdXNoKG5hbWUpKTtcbiAgICAvLyB9XG59XG5cbmNsYXNzIFRyZWVGaWVsZCBleHRlbmRzIFVJLlBhbmVsIGltcGxlbWVudHMgVUkuSUZpZWxkPGFueT57XG5cbiAgICBjb25zdHJ1Y3RvcihvdXRsaW5lTm9kZSA6IHJhbWxTZXJ2ZXIuRGV0YWlsc0l0ZW1KU09OLCBwcm90ZWN0ZWQgY29udGV4dDogRGV0YWlsc0NvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB2YXIgcmVuZGVyZXI9e1xuXG5cbiAgICAgICAgICAgIHJlbmRlcihub2RlIDogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04pe1xuXG4gICAgICAgICAgICAgICAgdmFyIGxlZnQ9VUkubGFiZWwobm9kZS50aXRsZSxVSS5JY29uLkNJUkNVSVRfQk9BUkQsVUkuVGV4dENsYXNzZXMuSElHSExJR0hUKTtcblxuICAgICAgICAgICAgICAgIHZhciByaWdodD1VSS5sYWJlbChub2RlLnZhbHVlVGV4dD8oXCI6XCIrbm9kZS52YWx1ZVRleHQpOlwiXCIsXG4gICAgICAgICAgICAgICAgICAgIFVJLkljb24uTk9ORSxVSS5UZXh0Q2xhc3Nlcy5TVUNDRVNTKTtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ9VUkuaGMobGVmdCxyaWdodCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRDaGlsZHJlbiA9IChub2RlIDogcmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNoaWxkcmVuP25vZGUuY2hpbGRyZW46W107XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmlld2VyPVVJLnRyZWVWaWV3ZXIoZ2V0Q2hpbGRyZW4sIHJlbmRlcmVyLCB4ID0+IHgudGl0bGUpO1xuXG4gICAgICAgIHZhciBpbnB1dFZhbHVlPXtcbiAgICAgICAgICAgIGNoaWxkcmVuOltvdXRsaW5lTm9kZV1cbiAgICAgICAgfVxuXG4gICAgICAgIHZpZXdlci5zZXRJbnB1dCg8YW55PmlucHV0VmFsdWUpO1xuXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoVUkubGFiZWwob3V0bGluZU5vZGUudGl0bGUpKVxuXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodmlld2VyKTtcbiAgICB9XG5cblxuXG4gICAgc2V0TGFiZWxXaWR0aCgpe1xuXG4gICAgfVxuICAgIHNldExhYmVsSGVpZ2h0KCl7XG5cbiAgICB9XG4gICAgc2V0UmVxdWlyZWQodjpib29sZWFuKXtcblxuICAgIH1cbn1cbmNsYXNzIFN0cnVjdHVyZWRGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcblxuICAgIGNyZWF0ZUZpZWxkKCl7XG5cbiAgICAgICAgbGV0IGNoaWxkcmVuID0gdGhpcy5vdXRsaW5lTm9kZS5jaGlsZHJlbjtcbiAgICAgICAgaWYgKCFjaGlsZHJlbiB8fCBjaGlsZHJlbi5sZW5ndGggIT0gMSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIHRtPSBuZXcgVHJlZUZpZWxkKGNoaWxkcmVuWzBdLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdG07XG4gICAgfVxufVxuXG5jbGFzcyBMb3dMZXZlbFRyZWVGaWVsZCBleHRlbmRzIFByb3BlcnR5RWRpdG9ySW5mb3tcblxuICAgIGNyZWF0ZUZpZWxkKCl7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMub3V0bGluZU5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmICghY2hpbGRyZW4gfHwgY2hpbGRyZW4ubGVuZ3RoICE9IDEpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciB0bT0gbmV3IFRyZWVGaWVsZChjaGlsZHJlblswXSwgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRtO1xuICAgIH1cbn1cblxuLy8gZnVuY3Rpb24gY2F0ZWdvcnkocDpobC5JUHJvcGVydHksbm9kZTpobC5JSGlnaExldmVsTm9kZSk6c3RyaW5ne1xuLy8gICAgIGlmIChwLmdldEFkYXB0ZXIoZGVmLlJBTUxQcm9wZXJ0eVNlcnZpY2UpLmlzS2V5KCl8fHAuaXNSZXF1aXJlZCgpKXtcbi8vICAgICAgICAgcmV0dXJuIG51bGw7XG4vLyAgICAgfVxuLy8gICAgIGlmIChwLmRvbWFpbigpJiYhcC5kb21haW4oKS5nZXRBZGFwdGVyKGRlZi5SQU1MU2VydmljZSkuaXNVc2VyRGVmaW5lZCgpKSB7XG4vLyAgICAgICAgIGlmICh1bml2ZXJzZWhlbHBlcnMuaXNEb2N1bWVudGF0aW9uUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc1VzYWdlUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc0Rlc2NyaXB0aW9uUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc0Rpc3BsYXlOYW1lUHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgIHVuaXZlcnNlaGVscGVycy5pc1RpdGxlUHJvcGVydHkocCkpIHtcbi8vICAgICAgICAgICAgIHJldHVybiBcIkRvY3VtZW50YXRpb25cIjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAodW5pdmVyc2VoZWxwZXJzLmlzQW5ub3RhdGlvbnNQcm9wZXJ0eShwKSB8fFxuLy8gICAgICAgICAgICAgdW5pdmVyc2VoZWxwZXJzLmlzSXNQcm9wZXJ0eShwKSB8fFxuLy8gICAgICAgICAgICAgdW5pdmVyc2VoZWxwZXJzLmlzU2VjdXJlZEJ5UHJvcGVydHkocCkgfHxcbi8vICAgICAgICAgICAgICh1bml2ZXJzZWhlbHBlcnMuaXNUeXBlUHJvcGVydHkocCkmJiFwLmdldEFkYXB0ZXIoZGVmLlJBTUxQcm9wZXJ0eVNlcnZpY2UpLmlzVHlwZUV4cHIoKSkpIHtcbi8vICAgICAgICAgICAgIHJldHVybiBcIlJlZmVyZW5jZXNcIjtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiAodW5pdmVyc2VoZWxwZXJzLmlzUHJvdG9jb2xzUHJvcGVydHkocCkpe1xuLy8gICAgICAgICAgICAgcmV0dXJuIFwiR2VuZXJhbFwiO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy9cbi8vICAgICBpZiAodW5pdmVyc2VoZWxwZXJzLmlzVHlwZVByb3BlcnR5KHApKXtcbi8vICAgICAgICAgaWYgKHAuZG9tYWluKCkmJiFwLmRvbWFpbigpLmdldEFkYXB0ZXIoZGVmLlJBTUxTZXJ2aWNlKS5pc1VzZXJEZWZpbmVkKCkpe1xuLy8gICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyAgICAgaWYgKG5vZGUucHJvcGVydHkoKSkge1xuLy8gICAgICAgICBpZiAocC5kb21haW4oKSAmJiBwLmRvbWFpbigpICE9IG5vZGUucHJvcGVydHkoKS5yYW5nZSgpKSB7XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJGYWNldHNcIjtcbi8vICAgICAgICAgfVxuLy8gICAgIH1cbi8vICAgICByZXR1cm4gXCJHZW5lcmFsXCI7XG4vLyB9XG4vL1xuLy8gdmFyIHZhbHVlT3B0aW9ucyA9IGZ1bmN0aW9uICh4OmhsLklQcm9wZXJ0eSwgbm9kZTpobC5JSGlnaExldmVsTm9kZSk6c3RyaW5nW10ge1xuLy8gICAgIHZhciB2bHMgPSBzZWFyY2guZW51bVZhbHVlcyh4LG5vZGUpO1xuLy8gICAgIGlmICh1bml2ZXJzZWhlbHBlcnMuaXNOYW1lUHJvcGVydHkoeCkpe1xuLy8gICAgICAgICBpZiAobm9kZS5kZWZpbml0aW9uKCkuaXNBc3NpZ25hYmxlRnJvbSh1bml2ZXJzZS5Vbml2ZXJzZTEwLlR5cGVEZWNsYXJhdGlvbi5uYW1lKSl7XG4vLyAgICAgICAgICAgICBpZiAobm9kZS5wcm9wZXJ0eSgpJiZ1bml2ZXJzZWhlbHBlcnMuaXNCb2R5UHJvcGVydHkobm9kZS5wcm9wZXJ0eSgpKSl7XG4vLyAgICAgICAgICAgICAgICAgaWYgKCEobm9kZS5wcm9wZXJ0eSgpIGluc3RhbmNlb2YgZGVmLlVzZXJEZWZpbmVkUHJvcCkpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50KCkmJlxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgdW5pdmVyc2VoZWxwZXJzLmlzTWV0aG9kVHlwZShub2RlLnBhcmVudCgpLmRlZmluaXRpb24oKSkpe1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcImFwcGxpY2F0aW9uL2pzb25cIiwgXCJhcHBsaWNhdGlvbi94bWxcIixcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXVxuLy8gICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXCJhcHBsaWNhdGlvbi9qc29uXCIsIFwiYXBwbGljYXRpb24veG1sXCJdXG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIGlmICgoIXZscykgfHwgdmxzLmxlbmd0aCA9PSAwKSB7XG4vLyAgICAgICAgIHZhciBzdWcgPSAoPGRlZi5Qcm9wZXJ0eT54KS5zdWdnZXN0ZXIoKVxuLy8gICAgICAgICBpZiAoc3VnKSB7XG4vLyAgICAgICAgICAgICB2bHMgPSBzdWcobm9kZSk7XG4vL1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmICgoIXZscykgfHwgdmxzLmxlbmd0aCA9PSAwKSB7XG4vLyAgICAgICAgICAgICB2bHMgPSAoPGRlZi5Qcm9wZXJ0eT54KS5nZXRPZnRlbktleXMoKTtcbi8vXG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIF8udW5pcXVlKHZscyk7XG4vLyB9O1xuLy9cbi8vIGZ1bmN0aW9uIGFkZEV4YW1wbGVDb250cm9sKHByb3BlcnR5OiBobC5JUHJvcGVydHksIG5vZGUgOiBobC5JSGlnaExldmVsTm9kZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGVFbGVtZW50IDogaGwuSUhpZ2hMZXZlbE5vZGUsIGV4YW1wbGUgOiBkZWYucnQubm9taW5hbFR5cGVzLklFeHBhbmRhYmxlRXhhbXBsZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA6IFRvcExldmVsTm9kZSkge1xuLy9cbi8vICAgICBpZiAoZXhhbXBsZS5pc1lBTUwoKSkge1xuLy8gICAgICAgICBjb250YWluZXIuYWRkSXRlbVRvQ2F0ZWdvcnkoY2F0ZWdvcnkocHJvcGVydHksIG5vZGUpLFxuLy8gICAgICAgICAgICAgbmV3IExvd0xldmVsVHJlZUZpZWxkKHByb3BlcnR5LCBub2RlLCBleGFtcGxlRWxlbWVudC5sb3dMZXZlbCgpLCBleGFtcGxlLm5hbWUoKSkpO1xuLy8gICAgIH0gZWxzZSBpZiAoZXhhbXBsZS5pc0pTT05TdHJpbmcoKSkge1xuLy8gICAgICAgICBjb250YWluZXIuYWRkSXRlbVRvQ2F0ZWdvcnkoY2F0ZWdvcnkocHJvcGVydHksIG5vZGUpLFxuLy8gICAgICAgICAgICAgbmV3IEV4YW1wbGVGaWVsZChwcm9wZXJ0eSwgbm9kZSwgZXhhbXBsZS5hc1N0cmluZygpLCBleGFtcGxlLm5hbWUoKSkpO1xuLy8gICAgIH0gZWxzZSBpZiAoZXhhbXBsZS5pc1hNTFN0cmluZygpKSB7XG4vLyAgICAgICAgIGNvbnRhaW5lci5hZGRJdGVtVG9DYXRlZ29yeShjYXRlZ29yeShwcm9wZXJ0eSwgbm9kZSksXG4vLyAgICAgICAgICAgICBuZXcgWE1MRXhhbXBsZUZpZWxkKHByb3BlcnR5LCBub2RlLCBleGFtcGxlLmFzU3RyaW5nKCksIGV4YW1wbGUubmFtZSgpKSk7XG4vLyAgICAgfVxuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRJdGVtKGRldGFpbHNOb2RlOnJhbWxTZXJ2ZXIuRGV0YWlsc0l0ZW1KU09OLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCwgZGlhbG9nOmJvb2xlYW4pe1xuXG5cbiAgICBsZXQgcm9vdD1uZXcgVG9wTGV2ZWxOb2RlKGRldGFpbHNOb2RlLCBjb250ZXh0KTtcblxuICAgIGlmKGRldGFpbHNOb2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGRldGFpbHNOb2RlLmNoaWxkcmVuKSB7XG5cbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09IFwiQ0FURUdPUllcIikge1xuXG4gICAgICAgICAgICAgICAgbGV0IGNhdGVnb3J5TmFtZSA9IGNoaWxkLnRpdGxlO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZE9mQ2hpbGQgb2YgY2hpbGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkSXRlbUluQ2F0ZWdvcnkoY2hpbGRPZkNoaWxkLCByb290LCBjYXRlZ29yeU5hbWUsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1aWxkSXRlbUluQ2F0ZWdvcnkoY2hpbGQsIHJvb3QsIG51bGwsIGNvbnRleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gYnVpbGRJdGVtSW5DYXRlZ29yeShcbiAgICBkZXRhaWxzTm9kZTogcmFtbFNlcnZlci5EZXRhaWxzSXRlbUpTT04sIHJvb3Q6IFRvcExldmVsTm9kZSwgY2F0ZWdvcnlOYW1lOnN0cmluZyxcbiAgICBjb250ZXh0OiBEZXRhaWxzQ29udGV4dCkge1xuXG4gICAgbGV0IGl0ZW0gPSBudWxsO1xuXG4gICAgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIkNIRUNLQk9YXCIpIHtcbiAgICAgICAgaXRlbSA9IG5ldyBDaGVja0JveEZpZWxkKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIkpTT05TQ0hFTUFcIlxuICAgICAgICAmJiAoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlKS52YWx1ZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgaXRlbSA9IG5ldyBKU09OU2NoZW1hRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiWE1MU0NIRU1BXCJcbiAgICAgICAgJiYgKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSkudmFsdWVUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgWE1MU2NoZW1hRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiTUFSS0RPV05cIikge1xuICAgICAgICBpdGVtID0gbmV3IE1hcmtkb3duRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiU0VMRUNUQk9YXCJcbiAgICAgICAgJiYgKDxyYW1sU2VydmVyLkRldGFpbHNJdGVtV2l0aE9wdGlvbnNKU09OPmRldGFpbHNOb2RlKS5vcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgU2VsZWN0Qm94KDxyYW1sU2VydmVyLkRldGFpbHNJdGVtV2l0aE9wdGlvbnNKU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiTVVMVElFRElUT1JcIikge1xuICAgICAgICBpdGVtID0gbmV3IFNpbXBsZU11bHRpRWRpdG9yKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIlRSRUVcIikge1xuICAgICAgICBpdGVtID0gbmV3IExvd0xldmVsVHJlZUZpZWxkKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIlNUUlVDVFVSRURcIikge1xuICAgICAgICBpdGVtID0gbmV3IFN0cnVjdHVyZWRGaWVsZCg8cmFtbFNlcnZlci5EZXRhaWxzVmFsdWVkSXRlbUpTT04+ZGV0YWlsc05vZGUsIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmKGRldGFpbHNOb2RlLnR5cGUgPT0gXCJUWVBFRElTUExBWVwiKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgVHlwZURpc3BsYXlJdGVtKGRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiVFlQRVNFTEVDVFwiKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgVHlwZVNlbGVjdEJveCg8cmFtbFNlcnZlci5EZXRhaWxzSXRlbVdpdGhPcHRpb25zSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIkpTT05FWEFNUExFXCJcbiAgICAgICAgJiYgKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSkudmFsdWVUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgRXhhbXBsZUZpZWxkKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYoZGV0YWlsc05vZGUudHlwZSA9PSBcIlhNTEVYQU1QTEVcIlxuICAgICAgICAmJiAoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlKS52YWx1ZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgaXRlbSA9IG5ldyBYTUxFeGFtcGxlRmllbGQoPHJhbWxTZXJ2ZXIuRGV0YWlsc1ZhbHVlZEl0ZW1KU09OPmRldGFpbHNOb2RlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZihkZXRhaWxzTm9kZS50eXBlID09IFwiQVRUUklCVVRFVEVYVFwiKSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgUHJvcGVydHlFZGl0b3JJbmZvKDxyYW1sU2VydmVyLkRldGFpbHNWYWx1ZWRJdGVtSlNPTj5kZXRhaWxzTm9kZSwgY29udGV4dCk7XG4gICAgfVxuXG4gICAgaWYgKGl0ZW0gIT0gbnVsbCkge1xuICAgICAgICByb290LmFkZEl0ZW1Ub0NhdGVnb3J5KGNhdGVnb3J5TmFtZSwgaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYW4gbm90IHJlY29nbml6ZSBlbGVtZW50IFwiICsgZGV0YWlsc05vZGUudHlwZSk7XG4gICAgfVxufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/editor-tools/detailElements.js\n// module id = 9\n// module chunks = 0","module.exports = require(\"underscore\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore\"\n// module id = 10\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar UI = require(\"atom-ui-lib\");\nvar SpacePenViews = require(\"atom-space-pen-views\");\n// import yaml = require(\"yaml-ast-parser\")\nvar linterUI = require(\"../core/linter-ui\");\nvar editorTools = require(\"../editor-tools/editor-tools\");\nvar ramlServer = require(\"raml-language-server\");\nvar textEditProcessor = ramlServer.textEditProcessor;\n// export function createGlobalSchema(attr:hl.IAttribute){\n//     var r=attr.parent().root();\n//     var t:def.NodeClass=<def.NodeClass>attr.property().range().universe().type(\"GlobalSchema\");\n//     var sc=stubs.createStubNode(t,(<any>t.universe().type(\"Api\")).property(\"schemas\"),\"\"+attr.value());\n//     sc.attrOrCreate(\"value\").setValue(\"!include \"+\"schemas/\"+attr.value()+\".json\")\n//     r.add(sc);\n//     var ed=atom.workspace.getActiveTextEditor();\n//     ed.getBuffer().setText(r.lowLevel().unit().contents());\n//     var sdir=path.resolve(path.dirname(ed.getPath()),\"schemas\");\n//     if (!fs.existsSync(sdir)){\n//         fs.mkdirSync(sdir);\n//     }\n//     var shFile=path.resolve(sdir,attr.value()+\".json\");\n//     fs.writeFileSync(shFile,`\n// {\n//   \"$schema\" : \"http://json-schema.org/draft-04/schema\" ,\n//   \"type\" : \"object\" ,\n//   \"properties\" : {\n//    }\n// }\n// `)\n//    atom.workspace.open(shFile,{});\n// }\n// export function createGlobalSchemaFromNameAndContent(root:hl.IHighLevelNode,name:string,schp:string,content:string, absolutePath?: string){\n//     if (universeHelpers.isRAML10Node(root)) {\n//         createGlobalSchemaFromNameAndContent10(root, name, schp, content, absolutePath);\n//     } else if (universeHelpers.isRAML08Node(root)) {\n//         createGlobalSchemaFromNameAndContent08(root, name, schp, content, absolutePath);\n//     }\n// }\nfunction createSchemaFile(content, schemaPath, absolutePath) {\n    var ed = getActiveEditor();\n    var sdir = absolutePath ? path.dirname(absolutePath) : path.resolve(path.dirname(ed.getPath()), path.dirname(schemaPath));\n    if (!fs.existsSync(sdir)) {\n        fs.mkdirSync(sdir);\n    }\n    var shFile = absolutePath ? absolutePath : path.resolve(path.dirname(ed.getPath()), schemaPath);\n    fs.writeFileSync(shFile, content);\n}\n// export function createGlobalSchemaFromNameAndContent10(root:hl.IHighLevelNode,name:string,\n//                                                        schemaPath:string,content:string, absolutePath?: string){\n//     var t:def.NodeClass=<def.NodeClass>root.definition().universe().type(universes.Universe10.TypeDeclaration.name);\n//     var sc=stubs.createStubNode(t,\n//         (<any>t.universe().type(universes.Universe10.Api.name)).property(universes.Universe10.Api.properties.types.name),\n//         \"\"+name);\n//\n//     sc.attrOrCreate(universes.Universe10.TypeDeclaration.properties.type.name).setValue(\"!include \"+schemaPath)\n//\n//     root.add(sc);\n//\n//     createSchemaFile(content, schemaPath, absolutePath);\n// }\n// export function createGlobalSchemaFromNameAndContent08(root:hl.IHighLevelNode,name:string,schp:string,content:string, absolutePath?: string){\n//     var t:def.NodeClass=<def.NodeClass>root.definition().universe().type(universes.Universe08.GlobalSchema.name);\n//     var sc=stubs.createStubNode(t,\n//         (<any>t.universe().type(universes.Universe08.Api.name)).property(universes.Universe08.Api.properties.schemas.name),\n//         \"\"+name);\n//\n//     sc.attrOrCreate(universes.Universe08.GlobalSchema.properties.value.name).setValue(\"!include \"+schp)\n//\n//     root.add(sc);\n//\n//     createSchemaFile(content, schp, absolutePath);\n// }\n// export function saveExample(r:hl.IHighLevelNode,schp:string,content:string){\n//     var ed=getActiveEditor();\n//     var sdir=path.resolve(path.dirname(ed.getPath()),path.dirname(schp));\n//     if (!fs.existsSync(sdir)){\n//         fs.mkdirSync(sdir);\n//     }\n//     var shFile=path.resolve(path.dirname(ed.getPath()),schp);\n//     fs.writeFileSync(shFile,content)\n// }\nvar NewProjectDialog = /** @class */ (function () {\n    function NewProjectDialog(title) {\n        if (title === void 0) { title = \"Create RAML Project\"; }\n        this.title = title;\n        this.apititle = \"New API\";\n        this.version = \"v1\";\n        this.baseUri = \"http://api.samplehost.com\";\n        this._raml1 = true;\n        this._defStructure = true;\n        this._createSampleResource = true;\n        this.sourceValue = path.resolve(this.generateDefaultProjectParentFolder(), \"newRamlProject\");\n    }\n    NewProjectDialog.prototype.generateDefaultProjectParentFolder = function () {\n        return UI.fdUtils.getHome();\n    };\n    NewProjectDialog.prototype.extraContent = function (s) {\n    };\n    NewProjectDialog.prototype.validateProjectLocation = function (value) {\n        var toValidate = value ? value.trim() : \"\";\n        if (!toValidate) {\n            return UI.errorStatus(\"Path should't be empty\");\n        }\n        var parentDirectory = path.dirname(toValidate);\n        if (!parentDirectory || parentDirectory == \".\")\n            return UI.errorStatus(\"Can not find path parent\");\n        if (!fs.existsSync(parentDirectory))\n            return UI.errorStatus(\"Parent directory does not exist\");\n        return UI.okStatus();\n    };\n    NewProjectDialog.prototype.validateTitle = function (value) {\n        var toValidate = value ? value.trim() : \"\";\n        if (!toValidate || toValidate.length < 1) {\n            return UI.errorStatus(\"Title field is required\");\n        }\n        return UI.okStatus();\n    };\n    NewProjectDialog.prototype.show = function () {\n        var _this = this;\n        var zz = null;\n        var section = UI.section(this.title, UI.Icon.BOOK, false, false, UI.h3(\"Please select location to place your project:\")).pad(10, 10);\n        var panel = new UI.Panel(UI.LayoutType.BLOCK);\n        var statusLabel = UI.label(\"\", null, UI.TextClasses.ERROR);\n        var slf = new UI.CustomField(\"\", statusLabel, function (x) { return x; });\n        slf.setDisplay(this.validateProjectLocation(this.sourceValue).code == UI.StatusCode.ERROR);\n        panel.addChild(slf);\n        var projectLocationInput = UI.texfField(\"\", this.sourceValue, function (x) { return _this.sourceValue = x.getBinding().get(); });\n        projectLocationInput.getBinding().addValidator(function () { return _this.validateProjectLocation(_this.sourceValue); });\n        projectLocationInput.setStyle(\"width\", \"400px\");\n        projectLocationInput.getBinding().addListener(function (value) {\n            //var st = projectLocationInput.getBinding().status()\n            var st = _this.validateProjectLocation(value);\n            if (st.code != UI.StatusCode.ERROR) {\n                //this.updateUI(q, x)\n                statusLabel.setText(\"\");\n                statusLabel.setIcon(UI.Icon.NONE);\n                slf.setDisplay(false);\n            }\n            else {\n                statusLabel.setText(st.message);\n                statusLabel.setIcon(UI.Icon.BUG);\n                slf.setDisplay(true);\n            }\n        });\n        panel.addChild(\n        //UI.hc(\n        projectLocationInput\n        //UI.buttonSimple(\"Browse\",\n        //    ()=>UI.fdUtils..openFolderDialog(\"Select project location\",\n        //            newLocation=> {\n        //                this.sourceValue=newLocation\n        //                projectLocationInput.getBinding().set(newLocation)\n        //                //var atomEditor = projectLocationInput.getActualField()\n        //                //var atomEditorUI = atomEditor.ui()\n        //                //var atomEditorUIModel = atomEditorUI.getModel();\n        //                //atomEditorUIModel.setText(newLocation)\n        //            },\n        //            true, this.sourceValue)\n        //).margin(10,0).setStyle(\"margin-bottom\", \"0.75em\")\n        //).setPercentWidth(100)\n        );\n        panel.addChild(UI.h3(\"Title of your API:\"));\n        var titleStatusLabel = UI.label(\"\", null, UI.TextClasses.ERROR);\n        var titleStatusMessage = new UI.CustomField(\"\", titleStatusLabel, function (x) { return x; });\n        titleStatusMessage.setDisplay(false);\n        panel.addChild(titleStatusMessage);\n        var titleTextField = UI.texfField(\"\", this.apititle, function (x) { return _this.apititle = x.getBinding().get(); });\n        titleTextField.getBinding().addValidator(function () { return _this.validateTitle(_this.apititle); });\n        titleTextField.getBinding().addListener(function (value) {\n            var status = _this.validateTitle(value);\n            if (status.code !== UI.StatusCode.ERROR) {\n                titleStatusLabel.setText(\"\");\n                titleStatusLabel.setIcon(UI.Icon.NONE);\n                titleStatusMessage.setDisplay(false);\n            }\n            else {\n                titleStatusLabel.setText(status.message);\n                titleStatusLabel.setIcon(UI.Icon.BUG);\n                titleStatusMessage.setDisplay(true);\n            }\n        });\n        panel.addChild(titleTextField);\n        panel.addChild(UI.h3(\"Version of your API\"));\n        panel.addChild(UI.texfField(\"\", this.version, function (x) { return _this.version = x.getBinding().get(); }));\n        panel.addChild(UI.h3(\"Base URI of your API\"));\n        panel.addChild(UI.texfField(\"\", this.baseUri, function (x) { return _this.baseUri = x.getBinding().get(); }));\n        section.addChild(panel);\n        var r1 = UI.checkBox(\"Use RAML 1.0\");\n        r1.setValue(this._raml1);\n        r1.getBinding().addListener(function (x) { return _this._raml1 = r1.getValue(); });\n        section.addChild(r1);\n        var r2 = UI.checkBox(\"Create default directory structure\");\n        r2.setValue(this._defStructure);\n        r2.getBinding().addListener(function (x) { return _this._defStructure = r2.getValue(); });\n        section.addChild(r2);\n        var r3 = UI.checkBox(\"Create sample resource and method\");\n        r3.setValue(this._createSampleResource);\n        r3.getBinding().addListener(function (x) { return _this._createSampleResource = r3.getValue(); });\n        section.addChild(r3);\n        var buttonBar = UI.hc().setPercentWidth(100).setStyle(\"display\", \"flex\");\n        buttonBar.addChild(UI.label(\"\", null, null, null).setStyle(\"flex\", \"1\"));\n        buttonBar.addChild(UI.button(\"Cancel\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.NO_HIGHLIGHT, UI.Icon.NONE, function (x) { zz.destroy(); }).margin(10, 10));\n        buttonBar.addChild(UI.button(\"Create\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, function (x) {\n            if (_this.validateTitle(_this.apititle).code === UI.StatusCode.ERROR) {\n                return;\n            }\n            if (_this.validateProjectLocation(_this.sourceValue).code === UI.StatusCode.ERROR) {\n                return;\n            }\n            _this.onOk(zz);\n            zz.destroy();\n        }));\n        section.addChild(buttonBar);\n        zz = atom.workspace.addModalPanel({ item: section.renderUI() });\n    };\n    NewProjectDialog.prototype.createIfNotExist = function (p) {\n        var ps = path.resolve(this.sourceValue, p);\n        if (!fs.existsSync(ps)) {\n            fs.mkdirSync(ps);\n        }\n    };\n    NewProjectDialog.prototype.onOk = function (zz) {\n        if (!fs.existsSync(this.sourceValue)) {\n            fs.mkdirSync(this.sourceValue);\n        }\n        if (this._defStructure) {\n            this.createIfNotExist(\"schemas\");\n            this.createIfNotExist(\"examples\");\n            this.createIfNotExist(\"traits\");\n            this.createIfNotExist(\"resourceTypes\");\n            this.createIfNotExist(\"securitySchemes\");\n            this.createIfNotExist(\"documentation\");\n            if (this._raml1) {\n                this.createIfNotExist(\"notebooks\");\n                this.createIfNotExist(\"scripts\");\n            }\n        }\n        var content = createRAMLFile(this.apititle, this.version, this.baseUri, this._createSampleResource, this._raml1);\n        var ps = path.resolve(this.sourceValue, \"api.raml\");\n        fs.writeFileSync(ps, content);\n        atom.open({ pathsToOpen: [this.sourceValue, ps] });\n    };\n    return NewProjectDialog;\n}());\nfunction createRAMLFile(title, version, baseUri, sample, raml1) {\n    if (sample === void 0) { sample = true; }\n    if (raml1 === void 0) { raml1 = true; }\n    var apiLines = [(raml1 ? \"#%RAML 1.0\" : \"#%RAML 0.8\"), \"title: \" + title];\n    if (version)\n        apiLines.push(\"version: \" + version);\n    if (baseUri)\n        apiLines.push(\"baseUri: \" + baseUri);\n    var typesLines = [\n        'types:',\n        '  TestType:',\n        '    type: object',\n        '    properties:',\n        '      id: number',\n        '      optional?: string',\n        '      expanded:',\n        '        type: object',\n        '        properties:',\n        '          count: number'\n    ], resourceLines = [\n        '/helloWorld:',\n        '  get:',\n        '    responses:',\n        '      200:',\n        '        body:',\n        '          application/json:',\n        '            example: |',\n        '              {',\n        '                \"message\" : \"Hello World\"',\n        '              }'\n    ];\n    var result = apiLines;\n    if (sample) {\n        if (raml1)\n            result = result.concat(typesLines);\n        result = result.concat(resourceLines);\n    }\n    return result.join('\\n') + '\\n';\n}\nexports.createRAMLFile = createRAMLFile;\nfunction newProject() {\n    new NewProjectDialog().show();\n}\nexports.newProject = newProject;\n// export function moveResource(h:hl.IHighLevelNode){\n//     new move.MoveElementsDialog(h, \"Resource Type\",true).show()\n// }\nfunction splitOnLines(text) {\n    var lines = text.match(/^.*((\\r\\n|\\n|\\r)|$)/gm);\n    return lines;\n}\nexports.splitOnLines = splitOnLines;\nfunction cleanEmptyLines(text) {\n    var lines = splitOnLines(text);\n    var rs = [];\n    for (var i = 0; i < lines.length; i++) {\n        if (lines[i].trim().length > 0) {\n            rs.push(lines[i]);\n        }\n    }\n    return rs.join(\"\");\n}\nexports.cleanEmptyLines = cleanEmptyLines;\n//FIXME remove it from here duplication with jsyaml2lowLevel.ts\nfunction stripIndent(text, indent) {\n    var lines = splitOnLines(text);\n    var rs = [];\n    for (var i = 0; i < lines.length; i++) {\n        if (i == 0) {\n            rs.push(lines[0]);\n        }\n        else {\n            rs.push(lines[i].substring(indent.length));\n        }\n    }\n    return rs.join(\"\");\n}\n// var leadingIndent = function (node:lowLevel.ILowLevelASTNode, text:string) {\n//     var leading = \"\";\n//     var pos = node.start() - 1;\n//     while (pos > 0) {\n//         var ch = text[pos];\n//         if (ch == '\\r' || ch == '\\n') break;\n//         leading = ch + leading;\n//         pos--;\n//     }\n//     return leading;\n// };\nfunction indent(line) {\n    var rs = \"\";\n    for (var i = 0; i < line.length; i++) {\n        var c = line[i];\n        if (c == '\\r' || c == '\\n') {\n            continue;\n        }\n        if (c == ' ' || c == '\\t') {\n            rs += c;\n            continue;\n        }\n        break;\n    }\n    return rs;\n}\nfunction getActiveEditor() {\n    var activeEditor = atom.workspace.getActiveTextEditor();\n    if (activeEditor) {\n        return activeEditor;\n    }\n    if (editorTools.aquireManager())\n        return editorTools.aquireManager().getCurrentEditor();\n    return null;\n}\nexports.getActiveEditor = getActiveEditor;\n/**\n * Sets active editor cursor at the position (starting from 0).\n * @param position\n */\nfunction gotoPosition(position) {\n    var activeEditor = getActiveEditor();\n    if (!activeEditor) {\n        return;\n    }\n    var bufferPos = activeEditor.getBuffer().positionForCharacterIndex(position);\n    activeEditor.setSelectedBufferRange({ start: bufferPos, end: bufferPos }, {});\n}\nexports.gotoPosition = gotoPosition;\nfunction gotoDeclaration() {\n    var editor = getActiveEditor();\n    if (!editor)\n        return;\n    var position = editor.getCursorBufferPosition();\n    var offset = editor.getBuffer().characterIndexForPosition(position);\n    var path = editor.getPath();\n    ramlServer.getNodeClientConnection().openDeclaration(path, offset).then(function (locations) {\n        if (!locations)\n            return;\n        atom.workspace.open(locations[0].uri, {}).then(function (x) {\n            var activeEditor = getActiveEditor();\n            var p1 = activeEditor.getBuffer().positionForCharacterIndex(locations[0].range.start);\n            var p2 = activeEditor.getBuffer().positionForCharacterIndex(locations[0].range.end);\n            activeEditor.setSelectedBufferRange({ start: p1, end: p2 }, {});\n        });\n    });\n}\nexports.gotoDeclaration = gotoDeclaration;\n// export class MoveToNewFileDialog{\n//\n//     constructor(private node:hl.IHighLevelNode){\n//\n//     }\n//     destination:string;\n//\n//     show(){\n//         var zz:any=null;\n//         var node=this.node;\n//         var vc=UI.section(\"Move node content to new file \",UI.Icon.GIST_NEW,false,false);\n//         var errorLabel=UI.label(\"please enter correct destination path\",UI.Icon.BUG,UI.TextClasses.ERROR,UI.HighLightClasses.NONE);\n//         vc.addChild(UI.vc(errorLabel));\n//         vc.addChild(UI.label(\"Please enter destination path\"));\n//         var txt=UI.texfField(\"\",\"\",x=>{\n//             if (!txt){\n//                 return;\n//             }\n//             this.destination=txt.getBinding().get();\n//             var isError=this.destination.trim().length==0\n//             if (!isError) {\n//                 if (path.extname(this.destination) != '.raml') {\n//                     isError = true;\n//                 }\n//             }\n//             if (!isError) {\n//                 var dir = path.resolve(path.dirname(getActiveEditor().getPath()), path.dirname(this.destination));\n//                 if (!fs.existsSync(dir)) {\n//                     isError = true;\n//                 }\n//                 else{\n//                     var st=fs.statSync(dir)\n//                     if (!st.isDirectory()){\n//                         isError=true;\n//                     }\n//                 }\n//             }\n//\n//             errorLabel.setDisplay(isError);\n//             okButton.setDisabled(isError);\n//         });\n//         vc.addChild(UI.vc(txt));\n//         var buttonBar=UI.hc().setPercentWidth(100).setStyle(\"display\",\"flex\");\n//         buttonBar.addChild(UI.label(\"\",null,null,null).setStyle(\"flex\",\"1\"))\n//         buttonBar.addChild(UI.button(\"Cancel\",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.NO_HIGHLIGHT,UI.Icon.NONE,x=>{zz.destroy()}).margin(10,10))\n//         var okButton=UI.button(\"Move\",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.SUCCESS,UI.Icon.NONE,x=>{\n//             var d=path.resolve(path.dirname(getActiveEditor().getPath()), this.destination);\n//             var dump=this.node.lowLevel().dump();\n//             var ci=splitOnLines(dump);\n//             var li=ci.length>1?indent(ci[1]):indent(ci[0]);\n//             dump=dump.substring(this.node.lowLevel().keyEnd()-this.node.lowLevel().start()+1).trim();\n//             dump=stripIndent(dump,li);\n//             dump=\"#%RAML 0.8 \"+this.node.definition().nameId()+\"\\n\"+dump;\n//             fs.writeFileSync(d,dump);\n//             //no we need to replace content of the node with text;\n//\n//             var txt=node.lowLevel().unit().contents();\n//             var endPart=txt.substring(node.lowLevel().end());\n//             var startPart=txt.substring(0,node.lowLevel().keyEnd()+1);\n//             var vl=startPart+\" !include \"+this.destination+endPart;\n//             getActiveEditor().setText(vl);\n//             zz.destroy();\n//         });\n//         okButton.setDisabled(true)\n//         buttonBar.addChild(okButton);\n//         vc.addChild(buttonBar)\n//         var html=vc.renderUI();\n//         zz=(<any>atom).workspace.addModalPanel( { item: html});\n//         html.focus();\n//     }\n//\n//\n// }\n// export function moveOut(h:hl.IHighLevelNode){\n//     new MoveToNewFileDialog(h).show()\n// }\nfunction revalidate() {\n    var currentEditor = getActiveEditor();\n    if (!currentEditor)\n        return;\n    linterUI.relint(currentEditor);\n}\nexports.revalidate = revalidate;\n/**\n * Gets opened editor for specified path or uri.\n * Currently only returns active editor if applicable, in future may also return other opened editors.\n * @param path\n * @returns {any}\n */\nfunction getEditorByUriOrPath(path) {\n    //TODO consider also returning other opened editors\n    var activeEditor = getActiveEditor();\n    if (activeEditor.getPath() == path)\n        return activeEditor;\n    return null;\n}\nexports.getEditorByUriOrPath = getEditorByUriOrPath;\n/**\n * Applies a set of changed documents to current documents and files\n * @param changedDocuments\n */\nfunction applyChangedDocuments(changedDocuments) {\n    for (var _i = 0, changedDocuments_1 = changedDocuments; _i < changedDocuments_1.length; _i++) {\n        var changedDocument = changedDocuments_1[_i];\n        var editor = getEditorByUriOrPath(changedDocument.uri);\n        var oldContents = null;\n        if (editor) {\n            oldContents = editor.getText();\n        }\n        else {\n            oldContents = fs.readFileSync(changedDocument.uri).toString();\n        }\n        var newText = null;\n        if (changedDocument.text) {\n            newText = changedDocument.text;\n        }\n        else if (changedDocument.textEdits) {\n            newText = textEditProcessor.applyDocumentEdits(oldContents, changedDocument.textEdits);\n        }\n        else {\n            continue;\n        }\n        if (editor) {\n            editor.getBuffer().setText(newText);\n        }\n        else {\n            fs.writeFileSync(changedDocument.uri, newText);\n        }\n    }\n}\nexports.applyChangedDocuments = applyChangedDocuments;\n/**\n * Tries to detect the name/symbol at position.\n * In practise it is impossible to do properly in all cases unless having AST at hands\n * or making the server to do this, but MS LSP does not have an interface for this.\n *\n * @param contents\n * @param offset\n */\nfunction findCurrentName(contents, offset) {\n    //we cant use alpha-numeric detection due to potential non-english alphabets.\n    //so we have to defined some stop characters and expand the list when a bug case is detected\n    var stopCharacters = [\n        \"\\r\", \"\\n\", \"[\", \"]\", \":\", \".\", \",\", \" \", \"\\t\", \"{\", \"}\", \"'\", \"'\", \"\\\"\"\n    ];\n    var beginning = 0;\n    for (var currentOffset = offset - 1; currentOffset >= 0; currentOffset--) {\n        var currentChar = contents.charAt(currentOffset);\n        var found = false;\n        for (var _i = 0, stopCharacters_1 = stopCharacters; _i < stopCharacters_1.length; _i++) {\n            var stopChar = stopCharacters_1[_i];\n            if (currentChar == stopChar) {\n                beginning = currentOffset + 1;\n                found = true;\n                break;\n            }\n        }\n        if (found)\n            break;\n    }\n    var end = contents.length;\n    for (var currentOffset = offset; currentOffset < contents.length; currentOffset++) {\n        var currentChar = contents.charAt(currentOffset);\n        var found = false;\n        for (var _a = 0, stopCharacters_2 = stopCharacters; _a < stopCharacters_2.length; _a++) {\n            var stopChar = stopCharacters_2[_a];\n            if (currentChar == stopChar) {\n                end = currentOffset;\n                found = true;\n                break;\n            }\n        }\n        if (found)\n            break;\n    }\n    return contents.substring(beginning, end);\n}\n/**\n * Activates renaming for current active editor and cursor position\n */\nfunction renameRAMLElement() {\n    var editor = getActiveEditor();\n    if (!editor)\n        return;\n    if (path.extname(editor.getPath()) != '.raml')\n        return;\n    var position = editor.getCursorBufferPosition();\n    var offset = editor.getBuffer().characterIndexForPosition(position);\n    var editorPath = editor.getPath();\n    var currentName = findCurrentName(editor.getText(), offset);\n    UI.prompt(\"Enter new name for: \", function (newName) {\n        ramlServer.getNodeClientConnection().\n            rename(editorPath, offset, newName).then(function (changedDocuments) {\n            applyChangedDocuments(changedDocuments);\n        });\n    }, currentName);\n}\nexports.renameRAMLElement = renameRAMLElement;\nvar getKeyValue = function (offset, txt) {\n    var m = offset;\n    for (var i = offset; i >= 0; i--) {\n        var c = txt.charAt(i);\n        if (c == ' ' || c == '\\r' || c == '\\n' || c == '\\t') {\n            m = i + 1;\n            break;\n        }\n    }\n    var res = \"\";\n    for (var i = m; m < txt.length; i++) {\n        var c = txt.charAt(i);\n        if (c == ' ' || c == '\\r' || c == '\\n' || c == '\\t' || c == ':') {\n            break;\n        }\n        res += c;\n    }\n    return res;\n};\n// export function select(){\n//     var ed=getActiveEditor();\n//     var request={editor:ed,bufferPosition:ed.getCursorBufferPosition()};\n//     var node=provider.getAstNode(request,false);\n//     if (!node){\n//         return;\n//     }\n//     var start=ed.getBuffer().positionForCharacterIndex(node.lowLevel().start());\n//     var end=ed.getBuffer().positionForCharacterIndex(node.lowLevel().end());\n//     ed.setSelectedBufferRange({start:start,end:end},{});\n// }\n//export function expandSignature(attr:hl.IAttribute){\n//    var tr=signature.convertToTrait(signature.parse(attr));\n//    //console.log('trait:\\n' + tr.highLevel().lowLevel().dump());\n//    var res = attr.parent();\n//    //pr.remove(attr); // incorrect usage!!! remove attributes as below\n//    attr.remove();\n//    tr.highLevel().elements().forEach(x=>{\n//        res.add(<any>x)\n//    });\n//    var ed=getActiveEditor();\n//    ed.setText(attr.root().lowLevel().unit().contents());\n//}\nfunction findUsagesImpl(renderer) {\n    if (renderer === void 0) { renderer = display; }\n    var editor = getActiveEditor();\n    var position = editor.getCursorBufferPosition();\n    var offset = editor.getBuffer().characterIndexForPosition(position);\n    var path = editor.getPath();\n    ramlServer.getNodeClientConnection().findReferences(path, offset).then(function (locations) {\n        if (!locations)\n            return;\n        renderer(locations);\n    });\n}\nexports.findUsagesImpl = findUsagesImpl;\nfunction display(n) {\n    if (sv) {\n        sv.setInput(n);\n    }\n    else {\n        sv = new SearchResultView(n);\n        sv.panel = atom.workspace.addBottomPanel({ item: sv });\n    }\n}\nfunction findUsages() {\n    findUsagesImpl(display);\n}\nexports.findUsages = findUsages;\nvar SearchResultView = /** @class */ (function (_super) {\n    __extends(SearchResultView, _super);\n    function SearchResultView(_result) {\n        var _this = _super.call(this) || this;\n        _this._result = _result;\n        _this.isAttached = false;\n        return _this;\n    }\n    SearchResultView.prototype.initialize = function () {\n        _super.prototype.initialize.apply(this, arguments);\n        return true;\n    };\n    SearchResultView.content = function () {\n        return this.div({ class: 'raml-console pane-item', tabindex: -1 });\n    };\n    SearchResultView.prototype.attached = function () {\n        if (this.isAttached) {\n            return;\n        }\n        this.load();\n        this.isAttached = true;\n    };\n    SearchResultView.prototype.setInput = function (_result) {\n        this._result = _result;\n        this.load();\n    };\n    SearchResultView.prototype.load = function () {\n        var _this = this;\n        var section = UI.section(\"References\", UI.Icon.SEARCH);\n        var view = UI.list(this._result, function (location) {\n            var p1 = getActiveEditor().getBuffer().positionForCharacterIndex(location.range.start);\n            var res = UI.hc(UI.a(location.uri, function (y) {\n                atom.workspace.open(location.uri, {}).then(function (x) {\n                    var activeEditor = getActiveEditor();\n                    var p1 = activeEditor.getBuffer().positionForCharacterIndex(location.range.start);\n                    var p2 = activeEditor.getBuffer().positionForCharacterIndex(location.range.end);\n                    activeEditor.setSelectedBufferRange({ start: p1, end: p2 }, {});\n                });\n            }), UI.label(\" line:\", UI.Icon.NONE, UI.TextClasses.SUBTLE).pad(5, 5), UI.label(\"\" + p1.row, UI.Icon.NONE, UI.TextClasses.SUCCESS));\n            return res;\n        });\n        view.setStyle(\"max-height\", \"400px\");\n        section.addChild(view);\n        section.addChild(UI.button(\"Close\", UI.ButtonSizes.SMALL, UI.ButtonHighlights.PRIMARY, UI.Icon.NONE, function (x) { _this.panel.destroy(); sv = null; }));\n        this.html(section.renderUI());\n    };\n    return SearchResultView;\n}(SpacePenViews.ScrollView));\nvar sv;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2RpYWxvZ3MvYXNzaXN0LXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtREFBbUQ7Ozs7Ozs7Ozs7OztBQUVuRCx1QkFBMEI7QUFDMUIsMkJBQThCO0FBYTlCLGdDQUFnQztBQUtoQyxvREFBc0Q7QUFNdEQsMkNBQTJDO0FBQzNDLDRDQUE4QztBQUU5QywwREFBNEQ7QUFDNUQsaURBQW1EO0FBRW5ELElBQU8saUJBQWlCLEdBQUcsVUFBVSxDQUFDLGlCQUFpQixDQUFBO0FBUXZELDBEQUEwRDtBQUMxRCxrQ0FBa0M7QUFDbEMsa0dBQWtHO0FBQ2xHLDBHQUEwRztBQUMxRyxxRkFBcUY7QUFDckYsaUJBQWlCO0FBQ2pCLG1EQUFtRDtBQUNuRCw4REFBOEQ7QUFDOUQsbUVBQW1FO0FBQ25FLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUIsUUFBUTtBQUNSLDBEQUEwRDtBQUMxRCxnQ0FBZ0M7QUFDaEMsSUFBSTtBQUNKLDJEQUEyRDtBQUMzRCx3QkFBd0I7QUFDeEIscUJBQXFCO0FBQ3JCLE9BQU87QUFDUCxJQUFJO0FBQ0osS0FBSztBQUNMLHFDQUFxQztBQUNyQyxJQUFJO0FBRUosOElBQThJO0FBQzlJLGdEQUFnRDtBQUNoRCwyRkFBMkY7QUFDM0YsdURBQXVEO0FBQ3ZELDJGQUEyRjtBQUMzRixRQUFRO0FBQ1IsSUFBSTtBQUVKLDBCQUEwQixPQUFnQixFQUFFLFVBQW1CLEVBQUUsWUFBc0I7SUFDbkYsSUFBSSxFQUFFLEdBQUMsZUFBZSxFQUFFLENBQUE7SUFDeEIsSUFBSSxJQUFJLEdBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUN2SCxFQUFFLENBQUMsQ0FBQyxDQUFD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QUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUNqRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBQyxFQUFFLENBQUMsR0FBRyxFQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtZQUN4RCxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2QsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBQyxPQUFPLENBQUMsQ0FBQztRQUNwQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBQyxVQUFBLENBQUMsSUFBRyxLQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUEsRUFBRSxHQUFDLElBQUksQ0FBQSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDcEksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBQ0wsdUJBQUM7QUFBRCxDQXhEQSxBQXdEQyxDQXhEOEIsYUFBYSxDQUFDLFVBQVUsR0F3RHREO0FBQ0QsSUFBSSxFQUFtQixDQUFDIiwiZmlsZSI6InNyYy9hdG9tL2RpYWxvZ3MvYXNzaXN0LXV0aWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbmltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vLyBpbXBvcnQgc3R1YnM9cnAuc3R1YnM7XG4vLyBpbXBvcnQgbG93TGV2ZWw9cnAubGw7XG4vLyBpbXBvcnQgaGw9cnAuaGw7XG5cbi8vIGltcG9ydCB1bml2ZXJzZXM9cnAudW5pdmVyc2VzO1xuLy9cbi8vIGltcG9ydCBzZWFyY2g9cnAuc2VhcmNoO1xuXG5cbmltcG9ydCBfPXJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgcHJvdmlkZXI9cmVxdWlyZShcIi4uL3N1Z2dlc3Rpb24vcHJvdmlkZXJcIilcbmltcG9ydCBVST1yZXF1aXJlKFwiYXRvbS11aS1saWJcIilcblxuaW1wb3J0IHhtbHV0aWw9cmVxdWlyZShcIi4uLy4uL3V0aWwveG1sdXRpbFwiKVxuLy8gaW1wb3J0IGV4dHJhY3Q9cmVxdWlyZShcIi4vZXh0cmFjdEVsZW1lbnRzRGlhbG9nXCIpXG5pbXBvcnQgc2hlbWFnZW49cmVxdWlyZShcIi4uLy4uL3V0aWwvc2NoZW1hR2VuZXJhdG9yXCIpXG5pbXBvcnQgU3BhY2VQZW5WaWV3cyA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJylcbi8vIGltcG9ydCBkZWY9cnAuZHNcbi8vIHZhciBzZXJ2aWNlcz1kZWZcblxuLy8gaW1wb3J0IG1vdmU9cmVxdWlyZShcIi4vbW92ZUVsZW1lbnRzRGlhbG9nXCIpXG5pbXBvcnQgdG9vbHRpcD1yZXF1aXJlKFwiLi4vY29yZS90b29sdGlwLW1hbmFnZXJcIilcbi8vIGltcG9ydCB5YW1sID0gcmVxdWlyZShcInlhbWwtYXN0LXBhcnNlclwiKVxuaW1wb3J0IGxpbnRlclVJID0gcmVxdWlyZShcIi4uL2NvcmUvbGludGVyLXVpXCIpXG5cbmltcG9ydCBlZGl0b3JUb29scyA9IHJlcXVpcmUoXCIuLi9lZGl0b3ItdG9vbHMvZWRpdG9yLXRvb2xzXCIpXG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKVxuaW1wb3J0IHtJTG9jYXRpb259IGZyb20gXCJyYW1sLWxhbmd1YWdlLXNlcnZlci9kaXN0L2NvbW1vbi90eXBlSW50ZXJmYWNlc1wiO1xuaW1wb3J0IHRleHRFZGl0UHJvY2Vzc29yID0gcmFtbFNlcnZlci50ZXh0RWRpdFByb2Nlc3NvclxuXG4vLyBpbXBvcnQge3VuaXZlcnNlSGVscGVyc30gZnJvbSBcInJhbWwtMS1wYXJzZXIvZGlzdC9pbmRleFwiO1xuXG5pbnRlcmZhY2UgUXVpY2tGaXh7XG4gICAgdGl0bGU6c3RyaW5nXG4gICAgZXhlY3V0b3I6KCk9PnZvaWRcbn1cbi8vIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHbG9iYWxTY2hlbWEoYXR0cjpobC5JQXR0cmlidXRlKXtcbi8vICAgICB2YXIgcj1hdHRyLnBhcmVudCgpLnJvb3QoKTtcbi8vICAgICB2YXIgdDpkZWYuTm9kZUNsYXNzPTxkZWYuTm9kZUNsYXNzPmF0dHIucHJvcGVydHkoKS5yYW5nZSgpLnVuaXZlcnNlKCkudHlwZShcIkdsb2JhbFNjaGVtYVwiKTtcbi8vICAgICB2YXIgc2M9c3R1YnMuY3JlYXRlU3R1Yk5vZGUodCwoPGFueT50LnVuaXZlcnNlKCkudHlwZShcIkFwaVwiKSkucHJvcGVydHkoXCJzY2hlbWFzXCIpLFwiXCIrYXR0ci52YWx1ZSgpKTtcbi8vICAgICBzYy5hdHRyT3JDcmVhdGUoXCJ2YWx1ZVwiKS5zZXRWYWx1ZShcIiFpbmNsdWRlIFwiK1wic2NoZW1hcy9cIithdHRyLnZhbHVlKCkrXCIuanNvblwiKVxuLy8gICAgIHIuYWRkKHNjKTtcbi8vICAgICB2YXIgZWQ9YXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuLy8gICAgIGVkLmdldEJ1ZmZlcigpLnNldFRleHQoci5sb3dMZXZlbCgpLnVuaXQoKS5jb250ZW50cygpKTtcbi8vICAgICB2YXIgc2Rpcj1wYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGVkLmdldFBhdGgoKSksXCJzY2hlbWFzXCIpO1xuLy8gICAgIGlmICghZnMuZXhpc3RzU3luYyhzZGlyKSl7XG4vLyAgICAgICAgIGZzLm1rZGlyU3luYyhzZGlyKTtcbi8vICAgICB9XG4vLyAgICAgdmFyIHNoRmlsZT1wYXRoLnJlc29sdmUoc2RpcixhdHRyLnZhbHVlKCkrXCIuanNvblwiKTtcbi8vICAgICBmcy53cml0ZUZpbGVTeW5jKHNoRmlsZSxgXG4vLyB7XG4vLyAgIFwiJHNjaGVtYVwiIDogXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA0L3NjaGVtYVwiICxcbi8vICAgXCJ0eXBlXCIgOiBcIm9iamVjdFwiICxcbi8vICAgXCJwcm9wZXJ0aWVzXCIgOiB7XG4vLyAgICB9XG4vLyB9XG4vLyBgKVxuLy8gICAgYXRvbS53b3Jrc3BhY2Uub3BlbihzaEZpbGUse30pO1xuLy8gfVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50KHJvb3Q6aGwuSUhpZ2hMZXZlbE5vZGUsbmFtZTpzdHJpbmcsc2NocDpzdHJpbmcsY29udGVudDpzdHJpbmcsIGFic29sdXRlUGF0aD86IHN0cmluZyl7XG4vLyAgICAgaWYgKHVuaXZlcnNlSGVscGVycy5pc1JBTUwxME5vZGUocm9vdCkpIHtcbi8vICAgICAgICAgY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50MTAocm9vdCwgbmFtZSwgc2NocCwgY29udGVudCwgYWJzb2x1dGVQYXRoKTtcbi8vICAgICB9IGVsc2UgaWYgKHVuaXZlcnNlSGVscGVycy5pc1JBTUwwOE5vZGUocm9vdCkpIHtcbi8vICAgICAgICAgY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50MDgocm9vdCwgbmFtZSwgc2NocCwgY29udGVudCwgYWJzb2x1dGVQYXRoKTtcbi8vICAgICB9XG4vLyB9XG5cbmZ1bmN0aW9uIGNyZWF0ZVNjaGVtYUZpbGUoY29udGVudCA6IHN0cmluZywgc2NoZW1hUGF0aCA6IHN0cmluZywgYWJzb2x1dGVQYXRoPyA6IHN0cmluZykge1xuICAgIHZhciBlZD1nZXRBY3RpdmVFZGl0b3IoKVxuICAgIHZhciBzZGlyPWFic29sdXRlUGF0aCA/IHBhdGguZGlybmFtZShhYnNvbHV0ZVBhdGgpIDogcGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZShlZC5nZXRQYXRoKCkpLHBhdGguZGlybmFtZShzY2hlbWFQYXRoKSk7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHNkaXIpKXtcbiAgICAgICAgZnMubWtkaXJTeW5jKHNkaXIpO1xuICAgIH1cbiAgICB2YXIgc2hGaWxlPWFic29sdXRlUGF0aCA/IGFic29sdXRlUGF0aCA6IHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUoZWQuZ2V0UGF0aCgpKSxzY2hlbWFQYXRoKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHNoRmlsZSxjb250ZW50KVxufVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gY3JlYXRlR2xvYmFsU2NoZW1hRnJvbU5hbWVBbmRDb250ZW50MTAocm9vdDpobC5JSGlnaExldmVsTm9kZSxuYW1lOnN0cmluZyxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWFQYXRoOnN0cmluZyxjb250ZW50OnN0cmluZywgYWJzb2x1dGVQYXRoPzogc3RyaW5nKXtcbi8vICAgICB2YXIgdDpkZWYuTm9kZUNsYXNzPTxkZWYuTm9kZUNsYXNzPnJvb3QuZGVmaW5pdGlvbigpLnVuaXZlcnNlKCkudHlwZSh1bml2ZXJzZXMuVW5pdmVyc2UxMC5UeXBlRGVjbGFyYXRpb24ubmFtZSk7XG4vLyAgICAgdmFyIHNjPXN0dWJzLmNyZWF0ZVN0dWJOb2RlKHQsXG4vLyAgICAgICAgICg8YW55PnQudW5pdmVyc2UoKS50eXBlKHVuaXZlcnNlcy5Vbml2ZXJzZTEwLkFwaS5uYW1lKSkucHJvcGVydHkodW5pdmVyc2VzLlVuaXZlcnNlMTAuQXBpLnByb3BlcnRpZXMudHlwZXMubmFtZSksXG4vLyAgICAgICAgIFwiXCIrbmFtZSk7XG4vL1xuLy8gICAgIHNjLmF0dHJPckNyZWF0ZSh1bml2ZXJzZXMuVW5pdmVyc2UxMC5UeXBlRGVjbGFyYXRpb24ucHJvcGVydGllcy50eXBlLm5hbWUpLnNldFZhbHVlKFwiIWluY2x1ZGUgXCIrc2NoZW1hUGF0aClcbi8vXG4vLyAgICAgcm9vdC5hZGQoc2MpO1xuLy9cbi8vICAgICBjcmVhdGVTY2hlbWFGaWxlKGNvbnRlbnQsIHNjaGVtYVBhdGgsIGFic29sdXRlUGF0aCk7XG4vLyB9XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHbG9iYWxTY2hlbWFGcm9tTmFtZUFuZENvbnRlbnQwOChyb290OmhsLklIaWdoTGV2ZWxOb2RlLG5hbWU6c3RyaW5nLHNjaHA6c3RyaW5nLGNvbnRlbnQ6c3RyaW5nLCBhYnNvbHV0ZVBhdGg/OiBzdHJpbmcpe1xuLy8gICAgIHZhciB0OmRlZi5Ob2RlQ2xhc3M9PGRlZi5Ob2RlQ2xhc3M+cm9vdC5kZWZpbml0aW9uKCkudW5pdmVyc2UoKS50eXBlKHVuaXZlcnNlcy5Vbml2ZXJzZTA4Lkdsb2JhbFNjaGVtYS5uYW1lKTtcbi8vICAgICB2YXIgc2M9c3R1YnMuY3JlYXRlU3R1Yk5vZGUodCxcbi8vICAgICAgICAgKDxhbnk+dC51bml2ZXJzZSgpLnR5cGUodW5pdmVyc2VzLlVuaXZlcnNlMDguQXBpLm5hbWUpKS5wcm9wZXJ0eSh1bml2ZXJzZXMuVW5pdmVyc2UwOC5BcGkucHJvcGVydGllcy5zY2hlbWFzLm5hbWUpLFxuLy8gICAgICAgICBcIlwiK25hbWUpO1xuLy9cbi8vICAgICBzYy5hdHRyT3JDcmVhdGUodW5pdmVyc2VzLlVuaXZlcnNlMDguR2xvYmFsU2NoZW1hLnByb3BlcnRpZXMudmFsdWUubmFtZSkuc2V0VmFsdWUoXCIhaW5jbHVkZSBcIitzY2hwKVxuLy9cbi8vICAgICByb290LmFkZChzYyk7XG4vL1xuLy8gICAgIGNyZWF0ZVNjaGVtYUZpbGUoY29udGVudCwgc2NocCwgYWJzb2x1dGVQYXRoKTtcbi8vIH1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIHNhdmVFeGFtcGxlKHI6aGwuSUhpZ2hMZXZlbE5vZGUsc2NocDpzdHJpbmcsY29udGVudDpzdHJpbmcpe1xuLy8gICAgIHZhciBlZD1nZXRBY3RpdmVFZGl0b3IoKTtcbi8vICAgICB2YXIgc2Rpcj1wYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGVkLmdldFBhdGgoKSkscGF0aC5kaXJuYW1lKHNjaHApKTtcbi8vICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoc2Rpcikpe1xuLy8gICAgICAgICBmcy5ta2RpclN5bmMoc2Rpcik7XG4vLyAgICAgfVxuLy8gICAgIHZhciBzaEZpbGU9cGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZShlZC5nZXRQYXRoKCkpLHNjaHApO1xuLy8gICAgIGZzLndyaXRlRmlsZVN5bmMoc2hGaWxlLGNvbnRlbnQpXG4vLyB9XG5cblxuY2xhc3MgTmV3UHJvamVjdERpYWxvZ3tcblxuICAgIHByb3RlY3RlZCBzb3VyY2VWYWx1ZTpzdHJpbmc7XG4gICAgcHJvdGVjdGVkIGFwaXRpdGxlOnN0cmluZz1cIk5ldyBBUElcIlxuICAgIHByb3RlY3RlZCB2ZXJzaW9uOnN0cmluZz1cInYxXCJcbiAgICBwcm90ZWN0ZWQgYmFzZVVyaTpzdHJpbmc9XCJodHRwOi8vYXBpLnNhbXBsZWhvc3QuY29tXCJcblxuICAgIHByb3RlY3RlZCBfcmFtbDE6Ym9vbGVhbj10cnVlO1xuICAgIHByb3RlY3RlZCBfZGVmU3RydWN0dXJlOmJvb2xlYW49dHJ1ZTtcbiAgICBwcm90ZWN0ZWQgX2NyZWF0ZVNhbXBsZVJlc291cmNlOmJvb2xlYW49dHJ1ZTtcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgdGl0bGU6c3RyaW5nPVwiQ3JlYXRlIFJBTUwgUHJvamVjdFwiKXtcbiAgICAgICAgdGhpcy5zb3VyY2VWYWx1ZSA9IHBhdGgucmVzb2x2ZSh0aGlzLmdlbmVyYXRlRGVmYXVsdFByb2plY3RQYXJlbnRGb2xkZXIoKSwgXCJuZXdSYW1sUHJvamVjdFwiKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZURlZmF1bHRQcm9qZWN0UGFyZW50Rm9sZGVyKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gVUkuZmRVdGlscy5nZXRIb21lKCk7XG4gICAgfVxuXG4gICAgZXh0cmFDb250ZW50KHM6VUkuU2VjdGlvbil7XG5cbiAgICB9XG5cbiAgICB2YWxpZGF0ZVByb2plY3RMb2NhdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgdG9WYWxpZGF0ZSA6IHN0cmluZyA9IHZhbHVlID8gdmFsdWUudHJpbSgpIDogXCJcIjtcblxuICAgICAgICBpZighdG9WYWxpZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFVJLmVycm9yU3RhdHVzKFwiUGF0aCBzaG91bGQndCBiZSBlbXB0eVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnREaXJlY3RvcnkgPSBwYXRoLmRpcm5hbWUodG9WYWxpZGF0ZSlcbiAgICAgICAgaWYgKCFwYXJlbnREaXJlY3RvcnkgfHwgcGFyZW50RGlyZWN0b3J5ID09IFwiLlwiKSByZXR1cm4gVUkuZXJyb3JTdGF0dXMoXCJDYW4gbm90IGZpbmQgcGF0aCBwYXJlbnRcIilcblxuICAgICAgICBpZighZnMuZXhpc3RzU3luYyhwYXJlbnREaXJlY3RvcnkpKSByZXR1cm4gVUkuZXJyb3JTdGF0dXMoXCJQYXJlbnQgZGlyZWN0b3J5IGRvZXMgbm90IGV4aXN0XCIpXG5cbiAgICAgICAgcmV0dXJuIFVJLm9rU3RhdHVzKClcbiAgICB9XG5cbiAgICB2YWxpZGF0ZVRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHZhciB0b1ZhbGlkYXRlIDogc3RyaW5nID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiBcIlwiO1xuXG4gICAgICAgIGlmICghdG9WYWxpZGF0ZSB8fCB0b1ZhbGlkYXRlLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBVSS5lcnJvclN0YXR1cyhcIlRpdGxlIGZpZWxkIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVJLm9rU3RhdHVzKClcbiAgICB9XG5cbiAgICBzaG93KCl7XG4gICAgICAgIHZhciB6ej1udWxsO1xuICAgICAgICB2YXIgc2VjdGlvbj1VSS5zZWN0aW9uKHRoaXMudGl0bGUsVUkuSWNvbi5CT09LLGZhbHNlLGZhbHNlLFVJLmgzKFwiUGxlYXNlIHNlbGVjdCBsb2NhdGlvbiB0byBwbGFjZSB5b3VyIHByb2plY3Q6XCIpKS5wYWQoMTAsMTApXG5cbiAgICAgICAgdmFyIHBhbmVsID0gbmV3IFVJLlBhbmVsKFVJLkxheW91dFR5cGUuQkxPQ0spO1xuXG4gICAgICAgIHZhciBzdGF0dXNMYWJlbDpVSS5MYWJlbCA9IFVJLmxhYmVsKFwiXCIsIG51bGwsIFVJLlRleHRDbGFzc2VzLkVSUk9SKVxuICAgICAgICB2YXIgc2xmPW5ldyBVSS5DdXN0b21GaWVsZChcIlwiLCBzdGF0dXNMYWJlbCx4PT54KTtcbiAgICAgICAgc2xmLnNldERpc3BsYXkodGhpcy52YWxpZGF0ZVByb2plY3RMb2NhdGlvbih0aGlzLnNvdXJjZVZhbHVlKS5jb2RlID09IFVJLlN0YXR1c0NvZGUuRVJST1IpXG4gICAgICAgIHBhbmVsLmFkZENoaWxkKHNsZilcblxuICAgICAgICB2YXIgcHJvamVjdExvY2F0aW9uSW5wdXQgPSBVSS50ZXhmRmllbGQoXCJcIix0aGlzLnNvdXJjZVZhbHVlLHg9PnRoaXMuc291cmNlVmFsdWU9eC5nZXRCaW5kaW5nKCkuZ2V0KCkpXG4gICAgICAgIHByb2plY3RMb2NhdGlvbklucHV0LmdldEJpbmRpbmcoKS5hZGRWYWxpZGF0b3IoKCk9PnRoaXMudmFsaWRhdGVQcm9qZWN0TG9jYXRpb24odGhpcy5zb3VyY2VWYWx1ZSkpXG4gICAgICAgIHByb2plY3RMb2NhdGlvbklucHV0LnNldFN0eWxlKFwid2lkdGhcIixcIjQwMHB4XCIpO1xuICAgICAgICBwcm9qZWN0TG9jYXRpb25JbnB1dC5nZXRCaW5kaW5nKCkuYWRkTGlzdGVuZXIodmFsdWU9PiB7XG5cbiAgICAgICAgICAgIC8vdmFyIHN0ID0gcHJvamVjdExvY2F0aW9uSW5wdXQuZ2V0QmluZGluZygpLnN0YXR1cygpXG4gICAgICAgICAgICB2YXIgc3QgPSB0aGlzLnZhbGlkYXRlUHJvamVjdExvY2F0aW9uKHZhbHVlKVxuICAgICAgICAgICAgaWYgKHN0LmNvZGUgIT0gVUkuU3RhdHVzQ29kZS5FUlJPUikge1xuICAgICAgICAgICAgICAgIC8vdGhpcy51cGRhdGVVSShxLCB4KVxuICAgICAgICAgICAgICAgIHN0YXR1c0xhYmVsLnNldFRleHQoXCJcIik7XG4gICAgICAgICAgICAgICAgc3RhdHVzTGFiZWwuc2V0SWNvbihVSS5JY29uLk5PTkUpXG4gICAgICAgICAgICAgICAgc2xmLnNldERpc3BsYXkoZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNMYWJlbC5zZXRUZXh0KHN0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHN0YXR1c0xhYmVsLnNldEljb24oVUkuSWNvbi5CVUcpXG4gICAgICAgICAgICAgICAgc2xmLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBwYW5lbC5hZGRDaGlsZChcbiAgICAgICAgICAgIC8vVUkuaGMoXG4gICAgICAgICAgICAgICAgcHJvamVjdExvY2F0aW9uSW5wdXRcblxuICAgICAgICAgICAgICAgIC8vVUkuYnV0dG9uU2ltcGxlKFwiQnJvd3NlXCIsXG4gICAgICAgICAgICAgICAgLy8gICAgKCk9PlVJLmZkVXRpbHMuLm9wZW5Gb2xkZXJEaWFsb2coXCJTZWxlY3QgcHJvamVjdCBsb2NhdGlvblwiLFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgbmV3TG9jYXRpb249PiB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VWYWx1ZT1uZXdMb2NhdGlvblxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIHByb2plY3RMb2NhdGlvbklucHV0LmdldEJpbmRpbmcoKS5zZXQobmV3TG9jYXRpb24pXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgLy92YXIgYXRvbUVkaXRvciA9IHByb2plY3RMb2NhdGlvbklucHV0LmdldEFjdHVhbEZpZWxkKClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAvL3ZhciBhdG9tRWRpdG9yVUkgPSBhdG9tRWRpdG9yLnVpKClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAvL3ZhciBhdG9tRWRpdG9yVUlNb2RlbCA9IGF0b21FZGl0b3JVSS5nZXRNb2RlbCgpO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIC8vYXRvbUVkaXRvclVJTW9kZWwuc2V0VGV4dChuZXdMb2NhdGlvbilcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICB0cnVlLCB0aGlzLnNvdXJjZVZhbHVlKVxuICAgICAgICAgICAgICAgIC8vKS5tYXJnaW4oMTAsMCkuc2V0U3R5bGUoXCJtYXJnaW4tYm90dG9tXCIsIFwiMC43NWVtXCIpXG4gICAgICAgICAgICAvLykuc2V0UGVyY2VudFdpZHRoKDEwMClcbiAgICAgICAgKVxuXG4gICAgICAgIHBhbmVsLmFkZENoaWxkKFVJLmgzKFwiVGl0bGUgb2YgeW91ciBBUEk6XCIpKTtcblxuICAgICAgICB2YXIgdGl0bGVTdGF0dXNMYWJlbCA9IFVJLmxhYmVsKFwiXCIsIG51bGwsIFVJLlRleHRDbGFzc2VzLkVSUk9SKTtcblxuICAgICAgICB2YXIgdGl0bGVTdGF0dXNNZXNzYWdlID0gbmV3IFVJLkN1c3RvbUZpZWxkKFwiXCIsIHRpdGxlU3RhdHVzTGFiZWwsIHggPT4geCk7XG5cbiAgICAgICAgdGl0bGVTdGF0dXNNZXNzYWdlLnNldERpc3BsYXkoZmFsc2UpO1xuXG4gICAgICAgIHBhbmVsLmFkZENoaWxkKHRpdGxlU3RhdHVzTWVzc2FnZSk7XG5cbiAgICAgICAgdmFyIHRpdGxlVGV4dEZpZWxkID0gVUkudGV4ZkZpZWxkKFwiXCIsIHRoaXMuYXBpdGl0bGUsIHggPT4gdGhpcy5hcGl0aXRsZSA9IHguZ2V0QmluZGluZygpLmdldCgpKTtcblxuICAgICAgICB0aXRsZVRleHRGaWVsZC5nZXRCaW5kaW5nKCkuYWRkVmFsaWRhdG9yKCgpID0+IHRoaXMudmFsaWRhdGVUaXRsZSh0aGlzLmFwaXRpdGxlKSk7XG5cbiAgICAgICAgdGl0bGVUZXh0RmllbGQuZ2V0QmluZGluZygpLmFkZExpc3RlbmVyKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSB0aGlzLnZhbGlkYXRlVGl0bGUodmFsdWUpO1xuXG4gICAgICAgICAgICBpZiAoc3RhdHVzLmNvZGUgIT09IFVJLlN0YXR1c0NvZGUuRVJST1IpIHtcbiAgICAgICAgICAgICAgICB0aXRsZVN0YXR1c0xhYmVsLnNldFRleHQoXCJcIik7XG4gICAgICAgICAgICAgICAgdGl0bGVTdGF0dXNMYWJlbC5zZXRJY29uKFVJLkljb24uTk9ORSlcbiAgICAgICAgICAgICAgICB0aXRsZVN0YXR1c01lc3NhZ2Uuc2V0RGlzcGxheShmYWxzZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGVTdGF0dXNMYWJlbC5zZXRUZXh0KHN0YXR1cy5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aXRsZVN0YXR1c0xhYmVsLnNldEljb24oVUkuSWNvbi5CVUcpXG4gICAgICAgICAgICAgICAgdGl0bGVTdGF0dXNNZXNzYWdlLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBwYW5lbC5hZGRDaGlsZCh0aXRsZVRleHRGaWVsZCk7XG4gICAgICAgIHBhbmVsLmFkZENoaWxkKFVJLmgzKFwiVmVyc2lvbiBvZiB5b3VyIEFQSVwiKSk7XG4gICAgICAgIHBhbmVsLmFkZENoaWxkKFVJLnRleGZGaWVsZChcIlwiLHRoaXMudmVyc2lvbix4PT50aGlzLnZlcnNpb249eC5nZXRCaW5kaW5nKCkuZ2V0KCkpKVxuICAgICAgICBwYW5lbC5hZGRDaGlsZChVSS5oMyhcIkJhc2UgVVJJIG9mIHlvdXIgQVBJXCIpKTtcbiAgICAgICAgcGFuZWwuYWRkQ2hpbGQoVUkudGV4ZkZpZWxkKFwiXCIsdGhpcy5iYXNlVXJpLHg9PnRoaXMuYmFzZVVyaT14LmdldEJpbmRpbmcoKS5nZXQoKSkpXG5cbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChwYW5lbCk7XG5cbiAgICAgICAgdmFyIHIxPVVJLmNoZWNrQm94KFwiVXNlIFJBTUwgMS4wXCIpXG4gICAgICAgIHIxLnNldFZhbHVlKHRoaXMuX3JhbWwxKVxuICAgICAgICByMS5nZXRCaW5kaW5nKCkuYWRkTGlzdGVuZXIoeD0+dGhpcy5fcmFtbDE9cjEuZ2V0VmFsdWUoKSk7XG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQocjEpXG4gICAgICAgIHZhciByMj1VSS5jaGVja0JveChcIkNyZWF0ZSBkZWZhdWx0IGRpcmVjdG9yeSBzdHJ1Y3R1cmVcIilcbiAgICAgICAgcjIuc2V0VmFsdWUodGhpcy5fZGVmU3RydWN0dXJlKVxuICAgICAgICByMi5nZXRCaW5kaW5nKCkuYWRkTGlzdGVuZXIoeD0+dGhpcy5fZGVmU3RydWN0dXJlPXIyLmdldFZhbHVlKCkpO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKHIyKVxuICAgICAgICB2YXIgcjM9VUkuY2hlY2tCb3goXCJDcmVhdGUgc2FtcGxlIHJlc291cmNlIGFuZCBtZXRob2RcIilcbiAgICAgICAgcjMuc2V0VmFsdWUodGhpcy5fY3JlYXRlU2FtcGxlUmVzb3VyY2UpXG4gICAgICAgIHIzLmdldEJpbmRpbmcoKS5hZGRMaXN0ZW5lcih4PT50aGlzLl9jcmVhdGVTYW1wbGVSZXNvdXJjZT1yMy5nZXRWYWx1ZSgpKTtcbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChyMylcbiAgICAgICAgdmFyIGJ1dHRvbkJhcj1VSS5oYygpLnNldFBlcmNlbnRXaWR0aCgxMDApLnNldFN0eWxlKFwiZGlzcGxheVwiLFwiZmxleFwiKTtcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKFVJLmxhYmVsKFwiXCIsbnVsbCxudWxsLG51bGwpLnNldFN0eWxlKFwiZmxleFwiLFwiMVwiKSlcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKFVJLmJ1dHRvbihcIkNhbmNlbFwiLFVJLkJ1dHRvblNpemVzLk5PUk1BTCxVSS5CdXR0b25IaWdobGlnaHRzLk5PX0hJR0hMSUdIVCxVSS5JY29uLk5PTkUseD0+e3p6LmRlc3Ryb3koKX0pLm1hcmdpbigxMCwxMCkpXG4gICAgICAgIGJ1dHRvbkJhci5hZGRDaGlsZChVSS5idXR0b24oXCJDcmVhdGVcIixVSS5CdXR0b25TaXplcy5OT1JNQUwsVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLFVJLkljb24uTk9ORSx4PT57XG4gICAgICAgICAgICBpZih0aGlzLnZhbGlkYXRlVGl0bGUodGhpcy5hcGl0aXRsZSkuY29kZSA9PT0gVUkuU3RhdHVzQ29kZS5FUlJPUikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodGhpcy52YWxpZGF0ZVByb2plY3RMb2NhdGlvbih0aGlzLnNvdXJjZVZhbHVlKS5jb2RlID09PSBVSS5TdGF0dXNDb2RlLkVSUk9SKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9uT2soenopO1xuICAgICAgICAgICAgenouZGVzdHJveSgpO1xuICAgICAgICB9KSlcbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChidXR0b25CYXIpO1xuXG4gICAgICAgIHp6PSg8YW55PmF0b20pLndvcmtzcGFjZS5hZGRNb2RhbFBhbmVsKCB7IGl0ZW06IHNlY3Rpb24ucmVuZGVyVUkoKSB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlSWZOb3RFeGlzdChwOnN0cmluZyl7XG4gICAgICAgIHZhciBwcz1wYXRoLnJlc29sdmUodGhpcy5zb3VyY2VWYWx1ZSxwKTtcbiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHBzKSl7XG4gICAgICAgICAgICBmcy5ta2RpclN5bmMocHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG9uT2soenopIHtcblxuICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmModGhpcy5zb3VyY2VWYWx1ZSkpIHtcbiAgICAgICAgICAgIGZzLm1rZGlyU3luYyh0aGlzLnNvdXJjZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmU3RydWN0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJzY2hlbWFzXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJZk5vdEV4aXN0KFwiZXhhbXBsZXNcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJ0cmFpdHNcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJyZXNvdXJjZVR5cGVzXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJZk5vdEV4aXN0KFwic2VjdXJpdHlTY2hlbWVzXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVJZk5vdEV4aXN0KFwiZG9jdW1lbnRhdGlvblwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yYW1sMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlSWZOb3RFeGlzdChcIm5vdGVib29rc1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUlmTm90RXhpc3QoXCJzY3JpcHRzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjb250ZW50ID0gY3JlYXRlUkFNTEZpbGUodGhpcy5hcGl0aXRsZSwgdGhpcy52ZXJzaW9uLCB0aGlzLmJhc2VVcmksIHRoaXMuX2NyZWF0ZVNhbXBsZVJlc291cmNlLCB0aGlzLl9yYW1sMSk7XG4gICAgICAgIHZhciBwcz1wYXRoLnJlc29sdmUodGhpcy5zb3VyY2VWYWx1ZSxcImFwaS5yYW1sXCIpO1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHBzLGNvbnRlbnQpO1xuICAgICAgICAoPGFueT5hdG9tKS5vcGVuKHtwYXRoc1RvT3BlbjpbdGhpcy5zb3VyY2VWYWx1ZSxwc119KTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJBTUxGaWxlKHRpdGxlOiBzdHJpbmcsIHZlcnNpb246IHN0cmluZywgYmFzZVVyaTogc3RyaW5nLCBzYW1wbGU6IGJvb2xlYW4gPSB0cnVlLCByYW1sMTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICB2YXIgYXBpTGluZXMgPSBbIChyYW1sMSA/IFwiIyVSQU1MIDEuMFwiIDogXCIjJVJBTUwgMC44XCIpLCBgdGl0bGU6ICR7dGl0bGV9YF07XG4gICAgaWYgKHZlcnNpb24pIGFwaUxpbmVzLnB1c2goYHZlcnNpb246ICR7dmVyc2lvbn1gKTtcbiAgICBpZiAoYmFzZVVyaSkgYXBpTGluZXMucHVzaChgYmFzZVVyaTogJHtiYXNlVXJpfWApO1xuXG4gICAgdmFyIHR5cGVzTGluZXMgPSBbXG4gICAgICAgICAgICAndHlwZXM6JyxcbiAgICAgICAgICAgICcgIFRlc3RUeXBlOicsXG4gICAgICAgICAgICAnICAgIHR5cGU6IG9iamVjdCcsXG4gICAgICAgICAgICAnICAgIHByb3BlcnRpZXM6JyxcbiAgICAgICAgICAgICcgICAgICBpZDogbnVtYmVyJyxcbiAgICAgICAgICAgICcgICAgICBvcHRpb25hbD86IHN0cmluZycsXG4gICAgICAgICAgICAnICAgICAgZXhwYW5kZWQ6JyxcbiAgICAgICAgICAgICcgICAgICAgIHR5cGU6IG9iamVjdCcsXG4gICAgICAgICAgICAnICAgICAgICBwcm9wZXJ0aWVzOicsXG4gICAgICAgICAgICAnICAgICAgICAgIGNvdW50OiBudW1iZXInXG4gICAgICAgIF0sXG4gICAgICAgIHJlc291cmNlTGluZXMgPSBbXG4gICAgICAgICAgICAnL2hlbGxvV29ybGQ6JyxcbiAgICAgICAgICAgICcgIGdldDonLFxuICAgICAgICAgICAgJyAgICByZXNwb25zZXM6JyxcbiAgICAgICAgICAgICcgICAgICAyMDA6JyxcbiAgICAgICAgICAgICcgICAgICAgIGJvZHk6JyxcbiAgICAgICAgICAgICcgICAgICAgICAgYXBwbGljYXRpb24vanNvbjonLFxuICAgICAgICAgICAgJyAgICAgICAgICAgIGV4YW1wbGU6IHwnLFxuICAgICAgICAgICAgJyAgICAgICAgICAgICAgeycsXG4gICAgICAgICAgICAnICAgICAgICAgICAgICAgIFwibWVzc2FnZVwiIDogXCJIZWxsbyBXb3JsZFwiJyxcbiAgICAgICAgICAgICcgICAgICAgICAgICAgIH0nXG4gICAgICAgIF07XG5cbiAgICB2YXIgcmVzdWx0OiBzdHJpbmdbXSA9IGFwaUxpbmVzO1xuICAgIGlmIChzYW1wbGUpIHtcbiAgICAgICBpZiAocmFtbDEpIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodHlwZXNMaW5lcyk7XG4gICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChyZXNvdXJjZUxpbmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3UHJvamVjdCgpe1xuICAgbmV3IE5ld1Byb2plY3REaWFsb2coKS5zaG93KClcbn1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIG1vdmVSZXNvdXJjZShoOmhsLklIaWdoTGV2ZWxOb2RlKXtcbi8vICAgICBuZXcgbW92ZS5Nb3ZlRWxlbWVudHNEaWFsb2coaCwgXCJSZXNvdXJjZSBUeXBlXCIsdHJ1ZSkuc2hvdygpXG4vLyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdE9uTGluZXModGV4dDpzdHJpbmcpOnN0cmluZ1tde1xuICAgIHZhciBsaW5lcyA9IHRleHQubWF0Y2goL14uKigoXFxyXFxufFxcbnxcXHIpfCQpL2dtKTtcbiAgICByZXR1cm4gbGluZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5FbXB0eUxpbmVzKHRleHQ6c3RyaW5nKTpzdHJpbmd7XG4gICAgdmFyIGxpbmVzPXNwbGl0T25MaW5lcyh0ZXh0KTtcbiAgICB2YXIgcnM6c3RyaW5nW109W11cbiAgICBmb3IgKHZhciBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgaWYgKGxpbmVzW2ldLnRyaW0oKS5sZW5ndGg+MCl7XG4gICAgICAgICAgICBycy5wdXNoKGxpbmVzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnMuam9pbihcIlwiKTtcbn1cbi8vRklYTUUgcmVtb3ZlIGl0IGZyb20gaGVyZSBkdXBsaWNhdGlvbiB3aXRoIGpzeWFtbDJsb3dMZXZlbC50c1xuZnVuY3Rpb24gc3RyaXBJbmRlbnQodGV4dDpzdHJpbmcsaW5kZW50OnN0cmluZyl7XG4gICAgdmFyIGxpbmVzID0gc3BsaXRPbkxpbmVzKHRleHQpO1xuICAgIHZhciBycz1bXTtcbiAgICBmb3IgKHZhciBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgaWYgKGk9PTApe1xuICAgICAgICAgICAgcnMucHVzaChsaW5lc1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHJzLnB1c2gobGluZXNbaV0uc3Vic3RyaW5nKGluZGVudC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnMuam9pbihcIlwiKTtcbn1cbi8vIHZhciBsZWFkaW5nSW5kZW50ID0gZnVuY3Rpb24gKG5vZGU6bG93TGV2ZWwuSUxvd0xldmVsQVNUTm9kZSwgdGV4dDpzdHJpbmcpIHtcbi8vICAgICB2YXIgbGVhZGluZyA9IFwiXCI7XG4vLyAgICAgdmFyIHBvcyA9IG5vZGUuc3RhcnQoKSAtIDE7XG4vLyAgICAgd2hpbGUgKHBvcyA+IDApIHtcbi8vICAgICAgICAgdmFyIGNoID0gdGV4dFtwb3NdO1xuLy8gICAgICAgICBpZiAoY2ggPT0gJ1xccicgfHwgY2ggPT0gJ1xcbicpIGJyZWFrO1xuLy8gICAgICAgICBsZWFkaW5nID0gY2ggKyBsZWFkaW5nO1xuLy8gICAgICAgICBwb3MtLTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGxlYWRpbmc7XG4vLyB9O1xuZnVuY3Rpb24gaW5kZW50KGxpbmU6c3RyaW5nKXtcbiAgICB2YXIgcnM9XCJcIjtcbiAgICBmb3IgKHZhciBpPTA7aTxsaW5lLmxlbmd0aDtpKyspe1xuICAgICAgICB2YXIgYz1saW5lW2ldO1xuICAgICAgICBpZiAoYz09J1xccid8fGM9PSdcXG4nKXtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjPT0nICd8fGM9PSdcXHQnKXtcbiAgICAgICAgICAgIHJzKz1jO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZUVkaXRvcigpIDogQXRvbUNvcmUuSUVkaXRvciB7XG4gICAgdmFyIGFjdGl2ZUVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVRleHRFZGl0b3IoKVxuICAgIGlmIChhY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUVkaXRvclxuICAgIH1cblxuICAgIGlmIChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkpXG4gICAgICAgIHJldHVybiA8QXRvbUNvcmUuSUVkaXRvcj5lZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpXG5cbiAgICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFNldHMgYWN0aXZlIGVkaXRvciBjdXJzb3IgYXQgdGhlIHBvc2l0aW9uIChzdGFydGluZyBmcm9tIDApLlxuICogQHBhcmFtIHBvc2l0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnb3RvUG9zaXRpb24ocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBhY3RpdmVFZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBpZiAoIWFjdGl2ZUVkaXRvcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGJ1ZmZlclBvcyA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KHBvc2l0aW9uKTtcblxuICAgIGFjdGl2ZUVkaXRvci5zZXRTZWxlY3RlZEJ1ZmZlclJhbmdlKHtzdGFydDogYnVmZmVyUG9zLCBlbmQ6IGJ1ZmZlclBvc30sIHt9KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZ290b0RlY2xhcmF0aW9uKCl7XG4gICAgdmFyIGVkaXRvcj1nZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBpZiAoIWVkaXRvcikgcmV0dXJuO1xuXG4gICAgbGV0IHBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICBsZXQgcGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkub3BlbkRlY2xhcmF0aW9uKHBhdGgsIG9mZnNldCkudGhlbihsb2NhdGlvbnM9PntcbiAgICAgICAgaWYgKCFsb2NhdGlvbnMpIHJldHVybjtcblxuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuKGxvY2F0aW9uc1swXS51cmkse30pLnRoZW4oeD0+e1xuXG4gICAgICAgICAgICBsZXQgYWN0aXZlRWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG5cbiAgICAgICAgICAgIHZhciBwMSA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGxvY2F0aW9uc1swXS5yYW5nZS5zdGFydCk7XG4gICAgICAgICAgICB2YXIgcDIgPSBhY3RpdmVFZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChsb2NhdGlvbnNbMF0ucmFuZ2UuZW5kKTtcblxuICAgICAgICAgICAgYWN0aXZlRWRpdG9yLnNldFNlbGVjdGVkQnVmZmVyUmFuZ2Uoe3N0YXJ0OiBwMSwgZW5kOiBwMn0sIHt9KTtcbiAgICAgICAgfSk7XG4gICAgfSlcbn1cblxuLy8gZXhwb3J0IGNsYXNzIE1vdmVUb05ld0ZpbGVEaWFsb2d7XG4vL1xuLy8gICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbm9kZTpobC5JSGlnaExldmVsTm9kZSl7XG4vL1xuLy8gICAgIH1cbi8vICAgICBkZXN0aW5hdGlvbjpzdHJpbmc7XG4vL1xuLy8gICAgIHNob3coKXtcbi8vICAgICAgICAgdmFyIHp6OmFueT1udWxsO1xuLy8gICAgICAgICB2YXIgbm9kZT10aGlzLm5vZGU7XG4vLyAgICAgICAgIHZhciB2Yz1VSS5zZWN0aW9uKFwiTW92ZSBub2RlIGNvbnRlbnQgdG8gbmV3IGZpbGUgXCIsVUkuSWNvbi5HSVNUX05FVyxmYWxzZSxmYWxzZSk7XG4vLyAgICAgICAgIHZhciBlcnJvckxhYmVsPVVJLmxhYmVsKFwicGxlYXNlIGVudGVyIGNvcnJlY3QgZGVzdGluYXRpb24gcGF0aFwiLFVJLkljb24uQlVHLFVJLlRleHRDbGFzc2VzLkVSUk9SLFVJLkhpZ2hMaWdodENsYXNzZXMuTk9ORSk7XG4vLyAgICAgICAgIHZjLmFkZENoaWxkKFVJLnZjKGVycm9yTGFiZWwpKTtcbi8vICAgICAgICAgdmMuYWRkQ2hpbGQoVUkubGFiZWwoXCJQbGVhc2UgZW50ZXIgZGVzdGluYXRpb24gcGF0aFwiKSk7XG4vLyAgICAgICAgIHZhciB0eHQ9VUkudGV4ZkZpZWxkKFwiXCIsXCJcIix4PT57XG4vLyAgICAgICAgICAgICBpZiAoIXR4dCl7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbj10eHQuZ2V0QmluZGluZygpLmdldCgpO1xuLy8gICAgICAgICAgICAgdmFyIGlzRXJyb3I9dGhpcy5kZXN0aW5hdGlvbi50cmltKCkubGVuZ3RoPT0wXG4vLyAgICAgICAgICAgICBpZiAoIWlzRXJyb3IpIHtcbi8vICAgICAgICAgICAgICAgICBpZiAocGF0aC5leHRuYW1lKHRoaXMuZGVzdGluYXRpb24pICE9ICcucmFtbCcpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaXNFcnJvciA9IHRydWU7XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgaWYgKCFpc0Vycm9yKSB7XG4vLyAgICAgICAgICAgICAgICAgdmFyIGRpciA9IHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUoZ2V0QWN0aXZlRWRpdG9yKCkuZ2V0UGF0aCgpKSwgcGF0aC5kaXJuYW1lKHRoaXMuZGVzdGluYXRpb24pKTtcbi8vICAgICAgICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuLy8gICAgICAgICAgICAgICAgICAgICBpc0Vycm9yID0gdHJ1ZTtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgZWxzZXtcbi8vICAgICAgICAgICAgICAgICAgICAgdmFyIHN0PWZzLnN0YXRTeW5jKGRpcilcbi8vICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdC5pc0RpcmVjdG9yeSgpKXtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXJyb3I9dHJ1ZTtcbi8vICAgICAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICBlcnJvckxhYmVsLnNldERpc3BsYXkoaXNFcnJvcik7XG4vLyAgICAgICAgICAgICBva0J1dHRvbi5zZXREaXNhYmxlZChpc0Vycm9yKTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgIHZjLmFkZENoaWxkKFVJLnZjKHR4dCkpO1xuLy8gICAgICAgICB2YXIgYnV0dG9uQmFyPVVJLmhjKCkuc2V0UGVyY2VudFdpZHRoKDEwMCkuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJmbGV4XCIpO1xuLy8gICAgICAgICBidXR0b25CYXIuYWRkQ2hpbGQoVUkubGFiZWwoXCJcIixudWxsLG51bGwsbnVsbCkuc2V0U3R5bGUoXCJmbGV4XCIsXCIxXCIpKVxuLy8gICAgICAgICBidXR0b25CYXIuYWRkQ2hpbGQoVUkuYnV0dG9uKFwiQ2FuY2VsXCIsVUkuQnV0dG9uU2l6ZXMuTk9STUFMLFVJLkJ1dHRvbkhpZ2hsaWdodHMuTk9fSElHSExJR0hULFVJLkljb24uTk9ORSx4PT57enouZGVzdHJveSgpfSkubWFyZ2luKDEwLDEwKSlcbi8vICAgICAgICAgdmFyIG9rQnV0dG9uPVVJLmJ1dHRvbihcIk1vdmVcIixVSS5CdXR0b25TaXplcy5OT1JNQUwsVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLFVJLkljb24uTk9ORSx4PT57XG4vLyAgICAgICAgICAgICB2YXIgZD1wYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGdldEFjdGl2ZUVkaXRvcigpLmdldFBhdGgoKSksIHRoaXMuZGVzdGluYXRpb24pO1xuLy8gICAgICAgICAgICAgdmFyIGR1bXA9dGhpcy5ub2RlLmxvd0xldmVsKCkuZHVtcCgpO1xuLy8gICAgICAgICAgICAgdmFyIGNpPXNwbGl0T25MaW5lcyhkdW1wKTtcbi8vICAgICAgICAgICAgIHZhciBsaT1jaS5sZW5ndGg+MT9pbmRlbnQoY2lbMV0pOmluZGVudChjaVswXSk7XG4vLyAgICAgICAgICAgICBkdW1wPWR1bXAuc3Vic3RyaW5nKHRoaXMubm9kZS5sb3dMZXZlbCgpLmtleUVuZCgpLXRoaXMubm9kZS5sb3dMZXZlbCgpLnN0YXJ0KCkrMSkudHJpbSgpO1xuLy8gICAgICAgICAgICAgZHVtcD1zdHJpcEluZGVudChkdW1wLGxpKTtcbi8vICAgICAgICAgICAgIGR1bXA9XCIjJVJBTUwgMC44IFwiK3RoaXMubm9kZS5kZWZpbml0aW9uKCkubmFtZUlkKCkrXCJcXG5cIitkdW1wO1xuLy8gICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhkLGR1bXApO1xuLy8gICAgICAgICAgICAgLy9ubyB3ZSBuZWVkIHRvIHJlcGxhY2UgY29udGVudCBvZiB0aGUgbm9kZSB3aXRoIHRleHQ7XG4vL1xuLy8gICAgICAgICAgICAgdmFyIHR4dD1ub2RlLmxvd0xldmVsKCkudW5pdCgpLmNvbnRlbnRzKCk7XG4vLyAgICAgICAgICAgICB2YXIgZW5kUGFydD10eHQuc3Vic3RyaW5nKG5vZGUubG93TGV2ZWwoKS5lbmQoKSk7XG4vLyAgICAgICAgICAgICB2YXIgc3RhcnRQYXJ0PXR4dC5zdWJzdHJpbmcoMCxub2RlLmxvd0xldmVsKCkua2V5RW5kKCkrMSk7XG4vLyAgICAgICAgICAgICB2YXIgdmw9c3RhcnRQYXJ0K1wiICFpbmNsdWRlIFwiK3RoaXMuZGVzdGluYXRpb24rZW5kUGFydDtcbi8vICAgICAgICAgICAgIGdldEFjdGl2ZUVkaXRvcigpLnNldFRleHQodmwpO1xuLy8gICAgICAgICAgICAgenouZGVzdHJveSgpO1xuLy8gICAgICAgICB9KTtcbi8vICAgICAgICAgb2tCdXR0b24uc2V0RGlzYWJsZWQodHJ1ZSlcbi8vICAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKG9rQnV0dG9uKTtcbi8vICAgICAgICAgdmMuYWRkQ2hpbGQoYnV0dG9uQmFyKVxuLy8gICAgICAgICB2YXIgaHRtbD12Yy5yZW5kZXJVSSgpO1xuLy8gICAgICAgICB6ej0oPGFueT5hdG9tKS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbCggeyBpdGVtOiBodG1sfSk7XG4vLyAgICAgICAgIGh0bWwuZm9jdXMoKTtcbi8vICAgICB9XG4vL1xuLy9cbi8vIH1cbi8vIGV4cG9ydCBmdW5jdGlvbiBtb3ZlT3V0KGg6aGwuSUhpZ2hMZXZlbE5vZGUpe1xuLy8gICAgIG5ldyBNb3ZlVG9OZXdGaWxlRGlhbG9nKGgpLnNob3coKVxuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2YWxpZGF0ZSgpIHtcbiAgICB2YXIgY3VycmVudEVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgIGlmICghY3VycmVudEVkaXRvcikgcmV0dXJuO1xuXG4gICAgbGludGVyVUkucmVsaW50KGN1cnJlbnRFZGl0b3IpO1xufVxuXG4vKipcbiAqIEdldHMgb3BlbmVkIGVkaXRvciBmb3Igc3BlY2lmaWVkIHBhdGggb3IgdXJpLlxuICogQ3VycmVudGx5IG9ubHkgcmV0dXJucyBhY3RpdmUgZWRpdG9yIGlmIGFwcGxpY2FibGUsIGluIGZ1dHVyZSBtYXkgYWxzbyByZXR1cm4gb3RoZXIgb3BlbmVkIGVkaXRvcnMuXG4gKiBAcGFyYW0gcGF0aFxuICogQHJldHVybnMge2FueX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVkaXRvckJ5VXJpT3JQYXRoKHBhdGggOiBzdHJpbmcpIDogQXRvbUNvcmUuSUVkaXRvcntcbiAgICAvL1RPRE8gY29uc2lkZXIgYWxzbyByZXR1cm5pbmcgb3RoZXIgb3BlbmVkIGVkaXRvcnNcblxuICAgIGxldCBhY3RpdmVFZGl0b3IgPSBnZXRBY3RpdmVFZGl0b3IoKTtcbiAgICBpZiAoYWN0aXZlRWRpdG9yLmdldFBhdGgoKSA9PSBwYXRoKSByZXR1cm4gYWN0aXZlRWRpdG9yO1xuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQXBwbGllcyBhIHNldCBvZiBjaGFuZ2VkIGRvY3VtZW50cyB0byBjdXJyZW50IGRvY3VtZW50cyBhbmQgZmlsZXNcbiAqIEBwYXJhbSBjaGFuZ2VkRG9jdW1lbnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUNoYW5nZWREb2N1bWVudHMoY2hhbmdlZERvY3VtZW50cyA6IHJhbWxTZXJ2ZXIuSUNoYW5nZWREb2N1bWVudFtdKSA6IHZvaWQge1xuXG4gICAgZm9yIChsZXQgY2hhbmdlZERvY3VtZW50IG9mIGNoYW5nZWREb2N1bWVudHMpIHtcblxuICAgICAgICBsZXQgZWRpdG9yID0gZ2V0RWRpdG9yQnlVcmlPclBhdGgoY2hhbmdlZERvY3VtZW50LnVyaSk7XG5cbiAgICAgICAgbGV0IG9sZENvbnRlbnRzID0gbnVsbDtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgICAgb2xkQ29udGVudHMgPSBlZGl0b3IuZ2V0VGV4dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2xkQ29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoY2hhbmdlZERvY3VtZW50LnVyaSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuZXdUZXh0ID0gbnVsbDtcbiAgICAgICAgaWYgKGNoYW5nZWREb2N1bWVudC50ZXh0KSB7XG4gICAgICAgICAgICBuZXdUZXh0ID0gY2hhbmdlZERvY3VtZW50LnRleHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlZERvY3VtZW50LnRleHRFZGl0cykge1xuICAgICAgICAgICAgbmV3VGV4dCA9IHRleHRFZGl0UHJvY2Vzc29yLmFwcGx5RG9jdW1lbnRFZGl0cyhvbGRDb250ZW50cywgY2hhbmdlZERvY3VtZW50LnRleHRFZGl0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICAgIGVkaXRvci5nZXRCdWZmZXIoKS5zZXRUZXh0KG5ld1RleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhjaGFuZ2VkRG9jdW1lbnQudXJpLCBuZXdUZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUcmllcyB0byBkZXRlY3QgdGhlIG5hbWUvc3ltYm9sIGF0IHBvc2l0aW9uLlxuICogSW4gcHJhY3Rpc2UgaXQgaXMgaW1wb3NzaWJsZSB0byBkbyBwcm9wZXJseSBpbiBhbGwgY2FzZXMgdW5sZXNzIGhhdmluZyBBU1QgYXQgaGFuZHNcbiAqIG9yIG1ha2luZyB0aGUgc2VydmVyIHRvIGRvIHRoaXMsIGJ1dCBNUyBMU1AgZG9lcyBub3QgaGF2ZSBhbiBpbnRlcmZhY2UgZm9yIHRoaXMuXG4gKlxuICogQHBhcmFtIGNvbnRlbnRzXG4gKiBAcGFyYW0gb2Zmc2V0XG4gKi9cbmZ1bmN0aW9uIGZpbmRDdXJyZW50TmFtZShjb250ZW50czogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcikgOiBzdHJpbmcge1xuICAgIC8vd2UgY2FudCB1c2UgYWxwaGEtbnVtZXJpYyBkZXRlY3Rpb24gZHVlIHRvIHBvdGVudGlhbCBub24tZW5nbGlzaCBhbHBoYWJldHMuXG4gICAgLy9zbyB3ZSBoYXZlIHRvIGRlZmluZWQgc29tZSBzdG9wIGNoYXJhY3RlcnMgYW5kIGV4cGFuZCB0aGUgbGlzdCB3aGVuIGEgYnVnIGNhc2UgaXMgZGV0ZWN0ZWRcbiAgICBjb25zdCBzdG9wQ2hhcmFjdGVyczogc3RyaW5nW10gPSBbXG4gICAgICAgIFwiXFxyXCIsIFwiXFxuXCIsIFwiW1wiLCBcIl1cIiwgXCI6XCIsIFwiLlwiLCBcIixcIiwgXCIgXCIsIFwiXFx0XCIsIFwie1wiLCBcIn1cIiwgXCInXCIsIFwiJ1wiLCBcIlxcXCJcIlxuICAgIF1cblxuICAgIGxldCBiZWdpbm5pbmcgPSAwO1xuXG4gICAgZm9yKGxldCBjdXJyZW50T2Zmc2V0ID0gb2Zmc2V0IC0gMTsgY3VycmVudE9mZnNldCA+PSAwOyBjdXJyZW50T2Zmc2V0LS0pe1xuICAgICAgICBsZXQgY3VycmVudENoYXIgPSBjb250ZW50cy5jaGFyQXQoY3VycmVudE9mZnNldCk7XG5cbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHN0b3BDaGFyIG9mIHN0b3BDaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENoYXIgPT0gc3RvcENoYXIpIHtcbiAgICAgICAgICAgICAgICBiZWdpbm5pbmcgPSBjdXJyZW50T2Zmc2V0ICsgMTtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm91bmQpIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICBsZXQgZW5kID0gY29udGVudHMubGVuZ3RoO1xuXG4gICAgZm9yKGxldCBjdXJyZW50T2Zmc2V0ID0gb2Zmc2V0OyBjdXJyZW50T2Zmc2V0IDwgY29udGVudHMubGVuZ3RoOyBjdXJyZW50T2Zmc2V0Kyspe1xuICAgICAgICBsZXQgY3VycmVudENoYXIgPSBjb250ZW50cy5jaGFyQXQoY3VycmVudE9mZnNldCk7XG5cbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHN0b3BDaGFyIG9mIHN0b3BDaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENoYXIgPT0gc3RvcENoYXIpIHtcbiAgICAgICAgICAgICAgICBlbmQgPSBjdXJyZW50T2Zmc2V0O1xuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3VuZCkgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnRzLnN1YnN0cmluZyhiZWdpbm5pbmcsIGVuZCk7XG59XG5cbi8qKlxuICogQWN0aXZhdGVzIHJlbmFtaW5nIGZvciBjdXJyZW50IGFjdGl2ZSBlZGl0b3IgYW5kIGN1cnNvciBwb3NpdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuYW1lUkFNTEVsZW1lbnQoKSB7XG4gICAgdmFyIGVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuICAgIGlmICghZWRpdG9yKSByZXR1cm47XG5cbiAgICBpZiAocGF0aC5leHRuYW1lKGVkaXRvci5nZXRQYXRoKCkpICE9ICcucmFtbCcpIHJldHVybjtcblxuICAgIGxldCBwb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpXG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICBsZXQgZWRpdG9yUGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICBsZXQgY3VycmVudE5hbWUgPSBmaW5kQ3VycmVudE5hbWUoZWRpdG9yLmdldFRleHQoKSwgb2Zmc2V0KTtcblxuICAgIFVJLnByb21wdChcIkVudGVyIG5ldyBuYW1lIGZvcjogXCIsIG5ld05hbWU9PiB7XG4gICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5cbiAgICAgICAgICAgIHJlbmFtZShlZGl0b3JQYXRoLCBvZmZzZXQsIG5ld05hbWUpLnRoZW4oY2hhbmdlZERvY3VtZW50cz0+e1xuXG4gICAgICAgICAgICBhcHBseUNoYW5nZWREb2N1bWVudHMoY2hhbmdlZERvY3VtZW50cyk7XG4gICAgICAgIH0pXG4gICAgfSwgY3VycmVudE5hbWUpXG5cbn1cblxudmFyIGdldEtleVZhbHVlID0gZnVuY3Rpb24gKG9mZnNldCwgdHh0KSB7XG4gICAgdmFyIG0gPSBvZmZzZXQ7XG5cbiAgICBmb3IgKHZhciBpID0gb2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgYyA9IHR4dC5jaGFyQXQoaSk7XG4gICAgICAgIGlmIChjID09ICcgJyB8fCBjID09ICdcXHInIHx8IGMgPT0gJ1xcbicgfHwgYyA9PSAnXFx0Jykge1xuICAgICAgICAgICAgbSA9IGkgKyAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHJlcyA9IFwiXCI7XG4gICAgZm9yICh2YXIgaSA9IG07IG0gPCB0eHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMgPSB0eHQuY2hhckF0KGkpO1xuICAgICAgICBpZiAoYyA9PSAnICcgfHwgYyA9PSAnXFxyJyB8fCBjID09ICdcXG4nIHx8IGMgPT0gJ1xcdCcgfHwgYyA9PSAnOicpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJlcyArPSBjO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIGV4cG9ydCBmdW5jdGlvbiBzZWxlY3QoKXtcbi8vICAgICB2YXIgZWQ9Z2V0QWN0aXZlRWRpdG9yKCk7XG4vLyAgICAgdmFyIHJlcXVlc3Q9e2VkaXRvcjplZCxidWZmZXJQb3NpdGlvbjplZC5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpfTtcbi8vICAgICB2YXIgbm9kZT1wcm92aWRlci5nZXRBc3ROb2RlKHJlcXVlc3QsZmFsc2UpO1xuLy8gICAgIGlmICghbm9kZSl7XG4vLyAgICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vLyAgICAgdmFyIHN0YXJ0PWVkLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgobm9kZS5sb3dMZXZlbCgpLnN0YXJ0KCkpO1xuLy8gICAgIHZhciBlbmQ9ZWQuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChub2RlLmxvd0xldmVsKCkuZW5kKCkpO1xuLy8gICAgIGVkLnNldFNlbGVjdGVkQnVmZmVyUmFuZ2Uoe3N0YXJ0OnN0YXJ0LGVuZDplbmR9LHt9KTtcbi8vIH1cbi8vZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFNpZ25hdHVyZShhdHRyOmhsLklBdHRyaWJ1dGUpe1xuLy8gICAgdmFyIHRyPXNpZ25hdHVyZS5jb252ZXJ0VG9UcmFpdChzaWduYXR1cmUucGFyc2UoYXR0cikpO1xuLy8gICAgLy9jb25zb2xlLmxvZygndHJhaXQ6XFxuJyArIHRyLmhpZ2hMZXZlbCgpLmxvd0xldmVsKCkuZHVtcCgpKTtcbi8vICAgIHZhciByZXMgPSBhdHRyLnBhcmVudCgpO1xuLy8gICAgLy9wci5yZW1vdmUoYXR0cik7IC8vIGluY29ycmVjdCB1c2FnZSEhISByZW1vdmUgYXR0cmlidXRlcyBhcyBiZWxvd1xuLy8gICAgYXR0ci5yZW1vdmUoKTtcbi8vICAgIHRyLmhpZ2hMZXZlbCgpLmVsZW1lbnRzKCkuZm9yRWFjaCh4PT57XG4vLyAgICAgICAgcmVzLmFkZCg8YW55PngpXG4vLyAgICB9KTtcbi8vICAgIHZhciBlZD1nZXRBY3RpdmVFZGl0b3IoKTtcbi8vICAgIGVkLnNldFRleHQoYXR0ci5yb290KCkubG93TGV2ZWwoKS51bml0KCkuY29udGVudHMoKSk7XG4vL31cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kVXNhZ2VzSW1wbChyZW5kZXJlcjoodDpJTG9jYXRpb25bXSk9PmFueT1kaXNwbGF5KXtcbiAgICB2YXIgZWRpdG9yPWdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgbGV0IHBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvckJ1ZmZlclBvc2l0aW9uKCk7XG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICBsZXQgcGF0aCA9IGVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZmluZFJlZmVyZW5jZXMocGF0aCwgb2Zmc2V0KS50aGVuKGxvY2F0aW9ucz0+e1xuICAgICAgICBpZiAoIWxvY2F0aW9ucykgcmV0dXJuO1xuXG4gICAgICAgIHJlbmRlcmVyKGxvY2F0aW9ucyk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZGlzcGxheShuOklMb2NhdGlvbltdKXtcbiAgICBpZiAoc3Ype1xuICAgICAgICBzdi5zZXRJbnB1dChuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN2ID0gbmV3IFNlYXJjaFJlc3VsdFZpZXcobilcbiAgICAgICAgc3YucGFuZWwgPSAoPGFueT5hdG9tLndvcmtzcGFjZSkuYWRkQm90dG9tUGFuZWwoe2l0ZW06IHN2fSk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFVzYWdlcygpe1xuICAgIGZpbmRVc2FnZXNJbXBsKGRpc3BsYXkpO1xufVxuXG5jbGFzcyBTZWFyY2hSZXN1bHRWaWV3IGV4dGVuZHMgU3BhY2VQZW5WaWV3cy5TY3JvbGxWaWV3IHtcblxuXG4gICAgc2NyaXB0UGF0aDpzdHJpbmc7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfcmVzdWx0OklMb2NhdGlvbltdICkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICBpbml0aWFsaXplICgpIHtcbiAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBjb250ZW50ICgpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdih7IGNsYXNzOiAncmFtbC1jb25zb2xlIHBhbmUtaXRlbScsIHRhYmluZGV4OiAtMSB9KVxuICAgIH1cblxuICAgIGlzQXR0YWNoZWQ9ZmFsc2U7XG5cbiAgICBhdHRhY2hlZCAoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB0aGlzLmlzQXR0YWNoZWQgPSB0cnVlXG4gICAgfVxuICAgIHBhbmVsOmFueTtcblxuICAgIHNldElucHV0KF9yZXN1bHQ6SUxvY2F0aW9uW10pe1xuICAgICAgICB0aGlzLl9yZXN1bHQ9X3Jlc3VsdDtcbiAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgfVxuXG4gICAgbG9hZCgpe1xuICAgICAgICB2YXIgc2VjdGlvbj1VSS5zZWN0aW9uKFwiUmVmZXJlbmNlc1wiLFVJLkljb24uU0VBUkNIKVxuICAgICAgICB2YXIgdmlldz1VSS5saXN0KHRoaXMuX3Jlc3VsdCxsb2NhdGlvbj0+e1xuICAgICAgICAgICAgdmFyIHAxID0gZ2V0QWN0aXZlRWRpdG9yKCkuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChsb2NhdGlvbi5yYW5nZS5zdGFydCk7XG5cbiAgICAgICAgICAgIHZhciByZXM9IFVJLmhjKFVJLmEobG9jYXRpb24udXJpLHk9PntcbiAgICAgICAgICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuKGxvY2F0aW9uLnVyaSx7fSkudGhlbih4PT57XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwMSA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGxvY2F0aW9uLnJhbmdlLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAyID0gYWN0aXZlRWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgobG9jYXRpb24ucmFuZ2UuZW5kKTtcblxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFZGl0b3Iuc2V0U2VsZWN0ZWRCdWZmZXJSYW5nZSh7c3RhcnQ6IHAxLCBlbmQ6IHAyfSwge30pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICB9KSxVSS5sYWJlbChcIiBsaW5lOlwiLFVJLkljb24uTk9ORSxVSS5UZXh0Q2xhc3Nlcy5TVUJUTEUpLnBhZCg1LDUpLFxuICAgICAgICAgICBVSS5sYWJlbChcIlwiK3AxLnJvdyxVSS5JY29uLk5PTkUsVUkuVGV4dENsYXNzZXMuU1VDQ0VTUykpXG4gICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICB2aWV3LnNldFN0eWxlKFwibWF4LWhlaWdodFwiLFwiNDAwcHhcIik7XG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodmlldyk7XG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQoVUkuYnV0dG9uKFwiQ2xvc2VcIixVSS5CdXR0b25TaXplcy5TTUFMTCxVSS5CdXR0b25IaWdobGlnaHRzLlBSSU1BUlksVUkuSWNvbi5OT05FLHg9Pnt0aGlzLnBhbmVsLmRlc3Ryb3koKTtzdj1udWxsfSkpXG4gICAgICAgIHRoaXMuaHRtbChzZWN0aW9uLnJlbmRlclVJKCkpO1xuICAgIH1cbn1cbnZhciBzdjpTZWFyY2hSZXN1bHRWaWV3O1xuXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/dialogs/assist-utils.js\n// module id = 11\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 12\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar fs = require(\"fs\");\n// import parser = require(\"raml-1-parser\");\n// import parserUtils = parser.utils;\nvar unitUtils = require(\"../util/unit\");\nvar TextBuffer = require(\"basarat-text-buffer\");\nvar editorManager = require(\"./editorManager\");\nvar ramlServer = require(\"raml-language-server\");\nexports.grammarScopes = ['source.raml'];\nexports.scope = 'file';\nexports.lintOnFly = true;\nvar raml_language_server_1 = require(\"raml-language-server\");\nfunction relint(editor) {\n    Promise.resolve(\"\").then(editorManager.toggleEditorTools);\n    editor.getBuffer().emitter.emit(\"did-change\", {\n        oldText: editor.getBuffer().getText(),\n        newText: editor.getBuffer().getText()\n    });\n}\nexports.relint = relint;\nfunction initEditorObservers(linter) {\n    atom.workspace.observeTextEditors(function (editor) { return relint(editor); });\n    return {\n        dispose: function () {\n        }\n    };\n}\nexports.initEditorObservers = initEditorObservers;\nfunction destroyLinter(linterApi, linter) {\n    linterApi.deleteMessages(linter);\n    linterApi.deleteLinter(linter);\n}\nfunction isRAMLUnit(editor) {\n    var contents = editor.getBuffer().getText();\n    return unitUtils.isRAMLUnit(contents);\n}\nvar combErrors = function (result) {\n    var map = {};\n    result.forEach(function (x) {\n        var original = JSON.parse(JSON.stringify(x));\n        original.trace = null;\n        var newKey = JSON.stringify(original);\n        var tr = map[newKey];\n        if (tr) {\n            tr.push(x);\n        }\n        else {\n            map[newKey] = [x];\n        }\n    });\n    var rs = [];\n    for (var i in map) {\n        var mes = JSON.parse(i);\n        mes.trace = [];\n        var ms = map[i];\n        ms.forEach(function (x) {\n            if (x.trace) {\n                mes.trace = mes.trace.concat(x.trace);\n            }\n        });\n        mes.trace = combErrors(mes.trace);\n        rs.push(mes);\n    }\n    return rs;\n};\nfunction tabWarnings(textEditor) {\n    var result = [];\n    var text = textEditor.getBuffer().getText();\n    var tab = 0;\n    while (true) {\n        var tab = text.indexOf('\\t', tab);\n        if (tab != -1) {\n            var p1 = textEditor.getBuffer().positionForCharacterIndex(tab);\n            var p2 = textEditor.getBuffer().positionForCharacterIndex(tab + 1);\n            var message = {\n                type: (\"Warning\"),\n                filePath: textEditor.getPath(),\n                text: \"Using tabs  can lead to unpredictable results\",\n                trace: [],\n                range: [[p1.row, p1.column], [p2.row, p2.column]]\n            };\n            result.push(message);\n            tab++;\n        }\n        else {\n            break;\n        }\n    }\n    return result;\n}\nfunction postPocessError(editor, error, buffers) {\n    var editorPath = editor.getPath();\n    if (!buffers[editorPath]) {\n        buffers[editorPath] = editor.getBuffer();\n    }\n    return Promise.resolve(error).then(function (error) {\n        if (!error.filePath) {\n            error.filePath = editorPath;\n        }\n        var buffer = buffers[error.filePath];\n        if (!buffer) {\n            return new Promise(function (resolve, reject) {\n                fs.readFile(error.filePath, function (err, data) {\n                    if (err) {\n                        reject(err);\n                    }\n                    else {\n                        buffer = new TextBuffer(data.toString());\n                        buffers[error.filePath] = buffer;\n                        resolve(buffer);\n                    }\n                });\n            });\n        }\n        return buffer;\n    }).then(function (buffer) {\n        clientConnection.debugDetail(\"Converting an error with range: [\" + error.range.start + \" , \" + error.range.end + \"]\", \"Linter-ui\", \"postPocessError\");\n        if (error.range.start != null && error.range.end != null) {\n            clientConnection.debugDetail(\"Converting an error with range as array: [\" + error.range[0] + \" , \" + error.range[1] + \"]\", \"Linter-ui\", \"postPocessError\");\n            var p1 = buffer.positionForCharacterIndex(error.range.start);\n            var p2 = buffer.positionForCharacterIndex(error.range.end);\n            clientConnection.debugDetail(\"Result error range: [\" + p1.row + \" , \" + p1.column + \"] ; [\" + p2.row + \" , \" + p2.column + \"]\", \"Linter-ui\", \"postPocessError\");\n            error.range = [[p1.row, p1.column], [p2.row, p2.column]];\n        }\n        var traceErrors = error.trace || [];\n        var tracePromises = traceErrors.map(function (traceError) { return postPocessError(editor, traceError, buffers); });\n        return Promise.all(tracePromises).then(function (trace) {\n            error.trace = trace;\n            return error;\n        });\n    });\n}\nfunction getEditorId(textEditor) {\n    return textEditor.id;\n}\nvar ValidationReportExpected = /** @class */ (function () {\n    function ValidationReportExpected() {\n    }\n    return ValidationReportExpected;\n}());\nvar clientConnection = raml_language_server_1.getNodeClientConnection();\nvar expectedValidationReports = [];\nfunction findAndRemoveExpectedReports(uri, versionLimit) {\n    var result = [];\n    expectedValidationReports = expectedValidationReports.filter(function (reportExpected) {\n        if (reportExpected.uri == uri\n            && (versionLimit == null || reportExpected.expectedVersion == null ||\n                versionLimit >= reportExpected.expectedVersion)) {\n            result.push(reportExpected);\n            return false;\n        }\n        return true;\n    });\n    return result;\n}\nvar latestRecievedReport = null;\nclientConnection.onValidationReport(function (report) {\n    clientConnection.debugDetail(\"Got debug report for uri \" + report.pointOfViewUri +\n        \" and version \" + report.version, \"linter-ui\", \"onValidationReport\");\n    var expectedReports = findAndRemoveExpectedReports(report.pointOfViewUri, report.version);\n    clientConnection.debugDetail(\"Found expected reports: \" + expectedReports.length, \"linter-ui\", \"onValidationReport\");\n    for (var _i = 0, expectedReports_1 = expectedReports; _i < expectedReports_1.length; _i++) {\n        var expectedReport = expectedReports_1[_i];\n        expectedReport.resolve(report.issues);\n    }\n    latestRecievedReport = report;\n});\nfunction runValidationSheduleUpdater(textEditor, resolve, reject) {\n    var uri = textEditor.getPath();\n    //in any way, lets report current state, it should not hurt.\n    clientConnection.documentChanged({\n        uri: uri,\n        text: textEditor.getBuffer().getText()\n    });\n    clientConnection.getLatestVersion(uri).then(function (version) {\n        clientConnection.debugDetail(\"Scheduling validation for uri \" + uri + \" and version \" +\n            version, \"linter-ui\", \"runValidationSheduleUpdater\");\n        if (latestRecievedReport && latestRecievedReport.version &&\n            latestRecievedReport.version >= version) {\n            //we already know validation report for this version\n            clientConnection.debugDetail(\"Previous report found v \" +\n                latestRecievedReport.version + \" resolving, issues \" +\n                (latestRecievedReport.issues ? latestRecievedReport.issues.length : 0), \"linter-ui\", \"runValidationSheduleUpdater\");\n            resolve(latestRecievedReport.issues);\n        }\n        else {\n            //lets wait until the server provides a report for this or later version\n            expectedValidationReports.push({\n                uri: uri,\n                expectedVersion: version,\n                resolve: resolve,\n                reject: reject\n            });\n            clientConnection.debugDetail(\"Pushing the expected report to the list for version \" +\n                version, \"linter-ui\", \"runValidationSheduleUpdater\");\n        }\n    });\n}\nfunction lint(textEditor) {\n    if (!isRAMLUnit(textEditor)) {\n        return Promise.resolve([]);\n    }\n    Promise.resolve(\"\").then(editorManager.toggleEditorTools);\n    var promise = new Promise(function (resolve, reject) {\n        runValidationSheduleUpdater(textEditor, resolve, reject);\n    }).then(function (errors) {\n        clientConnection.debugDetail(\"Update report handled in with issues \" +\n            (errors ? errors.length : 0), \"linter-ui\", \"lint\");\n        var buffers = {};\n        var promises = errors.map(function (error) { return postPocessError(textEditor, error, buffers); });\n        var tabs = tabWarnings(textEditor);\n        promises = promises.concat(tabs);\n        return Promise.all(promises).then(function (errors) {\n            var result = combErrors(errors);\n            var warnings = 0;\n            return result.filter(function (error) { return error ? true : false; }).filter(function (error) {\n                return error.type === 'Warning' && warnings++ >= 20 ? false : true;\n            });\n        });\n    });\n    clientConnection.debugDetail(\"Before returning from lint\", \"linter-ui\", \"lint\");\n    return promise;\n}\nexports.lint = lint;\nfunction addListenersToEditor(editor) {\n    var currentBuffer = editor.getBuffer();\n    currentBuffer.onDidChange(function (x) {\n        try {\n            ramlServer.getNodeClientConnection().debug(\"Change detected\", \"linter-ui\", \"addListenersToEditor\");\n            ramlServer.getNodeClientConnection().documentChanged({\n                uri: currentBuffer.getPath(),\n                text: currentBuffer.getText()\n            });\n        }\n        catch (e) {\n            console.log(e);\n        }\n    });\n}\nfunction addListenersToWorkspace() {\n    atom.workspace.onDidChangeActivePaneItem(function (e) {\n        var editor = atom.workspace.getActiveTextEditor();\n        if (editor) {\n            addListenersToEditor(editor);\n        }\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,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QWEsQ0FBQyxPQUFPLEVBQUU7YUFDcEMsQ0FBQyxDQUFDO1FBRVAsQ0FBQztRQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUM7WUFDUixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25CLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRDtJQUNJLElBQUksQ0FBQyxTQUFTLENBQUMseUJBQXlCLENBQUMsVUFBQSxDQUFDO1FBQ3RDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUNsRCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ1Qsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDaEMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsImZpbGUiOiJzcmMvYXRvbS9jb3JlL2xpbnRlci11aS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5pbXBvcnQgZnMgPSByZXF1aXJlKCdmcycpO1xuaW1wb3J0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbi8vIGltcG9ydCBwYXJzZXIgPSByZXF1aXJlKFwicmFtbC0xLXBhcnNlclwiKTtcblxuLy8gaW1wb3J0IHBhcnNlclV0aWxzID0gcGFyc2VyLnV0aWxzO1xuXG5pbXBvcnQgdW5pdFV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWwvdW5pdFwiKTtcblxudmFyIFRleHRCdWZmZXIgPSByZXF1aXJlKFwiYmFzYXJhdC10ZXh0LWJ1ZmZlclwiKTtcblxuaW1wb3J0IGVkaXRvck1hbmFnZXIgPSByZXF1aXJlKFwiLi9lZGl0b3JNYW5hZ2VyXCIpO1xuaW1wb3J0IGVkaXRvclRvb2xzID0gcmVxdWlyZShcIi4uL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHNcIik7XG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKVxuXG5leHBvcnQgdmFyIGdyYW1tYXJTY29wZXMgPSBbJ3NvdXJjZS5yYW1sJ107XG5cbmV4cG9ydCB2YXIgc2NvcGUgPSAnZmlsZSc7XG5cbmV4cG9ydCB2YXIgbGludE9uRmx5ID0gdHJ1ZTtcblxuaW1wb3J0IHtcbiAgICBnZXROb2RlQ2xpZW50Q29ubmVjdGlvbixcbiAgICBJVmFsaWRhdGlvblJlcG9ydFxufSBmcm9tICdyYW1sLWxhbmd1YWdlLXNlcnZlcidcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbGludChlZGl0b3I6QXRvbUNvcmUuSUVkaXRvcikge1xuICAgIFByb21pc2UucmVzb2x2ZShcIlwiKS50aGVuKGVkaXRvck1hbmFnZXIudG9nZ2xlRWRpdG9yVG9vbHMpO1xuXG4gICAgKDxhbnk+ZWRpdG9yKS5nZXRCdWZmZXIoKS5lbWl0dGVyLmVtaXQoXCJkaWQtY2hhbmdlXCIsIHtcbiAgICAgICAgb2xkVGV4dDogKDxhbnk+ZWRpdG9yKS5nZXRCdWZmZXIoKS5nZXRUZXh0KCksXG4gICAgICAgIG5ld1RleHQ6ICg8YW55PmVkaXRvcikuZ2V0QnVmZmVyKCkuZ2V0VGV4dCgpXG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0RWRpdG9yT2JzZXJ2ZXJzKGxpbnRlcikge1xuXG4gICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGVkaXRvciA9PiByZWxpbnQoZWRpdG9yKSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVzdHJveUxpbnRlcihsaW50ZXJBcGksIGxpbnRlcikge1xuICAgIGxpbnRlckFwaS5kZWxldGVNZXNzYWdlcyhsaW50ZXIpO1xuXG4gICAgbGludGVyQXBpLmRlbGV0ZUxpbnRlcihsaW50ZXIpO1xufVxuXG5mdW5jdGlvbiBpc1JBTUxVbml0KGVkaXRvcikge1xuICAgIHZhciBjb250ZW50cyA9IGVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KCk7XG5cbiAgICByZXR1cm4gdW5pdFV0aWxzLmlzUkFNTFVuaXQoY29udGVudHMpXG59XG5cbnZhciBjb21iRXJyb3JzID0gZnVuY3Rpb24gKHJlc3VsdDphbnlbXSkge1xuICAgIHZhciBtYXAgPSB7fTtcbiAgICByZXN1bHQuZm9yRWFjaCh4PT4ge1xuICAgICAgICB2YXIgb3JpZ2luYWwgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHgpKTtcbiAgICAgICAgb3JpZ2luYWwudHJhY2UgPSBudWxsO1xuICAgICAgICB2YXIgbmV3S2V5ID0gSlNPTi5zdHJpbmdpZnkob3JpZ2luYWwpO1xuICAgICAgICB2YXIgdHIgPSBtYXBbbmV3S2V5XTtcbiAgICAgICAgaWYgKHRyKSB7XG4gICAgICAgICAgICB0ci5wdXNoKHgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWFwW25ld0tleV0gPSBbeF07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgcnM6YW55W10gPSBbXTtcbiAgICBmb3IgKHZhciBpIGluIG1hcCkge1xuICAgICAgICB2YXIgbWVzID0gSlNPTi5wYXJzZShpKTtcbiAgICAgICAgbWVzLnRyYWNlID0gW107XG4gICAgICAgIHZhciBtcyA9IG1hcFtpXTtcbiAgICAgICAgbXMuZm9yRWFjaCh4PT4ge1xuICAgICAgICAgICAgaWYgKHgudHJhY2UpIHtcbiAgICAgICAgICAgICAgICBtZXMudHJhY2UgPSBtZXMudHJhY2UuY29uY2F0KHgudHJhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBtZXMudHJhY2UgPSBjb21iRXJyb3JzKG1lcy50cmFjZSk7XG4gICAgICAgIHJzLnB1c2gobWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJzO1xufTtcblxuZnVuY3Rpb24gdGFiV2FybmluZ3ModGV4dEVkaXRvcjpBdG9tQ29yZS5JRWRpdG9yKTogYW55W10ge1xuICAgIHZhciByZXN1bHQ6IGFueVtdID0gW107XG5cbiAgICB2YXIgdGV4dCA9IHRleHRFZGl0b3IuZ2V0QnVmZmVyKCkuZ2V0VGV4dCgpO1xuXG4gICAgdmFyIHRhYiA9IDA7XG5cbiAgICB3aGlsZSh0cnVlKSB7XG4gICAgICAgIHZhciB0YWI6IG51bWJlciA9IHRleHQuaW5kZXhPZignXFx0Jyx0YWIpO1xuXG4gICAgICAgIGlmKHRhYiAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHAxID0gdGV4dEVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KHRhYik7XG4gICAgICAgICAgICB2YXIgcDIgPSB0ZXh0RWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgodGFiICsgMSk7XG5cbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IChcIldhcm5pbmdcIiksXG5cbiAgICAgICAgICAgICAgICBmaWxlUGF0aDogdGV4dEVkaXRvci5nZXRQYXRoKCksXG5cbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlVzaW5nIHRhYnMgIGNhbiBsZWFkIHRvIHVucHJlZGljdGFibGUgcmVzdWx0c1wiLFxuXG4gICAgICAgICAgICAgICAgdHJhY2U6IFtdLFxuXG4gICAgICAgICAgICAgICAgcmFuZ2U6IFtbcDEucm93LCBwMS5jb2x1bW5dLCBbcDIucm93LCBwMi5jb2x1bW5dXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRhYisrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHBvc3RQb2Nlc3NFcnJvcihlZGl0b3IsIGVycm9yLCBidWZmZXJzKSB7XG4gICAgdmFyIGVkaXRvclBhdGggPSBlZGl0b3IuZ2V0UGF0aCgpO1xuXG4gICAgaWYoIWJ1ZmZlcnNbZWRpdG9yUGF0aF0pIHtcbiAgICAgICAgYnVmZmVyc1tlZGl0b3JQYXRoXSA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVycm9yKS50aGVuKGVycm9yID0+IHtcbiAgICAgICAgaWYoIWVycm9yLmZpbGVQYXRoKSB7XG4gICAgICAgICAgICBlcnJvci5maWxlUGF0aCA9IGVkaXRvclBhdGg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tlcnJvci5maWxlUGF0aF07XG5cbiAgICAgICAgaWYoIWJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBmcy5yZWFkRmlsZShlcnJvci5maWxlUGF0aCwgKGVycjogYW55LCBkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBUZXh0QnVmZmVyKGRhdGEudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcnNbZXJyb3IuZmlsZVBhdGhdID0gYnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KS50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJDb252ZXJ0aW5nIGFuIGVycm9yIHdpdGggcmFuZ2U6IFtcIiArIGVycm9yLnJhbmdlLnN0YXJ0ICsgXCIgLCBcIiArIGVycm9yLnJhbmdlLmVuZCArIFwiXVwiLFxuICAgICAgICAgICAgXCJMaW50ZXItdWlcIixcInBvc3RQb2Nlc3NFcnJvclwiKTtcblxuICAgICAgICBpZiAoZXJyb3IucmFuZ2Uuc3RhcnQgIT0gbnVsbCAmJiBlcnJvci5yYW5nZS5lbmQgIT0gbnVsbCkge1xuXG4gICAgICAgICAgICBjbGllbnRDb25uZWN0aW9uLmRlYnVnRGV0YWlsKFwiQ29udmVydGluZyBhbiBlcnJvciB3aXRoIHJhbmdlIGFzIGFycmF5OiBbXCIgKyBlcnJvci5yYW5nZVswXSArIFwiICwgXCIgKyBlcnJvci5yYW5nZVsxXSArIFwiXVwiLFxuICAgICAgICAgICAgICAgIFwiTGludGVyLXVpXCIsXCJwb3N0UG9jZXNzRXJyb3JcIik7XG5cbiAgICAgICAgICAgIHZhciBwMSA9IGJ1ZmZlci5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGVycm9yLnJhbmdlLnN0YXJ0KTtcbiAgICAgICAgICAgIHZhciBwMiA9IGJ1ZmZlci5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KGVycm9yLnJhbmdlLmVuZCk7XG5cbiAgICAgICAgICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJSZXN1bHQgZXJyb3IgcmFuZ2U6IFtcIiArIHAxLnJvdyArIFwiICwgXCIgKyBwMS5jb2x1bW4gKyBcIl0gOyBbXCIrIHAyLnJvdyArIFwiICwgXCIgKyBwMi5jb2x1bW4gKyBcIl1cIixcbiAgICAgICAgICAgICAgICBcIkxpbnRlci11aVwiLFwicG9zdFBvY2Vzc0Vycm9yXCIpO1xuXG4gICAgICAgICAgICBlcnJvci5yYW5nZSA9IFtbcDEucm93LCBwMS5jb2x1bW5dLCBbcDIucm93LCBwMi5jb2x1bW5dXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHRyYWNlRXJyb3JzID0gZXJyb3IudHJhY2UgfHwgW107XG4gICAgICAgIFxuICAgICAgICB2YXIgdHJhY2VQcm9taXNlcyA9IHRyYWNlRXJyb3JzLm1hcCh0cmFjZUVycm9yID0+IHBvc3RQb2Nlc3NFcnJvcihlZGl0b3IsIHRyYWNlRXJyb3IsIGJ1ZmZlcnMpKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodHJhY2VQcm9taXNlcykudGhlbih0cmFjZSA9PiB7XG4gICAgICAgICAgICBlcnJvci50cmFjZSA9IHRyYWNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRFZGl0b3JJZCh0ZXh0RWRpdG9yKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dEVkaXRvci5pZDtcbn1cblxuY2xhc3MgVmFsaWRhdGlvblJlcG9ydEV4cGVjdGVkIHtcbiAgICBwdWJsaWMgdXJpIDogc3RyaW5nXG4gICAgcHVibGljIGV4cGVjdGVkVmVyc2lvbiA6IG51bWJlclxuICAgIHB1YmxpYyByZXNvbHZlIDogeyhyZXN1bHQ6YW55KTp2b2lkfVxuICAgIHB1YmxpYyByZWplY3QgOiB7KGVycm9yOmFueSk6dm9pZH1cbn1cblxubGV0IGNsaWVudENvbm5lY3Rpb24gPSBnZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpO1xudmFyIGV4cGVjdGVkVmFsaWRhdGlvblJlcG9ydHMgOiBWYWxpZGF0aW9uUmVwb3J0RXhwZWN0ZWRbXSA9IFtdO1xuXG5mdW5jdGlvbiBmaW5kQW5kUmVtb3ZlRXhwZWN0ZWRSZXBvcnRzKHVyaSA6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbkxpbWl0OiBudW1iZXIpIDogVmFsaWRhdGlvblJlcG9ydEV4cGVjdGVkW10ge1xuICAgIGxldCByZXN1bHQgOiBWYWxpZGF0aW9uUmVwb3J0RXhwZWN0ZWRbXSA9IFtdO1xuXG4gICAgZXhwZWN0ZWRWYWxpZGF0aW9uUmVwb3J0cyA9IGV4cGVjdGVkVmFsaWRhdGlvblJlcG9ydHMuZmlsdGVyKHJlcG9ydEV4cGVjdGVkPT57XG5cbiAgICAgICAgaWYgKHJlcG9ydEV4cGVjdGVkLnVyaSA9PSB1cmlcbiAgICAgICAgICAgICYmICh2ZXJzaW9uTGltaXQgPT0gbnVsbCB8fCByZXBvcnRFeHBlY3RlZC5leHBlY3RlZFZlcnNpb24gPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZlcnNpb25MaW1pdCA+PSByZXBvcnRFeHBlY3RlZC5leHBlY3RlZFZlcnNpb24pKSB7XG5cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJlcG9ydEV4cGVjdGVkKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIGxhdGVzdFJlY2lldmVkUmVwb3J0ID0gbnVsbDtcbmNsaWVudENvbm5lY3Rpb24ub25WYWxpZGF0aW9uUmVwb3J0KChyZXBvcnQ6IElWYWxpZGF0aW9uUmVwb3J0KT0+e1xuICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJHb3QgZGVidWcgcmVwb3J0IGZvciB1cmkgXCIgKyByZXBvcnQucG9pbnRPZlZpZXdVcmkgK1xuICAgICAgICBcIiBhbmQgdmVyc2lvbiBcIiArIHJlcG9ydC52ZXJzaW9uLFxuICAgICAgICBcImxpbnRlci11aVwiLCBcIm9uVmFsaWRhdGlvblJlcG9ydFwiKVxuXG4gICAgbGV0IGV4cGVjdGVkUmVwb3J0cyA9IGZpbmRBbmRSZW1vdmVFeHBlY3RlZFJlcG9ydHMocmVwb3J0LnBvaW50T2ZWaWV3VXJpLFxuICAgICAgICByZXBvcnQudmVyc2lvbik7XG5cbiAgICBjbGllbnRDb25uZWN0aW9uLmRlYnVnRGV0YWlsKFwiRm91bmQgZXhwZWN0ZWQgcmVwb3J0czogXCIgKyBleHBlY3RlZFJlcG9ydHMubGVuZ3RoLFxuICAgICAgICBcImxpbnRlci11aVwiLCBcIm9uVmFsaWRhdGlvblJlcG9ydFwiKVxuXG4gICAgZm9yIChsZXQgZXhwZWN0ZWRSZXBvcnQgb2YgZXhwZWN0ZWRSZXBvcnRzKSB7XG4gICAgICAgIGV4cGVjdGVkUmVwb3J0LnJlc29sdmUocmVwb3J0Lmlzc3Vlcyk7XG4gICAgfVxuXG4gICAgbGF0ZXN0UmVjaWV2ZWRSZXBvcnQgPSByZXBvcnQ7XG59KTtcblxuZnVuY3Rpb24gcnVuVmFsaWRhdGlvblNoZWR1bGVVcGRhdGVyKHRleHRFZGl0b3I6IEF0b21Db3JlLklFZGl0b3IsIHJlc29sdmUsIHJlamVjdCkgOiB2b2lkIHtcbiAgICBsZXQgdXJpID0gdGV4dEVkaXRvci5nZXRQYXRoKCk7XG5cbiAgICAvL2luIGFueSB3YXksIGxldHMgcmVwb3J0IGN1cnJlbnQgc3RhdGUsIGl0IHNob3VsZCBub3QgaHVydC5cbiAgICBjbGllbnRDb25uZWN0aW9uLmRvY3VtZW50Q2hhbmdlZCh7XG4gICAgICAgIHVyaSA6IHVyaSxcbiAgICAgICAgdGV4dDogdGV4dEVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KClcbiAgICB9KTtcblxuICAgIGNsaWVudENvbm5lY3Rpb24uZ2V0TGF0ZXN0VmVyc2lvbih1cmkpLnRoZW4odmVyc2lvbj0+e1xuICAgICAgICBjbGllbnRDb25uZWN0aW9uLmRlYnVnRGV0YWlsKFwiU2NoZWR1bGluZyB2YWxpZGF0aW9uIGZvciB1cmkgXCIgKyB1cmkgKyBcIiBhbmQgdmVyc2lvbiBcIiArXG4gICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgXCJsaW50ZXItdWlcIiwgXCJydW5WYWxpZGF0aW9uU2hlZHVsZVVwZGF0ZXJcIilcblxuICAgICAgICBpZiAobGF0ZXN0UmVjaWV2ZWRSZXBvcnQgJiYgbGF0ZXN0UmVjaWV2ZWRSZXBvcnQudmVyc2lvbiAmJlxuICAgICAgICAgICAgbGF0ZXN0UmVjaWV2ZWRSZXBvcnQudmVyc2lvbiA+PSB2ZXJzaW9uKSB7XG5cbiAgICAgICAgICAgIC8vd2UgYWxyZWFkeSBrbm93IHZhbGlkYXRpb24gcmVwb3J0IGZvciB0aGlzIHZlcnNpb25cblxuICAgICAgICAgICAgY2xpZW50Q29ubmVjdGlvbi5kZWJ1Z0RldGFpbChcIlByZXZpb3VzIHJlcG9ydCBmb3VuZCB2IFwiICtcbiAgICAgICAgICAgICAgICBsYXRlc3RSZWNpZXZlZFJlcG9ydC52ZXJzaW9uICsgXCIgcmVzb2x2aW5nLCBpc3N1ZXMgXCIgK1xuICAgICAgICAgICAgICAgIChsYXRlc3RSZWNpZXZlZFJlcG9ydC5pc3N1ZXM/bGF0ZXN0UmVjaWV2ZWRSZXBvcnQuaXNzdWVzLmxlbmd0aDowKSxcbiAgICAgICAgICAgICAgICBcImxpbnRlci11aVwiLCBcInJ1blZhbGlkYXRpb25TaGVkdWxlVXBkYXRlclwiKVxuXG4gICAgICAgICAgICByZXNvbHZlKGxhdGVzdFJlY2lldmVkUmVwb3J0Lmlzc3VlcylcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy9sZXRzIHdhaXQgdW50aWwgdGhlIHNlcnZlciBwcm92aWRlcyBhIHJlcG9ydCBmb3IgdGhpcyBvciBsYXRlciB2ZXJzaW9uXG4gICAgICAgICAgICBleHBlY3RlZFZhbGlkYXRpb25SZXBvcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHVyaTogdXJpLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkVmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgICAgICAgICByZXNvbHZlIDogcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICByZWplY3Q6IHJlamVjdFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNsaWVudENvbm5lY3Rpb24uZGVidWdEZXRhaWwoXCJQdXNoaW5nIHRoZSBleHBlY3RlZCByZXBvcnQgdG8gdGhlIGxpc3QgZm9yIHZlcnNpb24gXCIgK1xuICAgICAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICAgICAgXCJsaW50ZXItdWlcIiwgXCJydW5WYWxpZGF0aW9uU2hlZHVsZVVwZGF0ZXJcIilcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaW50KHRleHRFZGl0b3I6IEF0b21Db3JlLklFZGl0b3IpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgaWYoIWlzUkFNTFVuaXQodGV4dEVkaXRvcikpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIFxuICAgIFByb21pc2UucmVzb2x2ZShcIlwiKS50aGVuKGVkaXRvck1hbmFnZXIudG9nZ2xlRWRpdG9yVG9vbHMpO1xuICAgIFxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBydW5WYWxpZGF0aW9uU2hlZHVsZVVwZGF0ZXIodGV4dEVkaXRvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KS50aGVuKChlcnJvcnM6IGFueVtdKSA9PiB7XG5cbiAgICAgICAgY2xpZW50Q29ubmVjdGlvbi5kZWJ1Z0RldGFpbChcIlVwZGF0ZSByZXBvcnQgaGFuZGxlZCBpbiB3aXRoIGlzc3VlcyBcIiArXG4gICAgICAgICAgICAoZXJyb3JzP2Vycm9ycy5sZW5ndGg6MCksXG4gICAgICAgICAgICBcImxpbnRlci11aVwiLCBcImxpbnRcIilcblxuICAgICAgICB2YXIgYnVmZmVycyA9IHt9O1xuICAgICAgICBcbiAgICAgICAgdmFyIHByb21pc2VzID0gZXJyb3JzLm1hcChlcnJvciA9PiBwb3N0UG9jZXNzRXJyb3IodGV4dEVkaXRvciwgZXJyb3IsIGJ1ZmZlcnMpKTtcblxuICAgICAgICB2YXIgdGFiczogYW55W10gPSB0YWJXYXJuaW5ncyh0ZXh0RWRpdG9yKTtcblxuICAgICAgICBwcm9taXNlcyA9IHByb21pc2VzLmNvbmNhdCh0YWJzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoZXJyb3JzOiBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbWJFcnJvcnMoZXJyb3JzKTtcblxuICAgICAgICAgICAgdmFyIHdhcm5pbmdzID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoZXJyb3IgPT4gZXJyb3IgPyB0cnVlIDogZmFsc2UpLmZpbHRlcihlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLnR5cGUgPT09ICdXYXJuaW5nJyAmJiB3YXJuaW5ncysrID49IDIwID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY2xpZW50Q29ubmVjdGlvbi5kZWJ1Z0RldGFpbChcIkJlZm9yZSByZXR1cm5pbmcgZnJvbSBsaW50XCIsXG4gICAgICAgIFwibGludGVyLXVpXCIsIFwibGludFwiKVxuICAgIFxuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnNUb0VkaXRvcihlZGl0b3IpIHtcbiAgICBsZXQgY3VycmVudEJ1ZmZlciA9IGVkaXRvci5nZXRCdWZmZXIoKTtcbiAgICBjdXJyZW50QnVmZmVyLm9uRGlkQ2hhbmdlKHggPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRlYnVnKFwiQ2hhbmdlIGRldGVjdGVkXCIsIFwibGludGVyLXVpXCIsIFwiYWRkTGlzdGVuZXJzVG9FZGl0b3JcIilcbiAgICAgICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5kb2N1bWVudENoYW5nZWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmk6IGN1cnJlbnRCdWZmZXIuZ2V0UGF0aCgpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjdXJyZW50QnVmZmVyLmdldFRleHQoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnNUb1dvcmtzcGFjZSgpIHtcbiAgICBhdG9tLndvcmtzcGFjZS5vbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGUgPT4ge1xuICAgICAgICBsZXQgZWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgICBhZGRMaXN0ZW5lcnNUb0VkaXRvcihlZGl0b3IpXG4gICAgICAgIH1cbiAgICB9KTtcbn0iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/core/linter-ui.js\n// module id = 13\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns whether the current text matches RAML unit.\n * @param contents\n * @returns {RegExpMatchArray}\n */\nfunction isRAMLUnit(contents) {\n    return contents.match(/^\\s*#%RAML\\s+(\\d\\.\\d)\\s*(\\w*)\\s*$/m);\n}\nexports.isRAMLUnit = isRAMLUnit;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3V0aWwvdW5pdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0dBSUc7QUFDSCxvQkFBMkIsUUFBZ0I7SUFDdkMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsb0NBQW9DLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRkQsZ0NBRUMiLCJmaWxlIjoic3JjL2F0b20vdXRpbC91bml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgdGV4dCBtYXRjaGVzIFJBTUwgdW5pdC5cbiAqIEBwYXJhbSBjb250ZW50c1xuICogQHJldHVybnMge1JlZ0V4cE1hdGNoQXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JBTUxVbml0KGNvbnRlbnRzOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudHMubWF0Y2goL15cXHMqIyVSQU1MXFxzKyhcXGRcXC5cXGQpXFxzKihcXHcqKVxccyokL20pO1xufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/util/unit.js\n// module id = 14\n// module chunks = 0","module.exports = require(\"basarat-text-buffer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"basarat-text-buffer\"\n// module id = 15\n// module chunks = 0","\"use strict\";\n/**\n * Created by kor on 24/07/15.\n */\n/// <reference path=\"../../../typings/main.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import fs = require ('fs')\n// import path = require ('path')\nvar editorTools = require(\"../editor-tools/editor-tools\");\n// import rp=require(\"raml-1-parser\")\n// import project=rp.project;\n// export function ast(editor:AtomCore.IEditor):rp.IHighLevelNode{\n//     var man=editorTools.aquireManager();\n//     if (editorTools.aquireManager()){\n//         if (man.getCurrentEditor()==editor){\n//             return man.ast;\n//         }\n//     }\n//     var p=editor.getPath();\n//     var prj=project.createProject(path.dirname(p));\n//     var unit=prj.unit(path.basename(p));\n//     var text=editor.getBuffer().getText();\n//     if (!unit){\n//         return null;\n//     }\n//     unit.updateContent(text);\n//     var ast=<rp.IHighLevelNode>unit.highLevel();\n//     return ast;\n// }\nfunction toggleEditorTools() {\n    var man = editorTools.aquireManager();\n    if (man) {\n        man.getCurrentEditor();\n    }\n}\nexports.toggleEditorTools = toggleEditorTools;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvZWRpdG9yTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7QUFDSCxtREFBbUQ7O0FBRW5ELDZCQUE2QjtBQUM3QixpQ0FBaUM7QUFDakMsMERBQTBEO0FBQzFELHFDQUFxQztBQUNyQyw2QkFBNkI7QUFFN0Isa0VBQWtFO0FBQ2xFLDJDQUEyQztBQUMzQyx3Q0FBd0M7QUFDeEMsK0NBQStDO0FBQy9DLDhCQUE4QjtBQUM5QixZQUFZO0FBQ1osUUFBUTtBQUNSLDhCQUE4QjtBQUM5QixzREFBc0Q7QUFDdEQsMkNBQTJDO0FBQzNDLDZDQUE2QztBQUM3QyxrQkFBa0I7QUFDbEIsdUJBQXVCO0FBQ3ZCLFFBQVE7QUFDUixnQ0FBZ0M7QUFDaEMsbURBQW1EO0FBQ25ELGtCQUFrQjtBQUNsQixJQUFJO0FBRUo7SUFDSSxJQUFJLEdBQUcsR0FBRyxXQUFXLENBQUMsYUFBYSxFQUFFLENBQUM7SUFFdEMsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLENBQUEsQ0FBQztRQUNKLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzNCLENBQUM7QUFDTCxDQUFDO0FBTkQsOENBTUMiLCJmaWxlIjoic3JjL2F0b20vY29yZS9lZGl0b3JNYW5hZ2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGtvciBvbiAyNC8wNy8xNS5cbiAqL1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuLy8gaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbi8vIGltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuaW1wb3J0IGVkaXRvclRvb2xzPXJlcXVpcmUoXCIuLi9lZGl0b3ItdG9vbHMvZWRpdG9yLXRvb2xzXCIpXG4vLyBpbXBvcnQgcnA9cmVxdWlyZShcInJhbWwtMS1wYXJzZXJcIilcbi8vIGltcG9ydCBwcm9qZWN0PXJwLnByb2plY3Q7XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBhc3QoZWRpdG9yOkF0b21Db3JlLklFZGl0b3IpOnJwLklIaWdoTGV2ZWxOb2Rle1xuLy8gICAgIHZhciBtYW49ZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpO1xuLy8gICAgIGlmIChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkpe1xuLy8gICAgICAgICBpZiAobWFuLmdldEN1cnJlbnRFZGl0b3IoKT09ZWRpdG9yKXtcbi8vICAgICAgICAgICAgIHJldHVybiBtYW4uYXN0O1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIHZhciBwPWVkaXRvci5nZXRQYXRoKCk7XG4vLyAgICAgdmFyIHByaj1wcm9qZWN0LmNyZWF0ZVByb2plY3QocGF0aC5kaXJuYW1lKHApKTtcbi8vICAgICB2YXIgdW5pdD1wcmoudW5pdChwYXRoLmJhc2VuYW1lKHApKTtcbi8vICAgICB2YXIgdGV4dD1lZGl0b3IuZ2V0QnVmZmVyKCkuZ2V0VGV4dCgpO1xuLy8gICAgIGlmICghdW5pdCl7XG4vLyAgICAgICAgIHJldHVybiBudWxsO1xuLy8gICAgIH1cbi8vICAgICB1bml0LnVwZGF0ZUNvbnRlbnQodGV4dCk7XG4vLyAgICAgdmFyIGFzdD08cnAuSUhpZ2hMZXZlbE5vZGU+dW5pdC5oaWdoTGV2ZWwoKTtcbi8vICAgICByZXR1cm4gYXN0O1xuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRWRpdG9yVG9vbHMoKTogdm9pZCB7XG4gICAgdmFyIG1hbiA9IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKTtcbiAgICBcbiAgICBpZihtYW4pe1xuICAgICAgICBtYW4uZ2V0Q3VycmVudEVkaXRvcigpO1xuICAgIH1cbn1cbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/core/editorManager.js\n// module id = 16\n// module chunks = 0","module.exports = require(\"raml-language-server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"raml-language-server\"\n// module id = 17\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PromiseConstructor = require(\"promise-polyfill\");\nif (typeof Promise === \"undefined\" && typeof window !== \"undefined\") {\n    window.Promise = PromiseConstructor;\n}\nvar Reconciler = /** @class */ (function () {\n    function Reconciler(logger, timeout) {\n        this.logger = logger;\n        this.timeout = timeout;\n        this.waitingList = [];\n        this.runningList = [];\n    }\n    Reconciler.prototype.schedule = function (runnable) {\n        var _this = this;\n        this.addToWaitingList(runnable);\n        return new Promise(function (resolve, reject) {\n            setTimeout(function () {\n                _this.logger.debugDetail(\"Time came to execute \" + runnable.toString(), \"Reconciler\", \"schedule\");\n                if (runnable.isCanceled()) {\n                    _this.logger.debugDetail(\"Runnable \" + runnable.toString() + \" is cancelled, doing nothing\", \"Reconciler\", \"schedule\");\n                    _this.removeFromWaitingList(runnable);\n                    return;\n                }\n                var currentlyRunning = _this.findConflictingInRunningList(runnable);\n                if (currentlyRunning) {\n                    // TODO add an additional short timeout parameter to launch the reschedule\n                    // at the finish of the currently running task for a short time after it.\n                    _this.logger.debugDetail(\"Conflicting to \" + runnable.toString()\n                        + \" is found in the running list: \" + currentlyRunning.toString()\n                        + \" rescheduling current one.\", \"Reconciler\", \"schedule\");\n                    _this.schedule(runnable);\n                    return;\n                }\n                _this.removeFromWaitingList(runnable);\n                _this.addToRunningList(runnable);\n                _this.logger.debugDetail(\"Executing \" + runnable.toString(), \"Reconciler\", \"schedule\");\n                _this.run(runnable).then(function (result) { resolve(result); }, function (error) { reject(error); });\n            }, _this.timeout);\n        });\n    };\n    Reconciler.prototype.run = function (runnable) {\n        var _this = this;\n        return runnable.run().then(function (result) {\n            _this.removeFromRunningList(runnable);\n            return result;\n        }, function (error) {\n            _this.removeFromRunningList(runnable);\n            throw error;\n        });\n    };\n    /**\n     * Adds item to waiting list and removes anything currently in the list,\n     * which conflicts with the new item.\n     * @param runnable\n     */\n    Reconciler.prototype.addToWaitingList = function (runnable) {\n        var _this = this;\n        this.logger.debugDetail(\"Adding runnable \" + runnable.toString() + \" to waiting list\", \"Reconciler\", \"addToWaitingList\");\n        this.waitingList = this.waitingList.filter(function (current) {\n            _this.logger.debugDetail(\"Comparing existing runnable \" + current.toString() +\n                \" to the new \" + runnable.toString(), \"Reconciler\", \"addToWaitingList\");\n            var conflicts = runnable.conflicts(current);\n            if (conflicts) {\n                _this.logger.debugDetail(\"Runnables are conflicting, canceling existing one\", \"Reconciler\", \"addToWaitingList\");\n                current.cancel();\n            }\n            return !conflicts;\n        });\n        this.waitingList.push(runnable);\n    };\n    /**\n     * Removes runnable from the list of running ones.\n     * @param runnable\n     */\n    Reconciler.prototype.removeFromWaitingList = function (runnable) {\n        this.logger.debugDetail(\"Removing \" + runnable.toString()\n            + \" from waiting list\", \"Reconciler\", \"removeFromWaitingList\");\n        var index = this.waitingList.indexOf(runnable);\n        if (index !== -1) {\n            this.waitingList.splice(index, 1);\n        }\n    };\n    /**\n     * Adds runnable to the list of running ones.\n     * @param runnable\n     */\n    Reconciler.prototype.addToRunningList = function (runnable) {\n        this.logger.debugDetail(\"Adding \" + runnable.toString()\n            + \" to running list\", \"Reconciler\", \"removeFromWaitingList\");\n        this.runningList.push(runnable);\n    };\n    /**\n     * Removes runnable from the list of running ones.\n     * @param runnable\n     */\n    Reconciler.prototype.removeFromRunningList = function (runnable) {\n        this.logger.debugDetail(\"Removing \" + runnable.toString()\n            + \" from running list\", \"Reconciler\", \"removeFromWaitingList\");\n        var index = this.runningList.indexOf(runnable);\n        if (index !== -1) {\n            this.runningList.splice(index, 1);\n        }\n    };\n    /**\n     * Finds the first conflicting runnable in the current list.\n     * @param runnable\n     * @returns {any}\n     */\n    Reconciler.prototype.findConflictingInRunningList = function (runnable) {\n        for (var _i = 0, _a = this.runningList; _i < _a.length; _i++) {\n            var current = _a[_i];\n            if (runnable.conflicts(current)) {\n                return current;\n            }\n        }\n        return null;\n    };\n    return Reconciler;\n}());\nexports.Reconciler = Reconciler;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9yZWNvbmNpbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEscURBQXdEO0FBQ3hELEVBQUUsQ0FBQyxDQUFDLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLE1BQWMsQ0FBQyxPQUFPLEdBQUcsa0JBQWtCLENBQUM7QUFDakQsQ0FBQztBQTZCRDtJQUtJLG9CQUFvQixNQUFlLEVBQVUsT0FBZTtRQUF4QyxXQUFNLEdBQU4sTUFBTSxDQUFTO1FBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUhwRCxnQkFBVyxHQUFvQixFQUFFLENBQUM7UUFDbEMsZ0JBQVcsR0FBb0IsRUFBRSxDQUFDO0lBRzFDLENBQUM7SUFFTSw2QkFBUSxHQUFmLFVBQTRCLFFBQThCO1FBQTFELGlCQThDQztRQTdDRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFaEMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBcUMsRUFBRSxNQUE2QjtZQUVwRixVQUFVLENBQUM7Z0JBRVAsS0FBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsdUJBQXVCLEdBQUcsUUFBUSxDQUFDLFFBQVEsRUFBRSxFQUNqRSxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7Z0JBRTlCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ3hCLEtBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsOEJBQThCLEVBQ3RGLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztvQkFFOUIsS0FBSSxDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUNyQyxNQUFNLENBQUM7Z0JBQ1gsQ0FBQztnQkFFRCxJQUFNLGdCQUFnQixHQUFHLEtBQUks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R0FBcEMsVUFBaUQsUUFBOEI7UUFDM0UsR0FBRyxDQUFDLENBQWtCLFVBQWdCLEVBQWhCLEtBQUEsSUFBSSxDQUFDLFdBQVcsRUFBaEIsY0FBZ0IsRUFBaEIsSUFBZ0I7WUFBakMsSUFBTSxPQUFPLFNBQUE7WUFDZCxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUNuQixDQUFDO1NBQ0o7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTCxpQkFBQztBQUFELENBN0pBLEFBNkpDLElBQUE7QUE3SlksZ0NBQVUiLCJmaWxlIjoic3JjL2F0b20vZWRpdG9yLXRvb2xzL3JlY29uY2lsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIElMb2dnZXJcbn0gZnJvbSBcIi4vbG9nZ2VyXCI7XG5cbmltcG9ydCBQcm9taXNlQ29uc3RydWN0b3IgPSByZXF1aXJlKFwicHJvbWlzZS1wb2x5ZmlsbFwiKTtcbmlmICh0eXBlb2YgUHJvbWlzZSA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgKHdpbmRvdyBhcyBhbnkpLlByb21pc2UgPSBQcm9taXNlQ29uc3RydWN0b3I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUnVubmFibGU8UmVzdWx0VHlwZT4ge1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgdGhlIGFjdHVhbCBidXNpbmVzcyBsb2dpY3MuXG4gICAgICogU2hvdWxkIHJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiBmaW5pc2hlZC5cbiAgICAgKi9cbiAgICBydW4oKTogUHJvbWlzZTxSZXN1bHRUeXBlPjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdHdvIHJ1bm5hYmxlIGNvbmZsaWN0IHdpdGggZWFjaCBvdGhlci5cbiAgICAgKiBNdXN0IHdvcmsgZmFzdCBhcyBpdHMgY2FsbGVkIG9mdGVuLlxuICAgICAqIEBwYXJhbSBvdGhlclxuICAgICAqL1xuICAgIGNvbmZsaWN0cyhvdGhlcjogUnVubmFibGU8YW55Pik6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBydW5uYWJsZS4gcnVuKCkgbWV0aG9kIHNob3VsZCBkbyBub3RoaW5nIGlmIGxhdW5jaGVkIGxhdGVyLFxuICAgICAqIGlmIGNhbmNlbCBpcyBjYWxsZWQgZHVyaW5nIHRoZSBydW4oKSBtZXRob2QgZXhlY3V0aW9uLCBydW4oKSBzaG91bGQgc3RvcCBhcyBzb29uIGFzIGl0IGNhbi5cbiAgICAgKi9cbiAgICBjYW5jZWwoKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgY2FuY2VsKCkgbWV0aG9kIHdhcyBjYWxsZWQgYXQgbGVhc3Qgb25jZS5cbiAgICAgKi9cbiAgICBpc0NhbmNlbGVkKCk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBSZWNvbmNpbGVyIHtcblxuICAgIHByaXZhdGUgd2FpdGluZ0xpc3Q6IFJ1bm5hYmxlPGFueT5bXSA9IFtdO1xuICAgIHByaXZhdGUgcnVubmluZ0xpc3Q6IFJ1bm5hYmxlPGFueT5bXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBsb2dnZXI6IElMb2dnZXIsIHByaXZhdGUgdGltZW91dDogbnVtYmVyKSB7XG4gICAgfVxuXG4gICAgcHVibGljIHNjaGVkdWxlPFJlc3VsdFR5cGU+KHJ1bm5hYmxlOiBSdW5uYWJsZTxSZXN1bHRUeXBlPik6IFByb21pc2U8UmVzdWx0VHlwZT4ge1xuICAgICAgICB0aGlzLmFkZFRvV2FpdGluZ0xpc3QocnVubmFibGUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlPzogUmVzdWx0VHlwZSkgPT4gdm9pZCwgcmVqZWN0OiAoZXJyb3I/OiBhbnkpID0+IHZvaWQpID0+IHtcblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1Z0RldGFpbChcIlRpbWUgY2FtZSB0byBleGVjdXRlIFwiICsgcnVubmFibGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwic2NoZWR1bGVcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAocnVubmFibGUuaXNDYW5jZWxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiUnVubmFibGUgXCIgKyBydW5uYWJsZS50b1N0cmluZygpICsgXCIgaXMgY2FuY2VsbGVkLCBkb2luZyBub3RoaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlJlY29uY2lsZXJcIiwgXCJzY2hlZHVsZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21XYWl0aW5nTGlzdChydW5uYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50bHlSdW5uaW5nID0gdGhpcy5maW5kQ29uZmxpY3RpbmdJblJ1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBhbiBhZGRpdGlvbmFsIHNob3J0IHRpbWVvdXQgcGFyYW1ldGVyIHRvIGxhdW5jaCB0aGUgcmVzY2hlZHVsZVxuICAgICAgICAgICAgICAgICAgICAvLyBhdCB0aGUgZmluaXNoIG9mIHRoZSBjdXJyZW50bHkgcnVubmluZyB0YXNrIGZvciBhIHNob3J0IHRpbWUgYWZ0ZXIgaXQuXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWdEZXRhaWwoXCJDb25mbGljdGluZyB0byBcIiArIHJ1bm5hYmxlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgaXMgZm91bmQgaW4gdGhlIHJ1bm5pbmcgbGlzdDogXCIgKyBjdXJyZW50bHlSdW5uaW5nLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCIgcmVzY2hlZHVsaW5nIGN1cnJlbnQgb25lLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwic2NoZWR1bGVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZShydW5uYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21XYWl0aW5nTGlzdChydW5uYWJsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb1J1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiRXhlY3V0aW5nIFwiICsgcnVubmFibGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwic2NoZWR1bGVcIik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJ1bihydW5uYWJsZSkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdCkgPT4geyByZXNvbHZlKHJlc3VsdCk7IH0sXG4gICAgICAgICAgICAgICAgICAgIChlcnJvcikgPT4geyByZWplY3QoZXJyb3IpOyB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfSwgdGhpcy50aW1lb3V0KTtcblxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJ1bjxSZXN1bHRUeXBlPihydW5uYWJsZTogUnVubmFibGU8UmVzdWx0VHlwZT4pOiBQcm9taXNlPFJlc3VsdFR5cGU+IHtcblxuICAgICAgICByZXR1cm4gcnVubmFibGUucnVuKCkudGhlbihcblxuICAgICAgICAgICAgKHJlc3VsdCk6IFJlc3VsdFR5cGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVJ1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnJvcik6IFJlc3VsdFR5cGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVJ1bm5pbmdMaXN0KHJ1bm5hYmxlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgaXRlbSB0byB3YWl0aW5nIGxpc3QgYW5kIHJlbW92ZXMgYW55dGhpbmcgY3VycmVudGx5IGluIHRoZSBsaXN0LFxuICAgICAqIHdoaWNoIGNvbmZsaWN0cyB3aXRoIHRoZSBuZXcgaXRlbS5cbiAgICAgKiBAcGFyYW0gcnVubmFibGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFRvV2FpdGluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiQWRkaW5nIHJ1bm5hYmxlIFwiICsgcnVubmFibGUudG9TdHJpbmcoKSArIFwiIHRvIHdhaXRpbmcgbGlzdFwiLFxuICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwiYWRkVG9XYWl0aW5nTGlzdFwiKTtcblxuICAgICAgICB0aGlzLndhaXRpbmdMaXN0ID0gdGhpcy53YWl0aW5nTGlzdC5maWx0ZXIoKGN1cnJlbnQpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWdEZXRhaWwoXCJDb21wYXJpbmcgZXhpc3RpbmcgcnVubmFibGUgXCIgKyBjdXJyZW50LnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgICAgIFwiIHRvIHRoZSBuZXcgXCIgKyBydW5uYWJsZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIFwiUmVjb25jaWxlclwiLCBcImFkZFRvV2FpdGluZ0xpc3RcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbmZsaWN0cyA9IHJ1bm5hYmxlLmNvbmZsaWN0cyhjdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChjb25mbGljdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1Z0RldGFpbChcIlJ1bm5hYmxlcyBhcmUgY29uZmxpY3RpbmcsIGNhbmNlbGluZyBleGlzdGluZyBvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJSZWNvbmNpbGVyXCIsIFwiYWRkVG9XYWl0aW5nTGlzdFwiKTtcblxuICAgICAgICAgICAgICAgIGN1cnJlbnQuY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAhY29uZmxpY3RzO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLndhaXRpbmdMaXN0LnB1c2gocnVubmFibGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcnVubmFibGUgZnJvbSB0aGUgbGlzdCBvZiBydW5uaW5nIG9uZXMuXG4gICAgICogQHBhcmFtIHJ1bm5hYmxlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW1vdmVGcm9tV2FpdGluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiUmVtb3ZpbmcgXCIgKyBydW5uYWJsZS50b1N0cmluZygpXG4gICAgICAgICAgICArIFwiIGZyb20gd2FpdGluZyBsaXN0XCIsXG4gICAgICAgICAgICBcIlJlY29uY2lsZXJcIiwgXCJyZW1vdmVGcm9tV2FpdGluZ0xpc3RcIik7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndhaXRpbmdMaXN0LmluZGV4T2YocnVubmFibGUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLndhaXRpbmdMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHJ1bm5hYmxlIHRvIHRoZSBsaXN0IG9mIHJ1bm5pbmcgb25lcy5cbiAgICAgKiBAcGFyYW0gcnVubmFibGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFRvUnVubmluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiQWRkaW5nIFwiICsgcnVubmFibGUudG9TdHJpbmcoKVxuICAgICAgICAgICAgKyBcIiB0byBydW5uaW5nIGxpc3RcIixcbiAgICAgICAgICAgIFwiUmVjb25jaWxlclwiLCBcInJlbW92ZUZyb21XYWl0aW5nTGlzdFwiKTtcblxuICAgICAgICB0aGlzLnJ1bm5pbmdMaXN0LnB1c2gocnVubmFibGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcnVubmFibGUgZnJvbSB0aGUgbGlzdCBvZiBydW5uaW5nIG9uZXMuXG4gICAgICogQHBhcmFtIHJ1bm5hYmxlXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW1vdmVGcm9tUnVubmluZ0xpc3Q8UmVzdWx0VHlwZT4ocnVubmFibGU6IFJ1bm5hYmxlPFJlc3VsdFR5cGU+KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnRGV0YWlsKFwiUmVtb3ZpbmcgXCIgKyBydW5uYWJsZS50b1N0cmluZygpXG4gICAgICAgICAgICArIFwiIGZyb20gcnVubmluZyBsaXN0XCIsXG4gICAgICAgICAgICBcIlJlY29uY2lsZXJcIiwgXCJyZW1vdmVGcm9tV2FpdGluZ0xpc3RcIik7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnJ1bm5pbmdMaXN0LmluZGV4T2YocnVubmFibGUpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmdMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgZmlyc3QgY29uZmxpY3RpbmcgcnVubmFibGUgaW4gdGhlIGN1cnJlbnQgbGlzdC5cbiAgICAgKiBAcGFyYW0gcnVubmFibGVcbiAgICAgKiBAcmV0dXJucyB7YW55fVxuICAgICAqL1xuICAgIHByaXZhdGUgZmluZENvbmZsaWN0aW5nSW5SdW5uaW5nTGlzdDxSZXN1bHRUeXBlPihydW5uYWJsZTogUnVubmFibGU8UmVzdWx0VHlwZT4pOiBSdW5uYWJsZTxSZXN1bHRUeXBlPiB7XG4gICAgICAgIGZvciAoY29uc3QgY3VycmVudCBvZiB0aGlzLnJ1bm5pbmdMaXN0KSB7XG4gICAgICAgICAgICBpZiAocnVubmFibGUuY29uZmxpY3RzKGN1cnJlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/editor-tools/reconciler.js\n// module id = 18\n// module chunks = 0","module.exports = require(\"promise-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"promise-polyfill\"\n// module id = 19\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UI = require(\"atom-ui-lib\");\nvar SC = require(\"../util/ScrollViewUI\");\nvar CompositeDisposable = UI.CompositeDisposable;\n// import details2=require(\"./details2\")\n// import contextActions = require(\"raml-actions\")\n// import commonContextActions = require(\"../context-menu/commonContextActions\")\nvar editorTools = require(\"./editor-tools\");\n// import universeHelpers = rp.universeHelpers;\n// import ramlOutline = require(\"raml-outline\")\n// import outlineCommon = require(\"./outline-common\")\nvar ramlServer = require(\"raml-language-server\");\nfunction getActiveEditor() {\n    var activeEditor = atom.workspace.getActiveTextEditor();\n    if (activeEditor) {\n        return activeEditor;\n    }\n    if (editorTools.aquireManager())\n        return editorTools.aquireManager().getCurrentEditor();\n    return null;\n}\nexports.getActiveEditor = getActiveEditor;\nvar RamlOutline = /** @class */ (function (_super) {\n    __extends(RamlOutline, _super);\n    function RamlOutline() {\n        var _this = _super.call(this) || this;\n        _this.disposables = new CompositeDisposable();\n        _this.fire = true;\n        _this.createTree(null);\n        _this.addClass('raml-outline');\n        _this.addChild(_this._rs);\n        return _this;\n    }\n    RamlOutline.prototype.createTree = function (structure /*p: hl.IParseResult*/) {\n        var _this = this;\n        this._rs = createTree(structure, function (sender) {\n            if (sender.selection && sender.selection.elements && _this.fire == true) {\n                if (sender.selection.elements.length > 0 && sender.selection.elements[0]) {\n                    var activeEditor = getActiveEditor();\n                    var p1 = activeEditor.getBuffer().positionForCharacterIndex(sender.selection.elements[0].start);\n                    var p2 = activeEditor.getBuffer().positionForCharacterIndex(sender.selection.elements[0].end);\n                    activeEditor.setSelectedBufferRange({ start: p1, end: p2 }, {});\n                }\n            }\n        });\n        this._viewers = [];\n        if (structure)\n            this._viewers = [0, 1, 2, 3].map(function (i) { return _this._rs.get(i).content; });\n    };\n    RamlOutline.prototype.getTitle = function () { return \"Outline\"; };\n    RamlOutline.prototype.getNodePType = function (node) {\n        node.category;\n        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.ResourcesCategory])\n            return 0;\n        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.SchemasAndTypesCategory])\n            return 1;\n        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.ResourceTypesAndTraitsCategory])\n            return 2;\n        if (node.category == ramlServer.StructureCategories[ramlServer.StructureCategories.OtherCategory])\n            return 3;\n        return 3;\n    };\n    RamlOutline.prototype.setSelection = function (node) {\n        //if (this._selectedNode == node) return;\n        this._selectedNode = node;\n        this.fire = false;\n        try {\n            var index = this.getNodePType(node);\n            var viewer = this._viewers[index];\n            if (viewer != null) {\n                viewer.setSelection(node);\n                this._rs.setSelectedIndex(index);\n            }\n        }\n        finally {\n            this.fire = true;\n        }\n    };\n    RamlOutline.prototype.setUnit = function (unitPath /*unit:hl.IHighLevelNode*/, force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        if (this.unitPath && unitPath && unitPath != this.unitPath) {\n            this._children = [];\n        }\n        this.unitPath = unitPath;\n        var activeEditor = getActiveEditor();\n        ramlServer.getNodeClientConnection().documentChanged({\n            uri: unitPath,\n            text: activeEditor.getText()\n        });\n        var structurePromise = ramlServer.getNodeClientConnection().getStructure(unitPath);\n        if (structurePromise) {\n            structurePromise.then(function (structure) {\n                _this.createTree(structure);\n                _this.addClass('raml-outline');\n                _this._children = [];\n                _this.addChild(_this._rs);\n                _this.html(_this.innerRenderUI());\n            }).catch(function (error) {\n                //ignoring, the error is already reported to the log, and we dont need to display\n                //it to user in other way\n            });\n        }\n    };\n    RamlOutline.prototype.attach = function () {\n        if (!this._isAttached) {\n            var $this = $(this);\n            $this.html(this._rs.renderUI().outerHTML);\n            this._isAttached = true;\n        }\n    };\n    RamlOutline.prototype.forEachViewer = function (command) {\n        this._viewers.forEach(command);\n    };\n    RamlOutline.prototype.refresh = function () {\n        // var unit = this.unit;\n        // this.setUnit(null);\n        // this.setUnit(unit);\n        var unitPath = this.unitPath;\n        this.setUnit(null);\n        this.setUnit(unitPath);\n    };\n    RamlOutline.prototype.destroy = function () {\n        editorTools.aquireManager()._view = null;\n        // this._selectedNode=null;\n        // this.unit=null;\n        this.unitPath = null;\n        this._viewers = [];\n        this._rs = null;\n        this._children = [];\n        this.disposables.dispose();\n    };\n    return RamlOutline;\n}(SC.Scrollable));\nexports.RamlOutline = RamlOutline;\n/*\n *\n */\n// export function treeSection(input: hl.IParseResult,\n//                             name: string,\n//                             icon: UI.Icon,\n//                             filterFunc: (x:hl.IHighLevelNode)=>boolean,\n//                             l: UI.ISelectionListener<any>,\n//                             opener: (x:hl.IParseResult)=>void=null) : UI.TreePanel<any,any> {\n//\n//     var v = UI.treeViewerSection(name,icon,input,x=>getChildren(x).filter(x=>filterFunc(<hl.IHighLevelNode> x)),new HLRenderer(opener));\n//\n//     v.viewer.setBasicLabelFunction(x=>x ? x.name() : '');\n//     v.viewer.setKeyProvider({\n//         key:(p:hl.IParseResult):string=>{\n//             return \"\"+p.lowLevel().start();\n//         }\n//\n//     });\n//     v.viewer.addSelectionListener(l)\n//     return v;\n// }\nvar HLNodeType;\n(function (HLNodeType) {\n    HLNodeType[HLNodeType[\"Resource\"] = 0] = \"Resource\";\n    HLNodeType[HLNodeType[\"Schema\"] = 1] = \"Schema\";\n    HLNodeType[HLNodeType[\"Type\"] = 2] = \"Type\";\n    HLNodeType[HLNodeType[\"Trait\"] = 3] = \"Trait\";\n    HLNodeType[HLNodeType[\"Unknown\"] = 4] = \"Unknown\";\n})(HLNodeType || (HLNodeType = {}));\n// function getNodeType(node: hl.IHighLevelNode): HLNodeType {\n//     if (outlineCommon.isResource(node)) return HLNodeType.Resource;\n//     else if (outlineCommon.isOther(node)) return HLNodeType.Trait;\n//     else if (outlineCommon.isResourceTypeOrTrait(node)) return HLNodeType.Type;\n//     else if (outlineCommon.isSchemaOrType(node)) return HLNodeType.Schema;\n//     else return HLNodeType.Unknown;\n// }\n// function isApi(p: hl.IHighLevelNode) {\n//     var pc=p.definition().key();\n//     return pc===universes.Universe08.Api||pc===universes.Universe10.Api;\n// }\n// function isDocumentation(p: hl.IHighLevelNode) {\n//     var pc=p.definition().key();\n//     return ( pc=== universes.Universe08.DocumentationItem||pc===universes.Universe10.DocumentationItem);\n// }\nfunction fullStructurePath(model) {\n    if (!model)\n        return \"\";\n    return model.text;\n    // var node = model.getSource();\n    // return fullPath(<any>node);\n}\n//\n// function fullPath(node: hl.IParseResult) {\n//     if (node == null) return \"\";\n//     else return fullPath(node.parent()) + \"/\" + node.name();\n// }\nfunction simpleTree(input, selectionListener, categoryName, opener) {\n    if (opener === void 0) { opener = null; }\n    var viewer = UI.treeViewer(function (x) {\n        return x.children;\n    }, new HLRenderer(opener), fullStructurePath);\n    viewer.setBasicLabelFunction(function (x) { return x.text; });\n    viewer.setKeyProvider({ key: function (x) { return x.key; } });\n    viewer.addSelectionListener(selectionListener);\n    viewer.getBinding().set(input);\n    return viewer;\n}\nfunction createTree(structure, selectionListener, opener) {\n    if (opener === void 0) { opener = null; }\n    if (!structure) {\n        return new UI.TabFolder();\n    }\n    var resourcesModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.ResourcesCategory]];\n    var typesModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.SchemasAndTypesCategory]];\n    var traitsModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.ResourceTypesAndTraitsCategory]];\n    var otherModel = structure[ramlServer.StructureCategories[ramlServer.StructureCategories.OtherCategory]];\n    // var resourcesModel = p!=null?ramlOutline.getStructure(outlineCommon.ResourcesCategory):null;\n    // var typesModel = p!=null?ramlOutline.getStructure(outlineCommon.SchemasAndTypesCategory):null;\n    // var traitsModel = p!=null?ramlOutline.getStructure(outlineCommon.ResourceTypesAndTraitsCategory):null;\n    // var otherModel = p!=null?ramlOutline.getStructure(outlineCommon.OtherCategory):null;\n    var outline = resourcesModel != null ? simpleTree(resourcesModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.ResourcesCategory], opener) : null;\n    var schemas = typesModel != null ? simpleTree(typesModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.SchemasAndTypesCategory], opener) : null;\n    var types = traitsModel != null ? simpleTree(traitsModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.ResourceTypesAndTraitsCategory], opener) : null;\n    var other = otherModel != null ? simpleTree(otherModel, { selectionChanged: selectionListener }, ramlServer.StructureCategories[ramlServer.StructureCategories.OtherCategory], opener) : null;\n    var folder = new UI.TabFolder();\n    folder.add(\"Resources\", UI.Icon.SEARCH, outline, 'raml-icon-custom');\n    folder.add(\"Schemas&Types\", UI.Icon.SEARCH, schemas, 'raml-icon-custom');\n    folder.add(\"ResourceTypes&Traits\", UI.Icon.SEARCH, types, 'raml-icon-custom');\n    folder.add(\"Other\", UI.Icon.SEARCH, other, 'raml-icon-custom');\n    folder.setSelectedIndex(0);\n    folder.setOnSelected(function () {\n        var selectedTab = folder.selectedComponent();\n        if (selectedTab) {\n            var selection = selectedTab.getSelection();\n            if (selection && selection.elements && selection.elements.length > 0) {\n                selectionListener(new UI.SelectionChangedEvent(selectedTab, null, selection));\n            }\n            selectedTab.customizePanel(true);\n        }\n    });\n    return folder;\n}\nexports.createTree = createTree;\nvar HLRenderer = /** @class */ (function () {\n    function HLRenderer(opener) {\n        this.opener = opener;\n    }\n    HLRenderer.prototype.iconNameToIconEnum = function (iconName) {\n        if (!iconName)\n            return null;\n        return UI.Icon[iconName];\n    };\n    HLRenderer.prototype.textHighlightNameToTextClass = function (highlightName) {\n        if (!highlightName)\n            return null;\n        return UI.TextClasses[highlightName];\n    };\n    HLRenderer.prototype.render = function (model) {\n        try {\n            // if (ramlOutline.isTypedStructureNode(model)\n            //     && (<ramlOutline.TypedStructureNode>model).type\n            //     && (<ramlOutline.TypedStructureNode>model).type == ramlOutline.NodeType.ATTRIBUTE) {\n            //\n            //     var attr = <hl.IAttribute>(<any>model.getSource());\n            //\n            //     //TODO check if we really need custom selection here, otherwise the whole \"is attribute\" condition is redundant\n            //     return UI.hc(UI.label(model.text), UI.a(\"\", x=> {\n            //         var p1 = editorTools.aquireManager().getCurrentEditor().\n            //             getBuffer().positionForCharacterIndex(attr.lowLevel().start());\n            //         var p2 = editorTools.aquireManager().getCurrentEditor().\n            //             getBuffer().positionForCharacterIndex(attr.lowLevel().end());\n            //         editorTools.aquireManager().getCurrentEditor().setSelectedBufferRange({ start: p1, end: p1 }, {});\n            //\n            //     }, UI.Icon.ARROW_SMALL_LEFT, null, null));\n            //\n            // }\n            var icon = UI.Icon.DASH;\n            var highLight = UI.TextClasses.NORMAL;\n            if (this.iconNameToIconEnum(model.icon)) {\n                icon = this.iconNameToIconEnum(model.icon);\n            }\n            if (this.textHighlightNameToTextClass(model.textStyle)) {\n                highLight = this.textHighlightNameToTextClass(model.textStyle);\n            }\n            var extraText = \"\";\n            var extraClass = UI.TextClasses.NORMAL;\n            var hc = UI.hc(UI.label(model.text, icon, highLight));\n            if (model.typeText) {\n                hc.addChild(UI.label(model.typeText, UI.Icon.NONE, UI.TextClasses.WARNING).margin(2, 0, 0, 0));\n            }\n            // if (model.getSource().lowLevel().unit()!=model.getSource().root().lowLevel().unit()){\n            //     highLight=UI.TextClasses.SUBTLE;\n            //     hc.addChild(UI.label(\"(\"+model.getSource().lowLevel().unit().path()+\")\",UI.Icon.NONE,highLight).margin(5,0,0,0));\n            // }\n            hc.addClass(\"outline\");\n            return hc;\n        }\n        catch (e) {\n            console.log(e);\n            return UI.hc(UI.label(\"Illegal node\", UI.Icon.ARROW_SMALL_LEFT, null, null));\n        }\n    };\n    return HLRenderer;\n}());\nexports.HLRenderer = HLRenderer;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2VkaXRvci10b29scy9vdXRsaW5lLXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7Ozs7Ozs7Ozs7O0FBRW5ELGdDQUFnQztBQUNoQyx5Q0FBeUM7QUFHekMsSUFBTyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsbUJBQW1CLENBQUE7QUFRbkQsd0NBQXdDO0FBQ3hDLGtEQUFrRDtBQUNsRCxnRkFBZ0Y7QUFDaEYsNENBQTRDO0FBRzVDLCtDQUErQztBQUMvQywrQ0FBK0M7QUFDL0MscURBQXFEO0FBQ3JELGlEQUFvRDtBQUVwRDtJQUNJLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsQ0FBQTtJQUN2RCxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ2YsTUFBTSxDQUFDLFlBQVksQ0FBQTtJQUN2QixDQUFDO0lBRUQsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzVCLE1BQU0sQ0FBbUIsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUE7SUFFM0UsTUFBTSxDQUFDLElBQUksQ0FBQTtBQUNmLENBQUM7QUFWRCwwQ0FVQztBQUVEO0lBQWlDLCtCQUFhO0lBMEIxQztRQUFBLFlBQ0ksaUJBQU8sU0FLVjtRQUlELGlCQUFXLEdBQUcsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1FBSWhDLFVBQUksR0FBYSxJQUFJLENBQUM7UUFYMUIsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQixLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3JDLEtBQUksQ0FBQyxRQUFRLENBQUMsS0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztJQUM1QixDQUFDO0lBN0JPLGdDQUFVLEdBQWxCLFVBQW1CLFNBQWdFLENBQUEsc0JBQXNCO1FBQXpHLGlCQWtCQztRQWpCRyxJQUFJLENB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WUFFSixFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZCLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDZCxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZixNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLENBQUM7SUFDTCxDQUFDO0lBQ0wsaUJBQUM7QUFBRCxDQXZFQSxBQXVFQyxJQUFBO0FBdkVZLGdDQUFVIiwiZmlsZSI6InNyYy9hdG9tL2VkaXRvci10b29scy9vdXRsaW5lLXZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgVUk9cmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgU0M9cmVxdWlyZShcIi4uL3V0aWwvU2Nyb2xsVmlld1VJXCIpXG5pbXBvcnQgcGF0aD1yZXF1aXJlKCdwYXRoJylcbmltcG9ydCBEaXNwb3NhYmxlID0gVUkuSURpc3Bvc2FibGVcbmltcG9ydCBDb21wb3NpdGVEaXNwb3NhYmxlID0gVUkuQ29tcG9zaXRlRGlzcG9zYWJsZVxuXG4vLyBpbXBvcnQgcnA9cmVxdWlyZShcInJhbWwtMS1wYXJzZXJcIilcbi8vIGltcG9ydCBsb3dMZXZlbD1ycC5sbDtcbi8vIGltcG9ydCBobD1ycC5obDtcbi8vIHZhciB1bml2ZXJzZXM9cnAudW5pdmVyc2VzXG5cbmltcG9ydCBmcz1yZXF1aXJlKFwiZnNcIilcbi8vIGltcG9ydCBkZXRhaWxzMj1yZXF1aXJlKFwiLi9kZXRhaWxzMlwiKVxuLy8gaW1wb3J0IGNvbnRleHRBY3Rpb25zID0gcmVxdWlyZShcInJhbWwtYWN0aW9uc1wiKVxuLy8gaW1wb3J0IGNvbW1vbkNvbnRleHRBY3Rpb25zID0gcmVxdWlyZShcIi4uL2NvbnRleHQtbWVudS9jb21tb25Db250ZXh0QWN0aW9uc1wiKVxuaW1wb3J0IGVkaXRvclRvb2xzPXJlcXVpcmUoXCIuL2VkaXRvci10b29sc1wiKVxuaW1wb3J0IF89cmVxdWlyZShcInVuZGVyc2NvcmVcIilcbmltcG9ydCBwYWlyID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvcGFpclwiKTtcbi8vIGltcG9ydCB1bml2ZXJzZUhlbHBlcnMgPSBycC51bml2ZXJzZUhlbHBlcnM7XG4vLyBpbXBvcnQgcmFtbE91dGxpbmUgPSByZXF1aXJlKFwicmFtbC1vdXRsaW5lXCIpXG4vLyBpbXBvcnQgb3V0bGluZUNvbW1vbiA9IHJlcXVpcmUoXCIuL291dGxpbmUtY29tbW9uXCIpXG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZUVkaXRvcigpIHtcbiAgICB2YXIgYWN0aXZlRWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpXG4gICAgaWYgKGFjdGl2ZUVkaXRvcikge1xuICAgICAgICByZXR1cm4gYWN0aXZlRWRpdG9yXG4gICAgfVxuXG4gICAgaWYgKGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSlcbiAgICAgICAgcmV0dXJuIDxBdG9tQ29yZS5JRWRpdG9yPmVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKClcblxuICAgIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBjbGFzcyBSYW1sT3V0bGluZSBleHRlbmRzIFNDLlNjcm9sbGFibGUge1xuICAgIHByaXZhdGUgX3JzOiBVSS5UYWJGb2xkZXI7XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRyZWUoc3RydWN0dXJlOntbY2F0ZWdvcnlOYW1lOiBzdHJpbmddOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OfS8qcDogaGwuSVBhcnNlUmVzdWx0Ki8pIHtcbiAgICAgICAgdGhpcy5fcnMgPSBjcmVhdGVUcmVlKHN0cnVjdHVyZSwgc2VuZGVyID0+IHtcbiAgICAgICAgICAgIGlmKHNlbmRlci5zZWxlY3Rpb24gJiYgc2VuZGVyLnNlbGVjdGlvbi5lbGVtZW50cyAmJiB0aGlzLmZpcmUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlci5zZWxlY3Rpb24uZWxlbWVudHMubGVuZ3RoPjAmJnNlbmRlci5zZWxlY3Rpb24uZWxlbWVudHNbMF0pIHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRWRpdG9yID0gZ2V0QWN0aXZlRWRpdG9yKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHAxID0gYWN0aXZlRWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgoc2VuZGVyLnNlbGVjdGlvbi5lbGVtZW50c1swXS5zdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwMiA9IGFjdGl2ZUVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KHNlbmRlci5zZWxlY3Rpb24uZWxlbWVudHNbMF0uZW5kKTtcblxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFZGl0b3Iuc2V0U2VsZWN0ZWRCdWZmZXJSYW5nZSh7c3RhcnQ6IHAxLCBlbmQ6IHAyfSwge30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3ZpZXdlcnMgPSBbXTtcblxuICAgICAgICBpZiAoc3RydWN0dXJlKVxuICAgICAgICAgICAgdGhpcy5fdmlld2VycyA9IFswLCAxLCAyLCAzXS5tYXAoaT0+IDxVSS5UcmVlVmlld2VyPGFueSwgYW55Pj4gdGhpcy5fcnMuZ2V0KGkpLmNvbnRlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3ZpZXdlcnM6IFVJLlRyZWVWaWV3ZXI8YW55LGFueT5bXTtcbiAgICBwcml2YXRlIG91dGxpbmVEYXRhUm9vdCA6IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT047XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVRyZWUobnVsbCk7XG4gICAgICAgICg8YW55PnRoaXMpLmFkZENsYXNzKCdyYW1sLW91dGxpbmUnKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLl9ycyk7XG4gICAgfVxuXG4gICAgZ2V0VGl0bGUoKSB7IHJldHVybiBcIk91dGxpbmVcIjsgfVxuXG4gICAgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgX2lzQXR0YWNoZWQgOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBmaXJlIDogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBwcml2YXRlIGdldE5vZGVQVHlwZShub2RlOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKSB7XG4gICAgICAgIG5vZGUuY2F0ZWdvcnlcblxuICAgICAgICBpZiAobm9kZS5jYXRlZ29yeSA9PSByYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLlJlc291cmNlc0NhdGVnb3J5XSkgcmV0dXJuIDA7XG4gICAgICAgIGlmIChub2RlLmNhdGVnb3J5ID09IHJhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllc1tyYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXMuU2NoZW1hc0FuZFR5cGVzQ2F0ZWdvcnldKSByZXR1cm4gMTtcbiAgICAgICAgaWYgKG5vZGUuY2F0ZWdvcnkgPT0gcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZVR5cGVzQW5kVHJhaXRzQ2F0ZWdvcnldKSByZXR1cm4gMjtcbiAgICAgICAgaWYgKG5vZGUuY2F0ZWdvcnkgPT0gcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5PdGhlckNhdGVnb3J5XSkgcmV0dXJuIDM7XG5cbiAgICAgICAgcmV0dXJuIDM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWROb2RlOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OO1xuXG4gICAgc2V0U2VsZWN0aW9uKG5vZGU6IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04pIHtcbiAgICAgICAgLy9pZiAodGhpcy5fc2VsZWN0ZWROb2RlID09IG5vZGUpIHJldHVybjtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWROb2RlID0gbm9kZTtcblxuICAgICAgICB0aGlzLmZpcmUgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Tm9kZVBUeXBlKG5vZGUpO1xuICAgICAgICAgICAgdmFyIHZpZXdlciA9IHRoaXMuX3ZpZXdlcnNbaW5kZXhdO1xuXG4gICAgICAgICAgICBpZiAodmlld2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2aWV3ZXIuc2V0U2VsZWN0aW9uKG5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JzLnNldFNlbGVjdGVkSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmZpcmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gdW5pdDogaGwuSUhpZ2hMZXZlbE5vZGU7XG5cbiAgICB1bml0UGF0aDogc3RyaW5nO1xuXG4gICAgc2V0VW5pdCh1bml0UGF0aDogc3RyaW5nLyp1bml0OmhsLklIaWdoTGV2ZWxOb2RlKi8sIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMudW5pdFBhdGggJiYgdW5pdFBhdGggJiYgdW5pdFBhdGggIT0gdGhpcy51bml0UGF0aCkge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVuaXRQYXRoID0gdW5pdFBhdGg7XG5cbiAgICAgICAgbGV0IGFjdGl2ZUVkaXRvciA9IGdldEFjdGl2ZUVkaXRvcigpO1xuXG4gICAgICAgIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5kb2N1bWVudENoYW5nZWQoe1xuICAgICAgICAgICAgdXJpOiB1bml0UGF0aCxcbiAgICAgICAgICAgIHRleHQ6IGFjdGl2ZUVkaXRvci5nZXRUZXh0KClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHN0cnVjdHVyZVByb21pc2UgPSByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZ2V0U3RydWN0dXJlKHVuaXRQYXRoKTtcbiAgICAgICAgaWYgKHN0cnVjdHVyZVByb21pc2UpIHtcbiAgICAgICAgICAgIHN0cnVjdHVyZVByb21pc2UudGhlbihzdHJ1Y3R1cmU9PntcblxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVHJlZShzdHJ1Y3R1cmUpO1xuXG4gICAgICAgICAgICAgICAgKDxhbnk+dGhpcykuYWRkQ2xhc3MoJ3JhbWwtb3V0bGluZScpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLl9ycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sKHRoaXMuaW5uZXJSZW5kZXJVSSgpKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57XG4gICAgICAgICAgICAgICAgLy9pZ25vcmluZywgdGhlIGVycm9yIGlzIGFscmVhZHkgcmVwb3J0ZWQgdG8gdGhlIGxvZywgYW5kIHdlIGRvbnQgbmVlZCB0byBkaXNwbGF5XG4gICAgICAgICAgICAgICAgLy9pdCB0byB1c2VyIGluIG90aGVyIHdheVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgYXR0YWNoKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAkdGhpcy5odG1sKHRoaXMuX3JzLnJlbmRlclVJKCkub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yRWFjaFZpZXdlcihjb21tYW5kOiAodmlld2VyOiBVSS5UcmVlVmlld2VyPGFueSwgYW55PikgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl92aWV3ZXJzLmZvckVhY2goY29tbWFuZCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgLy8gdmFyIHVuaXQgPSB0aGlzLnVuaXQ7XG4gICAgICAgIC8vIHRoaXMuc2V0VW5pdChudWxsKTtcbiAgICAgICAgLy8gdGhpcy5zZXRVbml0KHVuaXQpO1xuXG4gICAgICAgIHZhciB1bml0UGF0aCA9IHRoaXMudW5pdFBhdGg7XG4gICAgICAgIHRoaXMuc2V0VW5pdChudWxsKTtcbiAgICAgICAgdGhpcy5zZXRVbml0KHVuaXRQYXRoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95ICgpOiB2b2lkIHtcbiAgICAgICAgZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLl92aWV3PW51bGw7XG4gICAgICAgIC8vIHRoaXMuX3NlbGVjdGVkTm9kZT1udWxsO1xuICAgICAgICAvLyB0aGlzLnVuaXQ9bnVsbDtcbiAgICAgICAgdGhpcy51bml0UGF0aCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ZpZXdlcnM9W107XG4gICAgICAgIHRoaXMuX3JzPW51bGxcbiAgICAgICAgdGhpcy5fY2hpbGRyZW49W107XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpXG4gICAgfVxufVxuXG4vKlxuICpcbiAqL1xuLy8gZXhwb3J0IGZ1bmN0aW9uIHRyZWVTZWN0aW9uKGlucHV0OiBobC5JUGFyc2VSZXN1bHQsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RyaW5nLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IFVJLkljb24sXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyRnVuYzogKHg6aGwuSUhpZ2hMZXZlbE5vZGUpPT5ib29sZWFuLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGw6IFVJLklTZWxlY3Rpb25MaXN0ZW5lcjxhbnk+LFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lcjogKHg6aGwuSVBhcnNlUmVzdWx0KT0+dm9pZD1udWxsKSA6IFVJLlRyZWVQYW5lbDxhbnksYW55PiB7XG4vL1xuLy8gICAgIHZhciB2ID0gVUkudHJlZVZpZXdlclNlY3Rpb24obmFtZSxpY29uLGlucHV0LHg9PmdldENoaWxkcmVuKHgpLmZpbHRlcih4PT5maWx0ZXJGdW5jKDxobC5JSGlnaExldmVsTm9kZT4geCkpLG5ldyBITFJlbmRlcmVyKG9wZW5lcikpO1xuLy9cbi8vICAgICB2LnZpZXdlci5zZXRCYXNpY0xhYmVsRnVuY3Rpb24oeD0+eCA/IHgubmFtZSgpIDogJycpO1xuLy8gICAgIHYudmlld2VyLnNldEtleVByb3ZpZGVyKHtcbi8vICAgICAgICAga2V5OihwOmhsLklQYXJzZVJlc3VsdCk6c3RyaW5nPT57XG4vLyAgICAgICAgICAgICByZXR1cm4gXCJcIitwLmxvd0xldmVsKCkuc3RhcnQoKTtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICB9KTtcbi8vICAgICB2LnZpZXdlci5hZGRTZWxlY3Rpb25MaXN0ZW5lcihsKVxuLy8gICAgIHJldHVybiB2O1xuLy8gfVxuXG5lbnVtIEhMTm9kZVR5cGUge1xuICAgIFJlc291cmNlLFxuICAgIFNjaGVtYSxcbiAgICBUeXBlLFxuICAgIFRyYWl0LFxuICAgIFVua25vd25cbn1cblxuLy8gZnVuY3Rpb24gZ2V0Tm9kZVR5cGUobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUpOiBITE5vZGVUeXBlIHtcbi8vICAgICBpZiAob3V0bGluZUNvbW1vbi5pc1Jlc291cmNlKG5vZGUpKSByZXR1cm4gSExOb2RlVHlwZS5SZXNvdXJjZTtcbi8vICAgICBlbHNlIGlmIChvdXRsaW5lQ29tbW9uLmlzT3RoZXIobm9kZSkpIHJldHVybiBITE5vZGVUeXBlLlRyYWl0O1xuLy8gICAgIGVsc2UgaWYgKG91dGxpbmVDb21tb24uaXNSZXNvdXJjZVR5cGVPclRyYWl0KG5vZGUpKSByZXR1cm4gSExOb2RlVHlwZS5UeXBlO1xuLy8gICAgIGVsc2UgaWYgKG91dGxpbmVDb21tb24uaXNTY2hlbWFPclR5cGUobm9kZSkpIHJldHVybiBITE5vZGVUeXBlLlNjaGVtYTtcbi8vICAgICBlbHNlIHJldHVybiBITE5vZGVUeXBlLlVua25vd247XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGlzQXBpKHA6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgdmFyIHBjPXAuZGVmaW5pdGlvbigpLmtleSgpO1xuLy8gICAgIHJldHVybiBwYz09PXVuaXZlcnNlcy5Vbml2ZXJzZTA4LkFwaXx8cGM9PT11bml2ZXJzZXMuVW5pdmVyc2UxMC5BcGk7XG4vLyB9XG4vLyBmdW5jdGlvbiBpc0RvY3VtZW50YXRpb24ocDogaGwuSUhpZ2hMZXZlbE5vZGUpIHtcbi8vICAgICB2YXIgcGM9cC5kZWZpbml0aW9uKCkua2V5KCk7XG4vLyAgICAgcmV0dXJuICggcGM9PT0gdW5pdmVyc2VzLlVuaXZlcnNlMDguRG9jdW1lbnRhdGlvbkl0ZW18fHBjPT09dW5pdmVyc2VzLlVuaXZlcnNlMTAuRG9jdW1lbnRhdGlvbkl0ZW0pO1xuLy8gfVxuXG5mdW5jdGlvbiBmdWxsU3RydWN0dXJlUGF0aChtb2RlbDogcmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTikge1xuICAgIGlmICghbW9kZWwpIHJldHVybiBcIlwiO1xuXG4gICAgcmV0dXJuIG1vZGVsLnRleHQ7XG4gICAgLy8gdmFyIG5vZGUgPSBtb2RlbC5nZXRTb3VyY2UoKTtcbiAgICAvLyByZXR1cm4gZnVsbFBhdGgoPGFueT5ub2RlKTtcbn1cbi8vXG4vLyBmdW5jdGlvbiBmdWxsUGF0aChub2RlOiBobC5JUGFyc2VSZXN1bHQpIHtcbi8vICAgICBpZiAobm9kZSA9PSBudWxsKSByZXR1cm4gXCJcIjtcbi8vICAgICBlbHNlIHJldHVybiBmdWxsUGF0aChub2RlLnBhcmVudCgpKSArIFwiL1wiICsgbm9kZS5uYW1lKCk7XG4vLyB9XG5cbmZ1bmN0aW9uIHNpbXBsZVRyZWUoaW5wdXQ6IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04sIHNlbGVjdGlvbkxpc3RlbmVyOiBVSS5JU2VsZWN0aW9uTGlzdGVuZXI8YW55PiwgY2F0ZWdvcnlOYW1lOnN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lcjogKHg6cmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTik9PnZvaWQ9bnVsbCkge1xuICAgIHZhciB2aWV3ZXIgPSBVSS50cmVlVmlld2VyPHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04+KCh4OnJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04pPT57XG4gICAgICAgIHJldHVybiA8cmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTltdPnguY2hpbGRyZW47XG4gICAgfSwgbmV3IEhMUmVuZGVyZXIob3BlbmVyKSwgZnVsbFN0cnVjdHVyZVBhdGgpO1xuXG4gICAgdmlld2VyLnNldEJhc2ljTGFiZWxGdW5jdGlvbih4PT54LnRleHQpO1xuICAgIHZpZXdlci5zZXRLZXlQcm92aWRlcih7IGtleTogKHg6cmFtbFNlcnZlci5TdHJ1Y3R1cmVOb2RlSlNPTik9PntyZXR1cm4geC5rZXl9IH0pO1xuICAgIHZpZXdlci5hZGRTZWxlY3Rpb25MaXN0ZW5lcihzZWxlY3Rpb25MaXN0ZW5lcik7XG5cbiAgICB2aWV3ZXIuZ2V0QmluZGluZygpLnNldChpbnB1dCk7XG5cbiAgICByZXR1cm4gdmlld2VyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJlZShzdHJ1Y3R1cmU6e1tjYXRlZ29yeU5hbWU6IHN0cmluZ106IHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT059LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uTGlzdGVuZXI6IChlIDogVUkuU2VsZWN0aW9uQ2hhbmdlZEV2ZW50PGFueT4pID0+IHZvaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuZXI6ICh4OiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKSA9PiB2b2lkID0gbnVsbCkge1xuXG4gICAgaWYgKCFzdHJ1Y3R1cmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSS5UYWJGb2xkZXIoKTtcbiAgICB9XG5cbiAgICB2YXIgcmVzb3VyY2VzTW9kZWwgPSBzdHJ1Y3R1cmVbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZXNDYXRlZ29yeV1dO1xuICAgIHZhciB0eXBlc01vZGVsID0gc3RydWN0dXJlW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllc1tyYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXMuU2NoZW1hc0FuZFR5cGVzQ2F0ZWdvcnldXTtcbiAgICB2YXIgdHJhaXRzTW9kZWwgPSBzdHJ1Y3R1cmVbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZVR5cGVzQW5kVHJhaXRzQ2F0ZWdvcnldXTtcbiAgICB2YXIgb3RoZXJNb2RlbCA9IHN0cnVjdHVyZVtyYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLk90aGVyQ2F0ZWdvcnldXTtcblxuICAgIC8vIHZhciByZXNvdXJjZXNNb2RlbCA9IHAhPW51bGw/cmFtbE91dGxpbmUuZ2V0U3RydWN0dXJlKG91dGxpbmVDb21tb24uUmVzb3VyY2VzQ2F0ZWdvcnkpOm51bGw7XG4gICAgLy8gdmFyIHR5cGVzTW9kZWwgPSBwIT1udWxsP3JhbWxPdXRsaW5lLmdldFN0cnVjdHVyZShvdXRsaW5lQ29tbW9uLlNjaGVtYXNBbmRUeXBlc0NhdGVnb3J5KTpudWxsO1xuICAgIC8vIHZhciB0cmFpdHNNb2RlbCA9IHAhPW51bGw/cmFtbE91dGxpbmUuZ2V0U3RydWN0dXJlKG91dGxpbmVDb21tb24uUmVzb3VyY2VUeXBlc0FuZFRyYWl0c0NhdGVnb3J5KTpudWxsO1xuICAgIC8vIHZhciBvdGhlck1vZGVsID0gcCE9bnVsbD9yYW1sT3V0bGluZS5nZXRTdHJ1Y3R1cmUob3V0bGluZUNvbW1vbi5PdGhlckNhdGVnb3J5KTpudWxsO1xuXG4gICAgdmFyIG91dGxpbmUgPSByZXNvdXJjZXNNb2RlbCE9bnVsbD8gc2ltcGxlVHJlZShyZXNvdXJjZXNNb2RlbCwgeyBzZWxlY3Rpb25DaGFuZ2VkOiBzZWxlY3Rpb25MaXN0ZW5lciB9LFxuICAgICAgICAgICAgcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5SZXNvdXJjZXNDYXRlZ29yeV0sIG9wZW5lcik6bnVsbDtcbiAgICB2YXIgc2NoZW1hcyA9IHR5cGVzTW9kZWwhPW51bGw/IHNpbXBsZVRyZWUodHlwZXNNb2RlbCwgeyBzZWxlY3Rpb25DaGFuZ2VkOiBzZWxlY3Rpb25MaXN0ZW5lciB9LFxuICAgICAgICAgICAgcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzW3JhbWxTZXJ2ZXIuU3RydWN0dXJlQ2F0ZWdvcmllcy5TY2hlbWFzQW5kVHlwZXNDYXRlZ29yeV0sIG9wZW5lcik6bnVsbDtcbiAgICB2YXIgdHlwZXMgICA9IHRyYWl0c01vZGVsIT1udWxsPyBzaW1wbGVUcmVlKHRyYWl0c01vZGVsLCB7IHNlbGVjdGlvbkNoYW5nZWQ6IHNlbGVjdGlvbkxpc3RlbmVyIH0sXG4gICAgICAgICAgICByYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLlJlc291cmNlVHlwZXNBbmRUcmFpdHNDYXRlZ29yeV0sIG9wZW5lcik6bnVsbDtcbiAgICB2YXIgb3RoZXIgID0gb3RoZXJNb2RlbCE9bnVsbD8gc2ltcGxlVHJlZShvdGhlck1vZGVsLCB7IHNlbGVjdGlvbkNoYW5nZWQ6IHNlbGVjdGlvbkxpc3RlbmVyIH0sXG4gICAgICAgICAgICByYW1sU2VydmVyLlN0cnVjdHVyZUNhdGVnb3JpZXNbcmFtbFNlcnZlci5TdHJ1Y3R1cmVDYXRlZ29yaWVzLk90aGVyQ2F0ZWdvcnldLCBvcGVuZXIpOm51bGw7XG5cbiAgICB2YXIgZm9sZGVyID0gbmV3IFVJLlRhYkZvbGRlcigpO1xuXG4gICAgZm9sZGVyLmFkZChcIlJlc291cmNlc1wiLFxuICAgICAgICBVSS5JY29uLlNFQVJDSCwgb3V0bGluZSwgJ3JhbWwtaWNvbi1jdXN0b20nKTtcbiAgICBmb2xkZXIuYWRkKFwiU2NoZW1hcyZUeXBlc1wiLFxuICAgICAgICBVSS5JY29uLlNFQVJDSCwgc2NoZW1hcywgJ3JhbWwtaWNvbi1jdXN0b20nKTtcbiAgICBmb2xkZXIuYWRkKFwiUmVzb3VyY2VUeXBlcyZUcmFpdHNcIixcbiAgICAgICAgVUkuSWNvbi5TRUFSQ0gsIHR5cGVzLCAncmFtbC1pY29uLWN1c3RvbScpO1xuICAgIGZvbGRlci5hZGQoXCJPdGhlclwiLFxuICAgICAgICBVSS5JY29uLlNFQVJDSCwgb3RoZXIsICdyYW1sLWljb24tY3VzdG9tJyk7XG5cbiAgICBmb2xkZXIuc2V0U2VsZWN0ZWRJbmRleCgwKVxuXG4gICAgZm9sZGVyLnNldE9uU2VsZWN0ZWQoKCk9PntcbiAgICAgICAgdmFyIHNlbGVjdGVkVGFiIDogYW55ID0gZm9sZGVyLnNlbGVjdGVkQ29tcG9uZW50KCk7XG4gICAgICAgIGlmIChzZWxlY3RlZFRhYikge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHNlbGVjdGVkVGFiLmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24uZWxlbWVudHMgJiYgc2VsZWN0aW9uLmVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25MaXN0ZW5lcihuZXcgVUkuU2VsZWN0aW9uQ2hhbmdlZEV2ZW50KHNlbGVjdGVkVGFiLCBudWxsLCBzZWxlY3Rpb24pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZWN0ZWRUYWIuY3VzdG9taXplUGFuZWwodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBmb2xkZXI7XG59XG5cblxuZXhwb3J0IGNsYXNzIEhMUmVuZGVyZXIgaW1wbGVtZW50cyBVSS5JQ2VsbFJlbmRlcmVyPHJhbWxTZXJ2ZXIuU3RydWN0dXJlTm9kZUpTT04+e1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBvcGVuZXI6ICh4OiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKSA9PiB2b2lkKSB7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIGljb25OYW1lVG9JY29uRW51bShpY29uTmFtZSA6IHN0cmluZykgOiBVSS5JY29uIHtcbiAgICAgICAgaWYgKCFpY29uTmFtZSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIFVJLkljb25baWNvbk5hbWVdO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGV4dEhpZ2hsaWdodE5hbWVUb1RleHRDbGFzcyhoaWdobGlnaHROYW1lIDogc3RyaW5nKSA6IFVJLlRleHRDbGFzc2VzIHtcbiAgICAgICAgaWYgKCFoaWdobGlnaHROYW1lKSByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gVUkuVGV4dENsYXNzZXNbaGlnaGxpZ2h0TmFtZV07XG4gICAgfVxuXG4gICAgcmVuZGVyKG1vZGVsOiByYW1sU2VydmVyLlN0cnVjdHVyZU5vZGVKU09OKTogVUkuQmFzaWNDb21wb25lbnQ8YW55PiB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIC8vIGlmIChyYW1sT3V0bGluZS5pc1R5cGVkU3RydWN0dXJlTm9kZShtb2RlbClcbiAgICAgICAgICAgIC8vICAgICAmJiAoPHJhbWxPdXRsaW5lLlR5cGVkU3RydWN0dXJlTm9kZT5tb2RlbCkudHlwZVxuICAgICAgICAgICAgLy8gICAgICYmICg8cmFtbE91dGxpbmUuVHlwZWRTdHJ1Y3R1cmVOb2RlPm1vZGVsKS50eXBlID09IHJhbWxPdXRsaW5lLk5vZGVUeXBlLkFUVFJJQlVURSkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICB2YXIgYXR0ciA9IDxobC5JQXR0cmlidXRlPig8YW55Pm1vZGVsLmdldFNvdXJjZSgpKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgLy9UT0RPIGNoZWNrIGlmIHdlIHJlYWxseSBuZWVkIGN1c3RvbSBzZWxlY3Rpb24gaGVyZSwgb3RoZXJ3aXNlIHRoZSB3aG9sZSBcImlzIGF0dHJpYnV0ZVwiIGNvbmRpdGlvbiBpcyByZWR1bmRhbnRcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gVUkuaGMoVUkubGFiZWwobW9kZWwudGV4dCksIFVJLmEoXCJcIiwgeD0+IHtcbiAgICAgICAgICAgIC8vICAgICAgICAgdmFyIHAxID0gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldEN1cnJlbnRFZGl0b3IoKS5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgoYXR0ci5sb3dMZXZlbCgpLnN0YXJ0KCkpO1xuICAgICAgICAgICAgLy8gICAgICAgICB2YXIgcDIgPSBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpLlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChhdHRyLmxvd0xldmVsKCkuZW5kKCkpO1xuICAgICAgICAgICAgLy8gICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpLnNldFNlbGVjdGVkQnVmZmVyUmFuZ2UoeyBzdGFydDogcDEsIGVuZDogcDEgfSwge30pO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICB9LCBVSS5JY29uLkFSUk9XX1NNQUxMX0xFRlQsIG51bGwsIG51bGwpKTtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIHZhciBpY29uID0gVUkuSWNvbi5EQVNIO1xuICAgICAgICAgICAgdmFyIGhpZ2hMaWdodCA9IFVJLlRleHRDbGFzc2VzLk5PUk1BTDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaWNvbk5hbWVUb0ljb25FbnVtKG1vZGVsLmljb24pKSB7XG4gICAgICAgICAgICAgICAgaWNvbiA9IHRoaXMuaWNvbk5hbWVUb0ljb25FbnVtKG1vZGVsLmljb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0SGlnaGxpZ2h0TmFtZVRvVGV4dENsYXNzKG1vZGVsLnRleHRTdHlsZSkpIHtcbiAgICAgICAgICAgICAgICBoaWdoTGlnaHQgPSB0aGlzLnRleHRIaWdobGlnaHROYW1lVG9UZXh0Q2xhc3MobW9kZWwudGV4dFN0eWxlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGV4dHJhVGV4dD1cIlwiO1xuICAgICAgICAgICAgdmFyIGV4dHJhQ2xhc3M9VUkuVGV4dENsYXNzZXMuTk9STUFMO1xuXG4gICAgICAgICAgICB2YXIgaGM9VUkuaGMoVUkubGFiZWwobW9kZWwudGV4dCwgaWNvbiwgaGlnaExpZ2h0KSlcblxuICAgICAgICAgICAgaWYgKG1vZGVsLnR5cGVUZXh0KXtcbiAgICAgICAgICAgICAgICBoYy5hZGRDaGlsZChVSS5sYWJlbChtb2RlbC50eXBlVGV4dCwgVUkuSWNvbi5OT05FLCBVSS5UZXh0Q2xhc3Nlcy5XQVJOSU5HKS5tYXJnaW4oMiwwLDAsMCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiAobW9kZWwuZ2V0U291cmNlKCkubG93TGV2ZWwoKS51bml0KCkhPW1vZGVsLmdldFNvdXJjZSgpLnJvb3QoKS5sb3dMZXZlbCgpLnVuaXQoKSl7XG4gICAgICAgICAgICAvLyAgICAgaGlnaExpZ2h0PVVJLlRleHRDbGFzc2VzLlNVQlRMRTtcbiAgICAgICAgICAgIC8vICAgICBoYy5hZGRDaGlsZChVSS5sYWJlbChcIihcIittb2RlbC5nZXRTb3VyY2UoKS5sb3dMZXZlbCgpLnVuaXQoKS5wYXRoKCkrXCIpXCIsVUkuSWNvbi5OT05FLGhpZ2hMaWdodCkubWFyZ2luKDUsMCwwLDApKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgaGMuYWRkQ2xhc3MoXCJvdXRsaW5lXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGhjO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIHJldHVybiBVSS5oYyhVSS5sYWJlbChcIklsbGVnYWwgbm9kZVwiLCBVSS5JY29uLkFSUk9XX1NNQUxMX0xFRlQsIG51bGwsIG51bGwpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/editor-tools/outline-view.js\n// module id = 20\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ramlServer = require(\"raml-language-server\");\nfunction markOccurences(editor, occurences) {\n    var layer = getOccurencesLayer(editor);\n    layer.clear();\n    occurences.forEach(function (occurence) {\n        layer.markBufferRange(occurence);\n    });\n    editor.decorateMarkerLayer(layer, {\n        type: 'highlight',\n        class: 'raml-occurence'\n    });\n}\nexports.markOccurences = markOccurences;\nfunction clearOccurences(editor) {\n    var layer = getOccurencesLayer(editor);\n    layer.clear();\n}\nexports.clearOccurences = clearOccurences;\nfunction getOccurencesLayer(editor) {\n    var layerId = editor.occurencesLayerId;\n    var layer = layerId && editor.getMarkerLayer(layerId);\n    if (!layer) {\n        layer = editor.addMarkerLayer();\n    }\n    editor.occurencesLayerId = layer.id;\n    return layer;\n}\nvar MarkOccurrenceRunnable = /** @class */ (function () {\n    function MarkOccurrenceRunnable(editor, position) {\n        this.editor = editor;\n        this.position = position;\n        this.cancelled = false;\n        this.offset = editor.getBuffer().characterIndexForPosition(position);\n    }\n    /**\n     * Performs the actual business logics.\n     * Should resolve the promise when finished.\n     */\n    MarkOccurrenceRunnable.prototype.run = function () {\n        var _this = this;\n        return ramlServer.getNodeClientConnection().markOccurrences(this.getMarkOccurrencesPath(), this.offset)\n            .then(function (ranges) {\n            var currentPosition = _this.editor.getCursorBufferPosition();\n            if (currentPosition.row != _this.position.row || currentPosition.column != _this.position.column) {\n                //data is outdated\n                return;\n            }\n            var bufferRanges = ranges.map(function (range) {\n                return {\n                    start: _this.editor.getBuffer().positionForCharacterIndex(range.start),\n                    end: _this.editor.getBuffer().positionForCharacterIndex(range.end),\n                };\n            });\n            markOccurences(_this.editor, bufferRanges);\n        });\n    };\n    /**\n     * Performs the actual business logics synchronously.\n     */\n    MarkOccurrenceRunnable.prototype.runSynchronously = function () {\n    };\n    /**\n     * Whether two runnable conflict with each other.\n     * Must work fast as its called often.\n     * @param other\n     */\n    MarkOccurrenceRunnable.prototype.conflicts = function (other) {\n        if (!other.getMarkOccurrencesPath)\n            return false;\n        var otherPath = other.getMarkOccurrencesPath();\n        return this.getMarkOccurrencesPath() == otherPath;\n    };\n    /**\n     * Cancels the runnable. run() method should do nothing if launched later,\n     * if cancel is called during the run() method execution, run() should stop as soon as it can.\n     */\n    MarkOccurrenceRunnable.prototype.cancel = function () {\n        this.cancelled = true;\n    };\n    /**\n     * Whether cancel() method was called at least once.\n     */\n    MarkOccurrenceRunnable.prototype.isCanceled = function () {\n        return this.cancelled;\n    };\n    MarkOccurrenceRunnable.prototype.getMarkOccurrencesPath = function () {\n        return this.editor.getPath();\n    };\n    return MarkOccurrenceRunnable;\n}());\nexports.MarkOccurrenceRunnable = MarkOccurrenceRunnable;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvbWFya09jY3VyZW5jZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7QUFHbkQsaURBQW9EO0FBRXBELHdCQUErQixNQUF3QixFQUFFLFVBQXdCO0lBQzdFLElBQUksS0FBSyxHQUFRLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRTVDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUVkLFVBQVUsQ0FBQyxPQUFPLENBQUMsVUFBQSxTQUFTO1FBQ3hCLEtBQUssQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckMsQ0FBQyxDQUFDLENBQUM7SUFFRyxNQUFPLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFO1FBQ3JDLElBQUksRUFBRSxXQUFXO1FBQ2pCLEtBQUssRUFBRSxnQkFBZ0I7S0FDMUIsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQWJELHdDQWFDO0FBRUQseUJBQWdDLE1BQXdCO0lBQ3BELElBQUksS0FBSyxHQUFRLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRTVDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNsQixDQUFDO0FBSkQsMENBSUM7QUFFRCw0QkFBNEIsTUFBd0I7SUFDaEQsSUFBSSxPQUFPLEdBQVMsTUFBTyxDQUFDLGlCQUFpQixDQUFDO0lBRTlDLElBQUksS0FBSyxHQUFHLE9BQU8sSUFBVSxNQUFPLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRTdELEVBQUUsQ0FBQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNSLEtBQUssR0FBUyxNQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUVLLE1BQU8sQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDO0lBRTNDLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQUVEO0lBS0ksZ0NBQW9CLE1BQXdCLEVBQVUsUUFBb0I7UUFBdEQsV0FBTSxHQUFOLE1BQU0sQ0FBa0I7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFZO1FBSGxFLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFJdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMseUJBQXlCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDekUsQ0FBQztJQUNEOzs7T0FHRztJQUNILG9DQUFHLEdBQUg7UUFBQSxpQkFrQkM7UUFqQkcsTUFBTSxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ2xHLElBQUksQ0FBQyxVQUFBLE1BQU07WUFFUixJQUFJLGVBQWUsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLHVCQUF1QixFQUFFLENBQUM7WUFDNUQsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsSUFBSSxLQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxlQUFlLENBQUMsTUFBTSxJQUFJLEtBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDN0Ysa0JBQWtCO2dCQUNsQixNQUFNLENBQUM7WUFDWCxDQUFDO1lBRUQsSUFBSSxZQUFZLEdBQWlCLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQSxLQUFLO2dCQUM3QyxNQUFNLENBQUM7b0JBQ0gsS0FBSyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztvQkFDckUsR0FBRyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztpQkFDcEUsQ0FBQTtZQUNMLENBQUMsQ0FBQyxDQUFBO1lBQ0YsY0FBYyxDQUFDLEtBQUksQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBQ0Q7O09BRUc7SUFDSCxpREFBZ0IsR0FBaEI7SUFDQSxDQUFDO0lBQ0Q7Ozs7T0FJRztJQUNILDBDQUFTLEdBQVQsVUFBVSxLQUErQjtRQUNyQyxFQUFFLENBQUMsQ0FBQyxDQUFPLEtBQU0sQ0FBQyxzQkFBc0IsQ0FBQztZQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFFdkQsSUFBSSxTQUFTLEdBQWtCLEtBQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBRS9ELE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsSUFBSSxTQUFTLENBQUM7SUFDdEQsQ0FBQztJQUNEOzs7T0FHRztJQUNILHVDQUFNLEdBQU47UUFDSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUMxQixDQUFDO0lBQ0Q7O09BRUc7SUFDSCwyQ0FBVSxHQUFWO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELHVEQUFzQixHQUF0QjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2pDLENBQUM7SUFDTCw2QkFBQztBQUFELENBakVBLEFBaUVDLElBQUE7QUFqRVksd0RBQXNCIiwiZmlsZSI6InNyYy9hdG9tL2NvcmUvbWFya09jY3VyZW5jZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgYXRvbSA9IHJlcXVpcmUoJy4uL2NvcmUvYXRvbVdyYXBwZXInKTtcbmltcG9ydCByYW1sU2VydmVyID0gcmVxdWlyZShcInJhbWwtbGFuZ3VhZ2Utc2VydmVyXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFya09jY3VyZW5jZXMoZWRpdG9yOiBhdG9tLklUZXh0RWRpdG9yLCBvY2N1cmVuY2VzOiBhdG9tLlJhbmdlW10pIHtcbiAgICB2YXIgbGF5ZXI6IGFueSA9IGdldE9jY3VyZW5jZXNMYXllcihlZGl0b3IpO1xuXG4gICAgbGF5ZXIuY2xlYXIoKTtcblxuICAgIG9jY3VyZW5jZXMuZm9yRWFjaChvY2N1cmVuY2UgPT4ge1xuICAgICAgICBsYXllci5tYXJrQnVmZmVyUmFuZ2Uob2NjdXJlbmNlKTtcbiAgICB9KTtcblxuICAgICg8YW55PmVkaXRvcikuZGVjb3JhdGVNYXJrZXJMYXllcihsYXllciwge1xuICAgICAgICB0eXBlOiAnaGlnaGxpZ2h0JyxcbiAgICAgICAgY2xhc3M6ICdyYW1sLW9jY3VyZW5jZSdcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT2NjdXJlbmNlcyhlZGl0b3I6IGF0b20uSVRleHRFZGl0b3IpIHtcbiAgICB2YXIgbGF5ZXI6IGFueSA9IGdldE9jY3VyZW5jZXNMYXllcihlZGl0b3IpO1xuXG4gICAgbGF5ZXIuY2xlYXIoKTtcbn1cblxuZnVuY3Rpb24gZ2V0T2NjdXJlbmNlc0xheWVyKGVkaXRvcjogYXRvbS5JVGV4dEVkaXRvcik6IGFueSB7XG4gICAgdmFyIGxheWVySWQgPSAoPGFueT5lZGl0b3IpLm9jY3VyZW5jZXNMYXllcklkO1xuXG4gICAgdmFyIGxheWVyID0gbGF5ZXJJZCAmJiAoPGFueT5lZGl0b3IpLmdldE1hcmtlckxheWVyKGxheWVySWQpO1xuXG4gICAgaWYoIWxheWVyKSB7XG4gICAgICAgIGxheWVyID0gKDxhbnk+ZWRpdG9yKS5hZGRNYXJrZXJMYXllcigpO1xuICAgIH1cblxuICAgICg8YW55PmVkaXRvcikub2NjdXJlbmNlc0xheWVySWQgPSBsYXllci5pZDtcblxuICAgIHJldHVybiBsYXllcjtcbn1cblxuZXhwb3J0IGNsYXNzIE1hcmtPY2N1cnJlbmNlUnVubmFibGUgaW1wbGVtZW50cyByYW1sU2VydmVyLlJ1bm5hYmxlPHZvaWQ+IHtcblxuICAgIHByaXZhdGUgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBvZmZzZXQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWRpdG9yOiBhdG9tLklUZXh0RWRpdG9yLCBwcml2YXRlIHBvc2l0aW9uOiBhdG9tLlBvaW50KSB7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gZWRpdG9yLmdldEJ1ZmZlcigpLmNoYXJhY3RlckluZGV4Rm9yUG9zaXRpb24ocG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyB0aGUgYWN0dWFsIGJ1c2luZXNzIGxvZ2ljcy5cbiAgICAgKiBTaG91bGQgcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aGVuIGZpbmlzaGVkLlxuICAgICAqL1xuICAgIHJ1bigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHJhbWxTZXJ2ZXIuZ2V0Tm9kZUNsaWVudENvbm5lY3Rpb24oKS5tYXJrT2NjdXJyZW5jZXModGhpcy5nZXRNYXJrT2NjdXJyZW5jZXNQYXRoKCksIHRoaXMub2Zmc2V0KVxuICAgICAgICAgICAgLnRoZW4ocmFuZ2VzID0+IHtcblxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSB0aGlzLmVkaXRvci5nZXRDdXJzb3JCdWZmZXJQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9zaXRpb24ucm93ICE9IHRoaXMucG9zaXRpb24ucm93IHx8IGN1cnJlbnRQb3NpdGlvbi5jb2x1bW4gIT0gdGhpcy5wb3NpdGlvbi5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy9kYXRhIGlzIG91dGRhdGVkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgYnVmZmVyUmFuZ2VzOiBhdG9tLlJhbmdlW10gPSByYW5nZXMubWFwKHJhbmdlPT57XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogdGhpcy5lZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChyYW5nZS5zdGFydCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuZWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgocmFuZ2UuZW5kKSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgbWFya09jY3VyZW5jZXModGhpcy5lZGl0b3IsIGJ1ZmZlclJhbmdlcyk7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIHRoZSBhY3R1YWwgYnVzaW5lc3MgbG9naWNzIHN5bmNocm9ub3VzbHkuXG4gICAgICovXG4gICAgcnVuU3luY2hyb25vdXNseSgpOiB2b2lkIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0d28gcnVubmFibGUgY29uZmxpY3Qgd2l0aCBlYWNoIG90aGVyLlxuICAgICAqIE11c3Qgd29yayBmYXN0IGFzIGl0cyBjYWxsZWQgb2Z0ZW4uXG4gICAgICogQHBhcmFtIG90aGVyXG4gICAgICovXG4gICAgY29uZmxpY3RzKG90aGVyOiByYW1sU2VydmVyLlJ1bm5hYmxlPGFueT4pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCEoPGFueT5vdGhlcikuZ2V0TWFya09jY3VycmVuY2VzUGF0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGxldCBvdGhlclBhdGggOiBzdHJpbmcgPSAoPGFueT5vdGhlcikuZ2V0TWFya09jY3VycmVuY2VzUGF0aCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hcmtPY2N1cnJlbmNlc1BhdGgoKSA9PSBvdGhlclBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIHJ1bm5hYmxlLiBydW4oKSBtZXRob2Qgc2hvdWxkIGRvIG5vdGhpbmcgaWYgbGF1bmNoZWQgbGF0ZXIsXG4gICAgICogaWYgY2FuY2VsIGlzIGNhbGxlZCBkdXJpbmcgdGhlIHJ1bigpIG1ldGhvZCBleGVjdXRpb24sIHJ1bigpIHNob3VsZCBzdG9wIGFzIHNvb24gYXMgaXQgY2FuLlxuICAgICAqL1xuICAgIGNhbmNlbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIGNhbmNlbCgpIG1ldGhvZCB3YXMgY2FsbGVkIGF0IGxlYXN0IG9uY2UuXG4gICAgICovXG4gICAgaXNDYW5jZWxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsbGVkO1xuICAgIH1cblxuICAgIGdldE1hcmtPY2N1cnJlbmNlc1BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRQYXRoKCk7XG4gICAgfVxufVxuXG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/core/markOccurences.js\n// module id = 21\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar qcui = require(\"./quick-commands-ui\");\nvar atom = require(\"../core/atomWrapper\");\n// import contextActions = require(\"raml-actions\")\nvar cc = require(\"./code-commands\");\nvar et = require(\"../editor-tools/editor-tools\");\n/*\n * Quick command is a command object that stores command info, body and filtering function\n */\nvar QuickCommand = /** @class */ (function () {\n    function QuickCommand(id, title, command, priority, when) {\n        this.id = id;\n        this.title = title;\n        this.command = command;\n        this.priority = priority;\n        this.when = when;\n    }\n    QuickCommand.prototype.registerAsAtomCommand = function (target) {\n        if (this.atomCommand && this.atomCommand.disposed == false)\n            this.atomCommand.dispose();\n        this.atomCommand = atom.commands.add(target, this.id, this.command);\n    };\n    QuickCommand.prototype.dispose = function () {\n        if (this.atomCommand && this.atomCommand.disposed == false)\n            this.atomCommand.dispose();\n        cm.unregister(this);\n    };\n    return QuickCommand;\n}());\nexports.QuickCommand = QuickCommand;\n/*\n * Command manager manages quick commands.\n * All quick commands should be registered here.\n * For usage example, see registerCommands\n */\nvar CommandManager = /** @class */ (function () {\n    function CommandManager() {\n        this.commands = {};\n        this.panel = new qcui.SelectListView(function (command) { return command.command(); }, function (command) { return command.title; }, 'title');\n    }\n    CommandManager.prototype.register = function (cmd) {\n        if (this.commands[cmd.id] != null)\n            this.unregister(cmd.id);\n        this.commands[cmd.id] = cmd;\n        return cmd;\n    };\n    CommandManager.prototype.unregister = function (cmd) {\n        if (typeof (cmd) == \"string\")\n            this.unregister(this.commands[cmd]);\n        var qcmd = cmd;\n        if (qcmd == null)\n            return null;\n        delete this.commands[qcmd.id];\n        return qcmd;\n    };\n    CommandManager.prototype.add = function (id, title, command, when, priority, atomTarget) {\n        var cmd = new QuickCommand(id, title, command, priority ? priority : 0, when ? when : function () { return true; });\n        if (atomTarget)\n            cmd.registerAsAtomCommand(atomTarget);\n        this.register(cmd);\n        return cmd;\n    };\n    CommandManager.prototype.show = function (predicate) {\n        var joinedCommands = {};\n        for (var commandId in this.commands) {\n            joinedCommands[commandId] = this.commands[commandId];\n        }\n        this.getDynamicCommands().forEach(function (currentCommand) {\n            joinedCommands[currentCommand.id] = currentCommand;\n        });\n        var list = Object.keys(joinedCommands)\n            .map(function (key) { return joinedCommands[key]; })\n            .sort(function (a, b) { return b.priority - a.priority; })\n            .filter(function (cmd) { return cmd.when(); });\n        if (predicate)\n            list = list.filter(predicate);\n        this.panel.show(list);\n    };\n    CommandManager.prototype.getDynamicCommands = function () {\n        var result = [];\n        // var currentActions = contextActions.calculateCurrentActions(contextActions.TARGET_RAML_EDITOR_NODE)\n        //\n        // currentActions.forEach(action => {\n        // \tvar convertedQuickCommand : QuickCommand = new QuickCommand(action.name,\n        // \t\taction.label?action.label:action.name, action.onClick, 1, ()=>{return true})\n        //\n        // \tvar cmd : any = convertedQuickCommand\n        // \tcmd['__module__'] = 'editorTools'\n        // \tresult.push(convertedQuickCommand)\n        // })\n        return result;\n    };\n    return CommandManager;\n}());\nexports.CommandManager = CommandManager;\nvar cm;\n/*\n * Always return working copy of manager.\n */\nfunction manager() {\n    if (!cm)\n        cm = new CommandManager();\n    return cm;\n}\nexports.manager = manager;\n/*\n * function for RAML -> Show Quick Commands (^Q)\n */\nfunction showCommands() {\n    manager().show();\n}\nexports.showCommands = showCommands;\n/*\n * registerCommands is called at the plugin initialization for registering global commands\n */\nfunction registerCommands() {\n    cc.registerQuickCommands(manager());\n    cm.add('api-workbench:editor-tools', 'Show Editor Tools', function () { return et.initEditorTools(); }, function () { return et.editorToolsStatus() == false; });\n}\nexports.registerCommands = registerCommands;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbURBQW1EO0FBQ25ELDBDQUE2QztBQUM3QywwQ0FBNkM7QUFDN0Msa0RBQWtEO0FBQ2xELG9DQUF1QztBQUN2QyxpREFBb0Q7QUFFcEQ7O0dBRUc7QUFDSDtJQUNJLHNCQUNLLEVBQVUsRUFDSixLQUFhLEVBQ2IsT0FBbUIsRUFDekIsUUFBZ0IsRUFDVixJQUFtQjtRQUp6QixPQUFFLEdBQUYsRUFBRSxDQUFRO1FBQ0osVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUNiLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDekIsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNWLFNBQUksR0FBSixJQUFJLENBQWU7SUFDM0IsQ0FBQztJQUdQLDRDQUFxQixHQUFyQixVQUFzQixNQUFjO1FBQ25DLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDO1lBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2RixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsOEJBQU8sR0FBUDtRQUNDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDO1lBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2RixFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDRixtQkFBQztBQUFELENBbkJBLEFBbUJDLElBQUE7QUFuQlksb0NBQVk7QUFxQnpCOzs7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ay1jb21tYW5kcy9xdWljay1jb21tYW5kcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5pbXBvcnQgcWN1aSA9IHJlcXVpcmUoJy4vcXVpY2stY29tbWFuZHMtdWknKTtcbmltcG9ydCBhdG9tID0gcmVxdWlyZSgnLi4vY29yZS9hdG9tV3JhcHBlcicpO1xuLy8gaW1wb3J0IGNvbnRleHRBY3Rpb25zID0gcmVxdWlyZShcInJhbWwtYWN0aW9uc1wiKVxuaW1wb3J0IGNjID0gcmVxdWlyZSgnLi9jb2RlLWNvbW1hbmRzJyk7XG5pbXBvcnQgZXQgPSByZXF1aXJlKCcuLi9lZGl0b3ItdG9vbHMvZWRpdG9yLXRvb2xzJyk7XG5cbi8qXG4gKiBRdWljayBjb21tYW5kIGlzIGEgY29tbWFuZCBvYmplY3QgdGhhdCBzdG9yZXMgY29tbWFuZCBpbmZvLCBib2R5IGFuZCBmaWx0ZXJpbmcgZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFF1aWNrQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG5cdFx0cHVibGljIGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgY29tbWFuZDogKCkgPT4gdm9pZCxcblx0XHRwdWJsaWMgcHJpb3JpdHk6IG51bWJlcixcbiAgICAgICAgcHVibGljIHdoZW46ICgpID0+IGJvb2xlYW5cbiAgICApIHt9XG5cblx0cHJpdmF0ZSBhdG9tQ29tbWFuZDogQXRvbUNvcmUuRGlzcG9zYWJsZTtcblx0cmVnaXN0ZXJBc0F0b21Db21tYW5kKHRhcmdldDogc3RyaW5nKSB7XG5cdFx0aWYgKHRoaXMuYXRvbUNvbW1hbmQgJiYgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlZCA9PSBmYWxzZSkgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlKCk7XG5cdFx0dGhpcy5hdG9tQ29tbWFuZCA9IGF0b20uY29tbWFuZHMuYWRkKHRhcmdldCwgdGhpcy5pZCwgdGhpcy5jb21tYW5kKTtcblx0fVxuXG5cdGRpc3Bvc2UoKSB7XG5cdFx0aWYgKHRoaXMuYXRvbUNvbW1hbmQgJiYgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlZCA9PSBmYWxzZSkgdGhpcy5hdG9tQ29tbWFuZC5kaXNwb3NlKCk7XG5cdFx0Y20udW5yZWdpc3Rlcih0aGlzKTtcblx0fVxufVxuXG4vKlxuICogQ29tbWFuZCBtYW5hZ2VyIG1hbmFnZXMgcXVpY2sgY29tbWFuZHMuXG4gKiBBbGwgcXVpY2sgY29tbWFuZHMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgaGVyZS5cbiAqIEZvciB1c2FnZSBleGFtcGxlLCBzZWUgcmVnaXN0ZXJDb21tYW5kc1xuICovXG5leHBvcnQgY2xhc3MgQ29tbWFuZE1hbmFnZXIge1xuXHRwcml2YXRlIGNvbW1hbmRzID0ge307XG4gICAgcHJpdmF0ZSBwYW5lbCA9IG5ldyBxY3VpLlNlbGVjdExpc3RWaWV3PFF1aWNrQ29tbWFuZD4oY29tbWFuZCA9PiBjb21tYW5kLmNvbW1hbmQoKSwgY29tbWFuZCA9PiBjb21tYW5kLnRpdGxlLCAndGl0bGUnKTtcblxuXHRyZWdpc3RlcihjbWQ6IFF1aWNrQ29tbWFuZCkge1xuXHRcdGlmICh0aGlzLmNvbW1hbmRzW2NtZC5pZF0gIT0gbnVsbCkgdGhpcy51bnJlZ2lzdGVyKGNtZC5pZCk7XG5cdFx0dGhpcy5jb21tYW5kc1tjbWQuaWRdID0gY21kO1xuXHRcdHJldHVybiBjbWQ7XG5cdH1cblxuXHR1bnJlZ2lzdGVyKGNtZDogc3RyaW5nIHwgUXVpY2tDb21tYW5kKSB7XG5cdFx0aWYgKHR5cGVvZihjbWQpID09IFwic3RyaW5nXCIpIHRoaXMudW5yZWdpc3Rlcih0aGlzLmNvbW1hbmRzWzxzdHJpbmc+Y21kXSk7XG5cdFx0dmFyIHFjbWQgPSA8UXVpY2tDb21tYW5kPiBjbWQ7XG5cdFx0aWYgKHFjbWQgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cdFx0ZGVsZXRlIHRoaXMuY29tbWFuZHNbcWNtZC5pZF07XG5cdFx0cmV0dXJuIHFjbWQ7XG5cdH1cblxuICAgIGFkZChpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBjb21tYW5kOiAoKT0+dm9pZCwgd2hlbj86KCk9PmJvb2xlYW4sIHByaW9yaXR5PzogbnVtYmVyLCBhdG9tVGFyZ2V0Pzogc3RyaW5nKSB7XG4gICAgICAgIHZhciBjbWQgPSBuZXcgUXVpY2tDb21tYW5kKGlkLCB0aXRsZSwgY29tbWFuZCwgcHJpb3JpdHkgPyBwcmlvcml0eSA6IDAsICB3aGVuID8gd2hlbiA6ICgpID0+IHRydWUpO1xuICAgICAgICBpZiAoYXRvbVRhcmdldCkgY21kLnJlZ2lzdGVyQXNBdG9tQ29tbWFuZChhdG9tVGFyZ2V0KTtcblx0XHR0aGlzLnJlZ2lzdGVyKGNtZCk7XG5cdFx0cmV0dXJuIGNtZDtcbiAgICB9XG5cblx0c2hvdyhwcmVkaWNhdGU/OiAoY21kOiBRdWlja0NvbW1hbmQpID0+IGJvb2xlYW4pIHtcblx0XHR2YXIgam9pbmVkQ29tbWFuZHMgOiB7W2lkOnN0cmluZ106UXVpY2tDb21tYW5kfSA9IHt9XG5cblx0XHRmb3IgKHZhciBjb21tYW5kSWQgaW4gdGhpcy5jb21tYW5kcykge1xuXHRcdFx0am9pbmVkQ29tbWFuZHNbY29tbWFuZElkXSA9IHRoaXMuY29tbWFuZHNbY29tbWFuZElkXVxuXHRcdH1cblxuXHRcdHRoaXMuZ2V0RHluYW1pY0NvbW1hbmRzKCkuZm9yRWFjaChjdXJyZW50Q29tbWFuZD0+e1xuXHRcdFx0am9pbmVkQ29tbWFuZHNbY3VycmVudENvbW1hbmQuaWRdID0gY3VycmVudENvbW1hbmRcblx0XHR9KVxuXG5cdFx0dmFyIGxpc3QgPSBPYmplY3Qua2V5cyhqb2luZWRDb21tYW5kcylcblx0XHRcdFx0XHRcdC5tYXAoa2V5PT4gPFF1aWNrQ29tbWFuZD5qb2luZWRDb21tYW5kc1trZXldKVxuXHRcdFx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KVxuXHRcdFx0XHRcdFx0LmZpbHRlcihjbWQ9PiBjbWQud2hlbigpKTtcblxuXHRcdGlmIChwcmVkaWNhdGUpIGxpc3QgPSBsaXN0LmZpbHRlcihwcmVkaWNhdGUpO1xuXHRcdHRoaXMucGFuZWwuc2hvdyhsaXN0KTtcblx0fVxuXG5cdGdldER5bmFtaWNDb21tYW5kcygpIDogUXVpY2tDb21tYW5kW10ge1xuXHRcdHZhciByZXN1bHQgOiBRdWlja0NvbW1hbmRbXSA9IFtdXG5cdFx0Ly8gdmFyIGN1cnJlbnRBY3Rpb25zID0gY29udGV4dEFjdGlvbnMuY2FsY3VsYXRlQ3VycmVudEFjdGlvbnMoY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUpXG4gICAgICAgIC8vXG5cdFx0Ly8gY3VycmVudEFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xuXHRcdC8vIFx0dmFyIGNvbnZlcnRlZFF1aWNrQ29tbWFuZCA6IFF1aWNrQ29tbWFuZCA9IG5ldyBRdWlja0NvbW1hbmQoYWN0aW9uLm5hbWUsXG5cdFx0Ly8gXHRcdGFjdGlvbi5sYWJlbD9hY3Rpb24ubGFiZWw6YWN0aW9uLm5hbWUsIGFjdGlvbi5vbkNsaWNrLCAxLCAoKT0+e3JldHVybiB0cnVlfSlcbiAgICAgICAgLy9cblx0XHQvLyBcdHZhciBjbWQgOiBhbnkgPSBjb252ZXJ0ZWRRdWlja0NvbW1hbmRcblx0XHQvLyBcdGNtZFsnX19tb2R1bGVfXyddID0gJ2VkaXRvclRvb2xzJ1xuXHRcdC8vIFx0cmVzdWx0LnB1c2goY29udmVydGVkUXVpY2tDb21tYW5kKVxuXHRcdC8vIH0pXG5cblx0XHRyZXR1cm4gcmVzdWx0XG5cdH1cbn1cblxudmFyIGNtOiBDb21tYW5kTWFuYWdlcjtcblxuLypcbiAqIEFsd2F5cyByZXR1cm4gd29ya2luZyBjb3B5IG9mIG1hbmFnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYW5hZ2VyKCkge1xuXHRpZiAoIWNtKSBjbSA9IG5ldyBDb21tYW5kTWFuYWdlcigpO1xuXHRyZXR1cm4gY207XG59XG5cbi8qXG4gKiBmdW5jdGlvbiBmb3IgUkFNTCAtPiBTaG93IFF1aWNrIENvbW1hbmRzICheUSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dDb21tYW5kcygpIHtcblx0bWFuYWdlcigpLnNob3coKTtcbn1cblxuLypcbiAqIHJlZ2lzdGVyQ29tbWFuZHMgaXMgY2FsbGVkIGF0IHRoZSBwbHVnaW4gaW5pdGlhbGl6YXRpb24gZm9yIHJlZ2lzdGVyaW5nIGdsb2JhbCBjb21tYW5kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcygpIHtcblx0Y2MucmVnaXN0ZXJRdWlja0NvbW1hbmRzKG1hbmFnZXIoKSk7XG5cdGNtLmFkZCgnYXBpLXdvcmtiZW5jaDplZGl0b3ItdG9vbHMnLCAnU2hvdyBFZGl0b3IgVG9vbHMnLCAoKT0+ZXQuaW5pdEVkaXRvclRvb2xzKCksICgpPT5ldC5lZGl0b3JUb29sc1N0YXR1cygpID09IGZhbHNlKTtcbn1cbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/quick-commands/quick-commands.js\n// module id = 22\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar atom = require(\"../core/atomWrapper\");\nvar aspv = require(\"atom-space-pen-views\");\n/*\n * List viewer for commands. accepts confirmation function, label function and key for fuzzy filtering.\n */\nvar SelectListView = /** @class */ (function (_super) {\n    __extends(SelectListView, _super);\n    function SelectListView(_confirmed, label, filterKey) {\n        if (filterKey === void 0) { filterKey = ''; }\n        var _this = _super.call(this, []) || this;\n        _this._confirmed = _confirmed;\n        _this.label = label;\n        _this.filterKey = filterKey;\n        return _this;\n    }\n    SelectListView.prototype.getFilterKey = function () { return this.filterKey; };\n    SelectListView.prototype.viewForItem = function (item) {\n        return \"<li>\" + this.label(item) + \"</li>\";\n    };\n    SelectListView.prototype.cancel = function () {\n        this.panel.hide();\n        _super.prototype.cancel.call(this);\n    };\n    SelectListView.prototype.hide = function () {\n        if (!this.panel)\n            return;\n        this.panel.hide();\n    };\n    SelectListView.prototype.confirmed = function (item) {\n        this._confirmed(item);\n        this.hide();\n        return this.getSelectedItemView();\n    };\n    SelectListView.prototype.show = function (commands) {\n        this.storeFocusedElement();\n        if (!this.panel)\n            this.panel = atom.workspace.addModalPanel({ item: this });\n        this.setItems(commands);\n        this.panel.show();\n        this.focusFilterEditor();\n    };\n    return SelectListView;\n}(aspv.SelectListView));\nexports.SelectListView = SelectListView;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzLXVpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtREFBbUQ7Ozs7Ozs7Ozs7OztBQUVuRCwwQ0FBNkM7QUFDN0MsMkNBQThDO0FBRzlDOztHQUVHO0FBQ0g7SUFBdUMsa0NBQW1CO0lBRXhELHdCQUFtQixVQUE2QixFQUFVLEtBQXFCLEVBQVUsU0FBc0I7UUFBdEIsMEJBQUEsRUFBQSxjQUFzQjtRQUEvRyxZQUNFLGtCQUFNLEVBQUUsQ0FBQyxTQUNWO1FBRmtCLGdCQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUFVLFdBQUssR0FBTCxLQUFLLENBQWdCO1FBQVUsZUFBUyxHQUFULFNBQVMsQ0FBYTs7SUFFL0csQ0FBQztJQUVELHFDQUFZLEdBQVosY0FBaUIsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBRXpDLG9DQUFXLEdBQVgsVUFBWSxJQUFJO1FBQ2QsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQztJQUM3QyxDQUFDO0lBRUQsK0JBQU0sR0FBTjtRQUNFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEIsaUJBQU0sTUFBTSxXQUFFLENBQUM7SUFDakIsQ0FBQztJQUVELDZCQUFJLEdBQUo7UUFDRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFBQyxNQUFNLENBQUM7UUFDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRUQsa0NBQVMsR0FBVCxVQUFVLElBQUk7UUFDWixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNaLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUNwQyxDQUFDO0lBSUQsNkJBQUksR0FBSixVQUFLLFFBQWE7UUFDaEIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxFQUFFLElBQUksRUFBTyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBQ0gscUJBQUM7QUFBRCxDQXJDQSxBQXFDQyxDQXJDc0MsSUFBSSxDQUFDLGNBQWMsR0FxQ3pEO0FBckNZLHdDQUFjIiwiZmlsZSI6InNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL3F1aWNrLWNvbW1hbmRzLXVpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cblxuaW1wb3J0IGF0b20gPSByZXF1aXJlKCcuLi9jb3JlL2F0b21XcmFwcGVyJyk7XG5pbXBvcnQgYXNwdiA9IHJlcXVpcmUoJ2F0b20tc3BhY2UtcGVuLXZpZXdzJyk7XG5cblxuLypcbiAqIExpc3Qgdmlld2VyIGZvciBjb21tYW5kcy4gYWNjZXB0cyBjb25maXJtYXRpb24gZnVuY3Rpb24sIGxhYmVsIGZ1bmN0aW9uIGFuZCBrZXkgZm9yIGZ1enp5IGZpbHRlcmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdExpc3RWaWV3PFQ+IGV4dGVuZHMgYXNwdi5TZWxlY3RMaXN0VmlldyB7XG5cbiAgY29uc3RydWN0b3IocHVibGljIF9jb25maXJtZWQ6IChpdGVtOiBUKSA9PiB2b2lkLCBwcml2YXRlIGxhYmVsOiAoaXRlbTogVCk9PmFueSwgcHJpdmF0ZSBmaWx0ZXJLZXk6IHN0cmluZyA9ICcnKSB7XG4gICAgc3VwZXIoW10pO1xuICB9XG5cbiAgZ2V0RmlsdGVyS2V5KCkgeyByZXR1cm4gdGhpcy5maWx0ZXJLZXk7IH1cblxuICB2aWV3Rm9ySXRlbShpdGVtKSB7XG4gICAgcmV0dXJuIFwiPGxpPlwiICsgdGhpcy5sYWJlbChpdGVtKSArIFwiPC9saT5cIjtcbiAgfVxuXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLnBhbmVsLmhpZGUoKTtcbiAgICBzdXBlci5jYW5jZWwoKTtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgaWYgKCF0aGlzLnBhbmVsKSByZXR1cm47XG4gICAgdGhpcy5wYW5lbC5oaWRlKCk7XG4gIH1cblxuICBjb25maXJtZWQoaXRlbSkge1xuICAgIHRoaXMuX2NvbmZpcm1lZChpdGVtKTtcbiAgICB0aGlzLmhpZGUoKTtcbiAgICByZXR1cm4gdGhpcy5nZXRTZWxlY3RlZEl0ZW1WaWV3KCk7XG4gIH1cblxuICBwcml2YXRlIHBhbmVsOiBhbnk7XG5cbiAgc2hvdyhjb21tYW5kczogVFtdKSB7XG4gICAgdGhpcy5zdG9yZUZvY3VzZWRFbGVtZW50KCk7XG4gICAgaWYgKCF0aGlzLnBhbmVsKSB0aGlzLnBhbmVsID0gYXRvbS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbCh7IGl0ZW06IDxhbnk+dGhpcyB9KTtcbiAgICB0aGlzLnNldEl0ZW1zKGNvbW1hbmRzKTtcbiAgICB0aGlzLnBhbmVsLnNob3coKTtcbiAgICB0aGlzLmZvY3VzRmlsdGVyRWRpdG9yKCk7XG4gIH1cbn1cbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/quick-commands/quick-commands-ui.js\n// module id = 23\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import dialogs=require(\"../dialogs/dialogs\")\n// import path=require('path')\n// import rp=require(\"raml-1-parser\")\n//\n// import hl=rp.hl;\n// import universe = rp.universes;\n// import services =rp.ds;\n//\n// import universeHelpers =rp.universeHelpers;\n//\n// class AddNewResourceStateCalculator extends contextActions.CommonASTStateCalculator {\n//     calculate () : any {\n//\n//         //usually we dont need to check the editor, CommonASTStateCalculator does this for us\n//         //but in this case we accept null generalState, so double-checking for opened file\n//         var editor=this.getEditor()\n//         if (!editor) return null\n//\n//         if (path.extname(editor.getPath()) != '.raml') return null\n//\n//         var generalState = this.getGeneralState()\n//         if (!generalState) return null;\n//\n//         var highLevelNode = <hl.IHighLevelNode><any>generalState.node;\n//\n//         if (!universeHelpers.isResourceType(highLevelNode.definition()) &&\n//             !universeHelpers.isApiType(highLevelNode.definition()))\n//             return null\n//\n//         if(!highLevelNode.lowLevel()) {\n//             return null;\n//         }\n//\n//         return highLevelNode\n//     }\n// }\n//\n// class CreateNewAPIStateCalculator extends contextActions.CommonASTStateCalculator {\n//     calculate () : any {\n//\n//         var generalState = this.getGeneralState()\n//         if (generalState) return null\n//\n//         var editor=this.getEditor()\n//         if (!editor) return null\n//\n//         if (path.extname(editor.getPath()) != '.raml') return null\n//\n//         var text = editor.getText().trim()\n//         if (text != \"\") return null\n//\n//         return {}\n//     }\n// }\n//\n//\n// export function getResourceParent(node: hl.IHighLevelNode) {\n//     if (!node || !node.property()) return null;\n//     if ((universeHelpers.isResourcesProperty(node.property()) || universeHelpers.isResourceTypesProperty(node.property()))\n//         && (universeHelpers.isResourceType(node.definition()) || universeHelpers.isResourceTypeType(node.definition()))) return node;\n//     return getResourceParent(node.parent());\n// }\n// function getMethodParent(node: hl.IHighLevelNode) {\n//     if (!node || !node.property()) return null;\n//     if ((universeHelpers.isMethodType(node.definition())||universeHelpers.isTraitType(node.definition()))&&!node.definition().getAdapter(services.RAMLService).isUserDefined()){\n//         return node;\n//     }\n//     return null;\n// }\n// function getParent(node: hl.IHighLevelNode,name:string) {\n//     if (!node || !node.property()) return null;\n//     if ((node.definition().isAssignableFrom(name))){\n//         return node;\n//     }\n//     return null;\n// }\n//\n// function getResourceParentOrRoot(node: hl.IHighLevelNode) {\n//     var rp = getResourceParent(node);\n//     return rp ? rp : editorTools.aquireManager().ast;\n// }\n//\n// export function toResource(node: hl.IHighLevelNode) {\n//     if (!node || !node.property()) return null;\n//\n//     if ((universeHelpers.isResourcesProperty(node.property()) || universeHelpers.isResourceTypesProperty(node.property()))\n//         && (universeHelpers.isResourceType(node.definition()) || universeHelpers.isResourceTypeType(node.definition()))) return node;\n//\n//     return null;\n// }\n//\nfunction registerQuickCommands(cm) {\n    //     if (!editorTools.aquireManager()) editorTools.initEditorTools(false);\n    //\n    //     var commands = [\n    //         //cm.add( 'raml-labs:re-parse',\n    //         //    \"Parse current file again\",\n    //         //    () => {\n    //         //        editorTools.aquireManager().doParse(editorTools.aquireManager().getCurrentEditor().getPath());\n    //         //        editorTools.aquireManager().getView().forEachViewer(viewer=>viewer.clear());\n    //         //        editorTools.aquireManager().getView().setUnit(editorTools.aquireManager().ast, true); },\n    //         //    () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && editorTools.aquireManager().ast != null,\n    //         //    -100)\n    //\n    //     ];\n    //\n    //     commands.forEach(x=>x['__module__'] = 'editorTools');\n    //\n    //     contextActions.addAction({\n    //         name : \"Add new resource\",\n    //         target : contextActions.TARGET_RAML_EDITOR_NODE,\n    //         category : [\"Add new...\"],\n    //         onClick : state=>dialogs.newResource(editorTools.aquireManager().getSelectedNode()),\n    //         stateCalculator : new AddNewResourceStateCalculator(),\n    //         shouldDisplay : state=>state != null\n    //     })\n    //\n    //     contextActions.addAction({\n    //         name : \"Create new API\",\n    //         target : contextActions.TARGET_RAML_EDITOR_NODE,\n    //         category : [\"Add new...\"],\n    //         onClick : state=>dialogs.newApi(),\n    //         stateCalculator : new CreateNewAPIStateCalculator(),\n    //         shouldDisplay : state=>state != null\n    //     })\n    //\n    //     contextActions.addSimpleAction(\"Add new method\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newMethod(toResource(editorTools.aquireManager().getSelectedNode())),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && toResource(editorTools.aquireManager().getSelectedNode()) != null);\n    //\n    //     contextActions.addSimpleAction(\"Create new URI Parameter\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(toResource(editorTools.aquireManager().getSelectedNode()),\"Create new URI Parameter\",\"uriParameters\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (toResource(editorTools.aquireManager().getSelectedNode()) != null));\n    //\n    //     contextActions.addSimpleAction(\"Create new Query Parameter\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Query Parameter\",\"queryParameters\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n    //\n    //     contextActions.addSimpleAction(\"Create new Header\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Header\",\"headers\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n    //\n    //     contextActions.addSimpleAction(\"Create new Response Header\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getParent(editorTools.aquireManager().getSelectedNode(),\"Response\"),\"Create new Header\",\"headers\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getParent(editorTools.aquireManager().getSelectedNode(),\"Response\" )!= null));\n    //     contextActions.addSimpleAction(\"Create new Response Body\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getParent(editorTools.aquireManager().getSelectedNode(),\"Response\"),\"Create new Response Body\",\"body\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getParent(editorTools.aquireManager().getSelectedNode(),\"Response\" )!= null));\n    //     contextActions.addSimpleAction(\"Create new Property\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getParent(editorTools.aquireManager().getSelectedNode(),\"ObjectTypeDeclaration\"),\"Create new Property\",\"properties\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getParent(editorTools.aquireManager().getSelectedNode(),\"ObjectTypeDeclaration\" )!= null));\n    //\n    //     contextActions.addSimpleAction(\"Create new Body\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Body\",\"body\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n    //     contextActions.addSimpleAction(\"Create new Response\", [\"Add new...\"], contextActions.TARGET_RAML_EDITOR_NODE,\n    //         () => dialogs.newNode(getMethodParent(editorTools.aquireManager().getSelectedNode()),\"Create new Response\",\"responses\",\"200\"),\n    //         () => editorTools.aquireManager() && editorTools.aquireManager().getCurrentEditor() && (getMethodParent(editorTools.aquireManager().getSelectedNode()) != null));\n}\nexports.registerQuickCommands = registerQuickCommands;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvZGUtY29tbWFuZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSwrQ0FBK0M7QUFDL0MsOEJBQThCO0FBQzlCLHFDQUFxQztBQUNyQyxFQUFFO0FBQ0YsbUJBQW1CO0FBQ25CLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsRUFBRTtBQUNGLDhDQUE4QztBQUM5QyxFQUFFO0FBQ0Ysd0ZBQXdGO0FBQ3hGLDJCQUEyQjtBQUMzQixFQUFFO0FBQ0YsZ0dBQWdHO0FBQ2hHLDZGQUE2RjtBQUM3RixzQ0FBc0M7QUFDdEMsbUNBQW1DO0FBQ25DLEVBQUU7QUFDRixxRUFBcUU7QUFDckUsRUFBRTtBQUNGLG9EQUFvRDtBQUNwRCwwQ0FBMEM7QUFDMUMsRUFBRTtBQUNGLHlFQUF5RTtBQUN6RSxFQUFFO0FBQ0YsNkVBQTZFO0FBQzdFLHNFQUFzRTtBQUN0RSwwQkFBMEI7QUFDMUIsRUFBRTtBQUNGLDBDQUEwQztBQUMxQywyQkFBMkI7QUFDM0IsWUFBWTtBQUNaLEVBQUU7QUFDRiwrQkFBK0I7QUFDL0IsUUFBUTtBQUNSLElBQUk7QUFDSixFQUFFO0FBQ0Ysc0ZBQXNGO0FBQ3RGLDJCQUEyQjtBQUMzQixFQUFFO0FBQ0Ysb0RBQW9EO0FBQ3BELHdDQUF3QztBQUN4QyxFQUFFO0FBQ0Ysc0NBQXNDO0FBQ3RDLG1DQUFtQztBQUNuQyxFQUFFO0FBQ0YscUVBQXFFO0FBQ3JFLEVBQUU7QUFDRiw2Q0FBNkM7QUFDN0Msc0NBQXNDO0FBQ3RDLEVBQUU7QUFDRixvQkFBb0I7QUFDcEIsUUFBUTtBQUNSLElBQUk7QUFDSixFQUFFO0FBQ0YsRUFBRTtBQUNGLCtEQUErRDtBQUMvRCxrREFBa0Q7QUFDbEQsNkhBQTZIO0FBQzdILHdJQUF3STtBQUN4SSwrQ0FBK0M7QUFDL0MsSUFBSTtBQUNKLHNEQUFzRDtBQUN0RCxrREFBa0Q7QUFDbEQsbUxBQW1MO0FBQ25MLHVCQUF1QjtBQUN2QixRQUFRO0FBQ1IsbUJBQW1CO0FBQ25CLElBQUk7QUFDSiw0REFBNEQ7QUFDNUQsa0RBQWtEO0FBQ2xELHVEQUF1RDtBQUN2RCx1QkFBdUI7QUFDdkIsUUFBUTtBQUNSLG1CQUFtQjtBQUNuQixJQUFJO0FBQ0osRUFBRTtBQUNGLDhEQUE4RDtBQUM5RCx3Q0FBd0M7QUFDeEMsd0RBQXdEO0FBQ3hELElBQUk7QUFDSixFQUFFO0FBQ0Ysd0RBQXdEO0FBQ3hELGtEQUFrRDtBQUNsRCxFQUFFO0FBQ0YsNkhBQTZIO0FBQzdILHdJQUF3STtBQUN4SSxFQUFFO0FBQ0YsbUJBQW1CO0FBQ25CLElBQUk7QUFDSixFQUFFO0FBQ0YsK0JBQXNDLEVBQXFCO0lBQzNELDRFQUE0RTtJQUM1RSxFQUFFO0lBQ0YsdUJBQXVCO0lBQ3ZCLDBDQUEwQztJQUMxQyw0Q0FBNEM7SUFDNUMsd0JBQXdCO0lBQ3hCLG1IQUFtSDtJQUNuSCxpR0FBaUc7SUFDakcsNkdBQTZHO0lBQzdHLGdKQUFnSjtJQUNoSixzQkFBc0I7SUFDdEIsRUFBRTtJQUNGLFNBQVM7SUFDVCxFQUFFO0lBQ0YsNERBQTREO0lBQzVELEVBQUU7SUFDRixpQ0FBaUM7SUFDakMscUNBQXFDO0lBQ3JDLDJEQUEyRDtJQUMzRCxxQ0FBcUM7SUFDckMsK0ZBQStGO0lBQy9GLGlFQUFpRTtJQUNqRSwrQ0FBK0M7SUFDL0MsU0FBUztJQUNULEVBQUU7SUFDRixpQ0FBaUM7SUFDakMsbUNBQW1DO0lBQ25DLDJEQUEyRDtJQUMzRCxxQ0FBcUM7SUFDckMsNkNBQTZDO0lBQzdDLCtEQUErRDtJQUMvRCwrQ0FBK0M7SUFDL0MsU0FBUztJQUNULEVBQUU7SUFDRiwrR0FBK0c7SUFDL0csOEZBQThGO0lBQzlGLHFLQUFxSztJQUNySyxFQUFFO0lBQ0YseUhBQXlIO0lBQ3pILHVJQUF1STtJQUN2SSx1S0FBdUs7SUFDdkssRUFBRTtJQUNGLDJIQUEySDtJQUMzSCxnSkFBZ0o7SUFDaEosNEtBQTRLO0lBQzVLLEVBQUU7SUFDRixrSEFBa0g7SUFDbEgsK0hBQStIO0lBQy9ILDRLQUE0SztJQUM1SyxFQUFFO0lBQ0YsMkhBQTJIO0lBQzNILG9JQUFvSTtJQUNwSSxpTEFBaUw7SUFDakwseUhBQXlIO0lBQ3pILHdJQUF3STtJQUN4SSxpTEFBaUw7SUFDakwsb0hBQW9IO0lBQ3BILHNKQUFzSjtJQUN0Siw4TEFBOEw7SUFDOUwsRUFBRTtJQUNGLGdIQUFnSDtJQUNoSCwwSEFBMEg7SUFDMUgsNEtBQTRLO0lBQzVLLG9IQUFvSDtJQUNwSCx5SUFBeUk7SUFDekksNEtBQTRLO0FBQzVLLENBQUM7QUFuRUQsc0RBbUVDIiwiZmlsZSI6InNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvZGUtY29tbWFuZHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgZWRpdG9yVG9vbHM9cmVxdWlyZShcIi4uL2VkaXRvci10b29scy9lZGl0b3ItdG9vbHNcIilcbi8vIGltcG9ydCBjb250ZXh0QWN0aW9ucyA9IHJlcXVpcmUoXCJyYW1sLWFjdGlvbnNcIilcbi8vIGltcG9ydCBjb21tb25Db250ZXh0QWN0aW9ucyA9IHJlcXVpcmUoXCIuLi9jb250ZXh0LW1lbnUvY29tbW9uQ29udGV4dEFjdGlvbnNcIilcbmltcG9ydCBxYyA9IHJlcXVpcmUoJy4vcXVpY2stY29tbWFuZHMnKTtcbi8vIGltcG9ydCBkaWFsb2dzPXJlcXVpcmUoXCIuLi9kaWFsb2dzL2RpYWxvZ3NcIilcbi8vIGltcG9ydCBwYXRoPXJlcXVpcmUoJ3BhdGgnKVxuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vL1xuLy8gaW1wb3J0IGhsPXJwLmhsO1xuLy8gaW1wb3J0IHVuaXZlcnNlID0gcnAudW5pdmVyc2VzO1xuLy8gaW1wb3J0IHNlcnZpY2VzID1ycC5kcztcbi8vXG4vLyBpbXBvcnQgdW5pdmVyc2VIZWxwZXJzID1ycC51bml2ZXJzZUhlbHBlcnM7XG4vL1xuLy8gY2xhc3MgQWRkTmV3UmVzb3VyY2VTdGF0ZUNhbGN1bGF0b3IgZXh0ZW5kcyBjb250ZXh0QWN0aW9ucy5Db21tb25BU1RTdGF0ZUNhbGN1bGF0b3Ige1xuLy8gICAgIGNhbGN1bGF0ZSAoKSA6IGFueSB7XG4vL1xuLy8gICAgICAgICAvL3VzdWFsbHkgd2UgZG9udCBuZWVkIHRvIGNoZWNrIHRoZSBlZGl0b3IsIENvbW1vbkFTVFN0YXRlQ2FsY3VsYXRvciBkb2VzIHRoaXMgZm9yIHVzXG4vLyAgICAgICAgIC8vYnV0IGluIHRoaXMgY2FzZSB3ZSBhY2NlcHQgbnVsbCBnZW5lcmFsU3RhdGUsIHNvIGRvdWJsZS1jaGVja2luZyBmb3Igb3BlbmVkIGZpbGVcbi8vICAgICAgICAgdmFyIGVkaXRvcj10aGlzLmdldEVkaXRvcigpXG4vLyAgICAgICAgIGlmICghZWRpdG9yKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgaWYgKHBhdGguZXh0bmFtZShlZGl0b3IuZ2V0UGF0aCgpKSAhPSAnLnJhbWwnKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgdmFyIGdlbmVyYWxTdGF0ZSA9IHRoaXMuZ2V0R2VuZXJhbFN0YXRlKClcbi8vICAgICAgICAgaWYgKCFnZW5lcmFsU3RhdGUpIHJldHVybiBudWxsO1xuLy9cbi8vICAgICAgICAgdmFyIGhpZ2hMZXZlbE5vZGUgPSA8aGwuSUhpZ2hMZXZlbE5vZGU+PGFueT5nZW5lcmFsU3RhdGUubm9kZTtcbi8vXG4vLyAgICAgICAgIGlmICghdW5pdmVyc2VIZWxwZXJzLmlzUmVzb3VyY2VUeXBlKGhpZ2hMZXZlbE5vZGUuZGVmaW5pdGlvbigpKSAmJlxuLy8gICAgICAgICAgICAgIXVuaXZlcnNlSGVscGVycy5pc0FwaVR5cGUoaGlnaExldmVsTm9kZS5kZWZpbml0aW9uKCkpKVxuLy8gICAgICAgICAgICAgcmV0dXJuIG51bGxcbi8vXG4vLyAgICAgICAgIGlmKCFoaWdoTGV2ZWxOb2RlLmxvd0xldmVsKCkpIHtcbi8vICAgICAgICAgICAgIHJldHVybiBudWxsO1xuLy8gICAgICAgICB9XG4vL1xuLy8gICAgICAgICByZXR1cm4gaGlnaExldmVsTm9kZVxuLy8gICAgIH1cbi8vIH1cbi8vXG4vLyBjbGFzcyBDcmVhdGVOZXdBUElTdGF0ZUNhbGN1bGF0b3IgZXh0ZW5kcyBjb250ZXh0QWN0aW9ucy5Db21tb25BU1RTdGF0ZUNhbGN1bGF0b3Ige1xuLy8gICAgIGNhbGN1bGF0ZSAoKSA6IGFueSB7XG4vL1xuLy8gICAgICAgICB2YXIgZ2VuZXJhbFN0YXRlID0gdGhpcy5nZXRHZW5lcmFsU3RhdGUoKVxuLy8gICAgICAgICBpZiAoZ2VuZXJhbFN0YXRlKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgdmFyIGVkaXRvcj10aGlzLmdldEVkaXRvcigpXG4vLyAgICAgICAgIGlmICghZWRpdG9yKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgaWYgKHBhdGguZXh0bmFtZShlZGl0b3IuZ2V0UGF0aCgpKSAhPSAnLnJhbWwnKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgdmFyIHRleHQgPSBlZGl0b3IuZ2V0VGV4dCgpLnRyaW0oKVxuLy8gICAgICAgICBpZiAodGV4dCAhPSBcIlwiKSByZXR1cm4gbnVsbFxuLy9cbi8vICAgICAgICAgcmV0dXJuIHt9XG4vLyAgICAgfVxuLy8gfVxuLy9cbi8vXG4vLyBleHBvcnQgZnVuY3Rpb24gZ2V0UmVzb3VyY2VQYXJlbnQobm9kZTogaGwuSUhpZ2hMZXZlbE5vZGUpIHtcbi8vICAgICBpZiAoIW5vZGUgfHwgIW5vZGUucHJvcGVydHkoKSkgcmV0dXJuIG51bGw7XG4vLyAgICAgaWYgKCh1bml2ZXJzZUhlbHBlcnMuaXNSZXNvdXJjZXNQcm9wZXJ0eShub2RlLnByb3BlcnR5KCkpIHx8IHVuaXZlcnNlSGVscGVycy5pc1Jlc291cmNlVHlwZXNQcm9wZXJ0eShub2RlLnByb3BlcnR5KCkpKVxuLy8gICAgICAgICAmJiAodW5pdmVyc2VIZWxwZXJzLmlzUmVzb3VyY2VUeXBlKG5vZGUuZGVmaW5pdGlvbigpKSB8fCB1bml2ZXJzZUhlbHBlcnMuaXNSZXNvdXJjZVR5cGVUeXBlKG5vZGUuZGVmaW5pdGlvbigpKSkpIHJldHVybiBub2RlO1xuLy8gICAgIHJldHVybiBnZXRSZXNvdXJjZVBhcmVudChub2RlLnBhcmVudCgpKTtcbi8vIH1cbi8vIGZ1bmN0aW9uIGdldE1ldGhvZFBhcmVudChub2RlOiBobC5JSGlnaExldmVsTm9kZSkge1xuLy8gICAgIGlmICghbm9kZSB8fCAhbm9kZS5wcm9wZXJ0eSgpKSByZXR1cm4gbnVsbDtcbi8vICAgICBpZiAoKHVuaXZlcnNlSGVscGVycy5pc01ldGhvZFR5cGUobm9kZS5kZWZpbml0aW9uKCkpfHx1bml2ZXJzZUhlbHBlcnMuaXNUcmFpdFR5cGUobm9kZS5kZWZpbml0aW9uKCkpKSYmIW5vZGUuZGVmaW5pdGlvbigpLmdldEFkYXB0ZXIoc2VydmljZXMuUkFNTFNlcnZpY2UpLmlzVXNlckRlZmluZWQoKSl7XG4vLyAgICAgICAgIHJldHVybiBub2RlO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gbnVsbDtcbi8vIH1cbi8vIGZ1bmN0aW9uIGdldFBhcmVudChub2RlOiBobC5JSGlnaExldmVsTm9kZSxuYW1lOnN0cmluZykge1xuLy8gICAgIGlmICghbm9kZSB8fCAhbm9kZS5wcm9wZXJ0eSgpKSByZXR1cm4gbnVsbDtcbi8vICAgICBpZiAoKG5vZGUuZGVmaW5pdGlvbigpLmlzQXNzaWduYWJsZUZyb20obmFtZSkpKXtcbi8vICAgICAgICAgcmV0dXJuIG5vZGU7XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiBudWxsO1xuLy8gfVxuLy9cbi8vIGZ1bmN0aW9uIGdldFJlc291cmNlUGFyZW50T3JSb290KG5vZGU6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgdmFyIHJwID0gZ2V0UmVzb3VyY2VQYXJlbnQobm9kZSk7XG4vLyAgICAgcmV0dXJuIHJwID8gcnAgOiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuYXN0O1xuLy8gfVxuLy9cbi8vIGV4cG9ydCBmdW5jdGlvbiB0b1Jlc291cmNlKG5vZGU6IGhsLklIaWdoTGV2ZWxOb2RlKSB7XG4vLyAgICAgaWYgKCFub2RlIHx8ICFub2RlLnByb3BlcnR5KCkpIHJldHVybiBudWxsO1xuLy9cbi8vICAgICBpZiAoKHVuaXZlcnNlSGVscGVycy5pc1Jlc291cmNlc1Byb3BlcnR5KG5vZGUucHJvcGVydHkoKSkgfHwgdW5pdmVyc2VIZWxwZXJzLmlzUmVzb3VyY2VUeXBlc1Byb3BlcnR5KG5vZGUucHJvcGVydHkoKSkpXG4vLyAgICAgICAgICYmICh1bml2ZXJzZUhlbHBlcnMuaXNSZXNvdXJjZVR5cGUobm9kZS5kZWZpbml0aW9uKCkpIHx8IHVuaXZlcnNlSGVscGVycy5pc1Jlc291cmNlVHlwZVR5cGUobm9kZS5kZWZpbml0aW9uKCkpKSkgcmV0dXJuIG5vZGU7XG4vL1xuLy8gICAgIHJldHVybiBudWxsO1xuLy8gfVxuLy9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclF1aWNrQ29tbWFuZHMoY206IHFjLkNvbW1hbmRNYW5hZ2VyKSB7XG4vLyAgICAgaWYgKCFlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkpIGVkaXRvclRvb2xzLmluaXRFZGl0b3JUb29scyhmYWxzZSk7XG4vL1xuLy8gICAgIHZhciBjb21tYW5kcyA9IFtcbi8vICAgICAgICAgLy9jbS5hZGQoICdyYW1sLWxhYnM6cmUtcGFyc2UnLFxuLy8gICAgICAgICAvLyAgICBcIlBhcnNlIGN1cnJlbnQgZmlsZSBhZ2FpblwiLFxuLy8gICAgICAgICAvLyAgICAoKSA9PiB7XG4vLyAgICAgICAgIC8vICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZG9QYXJzZShlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpLmdldFBhdGgoKSk7XG4vLyAgICAgICAgIC8vICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0VmlldygpLmZvckVhY2hWaWV3ZXIodmlld2VyPT52aWV3ZXIuY2xlYXIoKSk7XG4vLyAgICAgICAgIC8vICAgICAgICBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0VmlldygpLnNldFVuaXQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmFzdCwgdHJ1ZSk7IH0sXG4vLyAgICAgICAgIC8vICAgICgpID0+IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSAmJiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5hc3QgIT0gbnVsbCxcbi8vICAgICAgICAgLy8gICAgLTEwMClcbi8vXG4vLyAgICAgXTtcbi8vXG4vLyAgICAgY29tbWFuZHMuZm9yRWFjaCh4PT54WydfX21vZHVsZV9fJ10gPSAnZWRpdG9yVG9vbHMnKTtcbi8vXG4vLyAgICAgY29udGV4dEFjdGlvbnMuYWRkQWN0aW9uKHtcbi8vICAgICAgICAgbmFtZSA6IFwiQWRkIG5ldyByZXNvdXJjZVwiLFxuLy8gICAgICAgICB0YXJnZXQgOiBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgY2F0ZWdvcnkgOiBbXCJBZGQgbmV3Li4uXCJdLFxuLy8gICAgICAgICBvbkNsaWNrIDogc3RhdGU9PmRpYWxvZ3MubmV3UmVzb3VyY2UoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpKSxcbi8vICAgICAgICAgc3RhdGVDYWxjdWxhdG9yIDogbmV3IEFkZE5ld1Jlc291cmNlU3RhdGVDYWxjdWxhdG9yKCksXG4vLyAgICAgICAgIHNob3VsZERpc3BsYXkgOiBzdGF0ZT0+c3RhdGUgIT0gbnVsbFxuLy8gICAgIH0pXG4vL1xuLy8gICAgIGNvbnRleHRBY3Rpb25zLmFkZEFjdGlvbih7XG4vLyAgICAgICAgIG5hbWUgOiBcIkNyZWF0ZSBuZXcgQVBJXCIsXG4vLyAgICAgICAgIHRhcmdldCA6IGNvbnRleHRBY3Rpb25zLlRBUkdFVF9SQU1MX0VESVRPUl9OT0RFLFxuLy8gICAgICAgICBjYXRlZ29yeSA6IFtcIkFkZCBuZXcuLi5cIl0sXG4vLyAgICAgICAgIG9uQ2xpY2sgOiBzdGF0ZT0+ZGlhbG9ncy5uZXdBcGkoKSxcbi8vICAgICAgICAgc3RhdGVDYWxjdWxhdG9yIDogbmV3IENyZWF0ZU5ld0FQSVN0YXRlQ2FsY3VsYXRvcigpLFxuLy8gICAgICAgICBzaG91bGREaXNwbGF5IDogc3RhdGU9PnN0YXRlICE9IG51bGxcbi8vICAgICB9KVxuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJBZGQgbmV3IG1ldGhvZFwiLCBbXCJBZGQgbmV3Li4uXCJdLCBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgKCkgPT4gZGlhbG9ncy5uZXdNZXRob2QodG9SZXNvdXJjZShlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgdG9SZXNvdXJjZShlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFVSSSBQYXJhbWV0ZXJcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZSh0b1Jlc291cmNlKGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSksXCJDcmVhdGUgbmV3IFVSSSBQYXJhbWV0ZXJcIixcInVyaVBhcmFtZXRlcnNcIiksXG4vLyAgICAgICAgICgpID0+IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSAmJiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpICYmICh0b1Jlc291cmNlKGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSkgIT0gbnVsbCkpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFF1ZXJ5IFBhcmFtZXRlclwiLCBbXCJBZGQgbmV3Li4uXCJdLCBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgKCkgPT4gZGlhbG9ncy5uZXdOb2RlKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpLFwiQ3JlYXRlIG5ldyBRdWVyeSBQYXJhbWV0ZXJcIixcInF1ZXJ5UGFyYW1ldGVyc1wiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpKTtcbi8vXG4vLyAgICAgY29udGV4dEFjdGlvbnMuYWRkU2ltcGxlQWN0aW9uKFwiQ3JlYXRlIG5ldyBIZWFkZXJcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRNZXRob2RQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpKSxcIkNyZWF0ZSBuZXcgSGVhZGVyXCIsXCJoZWFkZXJzXCIpLFxuLy8gICAgICAgICAoKSA9PiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkgJiYgZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldEN1cnJlbnRFZGl0b3IoKSAmJiAoZ2V0TWV0aG9kUGFyZW50KGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSkgIT0gbnVsbCkpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEhlYWRlclwiLCBbXCJBZGQgbmV3Li4uXCJdLCBjb250ZXh0QWN0aW9ucy5UQVJHRVRfUkFNTF9FRElUT1JfTk9ERSxcbi8vICAgICAgICAgKCkgPT4gZGlhbG9ncy5uZXdOb2RlKGdldFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCksXCJSZXNwb25zZVwiKSxcIkNyZWF0ZSBuZXcgSGVhZGVyXCIsXCJoZWFkZXJzXCIpLFxuLy8gICAgICAgICAoKSA9PiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkgJiYgZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldEN1cnJlbnRFZGl0b3IoKSAmJiAoZ2V0UGFyZW50KGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSxcIlJlc3BvbnNlXCIgKSE9IG51bGwpKTtcbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEJvZHlcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpLFwiUmVzcG9uc2VcIiksXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEJvZHlcIixcImJvZHlcIiksXG4vLyAgICAgICAgICgpID0+IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKSAmJiBlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0Q3VycmVudEVkaXRvcigpICYmIChnZXRQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpLFwiUmVzcG9uc2VcIiApIT0gbnVsbCkpO1xuLy8gICAgIGNvbnRleHRBY3Rpb25zLmFkZFNpbXBsZUFjdGlvbihcIkNyZWF0ZSBuZXcgUHJvcGVydHlcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpLFwiT2JqZWN0VHlwZURlY2xhcmF0aW9uXCIpLFwiQ3JlYXRlIG5ldyBQcm9wZXJ0eVwiLFwicHJvcGVydGllc1wiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCksXCJPYmplY3RUeXBlRGVjbGFyYXRpb25cIiApIT0gbnVsbCkpO1xuLy9cbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IEJvZHlcIiwgW1wiQWRkIG5ldy4uLlwiXSwgY29udGV4dEFjdGlvbnMuVEFSR0VUX1JBTUxfRURJVE9SX05PREUsXG4vLyAgICAgICAgICgpID0+IGRpYWxvZ3MubmV3Tm9kZShnZXRNZXRob2RQYXJlbnQoZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpLmdldFNlbGVjdGVkTm9kZSgpKSxcIkNyZWF0ZSBuZXcgQm9keVwiLFwiYm9keVwiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpKTtcbi8vICAgICBjb250ZXh0QWN0aW9ucy5hZGRTaW1wbGVBY3Rpb24oXCJDcmVhdGUgbmV3IFJlc3BvbnNlXCIsIFtcIkFkZCBuZXcuLi5cIl0sIGNvbnRleHRBY3Rpb25zLlRBUkdFVF9SQU1MX0VESVRPUl9OT0RFLFxuLy8gICAgICAgICAoKSA9PiBkaWFsb2dzLm5ld05vZGUoZ2V0TWV0aG9kUGFyZW50KGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRTZWxlY3RlZE5vZGUoKSksXCJDcmVhdGUgbmV3IFJlc3BvbnNlXCIsXCJyZXNwb25zZXNcIixcIjIwMFwiKSxcbi8vICAgICAgICAgKCkgPT4gZWRpdG9yVG9vbHMuYXF1aXJlTWFuYWdlcigpICYmIGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKS5nZXRDdXJyZW50RWRpdG9yKCkgJiYgKGdldE1ldGhvZFBhcmVudChlZGl0b3JUb29scy5hcXVpcmVNYW5hZ2VyKCkuZ2V0U2VsZWN0ZWROb2RlKCkpICE9IG51bGwpKTtcbn1cbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/quick-commands/code-commands.js\n// module id = 24\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import suggestions = require('raml-suggestions');\nvar ramlServer = require(\"raml-language-server\");\n// import sharedAstInitializerInterfaces = require('../shared-ast-initializer-interfaces');\nexports.selector = '.source.raml';\nexports.disableForSelector = '.text.html .comment';\nexports.filterSuggestions = true;\nexports.inclusionPriority = 1;\nexports.excludeLowerPriority = true;\n// export function initialize(astProvider : sharedAstInitializerInterfaces.IASTProvider) {\n//     suggestions.setDefaultASTProvider(<any>astProvider);\n// }\nfunction onDidInsertSuggestion(event) {\n    var offset = event.editor.getBuffer().characterIndexForPosition(event.triggerPosition);\n    if (event.suggestion.annotation) {\n        var txt = event.editor.getBuffer().getText();\n        for (var i = offset; i < txt.length; i++) {\n            var c = txt.charAt(i);\n            if (c == ')') {\n                offset = i + 1;\n                break;\n            }\n            if (c == '\\r' || c == '\\n') {\n                return;\n            }\n        }\n        var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n        event.editor.getBuffer().insert(newPos, ':');\n        return;\n    }\n    if ((event.suggestion.replacementPrefix && event.suggestion.extra) || event.suggestion.extra == \"%\") {\n        var newPos = event.editor.getBuffer().positionForCharacterIndex(offset - event.suggestion.replacementPrefix.length);\n        event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n    }\n    else {\n        //This actually looks exactly like a previous case but typing it as a separate case for now TODO\n        if (event.suggestion.extra == \" \") {\n            var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n            event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n        }\n        //FIXME\n        if (event.suggestion.extra == \" { \") {\n            var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n            event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n        }\n        if (event.suggestion.extra && event.suggestion.extra.indexOf(\"!include\") != -1) {\n            var newPos = event.editor.getBuffer().positionForCharacterIndex(offset);\n            event.editor.getBuffer().insert(newPos, event.suggestion.extra);\n        }\n    }\n}\nexports.onDidInsertSuggestion = onDidInsertSuggestion;\n// class FSProvider implements suggestions.IFSProvider {\n//     contentDirName(content: suggestions.IEditorStateProvider): string {\n//         var contentPath = content.getPath();\n//\n//         return path.dirname(contentPath);\n//     }\n//\n//     dirName(childPath: string): string {\n//         return path.dirname(childPath);\n//     }\n//\n//     exists(checkPath: string): boolean {\n//         return fs.existsSync(checkPath);\n//     }\n//\n//     resolve(contextPath: string, relativePath: string): string {\n//         return path.resolve(contextPath, relativePath);\n//     }\n//\n//     isDirectory(dirPath: string): boolean {\n//         var stat = fs.statSync(dirPath);\n//\n//         return stat && stat.isDirectory();\n//     }\n//\n//     readDir(dirPath: string): string[] {\n//         return fs.readdirSync(dirPath);\n//     }\n//\n//     existsAsync(path: string): Promise<boolean> {\n//         return new Promise(resolve => {\n//             fs.exists(path, (result) => {resolve(result)})\n//         });\n//     }\n//\n//     /**\n//      * Returns directory content list.\n//      * @param fullPath\n//      */\n//     readDirAsync(path: string): Promise<string[]> {\n//         return new Promise(resolve => {\n//             fs.readdir(path, (err, result) => {resolve(result)})\n//         });\n//     }\n//\n//     /**\n//      * Check whether the path points to a directory.\n//      * @param fullPath\n//      */\n//     isDirectoryAsync(path: string): Promise<boolean> {\n//         return new Promise(resolve => {\n//             fs.stat(path, (err, stats) => {resolve(stats.isDirectory())})\n//         });\n//     }\n// }\n// class AtomEditorState implements suggestions.IEditorStateProvider {\n//     textEditor: AtomCore.IEditor;\n//\n//     constructor(textEditor: AtomCore.IEditor,private request: AtomCompletionRequest) {\n//         this.textEditor = textEditor;\n//     }\n//\n//     getText(): string {\n//         return this.textEditor.getBuffer().getText();\n//     }\n//\n//     getPath(): string {\n//         return this.textEditor.getPath();\n//     }\n//\n//     getBaseName(): string {\n//         return path.basename(this.getPath());\n//     }\n//\n//     getOffset(): number {\n//         return this.request.editor.getBuffer().characterIndexForPosition(this.request.bufferPosition);\n//     }\n// }\nfunction getSuggestions(request) {\n    // var editorState = new AtomEditorState(request.editor, request);\n    var editor = request.editor;\n    var offset = editor.getBuffer().characterIndexForPosition(request.bufferPosition);\n    ramlServer.getNodeClientConnection().documentChanged({\n        uri: request.editor.getPath(),\n        text: editor.getText()\n    });\n    return ramlServer.getNodeClientConnection().getSuggestions(request.editor.getPath(), offset);\n    // return suggestions.suggest(editorState, new FSProvider());\n}\nexports.getSuggestions = getSuggestions;\n// export function getAstNode(request: AtomCompletionRequest,clearLastChar:boolean=true,allowNull:boolean=true):highlevel.IParseResult{\n//     var p=request.editor.getPath();\n//     var prj=rp.project.createProject(path.dirname(p));\n//     var offset=request.editor.getBuffer().characterIndexForPosition(request.bufferPosition);\n//     var text=request.editor.getBuffer().getText();\n//     var kind=search.determineCompletionKind(text,offset);\n//     if(kind==search.LocationKind.KEY_COMPLETION&&clearLastChar){\n//         var pos=offset>0?offset-1:offset;\n//         for (var i=pos;i>0;i--){\n//             var c=text[i];\n//             if (c=='\\r'||c=='\\n'){\n//                 break;\n//             }\n//             else{\n//                 if (c==' '||c=='\\t'){\n//                     ilevel++;\n//                 }\n//             }\n//         }\n//         var oldOfffset=offset;\n//\n//         text=text.substring(0,oldOfffset)+\"k:\"+text.substring(oldOfffset);\n//         //offset--;\n//     }\n//     var ilevel=0;\n//     var unit=prj.setCachedUnitContent(path.basename(p),text);\n//     var ast=<highlevel.IHighLevelNode>unit.highLevel();\n//     var cm=offset;\n//     for (var pm=offset-1;pm>=0;pm--){\n//         var c=text[pm];\n//         //if (c==' '||c=='\\t'||c=='\\r'||c=='\\n'){\n//         //    cm=pm-1;\n//         //    continue;\n//         //}\n//         if (c==' '||c=='\\t'){\n//             cm=pm-1;\n//             continue;\n//         }\n//         break;\n//     }\n//     var astNode=ast.findElementAtOffset(cm);\n//\n//     if (astNode&&astNode.parent()==null){\n//         if (ilevel>0&&kind==search.LocationKind.KEY_COMPLETION) {\n//             var attr=_.find(astNode.attrs(),attr=>{\n//                 var at=<any>attr;\n//                 return at.lowLevel().start()<offset&&at.lowLevel().end()>=offset&&!at.property().isKey()\n//             });\n//             if (!attr) {\n//                 if (allowNull) {\n//                     return null;\n//                 }\n//             }\n//         }\n//         //check if we are on correct indentation level\n//     }\n//     if (!allowNull&&!astNode){\n//         return ast;\n//     }\n//     return astNode;\n// }\n//\n// export function saveUnit(unit : lowLevel.ICompilationUnit) : void {\n//     var unitPath = unit.absolutePath()\n//     var unitText = unit.contents()\n//\n//     //first trying to find an opened text editor\n//     var openedEditor = _.find(atom.workspace.getTextEditors(), editor => {\n//         var editorPath = editor.getPath()\n//         return editorPath == unitPath\n//     })\n//\n//     if (openedEditor) {\n//         openedEditor.setText(unitText)\n//     } else {\n//         fs.writeFileSync(unitPath, unitText)\n//     }\n// }\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3N1Z2dlc3Rpb24vcHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFVQSxvREFBb0Q7QUFDcEQsaURBQW9EO0FBQ3BELDJGQUEyRjtBQUVoRixRQUFBLFFBQVEsR0FBRSxjQUFjLENBQUE7QUFDeEIsUUFBQSxrQkFBa0IsR0FBRSxxQkFBcUIsQ0FBQTtBQUN6QyxRQUFBLGlCQUFpQixHQUFFLElBQUksQ0FBQTtBQUN2QixRQUFBLGlCQUFpQixHQUFFLENBQUMsQ0FBQTtBQUNwQixRQUFBLG9CQUFvQixHQUFDLElBQUksQ0FBQztBQVVyQywwRkFBMEY7QUFDMUYsMkRBQTJEO0FBQzNELElBQUk7QUFFSiwrQkFBc0MsS0FBcUU7SUFDdkcsSUFBSSxNQUFNLEdBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDckYsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQSxDQUFDO1FBQzdCLElBQUksR0FBRyxHQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDM0MsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUMsTUFBTSxFQUFDLENBQUMsR0FBQyxHQUFHLENBQUMsTUFBTSxFQUFDLENBQUMsRUFBRSxFQUFDLENBQUM7WUFDaEMsSUFBSSxDQUFDLEdBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUUsR0FBRyxDQUFDLENBQUEsQ0FBQztnQkFDUixNQUFNLEdBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQztnQkFDWCxLQUFLLENBQUM7WUFDVixDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFFLElBQUksSUFBRSxDQUFDLElBQUUsSUFBSSxDQUFDLENBQUEsQ0FB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LElBQUk7QUFDSixFQUFFO0FBQ0Ysc0VBQXNFO0FBQ3RFLHlDQUF5QztBQUN6QyxxQ0FBcUM7QUFDckMsRUFBRTtBQUNGLG1EQUFtRDtBQUNuRCw2RUFBNkU7QUFDN0UsNENBQTRDO0FBQzVDLHdDQUF3QztBQUN4QyxTQUFTO0FBQ1QsRUFBRTtBQUNGLDBCQUEwQjtBQUMxQix5Q0FBeUM7QUFDekMsZUFBZTtBQUNmLCtDQUErQztBQUMvQyxRQUFRO0FBQ1IsSUFBSSIsImZpbGUiOiJzcmMvYXRvbS9zdWdnZXN0aW9uL3Byb3ZpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzID0gcmVxdWlyZSAoJ2ZzJylcbmltcG9ydCBwYXRoID0gcmVxdWlyZSAoJ3BhdGgnKVxuLy8gaW1wb3J0IHJwPXJlcXVpcmUoXCJyYW1sLTEtcGFyc2VyXCIpXG4vLyBpbXBvcnQgaGlnaGxldmVsPXJwLmhsO1xuLy8gaW1wb3J0IGRlZj1ycC5kcztcbi8vIGltcG9ydCBzZWFyY2g9cnAuc2VhcmNoO1xuLy8gaW1wb3J0IGxvd0xldmVsPXJwLmxsO1xuXG5pbXBvcnQgXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTtcblxuLy8gaW1wb3J0IHN1Z2dlc3Rpb25zID0gcmVxdWlyZSgncmFtbC1zdWdnZXN0aW9ucycpO1xuaW1wb3J0IHJhbWxTZXJ2ZXIgPSByZXF1aXJlKFwicmFtbC1sYW5ndWFnZS1zZXJ2ZXJcIik7XG4vLyBpbXBvcnQgc2hhcmVkQXN0SW5pdGlhbGl6ZXJJbnRlcmZhY2VzID0gcmVxdWlyZSgnLi4vc2hhcmVkLWFzdC1pbml0aWFsaXplci1pbnRlcmZhY2VzJyk7XG5cbmV4cG9ydCB2YXIgc2VsZWN0b3I9ICcuc291cmNlLnJhbWwnXG5leHBvcnQgdmFyIGRpc2FibGVGb3JTZWxlY3Rvcj0gJy50ZXh0Lmh0bWwgLmNvbW1lbnQnXG5leHBvcnQgdmFyIGZpbHRlclN1Z2dlc3Rpb25zPSB0cnVlXG5leHBvcnQgdmFyIGluY2x1c2lvblByaW9yaXR5PSAxXG5leHBvcnQgdmFyIGV4Y2x1ZGVMb3dlclByaW9yaXR5PXRydWU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXRvbUNvbXBsZXRpb25SZXF1ZXN0IHtcbiAgICBidWZmZXJQb3NpdGlvbjpUZXh0QnVmZmVyLklQb2ludFxuICAgIGVkaXRvcjpBdG9tQ29yZS5JRWRpdG9yXG4gICAgcHJlZml4Pzogc3RyaW5nXG59XG5cbmltcG9ydCBlZGl0b3JUb29scz1yZXF1aXJlKFwiLi4vZWRpdG9yLXRvb2xzL2VkaXRvci10b29sc1wiKVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZShhc3RQcm92aWRlciA6IHNoYXJlZEFzdEluaXRpYWxpemVySW50ZXJmYWNlcy5JQVNUUHJvdmlkZXIpIHtcbi8vICAgICBzdWdnZXN0aW9ucy5zZXREZWZhdWx0QVNUUHJvdmlkZXIoPGFueT5hc3RQcm92aWRlcik7XG4vLyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBvbkRpZEluc2VydFN1Z2dlc3Rpb24oZXZlbnQ6e2VkaXRvcjpBdG9tQ29yZS5JRWRpdG9yOyB0cmlnZ2VyUG9zaXRpb246YW55OyBzdWdnZXN0aW9uOiBhbnl9KXtcbiAgICB2YXIgb2Zmc2V0PWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKGV2ZW50LnRyaWdnZXJQb3NpdGlvbik7XG4gICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uYW5ub3RhdGlvbil7XG4gICAgICAgIHZhciB0eHQ9ZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLmdldFRleHQoKTtcbiAgICAgICAgZm9yICh2YXIgaT1vZmZzZXQ7aTx0eHQubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICB2YXIgYz10eHQuY2hhckF0KGkpO1xuICAgICAgICAgICAgaWYgKGM9PScpJyl7XG4gICAgICAgICAgICAgICAgb2Zmc2V0PWkrMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjPT0nXFxyJ3x8Yz09J1xcbicpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3UG9zPWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KG9mZnNldClcblxuICAgICAgICBldmVudC5lZGl0b3IuZ2V0QnVmZmVyKCkuaW5zZXJ0KG5ld1BvcywgJzonKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoKGV2ZW50LnN1Z2dlc3Rpb24ucmVwbGFjZW1lbnRQcmVmaXgmJmV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEpfHxldmVudC5zdWdnZXN0aW9uLmV4dHJhPT1cIiVcIikge1xuICAgICAgICB2YXIgbmV3UG9zPWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KG9mZnNldC1ldmVudC5zdWdnZXN0aW9uLnJlcGxhY2VtZW50UHJlZml4Lmxlbmd0aClcbiAgICAgICAgZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLmluc2VydChuZXdQb3MsIGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgICAvL1RoaXMgYWN0dWFsbHkgbG9va3MgZXhhY3RseSBsaWtlIGEgcHJldmlvdXMgY2FzZSBidXQgdHlwaW5nIGl0IGFzIGEgc2VwYXJhdGUgY2FzZSBmb3Igbm93IFRPRE9cbiAgICAgICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmE9PVwiIFwiKXtcbiAgICAgICAgICAgIHZhciBuZXdQb3M9ZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLnBvc2l0aW9uRm9yQ2hhcmFjdGVySW5kZXgob2Zmc2V0KVxuICAgICAgICAgICAgZXZlbnQuZWRpdG9yLmdldEJ1ZmZlcigpLmluc2VydChuZXdQb3MsIGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEpO1xuICAgICAgICB9XG4gICAgICAgIC8vRklYTUVcbiAgICAgICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmE9PVwiIHsgXCIpe1xuICAgICAgICAgICAgdmFyIG5ld1Bvcz1ldmVudC5lZGl0b3IuZ2V0QnVmZmVyKCkucG9zaXRpb25Gb3JDaGFyYWN0ZXJJbmRleChvZmZzZXQpXG4gICAgICAgICAgICBldmVudC5lZGl0b3IuZ2V0QnVmZmVyKCkuaW5zZXJ0KG5ld1BvcywgZXZlbnQuc3VnZ2VzdGlvbi5leHRyYSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEmJmV2ZW50LnN1Z2dlc3Rpb24uZXh0cmEuaW5kZXhPZihcIiFpbmNsdWRlXCIpIT0tMSl7XG4gICAgICAgICAgICB2YXIgbmV3UG9zPWV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5wb3NpdGlvbkZvckNoYXJhY3RlckluZGV4KG9mZnNldClcbiAgICAgICAgICAgIGV2ZW50LmVkaXRvci5nZXRCdWZmZXIoKS5pbnNlcnQobmV3UG9zLCBldmVudC5zdWdnZXN0aW9uLmV4dHJhKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBjbGFzcyBGU1Byb3ZpZGVyIGltcGxlbWVudHMgc3VnZ2VzdGlvbnMuSUZTUHJvdmlkZXIge1xuLy8gICAgIGNvbnRlbnREaXJOYW1lKGNvbnRlbnQ6IHN1Z2dlc3Rpb25zLklFZGl0b3JTdGF0ZVByb3ZpZGVyKTogc3RyaW5nIHtcbi8vICAgICAgICAgdmFyIGNvbnRlbnRQYXRoID0gY29udGVudC5nZXRQYXRoKCk7XG4vL1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5kaXJuYW1lKGNvbnRlbnRQYXRoKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIGRpck5hbWUoY2hpbGRQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5kaXJuYW1lKGNoaWxkUGF0aCk7XG4vLyAgICAgfVxuLy9cbi8vICAgICBleGlzdHMoY2hlY2tQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbi8vICAgICAgICAgcmV0dXJuIGZzLmV4aXN0c1N5bmMoY2hlY2tQYXRoKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIHJlc29sdmUoY29udGV4dFBhdGg6IHN0cmluZywgcmVsYXRpdmVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5yZXNvbHZlKGNvbnRleHRQYXRoLCByZWxhdGl2ZVBhdGgpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgaXNEaXJlY3RvcnkoZGlyUGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4vLyAgICAgICAgIHZhciBzdGF0ID0gZnMuc3RhdFN5bmMoZGlyUGF0aCk7XG4vL1xuLy8gICAgICAgICByZXR1cm4gc3RhdCAmJiBzdGF0LmlzRGlyZWN0b3J5KCk7XG4vLyAgICAgfVxuLy9cbi8vICAgICByZWFkRGlyKGRpclBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcbi8vICAgICAgICAgcmV0dXJuIGZzLnJlYWRkaXJTeW5jKGRpclBhdGgpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgZXhpc3RzQXN5bmMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4vLyAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbi8vICAgICAgICAgICAgIGZzLmV4aXN0cyhwYXRoLCAocmVzdWx0KSA9PiB7cmVzb2x2ZShyZXN1bHQpfSlcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuLy9cbi8vICAgICAvKipcbi8vICAgICAgKiBSZXR1cm5zIGRpcmVjdG9yeSBjb250ZW50IGxpc3QuXG4vLyAgICAgICogQHBhcmFtIGZ1bGxQYXRoXG4vLyAgICAgICovXG4vLyAgICAgcmVhZERpckFzeW5jKHBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbi8vICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuLy8gICAgICAgICAgICAgZnMucmVhZGRpcihwYXRoLCAoZXJyLCByZXN1bHQpID0+IHtyZXNvbHZlKHJlc3VsdCl9KVxuLy8gICAgICAgICB9KTtcbi8vICAgICB9XG4vL1xuLy8gICAgIC8qKlxuLy8gICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIHBhdGggcG9pbnRzIHRvIGEgZGlyZWN0b3J5LlxuLy8gICAgICAqIEBwYXJhbSBmdWxsUGF0aFxuLy8gICAgICAqL1xuLy8gICAgIGlzRGlyZWN0b3J5QXN5bmMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4vLyAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbi8vICAgICAgICAgICAgIGZzLnN0YXQocGF0aCwgKGVyciwgc3RhdHMpID0+IHtyZXNvbHZlKHN0YXRzLmlzRGlyZWN0b3J5KCkpfSlcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuLy8gfVxuXG4vLyBjbGFzcyBBdG9tRWRpdG9yU3RhdGUgaW1wbGVtZW50cyBzdWdnZXN0aW9ucy5JRWRpdG9yU3RhdGVQcm92aWRlciB7XG4vLyAgICAgdGV4dEVkaXRvcjogQXRvbUNvcmUuSUVkaXRvcjtcbi8vXG4vLyAgICAgY29uc3RydWN0b3IodGV4dEVkaXRvcjogQXRvbUNvcmUuSUVkaXRvcixwcml2YXRlIHJlcXVlc3Q6IEF0b21Db21wbGV0aW9uUmVxdWVzdCkge1xuLy8gICAgICAgICB0aGlzLnRleHRFZGl0b3IgPSB0ZXh0RWRpdG9yO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgZ2V0VGV4dCgpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gdGhpcy50ZXh0RWRpdG9yLmdldEJ1ZmZlcigpLmdldFRleHQoKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIGdldFBhdGgoKTogc3RyaW5nIHtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMudGV4dEVkaXRvci5nZXRQYXRoKCk7XG4vLyAgICAgfVxuLy9cbi8vICAgICBnZXRCYXNlTmFtZSgpOiBzdHJpbmcge1xuLy8gICAgICAgICByZXR1cm4gcGF0aC5iYXNlbmFtZSh0aGlzLmdldFBhdGgoKSk7XG4vLyAgICAgfVxuLy9cbi8vICAgICBnZXRPZmZzZXQoKTogbnVtYmVyIHtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdC5lZGl0b3IuZ2V0QnVmZmVyKCkuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbih0aGlzLnJlcXVlc3QuYnVmZmVyUG9zaXRpb24pO1xuLy8gICAgIH1cbi8vIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3Rpb25zKHJlcXVlc3Q6IEF0b21Db21wbGV0aW9uUmVxdWVzdCkge1xuXG4gICAgLy8gdmFyIGVkaXRvclN0YXRlID0gbmV3IEF0b21FZGl0b3JTdGF0ZShyZXF1ZXN0LmVkaXRvciwgcmVxdWVzdCk7XG5cbiAgICBsZXQgZWRpdG9yID0gcmVxdWVzdC5lZGl0b3I7XG4gICAgbGV0IG9mZnNldCA9IGVkaXRvci5nZXRCdWZmZXIoKS5jaGFyYWN0ZXJJbmRleEZvclBvc2l0aW9uKHJlcXVlc3QuYnVmZmVyUG9zaXRpb24pO1xuXG4gICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRvY3VtZW50Q2hhbmdlZCh7XG4gICAgICAgIHVyaTogcmVxdWVzdC5lZGl0b3IuZ2V0UGF0aCgpLFxuICAgICAgICB0ZXh0OiBlZGl0b3IuZ2V0VGV4dCgpXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmdldFN1Z2dlc3Rpb25zKHJlcXVlc3QuZWRpdG9yLmdldFBhdGgoKSwgb2Zmc2V0KTtcbiAgICAvLyByZXR1cm4gc3VnZ2VzdGlvbnMuc3VnZ2VzdChlZGl0b3JTdGF0ZSwgbmV3IEZTUHJvdmlkZXIoKSk7XG59XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBnZXRBc3ROb2RlKHJlcXVlc3Q6IEF0b21Db21wbGV0aW9uUmVxdWVzdCxjbGVhckxhc3RDaGFyOmJvb2xlYW49dHJ1ZSxhbGxvd051bGw6Ym9vbGVhbj10cnVlKTpoaWdobGV2ZWwuSVBhcnNlUmVzdWx0e1xuLy8gICAgIHZhciBwPXJlcXVlc3QuZWRpdG9yLmdldFBhdGgoKTtcbi8vICAgICB2YXIgcHJqPXJwLnByb2plY3QuY3JlYXRlUHJvamVjdChwYXRoLmRpcm5hbWUocCkpO1xuLy8gICAgIHZhciBvZmZzZXQ9cmVxdWVzdC5lZGl0b3IuZ2V0QnVmZmVyKCkuY2hhcmFjdGVySW5kZXhGb3JQb3NpdGlvbihyZXF1ZXN0LmJ1ZmZlclBvc2l0aW9uKTtcbi8vICAgICB2YXIgdGV4dD1yZXF1ZXN0LmVkaXRvci5nZXRCdWZmZXIoKS5nZXRUZXh0KCk7XG4vLyAgICAgdmFyIGtpbmQ9c2VhcmNoLmRldGVybWluZUNvbXBsZXRpb25LaW5kKHRleHQsb2Zmc2V0KTtcbi8vICAgICBpZihraW5kPT1zZWFyY2guTG9jYXRpb25LaW5kLktFWV9DT01QTEVUSU9OJiZjbGVhckxhc3RDaGFyKXtcbi8vICAgICAgICAgdmFyIHBvcz1vZmZzZXQ+MD9vZmZzZXQtMTpvZmZzZXQ7XG4vLyAgICAgICAgIGZvciAodmFyIGk9cG9zO2k+MDtpLS0pe1xuLy8gICAgICAgICAgICAgdmFyIGM9dGV4dFtpXTtcbi8vICAgICAgICAgICAgIGlmIChjPT0nXFxyJ3x8Yz09J1xcbicpe1xuLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgZWxzZXtcbi8vICAgICAgICAgICAgICAgICBpZiAoYz09JyAnfHxjPT0nXFx0Jyl7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlsZXZlbCsrO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICB2YXIgb2xkT2ZmZnNldD1vZmZzZXQ7XG4vL1xuLy8gICAgICAgICB0ZXh0PXRleHQuc3Vic3RyaW5nKDAsb2xkT2ZmZnNldCkrXCJrOlwiK3RleHQuc3Vic3RyaW5nKG9sZE9mZmZzZXQpO1xuLy8gICAgICAgICAvL29mZnNldC0tO1xuLy8gICAgIH1cbi8vICAgICB2YXIgaWxldmVsPTA7XG4vLyAgICAgdmFyIHVuaXQ9cHJqLnNldENhY2hlZFVuaXRDb250ZW50KHBhdGguYmFzZW5hbWUocCksdGV4dCk7XG4vLyAgICAgdmFyIGFzdD08aGlnaGxldmVsLklIaWdoTGV2ZWxOb2RlPnVuaXQuaGlnaExldmVsKCk7XG4vLyAgICAgdmFyIGNtPW9mZnNldDtcbi8vICAgICBmb3IgKHZhciBwbT1vZmZzZXQtMTtwbT49MDtwbS0tKXtcbi8vICAgICAgICAgdmFyIGM9dGV4dFtwbV07XG4vLyAgICAgICAgIC8vaWYgKGM9PScgJ3x8Yz09J1xcdCd8fGM9PSdcXHInfHxjPT0nXFxuJyl7XG4vLyAgICAgICAgIC8vICAgIGNtPXBtLTE7XG4vLyAgICAgICAgIC8vICAgIGNvbnRpbnVlO1xuLy8gICAgICAgICAvL31cbi8vICAgICAgICAgaWYgKGM9PScgJ3x8Yz09J1xcdCcpe1xuLy8gICAgICAgICAgICAgY209cG0tMTtcbi8vICAgICAgICAgICAgIGNvbnRpbnVlO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGJyZWFrO1xuLy8gICAgIH1cbi8vICAgICB2YXIgYXN0Tm9kZT1hc3QuZmluZEVsZW1lbnRBdE9mZnNldChjbSk7XG4vL1xuLy8gICAgIGlmIChhc3ROb2RlJiZhc3ROb2RlLnBhcmVudCgpPT1udWxsKXtcbi8vICAgICAgICAgaWYgKGlsZXZlbD4wJiZraW5kPT1zZWFyY2guTG9jYXRpb25LaW5kLktFWV9DT01QTEVUSU9OKSB7XG4vLyAgICAgICAgICAgICB2YXIgYXR0cj1fLmZpbmQoYXN0Tm9kZS5hdHRycygpLGF0dHI9Pntcbi8vICAgICAgICAgICAgICAgICB2YXIgYXQ9PGFueT5hdHRyO1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiBhdC5sb3dMZXZlbCgpLnN0YXJ0KCk8b2Zmc2V0JiZhdC5sb3dMZXZlbCgpLmVuZCgpPj1vZmZzZXQmJiFhdC5wcm9wZXJ0eSgpLmlzS2V5KClcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgICAgaWYgKCFhdHRyKSB7XG4vLyAgICAgICAgICAgICAgICAgaWYgKGFsbG93TnVsbCkge1xuLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgLy9jaGVjayBpZiB3ZSBhcmUgb24gY29ycmVjdCBpbmRlbnRhdGlvbiBsZXZlbFxuLy8gICAgIH1cbi8vICAgICBpZiAoIWFsbG93TnVsbCYmIWFzdE5vZGUpe1xuLy8gICAgICAgICByZXR1cm4gYXN0O1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gYXN0Tm9kZTtcbi8vIH1cbi8vXG4vLyBleHBvcnQgZnVuY3Rpb24gc2F2ZVVuaXQodW5pdCA6IGxvd0xldmVsLklDb21waWxhdGlvblVuaXQpIDogdm9pZCB7XG4vLyAgICAgdmFyIHVuaXRQYXRoID0gdW5pdC5hYnNvbHV0ZVBhdGgoKVxuLy8gICAgIHZhciB1bml0VGV4dCA9IHVuaXQuY29udGVudHMoKVxuLy9cbi8vICAgICAvL2ZpcnN0IHRyeWluZyB0byBmaW5kIGFuIG9wZW5lZCB0ZXh0IGVkaXRvclxuLy8gICAgIHZhciBvcGVuZWRFZGl0b3IgPSBfLmZpbmQoYXRvbS53b3Jrc3BhY2UuZ2V0VGV4dEVkaXRvcnMoKSwgZWRpdG9yID0+IHtcbi8vICAgICAgICAgdmFyIGVkaXRvclBhdGggPSBlZGl0b3IuZ2V0UGF0aCgpXG4vLyAgICAgICAgIHJldHVybiBlZGl0b3JQYXRoID09IHVuaXRQYXRoXG4vLyAgICAgfSlcbi8vXG4vLyAgICAgaWYgKG9wZW5lZEVkaXRvcikge1xuLy8gICAgICAgICBvcGVuZWRFZGl0b3Iuc2V0VGV4dCh1bml0VGV4dClcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHVuaXRQYXRoLCB1bml0VGV4dClcbi8vICAgICB9XG4vLyB9XG4iXX0=\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/suggestion/provider.js\n// module id = 25\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction doPatch() {\n    var oldRegister = document.registerElement;\n    document.registerElement = function (name, options) {\n        if (name === \"atom-pane-resize-handle\") {\n            var proto = options.prototype;\n            if (proto) {\n                var oldAttachedCallback = proto.attachedCallback;\n                proto.attachedCallback = function () {\n                    if (this.parentElement) {\n                        return oldAttachedCallback.apply(this, []);\n                    }\n                };\n            }\n            document.registerElement = oldRegister;\n        }\n        return oldRegister.apply(document, [name, options]);\n    };\n}\nexports.doPatch = doPatch;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvcmUvcGF0Y2hFbGVtZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBO0lBRUksSUFBSSxXQUFXLEdBQVMsUUFBUyxDQUFDLGVBQWUsQ0FBQztJQUU1QyxRQUFTLENBQUMsZUFBZSxHQUFHLFVBQVUsSUFBSSxFQUFFLE9BQU87UUFFckQsRUFBRSxDQUFBLENBQUMsSUFBSSxLQUFLLHlCQUF5QixDQUFDLENBQUMsQ0FBQztZQUNwQyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1lBRTlCLEVBQUUsQ0FBQSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ1AsSUFBSSxtQkFBbUIsR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUM7Z0JBRWpELEtBQUssQ0FBQyxnQkFBZ0IsR0FBRztvQkFDckIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7d0JBQ3JCLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFBO29CQUM5QyxDQUFDO2dCQUNMLENBQUMsQ0FBQTtZQUNMLENBQUM7WUFFSyxRQUFTLENBQUMsZUFBZSxHQUFHLFdBQVcsQ0FBQztRQUNsRCxDQUFDO1FBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUE7SUFDdkQsQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQXhCRCwwQkF3QkMiLCJmaWxlIjoic3JjL2F0b20vY29yZS9wYXRjaEVsZW1lbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGRvUGF0Y2goKTogdm9pZCB7XG5cbiAgICB2YXIgb2xkUmVnaXN0ZXIgPSAoPGFueT5kb2N1bWVudCkucmVnaXN0ZXJFbGVtZW50O1xuXG4gICAgKDxhbnk+ZG9jdW1lbnQpLnJlZ2lzdGVyRWxlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBvcHRpb25zKSB7XG5cbiAgICAgICAgaWYobmFtZSA9PT0gXCJhdG9tLXBhbmUtcmVzaXplLWhhbmRsZVwiKSB7XG4gICAgICAgICAgICB2YXIgcHJvdG8gPSBvcHRpb25zLnByb3RvdHlwZTtcblxuICAgICAgICAgICAgaWYocHJvdG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkQXR0YWNoZWRDYWxsYmFjayA9IHByb3RvLmF0dGFjaGVkQ2FsbGJhY2s7XG5cbiAgICAgICAgICAgICAgICBwcm90by5hdHRhY2hlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkQXR0YWNoZWRDYWxsYmFjay5hcHBseSh0aGlzLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgKDxhbnk+ZG9jdW1lbnQpLnJlZ2lzdGVyRWxlbWVudCA9IG9sZFJlZ2lzdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9sZFJlZ2lzdGVyLmFwcGx5KGRvY3VtZW50LCBbbmFtZSwgb3B0aW9uc10pXG4gICAgfVxufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/core/patchElements.js\n// module id = 26\n// module chunks = 0","module.exports = require(\"atom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"atom\"\n// module id = 27\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = require(\"underscore\");\nexports.DYNAMIC_COMMAND_TAG = \"DYNAMIC_COMMAND_TAG\";\nvar commandIdToCommandInfo = {};\nvar tagToCommands = {};\n/**\n * Adds new managed command\n * @param selector - command CSS selector\n * @param id - command id. Must be unique across the managed commands.\n * @param callBack - called on command invocation\n * @param tag - optional action tag allowing to perform batch operations\n */\nfunction addCommand(selector, id, callBack, tag) {\n    if (_.find(listCommands(), function (commandId) {\n        if (commandId == id) {\n            return true;\n        }\n        return false;\n    })) {\n        return;\n    }\n    var disposable = atom.commands.add(selector, id, callBack);\n    var commandInfo = {\n        commandId: id,\n        tag: tag,\n        disposable: disposable\n    };\n    commandIdToCommandInfo[id] = commandInfo;\n    if (tag) {\n        var tagCommands = tagToCommands[tag];\n        if (!tagCommands) {\n            tagCommands = [];\n            tagToCommands[tag] = tagCommands;\n        }\n        tagCommands.push(commandInfo);\n    }\n}\nexports.addCommand = addCommand;\n/**\n * Deletes unmanaged command.\n * Generally, should not be called for managed actions, use the managed\n * version instead.\n * @param id - command id\n */\nfunction deleteUnmanagedCommand(id) {\n    atom.commands.registeredCommands[id] = null;\n    atom.commands.selectorBasedListenersByCommandName[id] = null;\n}\nexports.deleteUnmanagedCommand = deleteUnmanagedCommand;\n/**\n * Deletes managed action by id\n * @param id\n */\nfunction deleteManagedCommand(id) {\n    var commandInfo = commandIdToCommandInfo[id];\n    if (!commandInfo)\n        return;\n    commandInfo.disposable.dispose();\n    delete commandIdToCommandInfo[id];\n    if (commandInfo.tag) {\n        var tagCommands = tagToCommands[commandInfo.tag];\n        if (!tagCommands)\n            return;\n        var infoIndex = -1;\n        _.find(tagCommands, function (currentInfo, index) {\n            if (currentInfo.commandId == id) {\n                infoIndex = index;\n                return true;\n            }\n            return false;\n        });\n        if (infoIndex != -1)\n            tagCommands.splice(infoIndex, 1);\n    }\n}\nexports.deleteManagedCommand = deleteManagedCommand;\n/**\n * Deletes all managed commands tagged the the specific tag\n * @param tag\n */\nfunction deleteCommandsByTag(tag) {\n    var tagCommands = tagToCommands[tag];\n    if (!tagCommands)\n        return;\n    for (var index in tagCommands) {\n        var currentInfo = tagCommands[index];\n        currentInfo.disposable.dispose();\n        delete commandIdToCommandInfo[currentInfo.commandId];\n    }\n    delete tagToCommands[tag];\n}\nexports.deleteCommandsByTag = deleteCommandsByTag;\n/**\n * Lists all commands, both managed and unmanaged.\n * @returns {string[]}\n */\nfunction listCommands() {\n    var result = [];\n    for (var commandName in atom.commands.selectorBasedListenersByCommandName) {\n        result.push(commandName);\n    }\n    return result;\n}\nexports.listCommands = listCommands;\nvar initialized = false;\nfunction initialize() {\n    if (initialized)\n        return;\n    initialized = true;\n    try {\n        //forcing command palette to register itself\n        atom.packages.activatePackage('command-palette');\n        //registering our own listener to command palette's command\n        var listener = function () {\n            prePanelDisplay();\n        };\n        listener.commandManager = true;\n        atom.commands.add('atom-workspace', 'command-palette:toggle', listener);\n        ////and now swapping those listeners, so our one is called first\n        //var listenersArray = (<any>atom.commands.selectorBasedListenersByCommandName)\n        //    [\"command-palette:toggle\"]\n        //listenersArray.splice(0,0,listenersArray[1])\n        //listenersArray.splice(1, 1)\n        var listenersArray = atom.commands.selectorBasedListenersByCommandName[\"command-palette:toggle\"];\n        listenersArray.forEach(function (listener) {\n            var callback = listener.callback || listener.didDispatch;\n            if (callback && callback.commandManager) {\n                listener.sequenceNumber = 100500000;\n            }\n        });\n    }\n    catch (Error) {\n        console.error(Error.message);\n    }\n}\nexports.initialize = initialize;\nvar contributors = {};\nfunction registerContributor(contributor) {\n    contributors[contributor.id] = contributor;\n}\nexports.registerContributor = registerContributor;\nfunction prePanelDisplay() {\n    deleteCommandsByTag(exports.DYNAMIC_COMMAND_TAG);\n    for (var contributorId in contributors) {\n        var contributor = contributors[contributorId];\n        if (contributor.calculationStarted) {\n            contributor.calculationStarted();\n        }\n    }\n    for (var contributorId in contributors) {\n        var contributor = contributors[contributorId];\n        contributor.calculateItems().forEach(function (item) {\n            addCommand(item.selector, \"api-workbench:\" + item.id, item.callBack, exports.DYNAMIC_COMMAND_TAG);\n        });\n    }\n    for (var contributorId in contributors) {\n        var contributor = contributors[contributorId];\n        if (contributor.calculationFinished) {\n            contributor.calculationFinished();\n        }\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvbW1hbmQtbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbURBQW1EOztBQUVuRCw4QkFBZ0M7QUFHckIsUUFBQSxtQkFBbUIsR0FBRyxxQkFBcUIsQ0FBQTtBQUV0RCxJQUFJLHNCQUFzQixHQUFrQyxFQUFFLENBQUE7QUFFOUQsSUFBSSxhQUFhLEdBQXFDLEVBQUUsQ0FBQTtBQVF4RDs7Ozs7O0dBTUc7QUFDSCxvQkFBMkIsUUFBaUIsRUFBRSxFQUFXLEVBQzlCLFFBQW1CLEVBQUUsR0FBYTtJQUV6RCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLFVBQUEsU0FBUztRQUM1QixFQUFFLENBQUEsQ0FBRSxTQUFTLElBQUksRUFBRSxDQUFDLENBQUEsQ0FBQztZQUNqQixNQUFNLENBQUMsSUFBSSxDQUFBO1FBQ2YsQ0FBQztRQUNELE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsTUFBTSxDQUFBO0lBQ1YsQ0FBQztJQUVELElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUcsUUFBUSxDQUFDLENBQUE7SUFFM0QsSUFBSSxXQUFXLEdBQWtCO1FBQzdCLFNBQVMsRUFBRyxFQUFFO1FBQ2QsR0FBRyxFQUFHLEdBQUc7UUFDVCxVQUFVLEVBQUcsVUFBVTtLQUMxQixDQUFBO0lBRUQsc0JBQXNCLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFBO0lBRXhDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDTixJQUFJLFdBQVcsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ2YsV0FBVyxHQUFHLEVBQUUsQ0FBQTtZ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QUV4QyxHQUFHLENBQUMsQ0FBQyxJQUFJLGFBQWEsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRXJDLElBQUksV0FBVyxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUM5QyxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQ3JDLENBQUM7SUFDTCxDQUFDO0lBRUQsR0FBRyxDQUFDLENBQUMsSUFBSSxhQUFhLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQztRQUVyQyxJQUFJLFdBQVcsR0FBeUIsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3BFLFdBQVcsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBQSxJQUFJO1lBQ3JDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLGdCQUFnQixHQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSwyQkFBbUIsQ0FBQyxDQUFBO1FBQzNGLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELEdBQUcsQ0FBQyxDQUFDLElBQUksYUFBYSxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFFckMsSUFBSSxXQUFXLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzlDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7WUFDbEMsV0FBVyxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDdEMsQ0FBQztJQUNMLENBQUM7QUFDTCxDQUFDIiwiZmlsZSI6InNyYy9hdG9tL3F1aWNrLWNvbW1hbmRzL2NvbW1hbmQtbWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL21haW4uZC50c1wiIC8+XG5cbmltcG9ydCBfID0gcmVxdWlyZShcInVuZGVyc2NvcmVcIilcblxuXG5leHBvcnQgdmFyIERZTkFNSUNfQ09NTUFORF9UQUcgPSBcIkRZTkFNSUNfQ09NTUFORF9UQUdcIlxuXG52YXIgY29tbWFuZElkVG9Db21tYW5kSW5mbyA6IHtbaWQ6c3RyaW5nXSA6IElDb21tYW5kSW5mb30gPSB7fVxuXG52YXIgdGFnVG9Db21tYW5kcyA6IHtbdGFnOnN0cmluZ10gOiBJQ29tbWFuZEluZm9bXX0gPSB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb21tYW5kIHtcbiAgICBzZWxlY3RvciA6IHN0cmluZ1xuICAgIGlkIDogc3RyaW5nXG4gICAgY2FsbEJhY2sgOiAoKT0+dm9pZFxufVxuXG4vKipcbiAqIEFkZHMgbmV3IG1hbmFnZWQgY29tbWFuZFxuICogQHBhcmFtIHNlbGVjdG9yIC0gY29tbWFuZCBDU1Mgc2VsZWN0b3JcbiAqIEBwYXJhbSBpZCAtIGNvbW1hbmQgaWQuIE11c3QgYmUgdW5pcXVlIGFjcm9zcyB0aGUgbWFuYWdlZCBjb21tYW5kcy5cbiAqIEBwYXJhbSBjYWxsQmFjayAtIGNhbGxlZCBvbiBjb21tYW5kIGludm9jYXRpb25cbiAqIEBwYXJhbSB0YWcgLSBvcHRpb25hbCBhY3Rpb24gdGFnIGFsbG93aW5nIHRvIHBlcmZvcm0gYmF0Y2ggb3BlcmF0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbWFuZChzZWxlY3RvciA6IHN0cmluZywgaWQgOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsQmFjayA6ICgpPT52b2lkLCB0YWc/IDogc3RyaW5nKSB7XG5cbiAgICBpZiAoXy5maW5kKGxpc3RDb21tYW5kcygpLCBjb21tYW5kSWQgPT4ge1xuICAgICAgICAgICAgaWYoIGNvbW1hbmRJZCA9PSBpZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgZGlzcG9zYWJsZSA9IGF0b20uY29tbWFuZHMuYWRkKHNlbGVjdG9yLCBpZCAsIGNhbGxCYWNrKVxuXG4gICAgdmFyIGNvbW1hbmRJbmZvIDogSUNvbW1hbmRJbmZvID0ge1xuICAgICAgICBjb21tYW5kSWQgOiBpZCxcbiAgICAgICAgdGFnIDogdGFnLFxuICAgICAgICBkaXNwb3NhYmxlIDogZGlzcG9zYWJsZVxuICAgIH1cblxuICAgIGNvbW1hbmRJZFRvQ29tbWFuZEluZm9baWRdID0gY29tbWFuZEluZm9cblxuICAgIGlmICh0YWcpIHtcbiAgICAgICAgdmFyIHRhZ0NvbW1hbmRzID0gdGFnVG9Db21tYW5kc1t0YWddXG4gICAgICAgIGlmICghdGFnQ29tbWFuZHMpIHtcbiAgICAgICAgICAgIHRhZ0NvbW1hbmRzID0gW11cbiAgICAgICAgICAgIHRhZ1RvQ29tbWFuZHNbdGFnXSA9IHRhZ0NvbW1hbmRzXG4gICAgICAgIH1cblxuICAgICAgICB0YWdDb21tYW5kcy5wdXNoKGNvbW1hbmRJbmZvKVxuICAgIH1cbn1cblxuLyoqXG4gKiBEZWxldGVzIHVubWFuYWdlZCBjb21tYW5kLlxuICogR2VuZXJhbGx5LCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgbWFuYWdlZCBhY3Rpb25zLCB1c2UgdGhlIG1hbmFnZWRcbiAqIHZlcnNpb24gaW5zdGVhZC5cbiAqIEBwYXJhbSBpZCAtIGNvbW1hbmQgaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVVubWFuYWdlZENvbW1hbmQoaWQgOiBzdHJpbmcpIHtcbiAgICBhdG9tLmNvbW1hbmRzLnJlZ2lzdGVyZWRDb21tYW5kc1tpZF0gPSBudWxsO1xuICAgIGF0b20uY29tbWFuZHMuc2VsZWN0b3JCYXNlZExpc3RlbmVyc0J5Q29tbWFuZE5hbWVbaWRdID0gbnVsbDtcbn1cblxuLyoqXG4gKiBEZWxldGVzIG1hbmFnZWQgYWN0aW9uIGJ5IGlkXG4gKiBAcGFyYW0gaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZU1hbmFnZWRDb21tYW5kKGlkIDogc3RyaW5nKSB7XG4gICAgdmFyIGNvbW1hbmRJbmZvID0gY29tbWFuZElkVG9Db21tYW5kSW5mb1tpZF1cbiAgICBpZiAoIWNvbW1hbmRJbmZvKSByZXR1cm5cblxuICAgIGNvbW1hbmRJbmZvLmRpc3Bvc2FibGUuZGlzcG9zZSgpXG5cbiAgICBkZWxldGUgY29tbWFuZElkVG9Db21tYW5kSW5mb1tpZF1cblxuICAgIGlmIChjb21tYW5kSW5mby50YWcpIHtcbiAgICAgICAgdmFyIHRhZ0NvbW1hbmRzID0gdGFnVG9Db21tYW5kc1tjb21tYW5kSW5mby50YWddXG4gICAgICAgIGlmICghdGFnQ29tbWFuZHMpIHJldHVyblxuXG4gICAgICAgIHZhciBpbmZvSW5kZXg6IG51bWJlciA9IC0xO1xuICAgICAgICBfLmZpbmQodGFnQ29tbWFuZHMsIChjdXJyZW50SW5mbywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5mby5jb21tYW5kSWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICBpbmZvSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChpbmZvSW5kZXggIT0gLTEpXG4gICAgICAgICAgICB0YWdDb21tYW5kcy5zcGxpY2UoaW5mb0luZGV4LCAxKVxuICAgIH1cbn1cblxuLyoqXG4gKiBEZWxldGVzIGFsbCBtYW5hZ2VkIGNvbW1hbmRzIHRhZ2dlZCB0aGUgdGhlIHNwZWNpZmljIHRhZ1xuICogQHBhcmFtIHRhZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ29tbWFuZHNCeVRhZyh0YWcgOiBzdHJpbmcpIHtcbiAgICB2YXIgdGFnQ29tbWFuZHMgPSB0YWdUb0NvbW1hbmRzW3RhZ11cbiAgICBpZiAoIXRhZ0NvbW1hbmRzKSByZXR1cm5cblxuICAgIGZvciAodmFyIGluZGV4IGluIHRhZ0NvbW1hbmRzKSB7XG4gICAgICAgIHZhciBjdXJyZW50SW5mbyA9IHRhZ0NvbW1hbmRzW2luZGV4XVxuXG4gICAgICAgIGN1cnJlbnRJbmZvLmRpc3Bvc2FibGUuZGlzcG9zZSgpXG4gICAgICAgIGRlbGV0ZSBjb21tYW5kSWRUb0NvbW1hbmRJbmZvW2N1cnJlbnRJbmZvLmNvbW1hbmRJZF1cbiAgICB9XG5cbiAgICBkZWxldGUgdGFnVG9Db21tYW5kc1t0YWddXG59XG5cbi8qKlxuICogTGlzdHMgYWxsIGNvbW1hbmRzLCBib3RoIG1hbmFnZWQgYW5kIHVubWFuYWdlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RDb21tYW5kcygpIHtcbiAgICB2YXIgcmVzdWx0IDogc3RyaW5nW10gPSBbXVxuXG4gICAgZm9yICh2YXIgY29tbWFuZE5hbWUgaW4gYXRvbS5jb21tYW5kcy5zZWxlY3RvckJhc2VkTGlzdGVuZXJzQnlDb21tYW5kTmFtZSl7XG4gICAgICAgIHJlc3VsdC5wdXNoKGNvbW1hbmROYW1lKVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbn1cblxuaW50ZXJmYWNlIElDb21tYW5kSW5mbyB7XG4gICAgY29tbWFuZElkIDogc3RyaW5nXG4gICAgdGFnIDogc3RyaW5nXG4gICAgZGlzcG9zYWJsZSA6IEF0b21Db3JlLkRpc3Bvc2FibGVcbn1cblxuLyoqXG4gKiBDb250cmlidXRlcyBjb21tYW5kcy5cbiAqIElzIGNhbGxlZCBiZWZvcmUgZWFjaCBjb21tYW5kIHBhbmVsIGRpc3BsYXkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRDb250cmlidXRvciB7XG5cbiAgICAvKipcbiAgICAgKiBVbmlxdWUgY29udHJpYnV0b3IgaWQuXG4gICAgICovXG4gICAgaWQgOiBzdHJpbmdcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgaXRlbXMgdG8gZGlzcGxheSBpbiB0aGUgY29udGV4dCBtZW51LlxuICAgICAqIFRoaXMgaXMgcnVudGltZSBtZXRob2QsIGNhbGxlZCBlYWNoIHRpbWUgZm9yIGVhY2ggY29udHJpYnV0b3IgYmVmb3JlXG4gICAgICogdGhlIG1lbnUgaXMgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUl0ZW1zICgpIDogSUNvbW1hbmRbXVxuXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWxseSBub3RpZmllcyBjb250cmlidXRvciB0aGF0IHRoZSBwYW5lbCBpcyBhYm91dCB0byBiZSBkaXNwbGF5ZWQgYW5kXG4gICAgICogaXRlbSBjYWxjdWxhdGlvbnMgYXJlIHN0YXJ0ZWRcbiAgICAgKi9cbiAgICBjYWxjdWxhdGlvblN0YXJ0ZWQ/IDogKCk9PnZvaWRcblxuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsbHkgbm90aWZpZXMgY29udHJpYnV0b3IgdGhhdCB0aGUgcGFuZWwgaXMgYWJvdXQgdG8gYmUgZGlzcGxheWVkIGFuZFxuICAgICAqIGl0ZW0gY2FsY3VsYXRpb25zIGFyZSBkb25lXG4gICAgICovXG4gICAgY2FsY3VsYXRpb25GaW5pc2hlZD8gOiAoKT0+dm9pZFxufVxuXG52YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICBpZiAoaW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgaW5pdGlhbGl6ZWQgPSB0cnVlXG5cbiAgICB0cnkge1xuICAgICAgICAvL2ZvcmNpbmcgY29tbWFuZCBwYWxldHRlIHRvIHJlZ2lzdGVyIGl0c2VsZlxuICAgICAgICBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgnY29tbWFuZC1wYWxldHRlJylcblxuICAgICAgICAvL3JlZ2lzdGVyaW5nIG91ciBvd24gbGlzdGVuZXIgdG8gY29tbWFuZCBwYWxldHRlJ3MgY29tbWFuZFxuICAgICAgICB2YXIgbGlzdGVuZXI6YW55ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJlUGFuZWxEaXNwbGF5KClcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lci5jb21tYW5kTWFuYWdlciA9IHRydWU7XG4gICAgICAgIGF0b20uY29tbWFuZHMuYWRkKCdhdG9tLXdvcmtzcGFjZScsICdjb21tYW5kLXBhbGV0dGU6dG9nZ2xlJywgbGlzdGVuZXIpO1xuXG4gICAgICAgIC8vLy9hbmQgbm93IHN3YXBwaW5nIHRob3NlIGxpc3RlbmVycywgc28gb3VyIG9uZSBpcyBjYWxsZWQgZmlyc3RcbiAgICAgICAgLy92YXIgbGlzdGVuZXJzQXJyYXkgPSAoPGFueT5hdG9tLmNvbW1hbmRzLnNlbGVjdG9yQmFzZWRMaXN0ZW5lcnNCeUNvbW1hbmROYW1lKVxuICAgICAgICAvLyAgICBbXCJjb21tYW5kLXBhbGV0dGU6dG9nZ2xlXCJdXG4gICAgICAgIC8vbGlzdGVuZXJzQXJyYXkuc3BsaWNlKDAsMCxsaXN0ZW5lcnNBcnJheVsxXSlcbiAgICAgICAgLy9saXN0ZW5lcnNBcnJheS5zcGxpY2UoMSwgMSlcblxuICAgICAgICB2YXIgbGlzdGVuZXJzQXJyYXkgPSAoPGFueT5hdG9tLmNvbW1hbmRzLnNlbGVjdG9yQmFzZWRMaXN0ZW5lcnNCeUNvbW1hbmROYW1lKVxuICAgICAgICAgICAgW1wiY29tbWFuZC1wYWxldHRlOnRvZ2dsZVwiXVxuICAgICAgICBsaXN0ZW5lcnNBcnJheS5mb3JFYWNoKGxpc3RlbmVyID0+IHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGxpc3RlbmVyLmNhbGxiYWNrIHx8IGxpc3RlbmVyLmRpZERpc3BhdGNoO1xuXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgY2FsbGJhY2suY29tbWFuZE1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5zZXF1ZW5jZU51bWJlciA9IDEwMDUwMDAwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0gY2F0Y2ggKEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoRXJyb3IubWVzc2FnZSlcbiAgICB9XG59XG52YXIgY29udHJpYnV0b3JzIDoge1tpZDpzdHJpbmddIDogSUNvbW1hbmRDb250cmlidXRvcn0gPSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb250cmlidXRvcihjb250cmlidXRvciA6IElDb21tYW5kQ29udHJpYnV0b3IpIHtcbiAgICBjb250cmlidXRvcnNbY29udHJpYnV0b3IuaWRdID0gY29udHJpYnV0b3I7XG59XG5cbmZ1bmN0aW9uIHByZVBhbmVsRGlzcGxheSgpIHtcbiAgICBkZWxldGVDb21tYW5kc0J5VGFnKERZTkFNSUNfQ09NTUFORF9UQUcpXG5cbiAgICBmb3IgKHZhciBjb250cmlidXRvcklkIGluIGNvbnRyaWJ1dG9ycykge1xuXG4gICAgICAgIHZhciBjb250cmlidXRvciA9IGNvbnRyaWJ1dG9yc1tjb250cmlidXRvcklkXTtcbiAgICAgICAgaWYgKGNvbnRyaWJ1dG9yLmNhbGN1bGF0aW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgY29udHJpYnV0b3IuY2FsY3VsYXRpb25TdGFydGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBjb250cmlidXRvcklkIGluIGNvbnRyaWJ1dG9ycykge1xuXG4gICAgICAgIHZhciBjb250cmlidXRvciA6IElDb21tYW5kQ29udHJpYnV0b3IgPSBjb250cmlidXRvcnNbY29udHJpYnV0b3JJZF07XG4gICAgICAgIGNvbnRyaWJ1dG9yLmNhbGN1bGF0ZUl0ZW1zKCkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGFkZENvbW1hbmQoaXRlbS5zZWxlY3RvciwgXCJhcGktd29ya2JlbmNoOlwiK2l0ZW0uaWQsIGl0ZW0uY2FsbEJhY2ssIERZTkFNSUNfQ09NTUFORF9UQUcpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGNvbnRyaWJ1dG9ySWQgaW4gY29udHJpYnV0b3JzKSB7XG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yID0gY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9ySWRdO1xuICAgICAgICBpZiAoY29udHJpYnV0b3IuY2FsY3VsYXRpb25GaW5pc2hlZCkge1xuICAgICAgICAgICAgY29udHJpYnV0b3IuY2FsY3VsYXRpb25GaW5pc2hlZCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/quick-commands/command-manager.js\n// module id = 28\n// module chunks = 0","\"use strict\";\n/// <reference path=\"../../../typings/main.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = require(\"underscore\");\nvar commandManager = require(\"../quick-commands/command-manager\");\nvar contextMenuImpl = require(\"./contextMenuImpl\");\nvar originalShowForEvent;\n/**\n * Must be called first, at startup, before the module is used.\n */\nfunction initialize() {\n    if (initialized) {\n        return;\n    }\n    initialized = true;\n    originalShowForEvent = atom.contextMenu.constructor.prototype.showForEvent;\n    atom.contextMenu.constructor.prototype.showForEvent = function (event) {\n        preMenuDisplay().then(function () {\n            originalShowForEvent.apply(atom.contextMenu, [event]);\n            postMenuDisplay();\n        });\n    };\n}\nexports.initialize = initialize;\nvar initialized = false;\nfunction preMenuDisplay() {\n    try {\n        return contextMenuImpl.calculateMenuItemsTree().then(function (treeRoots) {\n            var nodeSets = {};\n            cleanExistingSets();\n            commandManager.deleteCommandsByTag(commandManager.DYNAMIC_COMMAND_TAG);\n            treeRoots.forEach(function (node) {\n                var itemSet = nodeSets[node.selector];\n                if (!itemSet) {\n                    itemSet = findOrCreateItemSet(node.selector);\n                    nodeSets[node.selector] = itemSet;\n                }\n                var menuItem = constructAtomMenuItem(node);\n                itemSet.items.push(menuItem);\n            });\n        });\n    }\n    catch (Error) {\n        console.log(Error.message);\n    }\n}\nfunction constructAtomMenuItem(node) {\n    var result = {\n        label: node.name,\n    };\n    if (node.children.length > 0) {\n        result.submenu = [];\n    }\n    else {\n        var commandName = \"api-workbench:\" + node.name;\n        var existingCommands = commandManager.listCommands();\n        commandManager.addCommand(node.selector, commandName, node.onClick, commandManager.DYNAMIC_COMMAND_TAG);\n        result.command = commandName;\n    }\n    node.children.forEach(function (child) {\n        var childMenuItem = constructAtomMenuItem(child);\n        result.submenu.push(childMenuItem);\n    });\n    return result;\n}\nvar DYNAMIC_SET_TAG = \"DYNAMIC_SET_TAG\";\n/**\n * Selector that were used at least once in the context menu\n * @type {Array}\n */\nvar usedSelectors = [];\nfunction findOrCreateItemSet(selector) {\n    var existingSet = _.find(atom.contextMenu.itemSets, function (currentSet) {\n        return currentSet.tag && currentSet.tag == DYNAMIC_SET_TAG;\n    });\n    if (!existingSet) {\n        existingSet = {\n            items: [],\n            selector: selector,\n            specificity: 11,\n            tag: DYNAMIC_SET_TAG\n        };\n        atom.contextMenu.itemSets.push(existingSet);\n        //saving used selector name\n        if (!_.find(usedSelectors, function (name) { return name == selector; })) {\n            usedSelectors.push(selector);\n        }\n    }\n    return existingSet;\n}\nfunction cleanExistingSets() {\n    var existingSets = _.filter(atom.contextMenu.itemSets, function (currentSet) {\n        return currentSet.tag && currentSet.tag == DYNAMIC_SET_TAG;\n    });\n    existingSets.forEach(function (existingSet) {\n        existingSet.items = [];\n    });\n}\nfunction postMenuDisplay() {\n    //commandManager.deleteCommandsByTag(commandManager.DYNAMIC_COMMAND_TAG)\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9jb250ZXh0TWVudS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbURBQW1EOztBQUVuRCw4QkFBZ0M7QUFDaEMsa0VBQW9FO0FBRXBFLG1EQUFxRDtBQUVyRCxJQUFJLG9CQUF1RCxDQUFBO0FBRTNEOztHQUVHO0FBQ0g7SUFDSSxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2QsTUFBTSxDQUFDO0lBQ1gsQ0FBQztJQUVELFdBQVcsR0FBRyxJQUFJLENBQUM7SUFHbkIsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQTtJQUcxRSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLFVBQUMsS0FBVztRQUM5RCxjQUFjLEVBQUUsQ0FBQyxJQUFJLENBQUM7WUFDbEIsb0JBQW9CLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBRXRELGVBQWUsRUFBRSxDQUFBO1FBQ3JCLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQWxCRCxnQ0FrQkM7QUFFRCxJQUFJLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFFeEI7SUFDSSxJQUFJLENBQUM7UUFDRCxNQUFNLENBQUMsZUFBZSxDQUFDLHNCQUFzQixFQUFFLENBQUMsSUFBSSxDQUNoRCxVQUFDLFNBQWtEO1lBRW5ELElBQUksUUFBUSxHQUErQyxFQUFFLENBQUE7WUFFN0QsaUJBQWlCLEVBQUUsQ0FBQztZQUNwQixjQUFjLENBQUMsbUJBQW1CLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLENBQUE7WUFFdEUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7Z0JBQ2xCLElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFD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LFdBQVcsQ0FBQTtBQUN0QixDQUFDO0FBRUQ7SUFDSSxJQUFJLFlBQVksR0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLFVBQUEsVUFBVTtRQUU5RCxNQUFNLENBQWtCLFVBQVcsQ0FBQyxHQUFHLElBQXFCLFVBQVcsQ0FBQyxHQUFHLElBQUksZUFBZSxDQUFDO0lBQ25HLENBQUMsQ0FBQyxDQUFBO0lBRUYsWUFBWSxDQUFDLE9BQU8sQ0FBQyxVQUFBLFdBQVc7UUFDNUIsV0FBVyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUE7SUFDMUIsQ0FBQyxDQUFDLENBQUE7QUFDTixDQUFDO0FBRUQ7SUFDSSx3RUFBd0U7QUFDNUUsQ0FBQyIsImZpbGUiOiJzcmMvYXRvbS9jb250ZXh0LW1lbnUvY29udGV4dE1lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy9tYWluLmQudHNcIiAvPlxuXG5pbXBvcnQgXyA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpXG5pbXBvcnQgY29tbWFuZE1hbmFnZXIgPSByZXF1aXJlKFwiLi4vcXVpY2stY29tbWFuZHMvY29tbWFuZC1tYW5hZ2VyXCIpXG5pbXBvcnQgY29udGV4dE1lbnVJbnRlcmZhY2VzID0gcmVxdWlyZShcIi4vY29udGV4dE1lbnVJbnRlcmZhY2VzXCIpXG5pbXBvcnQgY29udGV4dE1lbnVJbXBsID0gcmVxdWlyZShcIi4vY29udGV4dE1lbnVJbXBsXCIpXG5cbnZhciBvcmlnaW5hbFNob3dGb3JFdmVudCA6IChvYmplY3QgOiBhbnksIGFyZ3MgOiBhbnkpPT52b2lkXG5cbi8qKlxuICogTXVzdCBiZSBjYWxsZWQgZmlyc3QsIGF0IHN0YXJ0dXAsIGJlZm9yZSB0aGUgbW9kdWxlIGlzIHVzZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgIGlmIChpbml0aWFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG5cbiAgICBvcmlnaW5hbFNob3dGb3JFdmVudCA9IGF0b20uY29udGV4dE1lbnUuY29uc3RydWN0b3IucHJvdG90eXBlLnNob3dGb3JFdmVudFxuXG5cbiAgICBhdG9tLmNvbnRleHRNZW51LmNvbnN0cnVjdG9yLnByb3RvdHlwZS5zaG93Rm9yRXZlbnQgPSAoZXZlbnQgOiBhbnkpID0+IHtcbiAgICAgICAgcHJlTWVudURpc3BsYXkoKS50aGVuKCgpPT57XG4gICAgICAgICAgICBvcmlnaW5hbFNob3dGb3JFdmVudC5hcHBseShhdG9tLmNvbnRleHRNZW51LCBbZXZlbnRdKTtcblxuICAgICAgICAgICAgcG9zdE1lbnVEaXNwbGF5KClcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbnZhciBpbml0aWFsaXplZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBwcmVNZW51RGlzcGxheSgpIDogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRNZW51SW1wbC5jYWxjdWxhdGVNZW51SXRlbXNUcmVlKCkudGhlbihcbiAgICAgICAgICAgICh0cmVlUm9vdHM6Y29udGV4dE1lbnVJbnRlcmZhY2VzLklDb250ZXh0TWVudUl0ZW1bXSk9PntcblxuICAgICAgICAgICAgdmFyIG5vZGVTZXRzOntbczpzdHJpbmddIDogQXRvbUNvcmUuSUNvbnRleHRNZW51SXRlbVNldH0gPSB7fVxuXG4gICAgICAgICAgICBjbGVhbkV4aXN0aW5nU2V0cygpO1xuICAgICAgICAgICAgY29tbWFuZE1hbmFnZXIuZGVsZXRlQ29tbWFuZHNCeVRhZyhjb21tYW5kTWFuYWdlci5EWU5BTUlDX0NPTU1BTkRfVEFHKVxuXG4gICAgICAgICAgICB0cmVlUm9vdHMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbVNldCA9IG5vZGVTZXRzW25vZGUuc2VsZWN0b3JdXG5cbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW1TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNldCA9IGZpbmRPckNyZWF0ZUl0ZW1TZXQobm9kZS5zZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVTZXRzW25vZGUuc2VsZWN0b3JdID0gaXRlbVNldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbWVudUl0ZW0gPSBjb25zdHJ1Y3RBdG9tTWVudUl0ZW0obm9kZSlcblxuICAgICAgICAgICAgICAgIGl0ZW1TZXQuaXRlbXMucHVzaChtZW51SXRlbSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cblxuICAgIH0gY2F0Y2ggKEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKEVycm9yLm1lc3NhZ2UpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RBdG9tTWVudUl0ZW0obm9kZSA6IGNvbnRleHRNZW51SW50ZXJmYWNlcy5JQ29udGV4dE1lbnVJdGVtKSA6IEF0b21Db3JlLklDb250ZXh0TWVudUl0ZW0ge1xuICAgIHZhciByZXN1bHQgOiBBdG9tQ29yZS5JQ29udGV4dE1lbnVJdGVtID0ge1xuICAgICAgICBsYWJlbCA6IG5vZGUubmFtZSxcbiAgICB9XG5cbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdC5zdWJtZW51ID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY29tbWFuZE5hbWUgPSBcImFwaS13b3JrYmVuY2g6XCIrbm9kZS5uYW1lXG4gICAgICAgIHZhciBleGlzdGluZ0NvbW1hbmRzID0gY29tbWFuZE1hbmFnZXIubGlzdENvbW1hbmRzKClcbiAgICAgICAgY29tbWFuZE1hbmFnZXIuYWRkQ29tbWFuZChub2RlLnNlbGVjdG9yLCBjb21tYW5kTmFtZSwgbm9kZS5vbkNsaWNrLFxuICAgICAgICAgICAgY29tbWFuZE1hbmFnZXIuRFlOQU1JQ19DT01NQU5EX1RBRylcbiAgICAgICAgcmVzdWx0LmNvbW1hbmQgPSBjb21tYW5kTmFtZVxuICAgIH1cblxuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIHZhciBjaGlsZE1lbnVJdGVtID0gY29uc3RydWN0QXRvbU1lbnVJdGVtKGNoaWxkKVxuICAgICAgICByZXN1bHQuc3VibWVudS5wdXNoKGNoaWxkTWVudUl0ZW0pXG4gICAgfSlcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmludGVyZmFjZSBJVGFnZ2VkSXRlbVNldCBleHRlbmRzIEF0b21Db3JlLklDb250ZXh0TWVudUl0ZW1TZXQge1xuICAgIHRhZz8gOiBzdHJpbmdcbn1cblxudmFyIERZTkFNSUNfU0VUX1RBRyA9IFwiRFlOQU1JQ19TRVRfVEFHXCJcblxuLyoqXG4gKiBTZWxlY3RvciB0aGF0IHdlcmUgdXNlZCBhdCBsZWFzdCBvbmNlIGluIHRoZSBjb250ZXh0IG1lbnVcbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xudmFyIHVzZWRTZWxlY3RvcnMgOiBzdHJpbmdbXSA9IFtdXG5cbmZ1bmN0aW9uIGZpbmRPckNyZWF0ZUl0ZW1TZXQoc2VsZWN0b3IgOiBzdHJpbmcpIDogQXRvbUNvcmUuSUNvbnRleHRNZW51SXRlbVNldHtcbiAgICB2YXIgZXhpc3RpbmdTZXQgPSAgXy5maW5kKGF0b20uY29udGV4dE1lbnUuaXRlbVNldHMsIGN1cnJlbnRTZXQ9PntcblxuICAgICAgcmV0dXJuICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnICYmICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnID09IERZTkFNSUNfU0VUX1RBRztcbiAgICB9KVxuXG4gICAgaWYgKCFleGlzdGluZ1NldCkge1xuICAgICAgICBleGlzdGluZ1NldCA9IDxhbnk+e1xuICAgICAgICAgICAgaXRlbXMgOiBbXSxcbiAgICAgICAgICAgIHNlbGVjdG9yIDogc2VsZWN0b3IsXG4gICAgICAgICAgICBzcGVjaWZpY2l0eSA6IDExLFxuICAgICAgICAgICAgdGFnOiBEWU5BTUlDX1NFVF9UQUdcbiAgICAgICAgfVxuXG4gICAgICAgIGF0b20uY29udGV4dE1lbnUuaXRlbVNldHMucHVzaChleGlzdGluZ1NldClcblxuICAgICAgICAvL3NhdmluZyB1c2VkIHNlbGVjdG9yIG5hbWVcbiAgICAgICAgaWYoIV8uZmluZCh1c2VkU2VsZWN0b3JzLCBuYW1lPT57cmV0dXJuIG5hbWUgPT0gc2VsZWN0b3J9KSl7XG4gICAgICAgICAgICB1c2VkU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXhpc3RpbmdTZXRcbn1cblxuZnVuY3Rpb24gY2xlYW5FeGlzdGluZ1NldHMoKSB7XG4gICAgdmFyIGV4aXN0aW5nU2V0cyA9ICBfLmZpbHRlcihhdG9tLmNvbnRleHRNZW51Lml0ZW1TZXRzLCBjdXJyZW50U2V0PT57XG5cbiAgICAgICAgcmV0dXJuICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnICYmICg8SVRhZ2dlZEl0ZW1TZXQ+Y3VycmVudFNldCkudGFnID09IERZTkFNSUNfU0VUX1RBRztcbiAgICB9KVxuXG4gICAgZXhpc3RpbmdTZXRzLmZvckVhY2goZXhpc3RpbmdTZXQ9PntcbiAgICAgICAgZXhpc3RpbmdTZXQuaXRlbXMgPSBbXVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHBvc3RNZW51RGlzcGxheSgpIHtcbiAgICAvL2NvbW1hbmRNYW5hZ2VyLmRlbGV0ZUNvbW1hbmRzQnlUYWcoY29tbWFuZE1hbmFnZXIuRFlOQU1JQ19DT01NQU5EX1RBRylcbn1cblxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/context-menu/contextMenu.js\n// module id = 29\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = require(\"underscore\");\nvar ramlServer = require(\"raml-language-server\");\nvar editorTools = require(\"../editor-tools/editor-tools\");\nvar uilibsModule = require(\"atom-ui-lib\");\nvar fs = require(\"fs\");\nvar mkdirp = require(\"mkdirp\");\nvar pathModule = require(\"path\");\nvar actionUIManager = require(\"./actionUIManager\");\nvar uiBuilder = require(\"../editor-tools/detailElements\");\nvar contributors = {};\n/**\n * Adds new contributor to the list. All contributors are asked for the menu items\n * before the menu is displayed.\n * @param contributor\n */\nfunction registerContributor(contributor) {\n    contributors[contributor.id] = contributor;\n}\nexports.registerContributor = registerContributor;\n/**\n * Generally it is recommended to use contributor-based architecture instead.\n * This method allows adding a single menu item manually, if needed.\n * @param name\n * @param onClick\n * @param categories\n * @param shouldDisplay\n */\nfunction addMenuItem(name, onClick, categories, shouldDisplay) {\n}\nexports.addMenuItem = addMenuItem;\n/**\n * Generally it is recommended to use contributor-based architecture instead.\n * Deletes all menu items with a given selector. Should almost never be called.\n * Can not delete contributor-based menu items.\n * @param selector\n */\nfunction deleteMenuItems(selector) {\n    //TODO implement\n}\nexports.deleteMenuItems = deleteMenuItems;\n/**\n * Generally it is recommended to use contributor-based architecture instead.\n * Deletes menu item by its selector, name, and optionally categories.\n * Can not delete contributor-based menu items.\n * @param selector\n * @param name\n * @param categories\n */\nfunction deleteMenuItem(selector, name, categories) {\n    //TODO implement\n}\nexports.deleteMenuItem = deleteMenuItem;\nvar ContextMenuItemNode = /** @class */ (function () {\n    function ContextMenuItemNode(menuItem, nameOverride) {\n        this.selector = menuItem.selector;\n        if (nameOverride) {\n            this.name = nameOverride;\n        }\n        else {\n            this.name = menuItem.name;\n        }\n        this.categories = menuItem.categories;\n        this.onClick = menuItem.onClick;\n        this.children = [];\n    }\n    return ContextMenuItemNode;\n}());\n/**\n * Calculates current menu items tree.\n * @returns {IContextMenuItemNode[]}\n */\nfunction calculateMenuItemsTree() {\n    for (var contributorId in contributors) {\n        var contributor = contributors[contributorId];\n        if (contributor.calculationStarted) {\n            contributor.calculationStarted();\n        }\n    }\n    var contributorPromises = [];\n    for (var contributorId in contributors) {\n        var contributor = contributors[contributorId];\n        contributorPromises.push(contributor.calculateItems());\n    }\n    return Promise.all(contributorPromises).then(function (contributorItems) {\n        var result = [];\n        contributorItems.forEach(function (items) {\n            items.forEach(function (item) {\n                addItemsTreeNode(result, item);\n            });\n        });\n        for (var contributorId in contributors) {\n            var contributor = contributors[contributorId];\n            if (contributor.calculationFinished) {\n                contributor.calculationFinished();\n            }\n        }\n        return result;\n    });\n}\nexports.calculateMenuItemsTree = calculateMenuItemsTree;\nfunction addItemsTreeNode(roots, item) {\n    var currentList = roots;\n    if (item.categories) {\n        for (var catIndex in item.categories) {\n            var currentSegment = item.categories[catIndex];\n            var existingNode = _.find(currentList, function (node) {\n                return node.name == currentSegment;\n            });\n            if (!existingNode) {\n                existingNode = new ContextMenuItemNode(item, currentSegment);\n                currentList.push(existingNode);\n            }\n            if (!existingNode.children) {\n                currentList = [];\n                existingNode.children = currentList;\n            }\n            else {\n                currentList = existingNode.children;\n            }\n        }\n    }\n    var leafNode = _.find(currentList, function (node) {\n        return node.name == item.name;\n    });\n    if (leafNode) {\n        var index = currentList.indexOf(leafNode, 0);\n        if (index != undefined) {\n            currentList.splice(index, 1);\n        }\n    }\n    leafNode = new ContextMenuItemNode(item);\n    currentList.push(leafNode);\n}\nvar actionBasedMenuInitialized = false;\nfunction onClickHandler(path, action, position) {\n    ramlServer.getNodeClientConnection().executeContextAction(path, action, position).then(function (changes) {\n        var editorManager = editorTools.aquireManager();\n        if (!editorManager)\n            return Promise.resolve([]);\n        var path = editorManager.getPath();\n        var _loop_1 = function (change) {\n            if (change.uri == path && change.text != null) {\n                editorManager.getCurrentEditor().getBuffer().setText(change.text);\n                ramlServer.getNodeClientConnection().documentChanged({\n                    uri: path,\n                    text: change.text\n                });\n            }\n            else if (change.text != null) {\n                var editorFound_1 = false;\n                atom.workspace.getTextEditors().forEach(function (currentEditor) {\n                    if (currentEditor.getPath && currentEditor.getPath() == change.uri) {\n                        currentEditor.getBuffer().setText(change.text);\n                        editorFound_1 = true;\n                    }\n                });\n                if (!editorFound_1) {\n                    mkdirp.sync(pathModule.dirname(change.uri));\n                    fs.writeFileSync(change.uri, change.text);\n                }\n            }\n        };\n        //TODO handle all cases\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n            var change = changes_1[_i];\n            _loop_1(change);\n        }\n    });\n}\n/**\n * Initializes and registers standard context menu contributor, based on currently available context actions.\n * @param selector - CSS selector, can be null if not used in the display.\n */\nfunction initializeActionBasedMenu(selector) {\n    var editorContextMenuContributor = {\n        id: \"editorContextActionContributor\",\n        calculateItems: function () {\n            var editorManager = editorTools.aquireManager();\n            if (!editorManager)\n                return Promise.resolve([]);\n            var path = editorManager.getPath();\n            if (!path)\n                return Promise.resolve([]);\n            var position = editorManager.getCurrentPosition();\n            return ramlServer.getNodeClientConnection()\n                .calculateEditorContextActions(path, position).then(function (currentActions) {\n                var result = [];\n                currentActions.forEach(function (action) {\n                    // if (action.hasUI) {\n                    //     return;\n                    // }\n                    result.push({\n                        selector: selector,\n                        name: action.label ? action.label : action.name,\n                        categories: action.category,\n                        onClick: function () {\n                            onClickHandler(path, action, position);\n                        },\n                        children: []\n                    });\n                });\n                return result;\n            });\n        }\n    };\n    registerContributor(editorContextMenuContributor);\n    handleActionUI();\n    configureServerActions();\n    actionBasedMenuInitialized = true;\n}\nexports.initializeActionBasedMenu = initializeActionBasedMenu;\nfunction handleActionUI() {\n    ramlServer.getNodeClientConnection().onDisplayActionUI(function (uiDisplayRequest) {\n        ramlServer.getNodeClientConnection().debug(\"Got UI display request\", \"contextActions\", \"contextMenuImpl#handleActionUI\");\n        var actionUI = actionUIManager.getUICode(uiDisplayRequest.action.id);\n        if (!actionUI) {\n            ramlServer.getNodeClientConnection().error(\"Can not find UI for action \" +\n                uiDisplayRequest.action.id, \"contextActions\", \"handleActionUI\");\n            return Promise.resolve({});\n        }\n        global.IDE = atom;\n        global.UI = uilibsModule;\n        global.UIBuilder = uiBuilder;\n        return actionUI.run(uiDisplayRequest.initialUIState).then(function (result) {\n            ramlServer.getNodeClientConnection().debugDetail(\"Client: got result on dialog finish\", \"contextActions\", \"handleActionUI\");\n            return result;\n        });\n    });\n}\nfunction configureServerActions() {\n    ramlServer.getNodeClientConnection().setServerConfiguration({\n        actionsConfiguration: {\n            enableUIActions: true\n        }\n    });\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9jb250ZXh0TWVudUltcGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw4QkFBZ0M7QUFFaEMsaURBQW1EO0FBRW5ELDBEQUE0RDtBQUU1RCwwQ0FBNEM7QUFDNUMsdUJBQXlCO0FBQ3pCLCtCQUFpQztBQUNqQyxpQ0FBbUM7QUFDbkMsbURBQXFEO0FBQ3JELDBEQUE0RDtBQUU1RCxJQUFJLFlBQVksR0FBMEQsRUFBRSxDQUFDO0FBRTdFOzs7O0dBSUc7QUFDSCw2QkFBb0MsV0FBaUQ7SUFDakYsWUFBWSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUM7QUFDL0MsQ0FBQztBQUZELGtEQUVDO0FBRUQ7Ozs7Ozs7R0FPRztBQUNILHFCQUE0QixJQUFhLEVBQ2IsT0FBcUQsRUFDckQsVUFBc0IsRUFBRSxhQUE0QjtBQUVoRixDQUFDO0FBSkQsa0NBSUM7QUFFRDs7Ozs7R0FLRztBQUNILHlCQUFnQyxRQUFpQjtJQUM3QyxnQkFBZ0I7QUFDcEIsQ0FBQztBQUZELDBDQUVDO0FBRUQ7Ozs7Ozs7R0FPRztBQUNILHdCQUErQixRQUFpQixFQUFFLElBQWEsRUFBRSxVQUFzQjtJQUNuRixnQkFBZ0I7QUFDcEIsQ0FBQztBQUZELHdDQUVDO0FBRUQ7SUFZSSw2QkFBWSxRQUF1QyxFQUFFLFlBQXNCO1FBQ3ZFLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQTtRQUVqQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQSxDQUFDO1lBQ2QsSUFBSSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUE7UUFDNUIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFBO1FBQzdCLENBQUM7UUFFRCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUE7UUFDckMsSUFBSSxDQUFDLE9BQU8s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Q0FBQyxDQUFDLElBQUksQ0FBQyxVQUFDLE1BQU07WUFFN0QsVUFBVSxDQUFDLHVCQUF1QixFQUFFLENBQUMsV0FBVyxDQUFDLHFDQUFxQyxFQUNsRixnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO1lBRXZDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDbEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUM7QUFFRDtJQUNJLFVBQVUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLHNCQUFzQixDQUFDO1FBQ3hELG9CQUFvQixFQUFFO1lBQ2xCLGVBQWUsRUFBRSxJQUFJO1NBQ3hCO0tBQ0osQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsImZpbGUiOiJzcmMvYXRvbS9jb250ZXh0LW1lbnUvY29udGV4dE1lbnVJbXBsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gPSByZXF1aXJlKFwidW5kZXJzY29yZVwiKVxuXG5pbXBvcnQgcmFtbFNlcnZlciA9IHJlcXVpcmUoXCJyYW1sLWxhbmd1YWdlLXNlcnZlclwiKVxuaW1wb3J0IGNvbnRleHRNZW51ID0gcmVxdWlyZShcIi4vY29udGV4dE1lbnVJbnRlcmZhY2VzXCIpXG5pbXBvcnQgZWRpdG9yVG9vbHMgPSByZXF1aXJlKFwiLi4vZWRpdG9yLXRvb2xzL2VkaXRvci10b29sc1wiKVxuXG5pbXBvcnQgdWlsaWJzTW9kdWxlID0gcmVxdWlyZShcImF0b20tdWktbGliXCIpXG5pbXBvcnQgZnMgPSByZXF1aXJlKFwiZnNcIilcbmltcG9ydCBta2RpcnAgPSByZXF1aXJlKFwibWtkaXJwXCIpXG5pbXBvcnQgcGF0aE1vZHVsZSA9IHJlcXVpcmUoXCJwYXRoXCIpXG5pbXBvcnQgYWN0aW9uVUlNYW5hZ2VyID0gcmVxdWlyZShcIi4vYWN0aW9uVUlNYW5hZ2VyXCIpXG5pbXBvcnQgdWlCdWlsZGVyID0gcmVxdWlyZShcIi4uL2VkaXRvci10b29scy9kZXRhaWxFbGVtZW50c1wiKVxuXG52YXIgY29udHJpYnV0b3JzOiB7IFtzOiBzdHJpbmddOiBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVDb250cmlidXRvcjsgfSA9IHt9O1xuXG4vKipcbiAqIEFkZHMgbmV3IGNvbnRyaWJ1dG9yIHRvIHRoZSBsaXN0LiBBbGwgY29udHJpYnV0b3JzIGFyZSBhc2tlZCBmb3IgdGhlIG1lbnUgaXRlbXNcbiAqIGJlZm9yZSB0aGUgbWVudSBpcyBkaXNwbGF5ZWQuXG4gKiBAcGFyYW0gY29udHJpYnV0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29udHJpYnV0b3IoY29udHJpYnV0b3IgOiBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVDb250cmlidXRvcikge1xuICAgIGNvbnRyaWJ1dG9yc1tjb250cmlidXRvci5pZF0gPSBjb250cmlidXRvcjtcbn1cblxuLyoqXG4gKiBHZW5lcmFsbHkgaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIGNvbnRyaWJ1dG9yLWJhc2VkIGFyY2hpdGVjdHVyZSBpbnN0ZWFkLlxuICogVGhpcyBtZXRob2QgYWxsb3dzIGFkZGluZyBhIHNpbmdsZSBtZW51IGl0ZW0gbWFudWFsbHksIGlmIG5lZWRlZC5cbiAqIEBwYXJhbSBuYW1lXG4gKiBAcGFyYW0gb25DbGlja1xuICogQHBhcmFtIGNhdGVnb3JpZXNcbiAqIEBwYXJhbSBzaG91bGREaXNwbGF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRNZW51SXRlbShuYW1lIDogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChpdGVtPyA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUl0ZW0pPT52b2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM/IDogc3RyaW5nW10sIHNob3VsZERpc3BsYXk/IDogKCk9PmJvb2xlYW4pIHtcblxufVxuXG4vKipcbiAqIEdlbmVyYWxseSBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgY29udHJpYnV0b3ItYmFzZWQgYXJjaGl0ZWN0dXJlIGluc3RlYWQuXG4gKiBEZWxldGVzIGFsbCBtZW51IGl0ZW1zIHdpdGggYSBnaXZlbiBzZWxlY3Rvci4gU2hvdWxkIGFsbW9zdCBuZXZlciBiZSBjYWxsZWQuXG4gKiBDYW4gbm90IGRlbGV0ZSBjb250cmlidXRvci1iYXNlZCBtZW51IGl0ZW1zLlxuICogQHBhcmFtIHNlbGVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVNZW51SXRlbXMoc2VsZWN0b3IgOiBzdHJpbmcpIHtcbiAgICAvL1RPRE8gaW1wbGVtZW50XG59XG5cbi8qKlxuICogR2VuZXJhbGx5IGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBjb250cmlidXRvci1iYXNlZCBhcmNoaXRlY3R1cmUgaW5zdGVhZC5cbiAqIERlbGV0ZXMgbWVudSBpdGVtIGJ5IGl0cyBzZWxlY3RvciwgbmFtZSwgYW5kIG9wdGlvbmFsbHkgY2F0ZWdvcmllcy5cbiAqIENhbiBub3QgZGVsZXRlIGNvbnRyaWJ1dG9yLWJhc2VkIG1lbnUgaXRlbXMuXG4gKiBAcGFyYW0gc2VsZWN0b3JcbiAqIEBwYXJhbSBuYW1lXG4gKiBAcGFyYW0gY2F0ZWdvcmllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlTWVudUl0ZW0oc2VsZWN0b3IgOiBzdHJpbmcsIG5hbWUgOiBzdHJpbmcsIGNhdGVnb3JpZXM/IDogc3RyaW5nW10pIHtcbiAgICAvL1RPRE8gaW1wbGVtZW50XG59XG5cbmNsYXNzIENvbnRleHRNZW51SXRlbU5vZGUgaW1wbGVtZW50cyBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtIHtcblxuICAgIHNlbGVjdG9yIDogc3RyaW5nXG5cbiAgICBuYW1lIDogc3RyaW5nXG5cbiAgICBjYXRlZ29yaWVzIDogc3RyaW5nW11cblxuICAgIG9uQ2xpY2s6IChpdGVtPyA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUl0ZW0pPT52b2lkXG5cbiAgICBjaGlsZHJlbiA6IENvbnRleHRNZW51SXRlbU5vZGVbXVxuXG4gICAgY29uc3RydWN0b3IobWVudUl0ZW0gOiBjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtLCBuYW1lT3ZlcnJpZGU/IDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBtZW51SXRlbS5zZWxlY3RvclxuXG4gICAgICAgIGlmIChuYW1lT3ZlcnJpZGUpe1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZU92ZXJyaWRlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBtZW51SXRlbS5uYW1lXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSBtZW51SXRlbS5jYXRlZ29yaWVzXG4gICAgICAgIHRoaXMub25DbGljayA9IG1lbnVJdGVtLm9uQ2xpY2tcblxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW11cbiAgICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyBjdXJyZW50IG1lbnUgaXRlbXMgdHJlZS5cbiAqIEByZXR1cm5zIHtJQ29udGV4dE1lbnVJdGVtTm9kZVtdfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTWVudUl0ZW1zVHJlZSgpIDogUHJvbWlzZTxjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtW10+IHtcblxuICAgIGZvciAodmFyIGNvbnRyaWJ1dG9ySWQgaW4gY29udHJpYnV0b3JzKSB7XG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yID0gY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9ySWRdO1xuICAgICAgICBpZiAoY29udHJpYnV0b3IuY2FsY3VsYXRpb25TdGFydGVkKSB7XG4gICAgICAgICAgICBjb250cmlidXRvci5jYWxjdWxhdGlvblN0YXJ0ZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBjb250cmlidXRvclByb21pc2VzIDogUHJvbWlzZTxjb250ZXh0TWVudS5JQ29udGV4dE1lbnVJdGVtW10+W10gPSBbXTtcbiAgICBmb3IgKHZhciBjb250cmlidXRvcklkIGluIGNvbnRyaWJ1dG9ycykge1xuXG4gICAgICAgIHZhciBjb250cmlidXRvciA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUNvbnRyaWJ1dG9yID0gY29udHJpYnV0b3JzW2NvbnRyaWJ1dG9ySWRdO1xuICAgICAgICBjb250cmlidXRvclByb21pc2VzLnB1c2goY29udHJpYnV0b3IuY2FsY3VsYXRlSXRlbXMoKSlcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoY29udHJpYnV0b3JQcm9taXNlcykudGhlbigoY29udHJpYnV0b3JJdGVtczogY29udGV4dE1lbnUuSUNvbnRleHRNZW51SXRlbVtdW10pPT57XG5cbiAgICAgICAgdmFyIHJlc3VsdCA6IENvbnRleHRNZW51SXRlbU5vZGVbXSA9IFtdO1xuXG4gICAgICAgIGNvbnRyaWJ1dG9ySXRlbXMuZm9yRWFjaChpdGVtcz0+e1xuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBhZGRJdGVtc1RyZWVOb2RlKHJlc3VsdCwgaXRlbSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIGZvciAodmFyIGNvbnRyaWJ1dG9ySWQgaW4gY29udHJpYnV0b3JzKSB7XG5cbiAgICAgICAgICAgIHZhciBjb250cmlidXRvciA9IGNvbnRyaWJ1dG9yc1tjb250cmlidXRvcklkXTtcbiAgICAgICAgICAgIGlmIChjb250cmlidXRvci5jYWxjdWxhdGlvbkZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgY29udHJpYnV0b3IuY2FsY3VsYXRpb25GaW5pc2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBhZGRJdGVtc1RyZWVOb2RlKHJvb3RzIDogQ29udGV4dE1lbnVJdGVtTm9kZVtdLCBpdGVtIDogY29udGV4dE1lbnUuSUNvbnRleHRNZW51SXRlbSkge1xuXG4gICAgdmFyIGN1cnJlbnRMaXN0ID0gcm9vdHM7XG4gICAgaWYgKGl0ZW0uY2F0ZWdvcmllcykge1xuICAgICAgICBmb3IgKHZhciBjYXRJbmRleCBpbiBpdGVtLmNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2VnbWVudCA9IGl0ZW0uY2F0ZWdvcmllc1tjYXRJbmRleF1cbiAgICAgICAgICAgIHZhciBleGlzdGluZ05vZGUgPSBfLmZpbmQoY3VycmVudExpc3QsIG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLm5hbWUgPT0gY3VycmVudFNlZ21lbnRcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdOb2RlKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdOb2RlID0gbmV3IENvbnRleHRNZW51SXRlbU5vZGUoaXRlbSwgY3VycmVudFNlZ21lbnQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0LnB1c2goZXhpc3RpbmdOb2RlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nTm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdOb2RlLmNoaWxkcmVuID0gY3VycmVudExpc3RcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExpc3QgPSBleGlzdGluZ05vZGUuY2hpbGRyZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsZWFmTm9kZSA9IF8uZmluZChjdXJyZW50TGlzdCwgbm9kZSA9PiB7XG4gICAgICAgIHJldHVybiBub2RlLm5hbWUgPT0gaXRlbS5uYW1lXG4gICAgfSlcblxuICAgIGlmIChsZWFmTm9kZSkge1xuICAgICAgICB2YXIgaW5kZXggPSBjdXJyZW50TGlzdC5pbmRleE9mKGxlYWZOb2RlLCAwKTtcbiAgICAgICAgaWYgKGluZGV4ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY3VycmVudExpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxlYWZOb2RlID0gbmV3IENvbnRleHRNZW51SXRlbU5vZGUoaXRlbSlcblxuICAgIGN1cnJlbnRMaXN0LnB1c2gobGVhZk5vZGUpXG59XG5cbnZhciBhY3Rpb25CYXNlZE1lbnVJbml0aWFsaXplZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBvbkNsaWNrSGFuZGxlcihwYXRoLCBhY3Rpb24sIHBvc2l0aW9uKSB7XG5cbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZXhlY3V0ZUNvbnRleHRBY3Rpb24oXG4gICAgICAgIHBhdGgsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgcG9zaXRpb25cbiAgICApLnRoZW4oY2hhbmdlcz0+e1xuICAgICAgICBsZXQgZWRpdG9yTWFuYWdlciA9IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKTtcbiAgICAgICAgaWYgKCFlZGl0b3JNYW5hZ2VyKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcblxuICAgICAgICBsZXQgcGF0aCA9IGVkaXRvck1hbmFnZXIuZ2V0UGF0aCgpO1xuXG4gICAgICAgIC8vVE9ETyBoYW5kbGUgYWxsIGNhc2VzXG4gICAgICAgIGZvciAobGV0IGNoYW5nZSBvZiBjaGFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlLnVyaSA9PSBwYXRoICYmIGNoYW5nZS50ZXh0ICE9IG51bGwpIHtcblxuICAgICAgICAgICAgICAgIGVkaXRvck1hbmFnZXIuZ2V0Q3VycmVudEVkaXRvcigpLmdldEJ1ZmZlcigpLnNldFRleHQoY2hhbmdlLnRleHQpO1xuXG4gICAgICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRvY3VtZW50Q2hhbmdlZCh7XG4gICAgICAgICAgICAgICAgICAgIHVyaTogcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY2hhbmdlLnRleHRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2UudGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkaXRvckZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYXRvbS53b3Jrc3BhY2UuZ2V0VGV4dEVkaXRvcnMoKS5mb3JFYWNoKChjdXJyZW50RWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWRpdG9yLmdldFBhdGggJiYgY3VycmVudEVkaXRvci5nZXRQYXRoKCkgPT0gY2hhbmdlLnVyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVkaXRvci5nZXRCdWZmZXIoKS5zZXRUZXh0KGNoYW5nZS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvckZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBpZiAoIWVkaXRvckZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG1rZGlycC5zeW5jKHBhdGhNb2R1bGUuZGlybmFtZShjaGFuZ2UudXJpKSk7XG4gICAgICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoY2hhbmdlLnVyaSwgY2hhbmdlLnRleHQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgcmVnaXN0ZXJzIHN0YW5kYXJkIGNvbnRleHQgbWVudSBjb250cmlidXRvciwgYmFzZWQgb24gY3VycmVudGx5IGF2YWlsYWJsZSBjb250ZXh0IGFjdGlvbnMuXG4gKiBAcGFyYW0gc2VsZWN0b3IgLSBDU1Mgc2VsZWN0b3IsIGNhbiBiZSBudWxsIGlmIG5vdCB1c2VkIGluIHRoZSBkaXNwbGF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUFjdGlvbkJhc2VkTWVudShzZWxlY3Rvcj8gOiBzdHJpbmcpIHtcbiAgICB2YXIgZWRpdG9yQ29udGV4dE1lbnVDb250cmlidXRvciA6IGNvbnRleHRNZW51LklDb250ZXh0TWVudUNvbnRyaWJ1dG9yID0ge1xuXG4gICAgICAgIGlkIDogXCJlZGl0b3JDb250ZXh0QWN0aW9uQ29udHJpYnV0b3JcIixcblxuXG4gICAgICAgIGNhbGN1bGF0ZUl0ZW1zIDogZnVuY3Rpb24gKCkgOiBQcm9taXNlPGNvbnRleHRNZW51LklDb250ZXh0TWVudUl0ZW1bXT4ge1xuXG4gICAgICAgICAgICBsZXQgZWRpdG9yTWFuYWdlciA9IGVkaXRvclRvb2xzLmFxdWlyZU1hbmFnZXIoKTtcbiAgICAgICAgICAgIGlmICghZWRpdG9yTWFuYWdlcikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG5cbiAgICAgICAgICAgIGxldCBwYXRoID0gZWRpdG9yTWFuYWdlci5nZXRQYXRoKCk7XG4gICAgICAgICAgICBpZiAoIXBhdGgpIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuXG4gICAgICAgICAgICBsZXQgcG9zaXRpb24gPSBlZGl0b3JNYW5hZ2VyLmdldEN1cnJlbnRQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpXG4gICAgICAgICAgICAgICAgLmNhbGN1bGF0ZUVkaXRvckNvbnRleHRBY3Rpb25zKHBhdGgsIHBvc2l0aW9uKS50aGVuKGN1cnJlbnRBY3Rpb25zPT57XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0IDogY29udGV4dE1lbnUuSUNvbnRleHRNZW51SXRlbVtdID0gW11cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRBY3Rpb25zLmZvckVhY2goYWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGFjdGlvbi5oYXNVSSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA6IHNlbGVjdG9yLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogYWN0aW9uLmxhYmVsID8gYWN0aW9uLmxhYmVsIDogYWN0aW9uLm5hbWUsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgOiBhY3Rpb24uY2F0ZWdvcnksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXIocGF0aCwgYWN0aW9uLCBwb3NpdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICByZWdpc3RlckNvbnRyaWJ1dG9yKGVkaXRvckNvbnRleHRNZW51Q29udHJpYnV0b3IpXG4gICAgaGFuZGxlQWN0aW9uVUkoKTtcbiAgICBjb25maWd1cmVTZXJ2ZXJBY3Rpb25zKCk7XG5cblxuICAgIGFjdGlvbkJhc2VkTWVudUluaXRpYWxpemVkID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWN0aW9uVUkoKSB7XG4gICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLm9uRGlzcGxheUFjdGlvblVJKHVpRGlzcGxheVJlcXVlc3QgPT4ge1xuICAgICAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuZGVidWcoXCJHb3QgVUkgZGlzcGxheSByZXF1ZXN0XCIsXG4gICAgICAgICAgICBcImNvbnRleHRBY3Rpb25zXCIsIFwiY29udGV4dE1lbnVJbXBsI2hhbmRsZUFjdGlvblVJXCIpXG5cbiAgICAgICAgY29uc3QgYWN0aW9uVUkgPSBhY3Rpb25VSU1hbmFnZXIuZ2V0VUlDb2RlKHVpRGlzcGxheVJlcXVlc3QuYWN0aW9uLmlkKTtcbiAgICAgICAgaWYgKCFhY3Rpb25VSSkge1xuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmVycm9yKFwiQ2FuIG5vdCBmaW5kIFVJIGZvciBhY3Rpb24gXCIgK1xuICAgICAgICAgICAgICAgIHVpRGlzcGxheVJlcXVlc3QuYWN0aW9uLmlkLFxuICAgICAgICAgICAgICAgIFwiY29udGV4dEFjdGlvbnNcIiwgXCJoYW5kbGVBY3Rpb25VSVwiKVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIChnbG9iYWwgYXMgYW55KS5JREUgPSBhdG9tO1xuICAgICAgICAoZ2xvYmFsIGFzIGFueSkuVUkgPSB1aWxpYnNNb2R1bGU7XG4gICAgICAgIChnbG9iYWwgYXMgYW55KS5VSUJ1aWxkZXIgPSB1aUJ1aWxkZXI7XG5cbiAgICAgICAgcmV0dXJuIGFjdGlvblVJLnJ1bih1aURpc3BsYXlSZXF1ZXN0LmluaXRpYWxVSVN0YXRlKS50aGVuKChyZXN1bHQpID0+IHtcblxuICAgICAgICAgICAgcmFtbFNlcnZlci5nZXROb2RlQ2xpZW50Q29ubmVjdGlvbigpLmRlYnVnRGV0YWlsKFwiQ2xpZW50OiBnb3QgcmVzdWx0IG9uIGRpYWxvZyBmaW5pc2hcIixcbiAgICAgICAgICAgICAgICBcImNvbnRleHRBY3Rpb25zXCIsIFwiaGFuZGxlQWN0aW9uVUlcIilcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gY29uZmlndXJlU2VydmVyQWN0aW9ucygpIHtcbiAgICByYW1sU2VydmVyLmdldE5vZGVDbGllbnRDb25uZWN0aW9uKCkuc2V0U2VydmVyQ29uZmlndXJhdGlvbih7XG4gICAgICAgIGFjdGlvbnNDb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICBlbmFibGVVSUFjdGlvbnM6IHRydWVcbiAgICAgICAgfVxuICAgIH0pO1xufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/context-menu/contextMenuImpl.js\n// module id = 30\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 31\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar completeBodyUI = require(\"./actions/completeBody/ui\");\nvar newMethodUI = require(\"./actions/newMethod/ui\");\nvar simpleActionUi = require(\"./actions/simpleAction/ui\");\nfunction getUICode(actionID) {\n    if (actionID == \"completeBody\") {\n        return completeBodyUI;\n    }\n    if (actionID == \"newMethod\") {\n        return newMethodUI;\n    }\n    if (actionID == \"Create new Response\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new URI Parameter\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new Query Parameter\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new Header\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new Response Header\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new Response Body\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new Property\") {\n        return simpleActionUi;\n    }\n    if (actionID == \"Create new Body\") {\n        return simpleActionUi;\n    }\n    return null;\n}\nexports.getUICode = getUICode;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25VSU1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwwREFBNEQ7QUFDNUQsb0RBQXNEO0FBRXRELDBEQUE0RDtBQU01RCxtQkFBMEIsUUFBZ0I7SUFDdEMsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDekIsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUN2QixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFRCxFQUFFLENBQUEsQ0FBQyxRQUFRLElBQUksMEJBQTBCLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUVELEVBQUUsQ0FBQSxDQUFDLFFBQVEsSUFBSSw0QkFBNEIsQ0FBQyxDQUFDLENBQUM7UUFDMUMsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLG1CQUFtQixDQUFDLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFRCxFQUFFLENBQUEsQ0FBQyxRQUFRLElBQUksNEJBQTRCLENBQUMsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUVELEVBQUUsQ0FBQSxDQUFDLFFBQVEsSUFBSSwwQkFBMEIsQ0FBQyxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxQixDQUFDO0lBRUQsRUFBRSxDQUFBLENBQUMsUUFBUSxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQzFCLENBQUM7SUFFRCxFQUFFLENBQUEsQ0FBQyxRQUFRLElBQUksaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxjQUFjLENBQUM7SUFDMUIsQ0FBQztJQUVELE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDaEIsQ0FBQztBQTFDRCw4QkEwQ0MiLCJmaWxlIjoic3JjL2F0b20vY29udGV4dC1tZW51L2FjdGlvblVJTWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb21wbGV0ZUJvZHlVSSA9IHJlcXVpcmUoXCIuL2FjdGlvbnMvY29tcGxldGVCb2R5L3VpXCIpXG5pbXBvcnQgbmV3TWV0aG9kVUkgPSByZXF1aXJlKFwiLi9hY3Rpb25zL25ld01ldGhvZC91aVwiKVxuXG5pbXBvcnQgc2ltcGxlQWN0aW9uVWkgPSByZXF1aXJlKFwiLi9hY3Rpb25zL3NpbXBsZUFjdGlvbi91aVwiKVxuXG5pbnRlcmZhY2UgQWN0aW9uVUkge1xuICAgIHJ1bihpbml0aWFsU3RhdGU/OiBhbnkpOiBQcm9taXNlPGFueT47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVSUNvZGUoYWN0aW9uSUQ6IHN0cmluZyk6IEFjdGlvblVJIHtcbiAgICBpZihhY3Rpb25JRCA9PSBcImNvbXBsZXRlQm9keVwiKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZUJvZHlVSTtcbiAgICB9XG5cbiAgICBpZihhY3Rpb25JRCA9PSBcIm5ld01ldGhvZFwiKSB7XG4gICAgICAgIHJldHVybiBuZXdNZXRob2RVSTtcbiAgICB9XG5cbiAgICBpZihhY3Rpb25JRCA9PSBcIkNyZWF0ZSBuZXcgUmVzcG9uc2VcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFVSSSBQYXJhbWV0ZXJcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFF1ZXJ5IFBhcmFtZXRlclwiKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGVBY3Rpb25VaTtcbiAgICB9XG5cbiAgICBpZihhY3Rpb25JRCA9PSBcIkNyZWF0ZSBuZXcgSGVhZGVyXCIpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZUFjdGlvblVpO1xuICAgIH1cblxuICAgIGlmKGFjdGlvbklEID09IFwiQ3JlYXRlIG5ldyBSZXNwb25zZSBIZWFkZXJcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFJlc3BvbnNlIEJvZHlcIikge1xuICAgICAgICByZXR1cm4gc2ltcGxlQWN0aW9uVWk7XG4gICAgfVxuXG4gICAgaWYoYWN0aW9uSUQgPT0gXCJDcmVhdGUgbmV3IFByb3BlcnR5XCIpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZUFjdGlvblVpO1xuICAgIH1cblxuICAgIGlmKGFjdGlvbklEID09IFwiQ3JlYXRlIG5ldyBCb2R5XCIpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZUFjdGlvblVpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/context-menu/actionUIManager.js\n// module id = 32\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar JsonSchemaGenerator = /** @class */ (function () {\n    function JsonSchemaGenerator() {\n    }\n    JsonSchemaGenerator.prototype.generateSchema = function (obj) {\n        var sch = {};\n        sch['required'] = true;\n        sch['$schema'] = 'http://json-schema.org/draft-03/schema';\n        this.pass(obj, sch);\n        return sch;\n    };\n    JsonSchemaGenerator.prototype.pass = function (value, property) {\n        var valueType = this.detectType(value);\n        property['type'] = valueType;\n        if (!value || value == null) {\n        }\n        else if (Array.isArray(value)) {\n            this.passArray(value, property);\n        }\n        else if (value instanceof Object) {\n            this.passObject(value, property);\n        }\n    };\n    JsonSchemaGenerator.prototype.passObject = function (obj, sch) {\n        var _this = this;\n        Object.keys(obj).forEach(function (x) { return _this.registerProperty(x, obj[x], sch); });\n    };\n    JsonSchemaGenerator.prototype.registerProperty = function (propName, value, sch) {\n        var properties = sch['properties'];\n        if (!properties) {\n            properties = {};\n            sch['properties'] = properties;\n        }\n        var property = properties[propName];\n        if (!property) {\n            property = {};\n            properties[propName] = property;\n        }\n        property['required'] = false;\n        this.pass(value, property);\n    };\n    JsonSchemaGenerator.prototype.passArray = function (array, property) {\n        var _this = this;\n        var items = property['items'];\n        if (!items) {\n            items = [];\n            property['items'] = items;\n        }\n        var l = array.length;\n        var itemSet = [];\n        array.forEach(function (value) {\n            var item = {};\n            _this.pass(value, item);\n            itemSet.push(item);\n        });\n        items.push(itemSet[0]);\n    };\n    JsonSchemaGenerator.prototype.detectType = function (value) {\n        if (Array.isArray(value)) {\n            return 'array';\n        }\n        return typeof value;\n    };\n    return JsonSchemaGenerator;\n}());\nfunction generateSchema(text, mediaType) {\n    var generator = new JsonSchemaGenerator();\n    var obj = JSON.parse(text);\n    var schemaObject = generator.generateSchema(obj);\n    var schemaString = JSON.stringify(schemaObject, null, 2);\n    return schemaString;\n}\nexports.generateSchema = generateSchema;\nvar FillBodyDialog = /** @class */ (function () {\n    function FillBodyDialog(title) {\n        if (title === void 0) { title = \"Fill body\"; }\n        var _this = this;\n        this.title = title;\n        this.name = \"\";\n        this.needXML = true;\n        this.needJSON = true;\n        this.jsexample = '{\\n \"message\":\"Hello world\"\\n}';\n        this.xmlexample = \"\";\n        this.xmlschema = \"\";\n        this.jsschema = \"\";\n        this.resultPromise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    FillBodyDialog.prototype.extraContent = function (s) {\n    };\n    FillBodyDialog.prototype.updateButtons = function () {\n        if (!this.createButton) {\n            return;\n        }\n        if (this.name.length == 0) {\n            this.createButton.setDisabled(true);\n            this.em.setDisplay(true);\n            this.em.setText(\"Please type name of your payload\");\n            return;\n        }\n        if (this.needJSON) {\n            try {\n                JSON.parse(this.jsexample);\n            }\n            catch (e) {\n                this.createButton.setDisabled(true);\n                this.em.setDisplay(true);\n                this.em.setText(\"JSON example is not correct\");\n                return;\n            }\n            // try {\n            //     var so = su.getJSONSchema(this.jsschema, null);\n            //\n            // } catch (e) {\n            //     this.createButton.setDisabled(true);\n            //     this.em.setDisplay(true)\n            //     this.em.setText(\"JSON schema is not correct\");\n            //     return;\n            // }\n        }\n        if (this.needXML) {\n            // try {\n            //     xmlutil(this.xmlexample);\n            // } catch (e) {\n            //     this.createButton.setDisabled(true);\n            //     this.em.setDisplay(true)\n            //     this.em.setText(\"XML example is not correct\");\n            //     return;\n            // }\n            // try {\n            //     var so = su.getXMLSchema(this.xmlschema);\n            //\n            // } catch (e) {\n            //     this.createButton.setDisabled(true);\n            //     this.em.setDisplay(true)\n            //     this.em.setText(\"XML schema is not correct\");\n            //     return;\n            // }\n        }\n        this.em.setDisplay(false);\n        this.createButton.setDisabled(false);\n    };\n    FillBodyDialog.prototype.show = function () {\n        var _this = this;\n        var zz = null;\n        this.em = UI.label(\"Please type name of your payload\", UI.Icon.BUG, UI.TextClasses.ERROR, UI.HighLightClasses.NONE);\n        var section = UI.section(this.title, UI.Icon.BOOK, false, false, this.em, UI.h3(\"Please type name for your payload\")).pad(10, 10);\n        section.addChild(UI.texfField(\"\", this.name, function (x) {\n            _this.name = x.getBinding().get();\n            _this.updateButtons();\n        }));\n        var r1 = UI.checkBox(\"Create XML body\");\n        r1.setValue(this.needXML);\n        r1.getBinding().addListener(function (x) {\n            _this.needXML = r1.getValue();\n            _this.updateButtons();\n        });\n        section.addChild(r1);\n        var r2 = UI.checkBox(\"Create JSON body\");\n        r2.setValue(this.needJSON);\n        r2.getBinding().addListener(function (x) {\n            _this.needJSON = r2.getValue();\n            _this.updateButtons();\n        });\n        section.addChild(r2);\n        var buttonBar = UI.hc().setPercentWidth(100).setStyle(\"display\", \"flex\");\n        buttonBar.addChild(UI.label(\"\", null, null, null).setStyle(\"flex\", \"1\"));\n        buttonBar.addChild(UI.button(\"Cancel\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.NO_HIGHLIGHT, UI.Icon.NONE, function (x) {\n            zz.destroy();\n        }).margin(10, 10));\n        this.createButton = UI.button(\"Create\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, function (x) {\n            _this.onOk(zz);\n            zz.destroy();\n        });\n        buttonBar.addChild(this.createButton);\n        var tf = new UI.TabFolder();\n        this.createButton.setDisabled(true);\n        this.createTextSection(tf, \"JSON Example\", \"source.json\", \"jsexample\");\n        this.createTextSection(tf, \"JSON Schema\", \"source.json\", \"jsschema\");\n        this.createTextSection(tf, \"XML Example\", \"text.xml\", \"xmlexample\");\n        this.createTextSection(tf, \"XML Schema\", \"text.xml\", \"xmlschema\");\n        tf.setOnSelected(function () {\n            var c = tf.selectedComponent();\n            var te = c.children()[1];\n            te.setText(_this[c.id()]);\n        });\n        section.addChild(tf);\n        section.addChild(buttonBar);\n        zz = IDE.workspace.addModalPanel({ item: section.renderUI() });\n    };\n    FillBodyDialog.prototype.createTextSection = function (tf, caption, lang, code) {\n        var _this = this;\n        var hs = UI.vc();\n        hs.setCaption(caption);\n        hs.setId(code);\n        var ts = new UI.AtomEditorElement(\"\", function (x) { return x; });\n        ts.setMini(false);\n        ts.getBinding().addListener(function (x) {\n            _this[code] = ts.getValue();\n            _this.updateButtons();\n        });\n        //ts.setCaption(code)\n        ts.setText(\"\" + this[code]);\n        ts.setCaption(caption);\n        ts.setGrammar(lang);\n        ts.setStyle(\"height\", \"400px\");\n        ts.setStyle(\"border\", \"solid\");\n        ts.setStyle(\"border-width\", \"1px\");\n        hs.addChild(UI.h3(\"Please type your example here:\"));\n        hs.addChild(ts);\n        if (code == 'jsexample') {\n            var b = UI.button(\"Generate JSON schema\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, function (x) {\n                try {\n                    var rs = generateSchema(_this.jsexample, \"application/json\");\n                    _this.jsschema = rs;\n                    tf.setSelectedIndex(1);\n                }\n                catch (e) {\n                    _this.jsschema = e.message;\n                    tf.setSelectedIndex(1);\n                }\n            });\n            hs.addChild(b.margin(5, 5, 5, 5));\n        }\n        // if (code == 'xmlexample') {\n        //     var b = UI.button(\"Generate JSON example\", UI.ButtonSizes.NORMAL, UI.ButtonHighlights.SUCCESS, UI.Icon.NONE, x=> {\n        //         try {\n        //             var rs = xmlutil(this.xmlexample)\n        //             this.jsexample = JSON.stringify(rs, null, 2);\n        //             tf.setSelectedIndex(0)\n        //         }\n        //         catch (e) {\n        //             this.jsexample = e.message;\n        //             tf.setSelectedIndex(0)\n        //         }\n        //     });\n        //     hs.addChild(b.margin(5, 5, 5, 5));\n        // }\n        tf.add(caption, null, hs);\n    };\n    FillBodyDialog.prototype.onOk = function (zz) {\n        this.resolve({\n            name: this.name,\n            needJSON: this.needJSON,\n            needXML: this.needXML,\n            jsexample: this.jsexample,\n            xmlexample: this.xmlexample,\n            jsschema: this.jsschema,\n            xmlschema: this.xmlschema,\n        });\n    };\n    FillBodyDialog.prototype.getResult = function () {\n        return this.resultPromise;\n    };\n    return FillBodyDialog;\n}());\nfunction run() {\n    var dialog = new FillBodyDialog();\n    dialog.show();\n    return dialog.getResult();\n}\nexports.run = run;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL2NvbXBsZXRlQm9keS91aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQXFEQTtJQUFBO0lBeUVBLENBQUM7SUF2RUcsNENBQWMsR0FBZCxVQUFlLEdBQU87UUFFbEIsSUFBSSxHQUFHLEdBQVUsRUFBRSxDQUFBO1FBQ25CLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUE7UUFDdEIsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLHdDQUF3QyxDQUFBO1FBRXpELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3BCLE1BQU0sQ0FBQyxHQUFHLENBQUE7SUFDZCxDQUFDO0lBRU8sa0NBQUksR0FBWixVQUFhLEtBQVMsRUFBRSxRQUFlO1FBRW5DLElBQUksU0FBUyxHQUFVLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLFNBQVMsQ0FBQTtRQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztRQUU5QixDQUFDO1FBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3BDLENBQUM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxZQUFZLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDckMsQ0FBQztJQUNMLENBQUM7SUFFTyx3Q0FBVSxHQUFsQixVQUFtQixHQUFVLEVBQUUsR0FBVTtRQUF6QyxpQkFFQztRQURHLE1BQU0sQ0FBQyxJQUFJ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LENBQUMsUUFBUTtZQUN2QixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87WUFDckIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1lBQ3pCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUMzQixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDdkIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1NBQzVCLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSxrQ0FBUyxHQUFoQjtRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFDTCxxQkFBQztBQUFELENBeE1BLEFBd01DLElBQUE7QUFDRDtJQUNJLElBQUksTUFBTSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBRWQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUM5QixDQUFDO0FBTEQsa0JBS0MiLCJmaWxlIjoic3JjL2F0b20vY29udGV4dC1tZW51L2FjdGlvbnMvY29tcGxldGVCb2R5L3VpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgbGliVUlNb2R1bGUgPSByZXF1aXJlKFwiYXRvbS11aS1saWJcIilcblxuLyoqXG4gKiB1aS1saWJzIGluc3RhbmNlXG4gKi9cbmRlY2xhcmUgbGV0IFVJIDogdHlwZW9mIGxpYlVJTW9kdWxlXG5cbi8qKlxuICogSURFIFVJIGluc3RhbmNlXG4gKi9cbmRlY2xhcmUgbGV0IElERTogYW55O1xuXG4vKipcbiAqIE91dHB1dCBVSSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ29tcGxldGVCb2R5T3V0cHV0VUlTdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQm9keSBuYW1lLlxuICAgICAqL1xuICAgIG5hbWUgOiBzdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIEpTT04gY29udGVudCB0eXBlIG5lZWRzIHRvIGJlIGdlbmVyYXRlZFxuICAgICAqL1xuICAgIG5lZWRKU09OIDogYm9vbGVhbixcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgWE1MIGNvbnRlbnQgdHlwZSBuZWVkcyB0byBiZSBnZW5lcmF0ZWRcbiAgICAgKi9cbiAgICBuZWVkWE1MIDogYm9vbGVhbixcblxuICAgIC8qKlxuICAgICAqIEpTT04gZXhhbXBsZSBjb250ZW50c1xuICAgICAqL1xuICAgIGpzZXhhbXBsZSA6IHN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIFhNTCBleGFtcGxlIGNvbnRlbnRzXG4gICAgICovXG4gICAgeG1sZXhhbXBsZSA6IHN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIEpTT04gc2NoZW1hIGNvbnRlbnRzXG4gICAgICovXG4gICAganNzY2hlbWEgOiBzdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBYTUwgc2NoZW1hIGNvbnRlbnRzXG4gICAgICovXG4gICAgeG1sc2NoZW1hIDogc3RyaW5nXG59XG5cbmNsYXNzIEpzb25TY2hlbWFHZW5lcmF0b3Ige1xuXG4gICAgZ2VuZXJhdGVTY2hlbWEob2JqOmFueSk6T2JqZWN0e1xuXG4gICAgICAgIHZhciBzY2g6T2JqZWN0ID0ge31cbiAgICAgICAgc2NoWydyZXF1aXJlZCddID0gdHJ1ZVxuICAgICAgICBzY2hbJyRzY2hlbWEnXSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTAzL3NjaGVtYSdcblxuICAgICAgICB0aGlzLnBhc3Mob2JqLCBzY2gpO1xuICAgICAgICByZXR1cm4gc2NoXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXNzKHZhbHVlOmFueSwgcHJvcGVydHk6T2JqZWN0KXtcblxuICAgICAgICB2YXIgdmFsdWVUeXBlOnN0cmluZyA9IHRoaXMuZGV0ZWN0VHlwZSh2YWx1ZSk7XG4gICAgICAgIHByb3BlcnR5Wyd0eXBlJ10gPSB2YWx1ZVR5cGVcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZSA9PSBudWxsKSB7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5wYXNzQXJyYXkodmFsdWUsIHByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy5wYXNzT2JqZWN0KHZhbHVlLCBwcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBhc3NPYmplY3Qob2JqOk9iamVjdCwgc2NoOk9iamVjdCkge1xuICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goIHggPT4gdGhpcy5yZWdpc3RlclByb3BlcnR5KHgsb2JqW3hdLHNjaCkgKVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJQcm9wZXJ0eShwcm9wTmFtZTpzdHJpbmcsIHZhbHVlOmFueSwgc2NoOk9iamVjdCl7XG5cbiAgICAgICAgdmFyIHByb3BlcnRpZXM6T2JqZWN0ID0gc2NoWydwcm9wZXJ0aWVzJ11cbiAgICAgICAgaWYoIXByb3BlcnRpZXMpe1xuICAgICAgICAgICAgcHJvcGVydGllcyA9IHt9XG4gICAgICAgICAgICBzY2hbJ3Byb3BlcnRpZXMnXSA9IHByb3BlcnRpZXNcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcm9wZXJ0eTpPYmplY3QgPSBwcm9wZXJ0aWVzW3Byb3BOYW1lXVxuICAgICAgICBpZighcHJvcGVydHkpe1xuICAgICAgICAgICAgcHJvcGVydHkgPSB7fVxuICAgICAgICAgICAgcHJvcGVydGllc1twcm9wTmFtZV0gPSBwcm9wZXJ0eVxuICAgICAgICB9XG4gICAgICAgIHByb3BlcnR5WydyZXF1aXJlZCddID0gZmFsc2VcbiAgICAgICAgdGhpcy5wYXNzKHZhbHVlLCBwcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXNzQXJyYXkoYXJyYXk6YW55W10sIHByb3BlcnR5Ok9iamVjdCl7XG5cbiAgICAgICAgdmFyIGl0ZW1zID0gcHJvcGVydHlbJ2l0ZW1zJ11cbiAgICAgICAgaWYoIWl0ZW1zKXtcbiAgICAgICAgICAgIGl0ZW1zID0gW11cbiAgICAgICAgICAgIHByb3BlcnR5WydpdGVtcyddID0gaXRlbXNcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsOm51bWJlciA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgdmFyIGl0ZW1TZXQgPSBbXVxuICAgICAgICBhcnJheS5mb3JFYWNoKCB2YWx1ZSA9PiB7XG5cbiAgICAgICAgICAgIHZhciBpdGVtOk9iamVjdCA9IHt9XG4gICAgICAgICAgICB0aGlzLnBhc3ModmFsdWUsaXRlbSk7XG4gICAgICAgICAgICBpdGVtU2V0LnB1c2goaXRlbSlcbiAgICAgICAgfSlcbiAgICAgICAgaXRlbXMucHVzaChpdGVtU2V0WzBdKVxuICAgIH1cblxuICAgIHByaXZhdGUgZGV0ZWN0VHlwZSh2YWx1ZTphbnkpOnN0cmluZyB7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FycmF5J1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWVcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTY2hlbWEodGV4dDpzdHJpbmcsbWVkaWFUeXBlOnN0cmluZyk6c3RyaW5ne1xuICAgIHZhciBnZW5lcmF0b3IgPSBuZXcgSnNvblNjaGVtYUdlbmVyYXRvcigpXG4gICAgdmFyIG9iaiA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgdmFyIHNjaGVtYU9iamVjdCA9IGdlbmVyYXRvci5nZW5lcmF0ZVNjaGVtYShvYmopXG4gICAgdmFyIHNjaGVtYVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHNjaGVtYU9iamVjdCxudWxsLDIpXG4gICAgcmV0dXJuIHNjaGVtYVN0cmluZ1xufVxuXG5jbGFzcyBGaWxsQm9keURpYWxvZyB7XG5cbiAgICBwcm90ZWN0ZWQgbmFtZTpzdHJpbmcgPSBcIlwiXG4gICAgcHJpdmF0ZSByZXNvbHZlO1xuICAgIHByaXZhdGUgcmVqZWN0O1xuICAgIHByaXZhdGUgcmVzdWx0UHJvbWlzZTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB0aXRsZTpzdHJpbmcgPSBcIkZpbGwgYm9keVwiKSB7XG4gICAgICAgIHRoaXMucmVzdWx0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlOiAodmFsdWU/OiBJQ29tcGxldGVCb2R5T3V0cHV0VUlTdGF0ZSkgPT4gdm9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdDogKGVycm9yPzogYW55KSA9PiB2b2lkKSA9PiB7XG5cbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXh0cmFDb250ZW50KHM6bGliVUlNb2R1bGUuU2VjdGlvbikge1xuXG4gICAgfVxuXG4gICAgbmVlZFhNTDpib29sZWFuID0gdHJ1ZTtcbiAgICBuZWVkSlNPTjpib29sZWFuID0gdHJ1ZTtcbiAgICBjcmVhdGVCdXR0b246bGliVUlNb2R1bGUuQnV0dG9uO1xuXG4gICAgdXBkYXRlQnV0dG9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZUJ1dHRvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5hbWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbS5zZXREaXNwbGF5KHRydWUpXG4gICAgICAgICAgICB0aGlzLmVtLnNldFRleHQoXCJQbGVhc2UgdHlwZSBuYW1lIG9mIHlvdXIgcGF5bG9hZFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5uZWVkSlNPTikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHRoaXMuanNleGFtcGxlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgICAgICB0aGlzLmVtLnNldFRleHQoXCJKU09OIGV4YW1wbGUgaXMgbm90IGNvcnJlY3RcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIC8vICAgICB2YXIgc28gPSBzdS5nZXRKU09OU2NoZW1hKHRoaXMuanNzY2hlbWEsIG51bGwpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldFRleHQoXCJKU09OIHNjaGVtYSBpcyBub3QgY29ycmVjdFwiKTtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubmVlZFhNTCkge1xuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIC8vICAgICB4bWx1dGlsKHRoaXMueG1sZXhhbXBsZSk7XG4gICAgICAgICAgICAvLyB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5jcmVhdGVCdXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5lbS5zZXREaXNwbGF5KHRydWUpXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5lbS5zZXRUZXh0KFwiWE1MIGV4YW1wbGUgaXMgbm90IGNvcnJlY3RcIik7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgICAgIC8vICAgICB2YXIgc28gPSBzdS5nZXRYTUxTY2hlbWEodGhpcy54bWxzY2hlbWEpO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldERpc3BsYXkodHJ1ZSlcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVtLnNldFRleHQoXCJYTUwgc2NoZW1hIGlzIG5vdCBjb3JyZWN0XCIpO1xuICAgICAgICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtLnNldERpc3BsYXkoZmFsc2UpO1xuICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgfVxuXG4gICAgZW06bGliVUlNb2R1bGUuTGFiZWw7XG5cbiAgICBzaG93KCkge1xuICAgICAgICB2YXIgenogPSBudWxsO1xuICAgICAgICB0aGlzLmVtID0gVUkubGFiZWwoXCJQbGVhc2UgdHlwZSBuYW1lIG9mIHlvdXIgcGF5bG9hZFwiLCBVSS5JY29uLkJVRywgVUkuVGV4dENsYXNzZXMuRVJST1IsIFVJLkhpZ2hMaWdodENsYXNzZXMuTk9ORSk7XG4gICAgICAgIHZhciBzZWN0aW9uID0gVUkuc2VjdGlvbih0aGlzLnRpdGxlLCBVSS5JY29uLkJPT0ssIGZhbHNlLCBmYWxzZSwgdGhpcy5lbSwgVUkuaDMoXCJQbGVhc2UgdHlwZSBuYW1lIGZvciB5b3VyIHBheWxvYWRcIikpLnBhZCgxMCwgMTApXG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQoVUkudGV4ZkZpZWxkKFwiXCIsIHRoaXMubmFtZSwgeD0+IHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHguZ2V0QmluZGluZygpLmdldCgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25zKCk7XG4gICAgICAgIH0pKVxuICAgICAgICB2YXIgcjEgPSBVSS5jaGVja0JveChcIkNyZWF0ZSBYTUwgYm9keVwiKTtcbiAgICAgICAgcjEuc2V0VmFsdWUodGhpcy5uZWVkWE1MKTtcbiAgICAgICAgcjEuZ2V0QmluZGluZygpLmFkZExpc3RlbmVyKHg9PiB7XG4gICAgICAgICAgICB0aGlzLm5lZWRYTUwgPSByMS5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25zKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKHIxKTtcbiAgICAgICAgdmFyIHIyID0gVUkuY2hlY2tCb3goXCJDcmVhdGUgSlNPTiBib2R5XCIpO1xuICAgICAgICByMi5zZXRWYWx1ZSh0aGlzLm5lZWRKU09OKTtcbiAgICAgICAgcjIuZ2V0QmluZGluZygpLmFkZExpc3RlbmVyKHg9PiB7XG4gICAgICAgICAgICB0aGlzLm5lZWRKU09OID0gcjIuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQnV0dG9ucygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VjdGlvbi5hZGRDaGlsZChyMik7XG5cbiAgICAgICAgdmFyIGJ1dHRvbkJhciA9IFVJLmhjKCkuc2V0UGVyY2VudFdpZHRoKDEwMCkuc2V0U3R5bGUoXCJkaXNwbGF5XCIsIFwiZmxleFwiKTtcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKFVJLmxhYmVsKFwiXCIsIG51bGwsIG51bGwsIG51bGwpLnNldFN0eWxlKFwiZmxleFwiLCBcIjFcIikpXG4gICAgICAgIGJ1dHRvbkJhci5hZGRDaGlsZChVSS5idXR0b24oXCJDYW5jZWxcIiwgVUkuQnV0dG9uU2l6ZXMuTk9STUFMLCBVSS5CdXR0b25IaWdobGlnaHRzLk5PX0hJR0hMSUdIVCwgVUkuSWNvbi5OT05FLCB4PT4ge1xuICAgICAgICAgICAgenouZGVzdHJveSgpXG4gICAgICAgIH0pLm1hcmdpbigxMCwgMTApKVxuXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uID0gVUkuYnV0dG9uKFwiQ3JlYXRlXCIsIFVJLkJ1dHRvblNpemVzLk5PUk1BTCwgVUkuQnV0dG9uSGlnaGxpZ2h0cy5TVUNDRVNTLCBVSS5JY29uLk5PTkUsIHg9PiB7XG4gICAgICAgICAgICB0aGlzLm9uT2soenopO1xuICAgICAgICAgICAgenouZGVzdHJveSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKHRoaXMuY3JlYXRlQnV0dG9uKVxuICAgICAgICB2YXIgdGYgPSBuZXcgVUkuVGFiRm9sZGVyKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uLnNldERpc2FibGVkKHRydWUpXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNlY3Rpb24odGYsIFwiSlNPTiBFeGFtcGxlXCIsIFwic291cmNlLmpzb25cIiwgXCJqc2V4YW1wbGVcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNlY3Rpb24odGYsIFwiSlNPTiBTY2hlbWFcIiwgXCJzb3VyY2UuanNvblwiLCBcImpzc2NoZW1hXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZWN0aW9uKHRmLCBcIlhNTCBFeGFtcGxlXCIsIFwidGV4dC54bWxcIiwgXCJ4bWxleGFtcGxlXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZWN0aW9uKHRmLCBcIlhNTCBTY2hlbWFcIiwgXCJ0ZXh0LnhtbFwiLCBcInhtbHNjaGVtYVwiKTtcbiAgICAgICAgdGYuc2V0T25TZWxlY3RlZCgoKT0+IHtcbiAgICAgICAgICAgIHZhciBjID0gdGYuc2VsZWN0ZWRDb21wb25lbnQoKTtcbiAgICAgICAgICAgIHZhciB0ZSA9ICg8bGliVUlNb2R1bGUuQXRvbUVkaXRvckVsZW1lbnQ+PGFueT5jLmNoaWxkcmVuKClbMV0pO1xuICAgICAgICAgICAgdGUuc2V0VGV4dCgoPGFueT50aGlzKVsoPGxpYlVJTW9kdWxlLkJhc2ljQ29tcG9uZW50PGFueT4+YykuaWQoKV0pO1xuXG4gICAgICAgIH0pXG4gICAgICAgIHNlY3Rpb24uYWRkQ2hpbGQodGYpO1xuICAgICAgICBzZWN0aW9uLmFkZENoaWxkKGJ1dHRvbkJhcik7XG4gICAgICAgIHp6ID0gKDxhbnk+SURFKS53b3Jrc3BhY2UuYWRkTW9kYWxQYW5lbCh7aXRlbTogc2VjdGlvbi5yZW5kZXJVSSgpfSk7XG4gICAgfVxuXG4gICAganNleGFtcGxlOnN0cmluZyA9ICd7XFxuIFwibWVzc2FnZVwiOlwiSGVsbG8gd29ybGRcIlxcbn0nXG4gICAgeG1sZXhhbXBsZTpzdHJpbmcgPSBcIlwiO1xuICAgIHhtbHNjaGVtYTpzdHJpbmcgPSBcIlwiO1xuICAgIGpzc2NoZW1hOnN0cmluZyA9IFwiXCI7XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRleHRTZWN0aW9uKHRmOmxpYlVJTW9kdWxlLlRhYkZvbGRlciwgY2FwdGlvbjpzdHJpbmcsIGxhbmc6c3RyaW5nLCBjb2RlOnN0cmluZykge1xuICAgICAgICB2YXIgaHMgPSBVSS52YygpO1xuICAgICAgICBocy5zZXRDYXB0aW9uKGNhcHRpb24pXG4gICAgICAgIGhzLnNldElkKGNvZGUpXG4gICAgICAgIHZhciB0cyA9IG5ldyBVSS5BdG9tRWRpdG9yRWxlbWVudChcIlwiLCB4PT54KTtcbiAgICAgICAgdHMuc2V0TWluaShmYWxzZSk7XG4gICAgICAgIHRzLmdldEJpbmRpbmcoKS5hZGRMaXN0ZW5lcih4PT4ge1xuICAgICAgICAgICAgdGhpc1tjb2RlXSA9IHRzLmdldFZhbHVlKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvbnMoKVxuICAgICAgICB9KVxuICAgICAgICAvL3RzLnNldENhcHRpb24oY29kZSlcbiAgICAgICAgdHMuc2V0VGV4dChcIlwiICsgKDxhbnk+dGhpcylbY29kZV0pO1xuICAgICAgICB0cy5zZXRDYXB0aW9uKGNhcHRpb24pXG4gICAgICAgIHRzLnNldEdyYW1tYXIobGFuZylcbiAgICAgICAgdHMuc2V0U3R5bGUoXCJoZWlnaHRcIiwgXCI0MDBweFwiKTtcbiAgICAgICAgdHMuc2V0U3R5bGUoXCJib3JkZXJcIiwgXCJzb2xpZFwiKTtcbiAgICAgICAgdHMuc2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIiwgXCIxcHhcIik7XG4gICAgICAgIGhzLmFkZENoaWxkKFVJLmgzKFwiUGxlYXNlIHR5cGUgeW91ciBleGFtcGxlIGhlcmU6XCIpKVxuXG4gICAgICAgIGhzLmFkZENoaWxkKHRzKTtcbiAgICAgICAgaWYgKGNvZGUgPT0gJ2pzZXhhbXBsZScpIHtcbiAgICAgICAgICAgIHZhciBiID0gVUkuYnV0dG9uKFwiR2VuZXJhdGUgSlNPTiBzY2hlbWFcIiwgVUkuQnV0dG9uU2l6ZXMuTk9STUFMLCBVSS5CdXR0b25IaWdobGlnaHRzLlNVQ0NFU1MsIFVJLkljb24uTk9ORSwgeD0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnMgPSBnZW5lcmF0ZVNjaGVtYSh0aGlzLmpzZXhhbXBsZSwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuanNzY2hlbWEgPSBycztcbiAgICAgICAgICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleCgxKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmpzc2NoZW1hID0gZS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB0Zi5zZXRTZWxlY3RlZEluZGV4KDEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBocy5hZGRDaGlsZChiLm1hcmdpbig1LCA1LCA1LCA1KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgKGNvZGUgPT0gJ3htbGV4YW1wbGUnKSB7XG4gICAgICAgIC8vICAgICB2YXIgYiA9IFVJLmJ1dHRvbihcIkdlbmVyYXRlIEpTT04gZXhhbXBsZVwiLCBVSS5CdXR0b25TaXplcy5OT1JNQUwsIFVJLkJ1dHRvbkhpZ2hsaWdodHMuU1VDQ0VTUywgVUkuSWNvbi5OT05FLCB4PT4ge1xuICAgICAgICAvLyAgICAgICAgIHRyeSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBycyA9IHhtbHV0aWwodGhpcy54bWxleGFtcGxlKVxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmpzZXhhbXBsZSA9IEpTT04uc3RyaW5naWZ5KHJzLCBudWxsLCAyKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleCgwKVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmpzZXhhbXBsZSA9IGUubWVzc2FnZTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGYuc2V0U2VsZWN0ZWRJbmRleCgwKVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvLyAgICAgaHMuYWRkQ2hpbGQoYi5tYXJnaW4oNSwgNSwgNSwgNSkpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRmLmFkZChjYXB0aW9uLCBudWxsLCBocyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG9uT2soenopIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlKHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIG5lZWRKU09OOiB0aGlzLm5lZWRKU09OLFxuICAgICAgICAgICAgbmVlZFhNTDogdGhpcy5uZWVkWE1MLFxuICAgICAgICAgICAganNleGFtcGxlOiB0aGlzLmpzZXhhbXBsZSxcbiAgICAgICAgICAgIHhtbGV4YW1wbGU6IHRoaXMueG1sZXhhbXBsZSxcbiAgICAgICAgICAgIGpzc2NoZW1hOiB0aGlzLmpzc2NoZW1hLFxuICAgICAgICAgICAgeG1sc2NoZW1hOiB0aGlzLnhtbHNjaGVtYSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlc3VsdCgpIDogUHJvbWlzZTxJQ29tcGxldGVCb2R5T3V0cHV0VUlTdGF0ZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQcm9taXNlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBydW4oKSA6IFByb21pc2U8YW55PiB7XG4gICAgbGV0IGRpYWxvZyA9IG5ldyBGaWxsQm9keURpYWxvZygpO1xuICAgIGRpYWxvZy5zaG93KCk7XG5cbiAgICByZXR1cm4gZGlhbG9nLmdldFJlc3VsdCgpO1xufVxuIl19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/context-menu/actions/completeBody/ui.js\n// module id = 33\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _dialogPanels = [];\nvar mdp = null;\nfunction _dialog(panel, onDone, toFocus, stretch) {\n    if (stretch === void 0) { stretch = false; }\n    return _dialog2(panel, [\n        { name: \"Ok\", isPrimary: true, highlight: UI.ButtonHighlights.PRIMARY, action: onDone },\n        { name: \"Cancel\", highlight: UI.ButtonHighlights.NO_HIGHLIGHT, action: function () { return true; } }\n    ], toFocus, stretch);\n}\nfunction _dialog2(panel, actions, toFocus, stretch) {\n    if (stretch === void 0) { stretch = false; }\n    var buttonBar = UI.hc().setPercentWidth(100);\n    actions.reverse().forEach(function (a) {\n        var button = UI.button(a.name, UI.ButtonSizes.NORMAL, a.highlight, UI.Icon.NONE, function (x) { if (a.action())\n            _closeDialog(); });\n        if (a.isPrimary) {\n            var st = panel.getBinding().status();\n            if (st) {\n                if (st.code == UI.StatusCode.ERROR) {\n                    button.setDisabled(true);\n                }\n            }\n            panel.getBinding().addStatusListener(function (x) {\n                var st = panel.getBinding().status();\n                if (st) {\n                    if (st.code != UI.StatusCode.ERROR) {\n                        button.setDisabled(false);\n                    }\n                    else {\n                        button.setDisabled(true);\n                    }\n                }\n            });\n        }\n        button.setStyle(\"float\", \"right\")\n            .margin(4, 10);\n        buttonBar.addChild(button);\n    });\n    panel.addChild(buttonBar);\n    var ui = panel.ui();\n    return function (e) {\n        _dialogPanels.push(panel);\n        var eventListener = function () {\n            if (!stretch) {\n                return;\n            }\n            var parent = ui.parentElement;\n            var height = document.body.clientHeight;\n            if (!parent) {\n                return;\n            }\n            var style = window.getComputedStyle(parent);\n            [\"paddingBottom\", \"paddingTop\", \"marginBottom\", \"marginTop\"].forEach(function (property) {\n                height -= parseFloat(style[property] || 0);\n            });\n            ui.style.height = height + \"px\";\n            ui.style.overflowY = \"scroll\";\n        };\n        window.addEventListener('resize', eventListener);\n        mdp = IDE.workspace.addModalPanel({ item: ui });\n        mdp.onDidDestroy(function () {\n            window.removeEventListener('resize', eventListener);\n        });\n        eventListener();\n        if (toFocus)\n            toFocus.ui().focus();\n    };\n}\nfunction _closeDialog() {\n    _dialogPanels.pop();\n    if (_dialogPanels.length == 0)\n        mdp.destroy();\n    else\n        mdp = IDE.workspace.addModalPanel({ item: _dialogPanels[_dialogPanels.length - 1].ui() });\n}\nfunction newMethod(inputState, method) {\n    var mdesc = inputState.methodDescriptions;\n    var cdesc = inputState.statusCodeDescriptions;\n    var NO_RESPONCE = \"No response\";\n    var NO_RESPONCE_BT = \"No response body type\";\n    var code = null, bodyType = null;\n    if (method == null)\n        method = \"get\";\n    var mdescLabel = new UI.LabelField();\n    var cdescLabel = new UI.LabelField();\n    [mdescLabel, cdescLabel].forEach(function (x) { return x.addClass('wizard-description'); });\n    mdescLabel.getActualField().margin(0, 0, 18, 8);\n    cdescLabel.getActualField().margin(0, 0, 8, 8);\n    var methodSelect = new UI.SelectField(\"Method:\", function (e, v) {\n        method = v;\n        mdescLabel.setText(\"Method \" + v + \" \" + mdesc[v]);\n    }, null);\n    methodSelect.getActualField().setOptions(Object.keys(mdesc));\n    methodSelect.getActualField().setValue(method, true);\n    var responseSelect = new UI.SelectField(\"Status code:\", function (e, v) {\n        if (v == NO_RESPONCE) {\n            v = null;\n            responseTypeSelect.getActualField().setValue(NO_RESPONCE_BT);\n        }\n        code = v;\n        responseTypeSelect.setDisabled(v == null);\n        cdescLabel.setText(v ? \"Status code \" + v + \" \" + cdesc[v] : '');\n    }, null);\n    responseSelect.getActualField().setOptions([NO_RESPONCE].concat(Object.keys(cdesc)));\n    var responseTypeSelect = new UI.SelectField(\"Generate default response with media type:\", function (e, v) {\n        if (v == NO_RESPONCE_BT) {\n            v = null;\n            typeOfValue.setDisabled(true);\n        }\n        else\n            typeOfValue.setDisabled(false);\n        bodyType = v;\n    }, null);\n    responseTypeSelect.getActualField().setOptions([NO_RESPONCE_BT, \"application/json\", \"application/xml\", \"application/x-www-form-urlencoded\"]);\n    responseTypeSelect.setDisabled(true);\n    responseTypeSelect.margin(0, 0, 0, 12);\n    var realBodyType = null;\n    var bodyTypeSelect = new UI.SelectField(\"Generate default body with media type:\", function (e, v) {\n        if (v == NO_RESPONCE_BT) {\n            v = null;\n            bodyTypeOfValue.setDisabled(true);\n        }\n        else\n            bodyTypeOfValue.setDisabled(false);\n        realBodyType = v;\n    }, null);\n    bodyTypeSelect.getActualField().setOptions([NO_RESPONCE_BT, \"application/json\", \"application/xml\", \"application/x-www-form-urlencoded\"]);\n    bodyTypeSelect.margin(0, 0, 0, 12);\n    var actualType = null;\n    var bodyTypeString = null;\n    var typeOfValue = new UI.SelectField(\"Generate default response body with type:\", function (e, v) {\n        if (v == NO_RESPONCE_BT)\n            v = null;\n        actualType = v;\n    }, null);\n    typeOfValue.setDisabled(true);\n    typeOfValue.margin(0, 0, 0, 12);\n    var __ret = inputState.typeValues;\n    var isSchema = __ret.isSchema;\n    var types = __ret.types;\n    if (types) {\n        types = [\"\"].concat(types);\n        typeOfValue.getActualField().setOptions(types);\n    }\n    var bodyTypeOfValue = new UI.SelectField(\"Generate default body with type:\", function (e, v) {\n        if (v == NO_RESPONCE_BT)\n            v = null;\n        bodyTypeString = v;\n    }, null);\n    bodyTypeOfValue.setDisabled(true);\n    bodyTypeOfValue.margin(0, 0, 0, 12);\n    var isSchema = __ret.isSchema;\n    var types = __ret.types;\n    if (types) {\n        types = [\"\"].concat(types);\n        bodyTypeOfValue.getActualField().setOptions(types);\n    }\n    var responseSection = UI.section(\"\");\n    responseSection.addChild(UI.h3(\"Body\"));\n    responseSection.addChild(bodyTypeSelect);\n    responseSection.addChild(bodyTypeOfValue);\n    responseSection.addChild(UI.h3(\"Response\"));\n    responseSection.addChild(responseSelect);\n    responseSection.addChild(cdescLabel);\n    responseSection.addChild(responseTypeSelect);\n    responseSection.addChild(typeOfValue);\n    responseSection.ui();\n    var panel = UI.section(\"Creating a new method\", UI.Icon.CODE, false, false, methodSelect, mdescLabel, responseSection);\n    var __ret = inputState.typeValues;\n    //panel.addChild(typeOfValue)\n    var savedResolve;\n    var savedReject;\n    var resultPromise = new Promise(function (resolve, reject) {\n        savedResolve = resolve;\n        savedReject = reject;\n    });\n    _dialog(panel, function () {\n        savedResolve({\n            method: method,\n            realBodyType: realBodyType,\n            code: code,\n            bodyTypeString: bodyTypeString,\n            bodyType: bodyType,\n            actualType: actualType,\n            isSchema: isSchema\n        });\n        return true;\n    })(this);\n    return resultPromise;\n}\nexports.newMethod = newMethod;\nfunction run(inputState) {\n    return newMethod(inputState);\n}\nexports.run = run;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL25ld01ldGhvZC91aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQTRDQSxJQUFJLGFBQWEsR0FBd0IsRUFBRSxDQUFDO0FBQzVDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQztBQUVmLGlCQUFpQixLQUF3QixFQUFFLE1BQXFCLEVBQUUsT0FBaUMsRUFBRSxPQUF3QjtJQUF4Qix3QkFBQSxFQUFBLGVBQXdCO0lBQ3pILE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQ25CLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBSSxTQUFTLEVBQUMsSUFBSSxFQUFLLFNBQVMsRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFVLE1BQU0sRUFBRSxNQUFNLEVBQUU7UUFDbkcsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFJLFNBQVMsRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFLLE1BQU0sRUFBRSxjQUFJLE9BQUEsSUFBSSxFQUFKLENBQUksRUFBRTtLQUN6RixFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBRUQsa0JBQWtCLEtBQXdCLEVBQUUsT0FBNkcsRUFBRSxPQUFpQyxFQUFFLE9BQXdCO0lBQXhCLHdCQUFBLEVBQUEsZUFBd0I7SUFDbE4sSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQUEsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFBLENBQUMsSUFBSyxFQUFF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QUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRVQsTUFBTSxDQUFDLGFBQWEsQ0FBQztBQUN6QixDQUFDO0FBdklELDhCQXVJQztBQUVELGFBQW9CLFVBQWtDO0lBQ2xELE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDakMsQ0FBQztBQUZELGtCQUVDIiwiZmlsZSI6InNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL25ld01ldGhvZC91aS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IGxpYlVJTW9kdWxlID0gcmVxdWlyZShcImF0b20tdWktbGliXCIpXG5cbi8qKlxuICogdWktbGlicyBpbnN0YW5jZVxuICovXG5kZWNsYXJlIGxldCBVSSA6IHR5cGVvZiBsaWJVSU1vZHVsZVxuXG4vKipcbiAqIElERSBVSSBpbnN0YW5jZVxuICovXG5kZWNsYXJlIGxldCBJREU6IGFueTtcblxuLyoqXG4gKiBJbnB1dCBVSSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTmV3TWV0aG9kSW5wdXRVSVN0YXRlIHtcblxuICAgIC8qKlxuICAgICAqIE1hcCBmcm9tIG1ldGhvZCBuYW1lIHRvIG1ldGhvZCBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBtZXRob2REZXNjcmlwdGlvbnM6IHtbbWV0aG9kTmFtZTogc3RyaW5nXSA6IHN0cmluZ307XG5cbiAgICAvKipcbiAgICAgKiBNYXAgZnJvbSBzdGF0dXMgY29kZSBuYW1lIHRvIGNvZGUgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgc3RhdHVzQ29kZURlc2NyaXB0aW9uczoge1tzdGF0dXNDb2RlTmFtZTogc3RyaW5nXSA6IHN0cmluZ307XG5cbiAgICB0eXBlVmFsdWVzOiB7aXNTY2hlbWE6IGJvb2xlYW4sIHR5cGVzOiBzdHJpbmdbXX1cbn1cblxuLyoqXG4gKiBPdXRwdXQgVUkgc3RhdGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU5ld01ldGhvZE91dHB1dFVJU3RhdGUge1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHJlYWxCb2R5VHlwZTogc3RyaW5nXG4gICAgY29kZTogc3RyaW5nO1xuICAgIGJvZHlUeXBlU3RyaW5nOiBzdHJpbmc7XG4gICAgYm9keVR5cGU6IHN0cmluZztcbiAgICBhY3R1YWxUeXBlOiBzdHJpbmc7XG4gICAgaXNTY2hlbWE6IHN0cmluZztcbn1cblxudmFyIF9kaWFsb2dQYW5lbHM6IGxpYlVJTW9kdWxlLlBhbmVsW10gPSBbXTtcbnZhciBtZHAgPSBudWxsO1xuXG5mdW5jdGlvbiBfZGlhbG9nKHBhbmVsOiBsaWJVSU1vZHVsZS5QYW5lbCwgb25Eb25lOiAoKSA9PiBib29sZWFuLCB0b0ZvY3VzPzogbGliVUlNb2R1bGUuVUlDb21wb25lbnQsIHN0cmV0Y2g6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHJldHVybiBfZGlhbG9nMihwYW5lbCwgW1xuICAgICAgICB7IG5hbWU6IFwiT2tcIiwgICBpc1ByaW1hcnk6dHJ1ZSwgICAgaGlnaGxpZ2h0OiBVSS5CdXR0b25IaWdobGlnaHRzLlBSSU1BUlksICAgICAgICAgYWN0aW9uOiBvbkRvbmUgfSxcbiAgICAgICAgeyBuYW1lOiBcIkNhbmNlbFwiLCAgIGhpZ2hsaWdodDogVUkuQnV0dG9uSGlnaGxpZ2h0cy5OT19ISUdITElHSFQsICAgIGFjdGlvbjogKCk9PnRydWUgfVxuICAgIF0sIHRvRm9jdXMsIHN0cmV0Y2gpO1xufVxuXG5mdW5jdGlvbiBfZGlhbG9nMihwYW5lbDogbGliVUlNb2R1bGUuUGFuZWwsIGFjdGlvbnM6IHsgbmFtZTogc3RyaW5nOyBpc1ByaW1hcnk/OmJvb2xlYW47aGlnaGxpZ2h0OiBsaWJVSU1vZHVsZS5CdXR0b25IaWdobGlnaHRzOyBhY3Rpb246ICgpID0+IGJvb2xlYW59W10sIHRvRm9jdXM/OiBsaWJVSU1vZHVsZS5VSUNvbXBvbmVudCwgc3RyZXRjaDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdmFyIGJ1dHRvbkJhciA9IFVJLmhjKCkuc2V0UGVyY2VudFdpZHRoKDEwMCk7XG5cbiAgICBhY3Rpb25zLnJldmVyc2UoKS5mb3JFYWNoKGEgPT4ge1xuICAgICAgICB2YXIgYnV0dG9uID0gVUkuYnV0dG9uKGEubmFtZSwgVUkuQnV0dG9uU2l6ZXMuTk9STUFMLCBhLmhpZ2hsaWdodCwgVUkuSWNvbi5OT05FLCB4PT4geyBpZiAoYS5hY3Rpb24oKSkgX2Nsb3NlRGlhbG9nKCk7IH0pO1xuICAgICAgICBpZiAoYS5pc1ByaW1hcnkpe1xuICAgICAgICAgICAgdmFyIHN0PXBhbmVsLmdldEJpbmRpbmcoKS5zdGF0dXMoKTtcbiAgICAgICAgICAgIGlmIChzdCkge1xuICAgICAgICAgICAgICAgIGlmIChzdC5jb2RlID09IFVJLlN0YXR1c0NvZGUuRVJST1IpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhbmVsLmdldEJpbmRpbmcoKS5hZGRTdGF0dXNMaXN0ZW5lcigoeCk9PntcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSBwYW5lbC5nZXRCaW5kaW5nKCkuc3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdC5jb2RlICE9IFVJLlN0YXR1c0NvZGUuRVJST1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbi5zZXRTdHlsZShcImZsb2F0XCIsIFwicmlnaHRcIilcbiAgICAgICAgICAgIC5tYXJnaW4oNCwxMCk7XG5cbiAgICAgICAgYnV0dG9uQmFyLmFkZENoaWxkKGJ1dHRvbik7XG4gICAgfSk7XG5cbiAgICBwYW5lbC5hZGRDaGlsZChidXR0b25CYXIpO1xuXG4gICAgdmFyIHVpID0gcGFuZWwudWkoKTtcblxuICAgIHJldHVybiAoZSkgPT4ge1xuICAgICAgICBfZGlhbG9nUGFuZWxzLnB1c2gocGFuZWwpO1xuXG4gICAgICAgIHZhciBldmVudExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYoIXN0cmV0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB1aS5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGlmKCFwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCk7XG5cbiAgICAgICAgICAgIFtcInBhZGRpbmdCb3R0b21cIiwgXCJwYWRkaW5nVG9wXCIsIFwibWFyZ2luQm90dG9tXCIsIFwibWFyZ2luVG9wXCJdLmZvckVhY2gocHJvcGVydHkgPT4ge1xuICAgICAgICAgICAgICAgIGhlaWdodCAtPSBwYXJzZUZsb2F0KHN0eWxlW3Byb3BlcnR5XSB8fCAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB1aS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB1aS5zdHlsZS5vdmVyZmxvd1kgPSBcInNjcm9sbFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50TGlzdGVuZXIpO1xuXG4gICAgICAgIG1kcCA9ICg8YW55PklERSkud29ya3NwYWNlLmFkZE1vZGFsUGFuZWwoeyBpdGVtOiB1aX0pO1xuXG4gICAgICAgIG1kcC5vbkRpZERlc3Ryb3koKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBldmVudExpc3RlbmVyKCk7XG5cbiAgICAgICAgaWYgKHRvRm9jdXMpIHRvRm9jdXMudWkoKS5mb2N1cygpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9jbG9zZURpYWxvZygpIHtcbiAgICBfZGlhbG9nUGFuZWxzLnBvcCgpO1xuICAgIGlmIChfZGlhbG9nUGFuZWxzLmxlbmd0aCA9PSAwKVxuICAgICAgICBtZHAuZGVzdHJveSgpO1xuICAgIGVsc2VcbiAgICAgICAgbWRwID0gSURFLndvcmtzcGFjZS5hZGRNb2RhbFBhbmVsKHtpdGVtOiBfZGlhbG9nUGFuZWxzW19kaWFsb2dQYW5lbHMubGVuZ3RoIC0xXS51aSgpIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3TWV0aG9kKGlucHV0U3RhdGU6IElOZXdNZXRob2RJbnB1dFVJU3RhdGUsIG1ldGhvZD86IHN0cmluZykge1xuXG4gICAgdmFyIG1kZXNjID0gaW5wdXRTdGF0ZS5tZXRob2REZXNjcmlwdGlvbnNcbiAgICB2YXIgY2Rlc2MgPSBpbnB1dFN0YXRlLnN0YXR1c0NvZGVEZXNjcmlwdGlvbnM7XG5cblxuICAgIHZhciBOT19SRVNQT05DRSA9IFwiTm8gcmVzcG9uc2VcIjtcbiAgICB2YXIgTk9fUkVTUE9OQ0VfQlQgPSBcIk5vIHJlc3BvbnNlIGJvZHkgdHlwZVwiO1xuICAgIHZhciBjb2RlID0gbnVsbCwgYm9keVR5cGUgPSBudWxsO1xuICAgIGlmIChtZXRob2QgPT0gbnVsbCkgbWV0aG9kID0gXCJnZXRcIjtcblxuXG4gICAgdmFyIG1kZXNjTGFiZWwgPSBuZXcgVUkuTGFiZWxGaWVsZCgpO1xuICAgIHZhciBjZGVzY0xhYmVsID0gbmV3IFVJLkxhYmVsRmllbGQoKTtcblxuICAgIFttZGVzY0xhYmVsLCBjZGVzY0xhYmVsXS5mb3JFYWNoKHg9PnguYWRkQ2xhc3MoJ3dpemFyZC1kZXNjcmlwdGlvbicpKTtcblxuICAgIG1kZXNjTGFiZWwuZ2V0QWN0dWFsRmllbGQoKS5tYXJnaW4oMCwgMCwgMTgsIDgpO1xuICAgIGNkZXNjTGFiZWwuZ2V0QWN0dWFsRmllbGQoKS5tYXJnaW4oMCwgMCwgOCwgOCk7XG5cblxuICAgIHZhciBtZXRob2RTZWxlY3QgPSBuZXcgVUkuU2VsZWN0RmllbGQoXCJNZXRob2Q6XCIsIChlLCB2KSA9PiB7XG4gICAgICAgIG1ldGhvZCA9IHZcbiAgICAgICAgbWRlc2NMYWJlbC5zZXRUZXh0KGBNZXRob2QgJHt2fSAke21kZXNjW3ZdfWApO1xuICAgIH0sIG51bGwpO1xuICAgIG1ldGhvZFNlbGVjdC5nZXRBY3R1YWxGaWVsZCgpLnNldE9wdGlvbnMoT2JqZWN0LmtleXMobWRlc2MpKTtcbiAgICBtZXRob2RTZWxlY3QuZ2V0QWN0dWFsRmllbGQoKS5zZXRWYWx1ZShtZXRob2QsIHRydWUpO1xuXG4gICAgdmFyIHJlc3BvbnNlU2VsZWN0ID0gbmV3IFVJLlNlbGVjdEZpZWxkKFwiU3RhdHVzIGNvZGU6XCIsIChlLCB2KSA9PiB7XG4gICAgICAgIGlmICh2ID09IE5PX1JFU1BPTkNFKSB7XG4gICAgICAgICAgICB2ID0gbnVsbDtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZVNlbGVjdC5nZXRBY3R1YWxGaWVsZCgpLnNldFZhbHVlKE5PX1JFU1BPTkNFX0JUKTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlID0gdjtcbiAgICAgICAgcmVzcG9uc2VUeXBlU2VsZWN0LnNldERpc2FibGVkKHYgPT0gbnVsbCk7XG4gICAgICAgIGNkZXNjTGFiZWwuc2V0VGV4dCh2ID8gYFN0YXR1cyBjb2RlICR7dn0gJHtjZGVzY1t2XX1gIDogJycpO1xuICAgIH0sIG51bGwpO1xuICAgIHJlc3BvbnNlU2VsZWN0LmdldEFjdHVhbEZpZWxkKCkuc2V0T3B0aW9ucyhbTk9fUkVTUE9OQ0VdLmNvbmNhdChPYmplY3Qua2V5cyhjZGVzYykpKTtcblxuICAgIHZhciByZXNwb25zZVR5cGVTZWxlY3QgPSBuZXcgVUkuU2VsZWN0RmllbGQoXCJHZW5lcmF0ZSBkZWZhdWx0IHJlc3BvbnNlIHdpdGggbWVkaWEgdHlwZTpcIiwgKGUsIHYpID0+IHtcbiAgICAgICAgaWYgKHYgPT0gTk9fUkVTUE9OQ0VfQlQpIHtcbiAgICAgICAgICAgIHYgPSBudWxsO1xuICAgICAgICAgICAgdHlwZU9mVmFsdWUuc2V0RGlzYWJsZWQodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHR5cGVPZlZhbHVlLnNldERpc2FibGVkKGZhbHNlKVxuICAgICAgICBib2R5VHlwZSA9IHY7XG4gICAgfSwgbnVsbCk7XG4gICAgcmVzcG9uc2VUeXBlU2VsZWN0LmdldEFjdHVhbEZpZWxkKCkuc2V0T3B0aW9ucyhbTk9fUkVTUE9OQ0VfQlQsIFwiYXBwbGljYXRpb24vanNvblwiLCBcImFwcGxpY2F0aW9uL3htbFwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXSk7XG4gICAgcmVzcG9uc2VUeXBlU2VsZWN0LnNldERpc2FibGVkKHRydWUpO1xuICAgIHJlc3BvbnNlVHlwZVNlbGVjdC5tYXJnaW4oMCwgMCwgMCwgMTIpO1xuXG5cbiAgICB2YXIgcmVhbEJvZHlUeXBlPW51bGxcbiAgICB2YXIgYm9keVR5cGVTZWxlY3QgPSBuZXcgVUkuU2VsZWN0RmllbGQoXCJHZW5lcmF0ZSBkZWZhdWx0IGJvZHkgd2l0aCBtZWRpYSB0eXBlOlwiLCAoZSwgdikgPT4ge1xuICAgICAgICBpZiAodiA9PSBOT19SRVNQT05DRV9CVCkge1xuICAgICAgICAgICAgdiA9IG51bGw7XG4gICAgICAgICAgICBib2R5VHlwZU9mVmFsdWUuc2V0RGlzYWJsZWQodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGJvZHlUeXBlT2ZWYWx1ZS5zZXREaXNhYmxlZChmYWxzZSlcbiAgICAgICAgcmVhbEJvZHlUeXBlID0gdjtcbiAgICB9LCBudWxsKTtcbiAgICBib2R5VHlwZVNlbGVjdC5nZXRBY3R1YWxGaWVsZCgpLnNldE9wdGlvbnMoW05PX1JFU1BPTkNFX0JULCBcImFwcGxpY2F0aW9uL2pzb25cIiwgXCJhcHBsaWNhdGlvbi94bWxcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIl0pO1xuICAgIGJvZHlUeXBlU2VsZWN0Lm1hcmdpbigwLCAwLCAwLCAxMik7XG5cbiAgICB2YXIgYWN0dWFsVHlwZTpzdHJpbmcgPSBudWxsO1xuICAgIHZhciBib2R5VHlwZVN0cmluZzogc3RyaW5nPW51bGw7XG4gICAgdmFyIHR5cGVPZlZhbHVlID0gbmV3IFVJLlNlbGVjdEZpZWxkKFwiR2VuZXJhdGUgZGVmYXVsdCByZXNwb25zZSBib2R5IHdpdGggdHlwZTpcIiwgKGUsIHYpID0+IHtcbiAgICAgICAgaWYgKHYgPT0gTk9fUkVTUE9OQ0VfQlQpIHYgPSBudWxsO1xuICAgICAgICBhY3R1YWxUeXBlID0gdjtcbiAgICB9LCBudWxsKTtcbiAgICB0eXBlT2ZWYWx1ZS5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICB0eXBlT2ZWYWx1ZS5tYXJnaW4oMCwgMCwgMCwgMTIpO1xuICAgIHZhciBfX3JldD0gaW5wdXRTdGF0ZS50eXBlVmFsdWVzO1xuICAgIHZhciBpc1NjaGVtYSA9IF9fcmV0LmlzU2NoZW1hO1xuICAgIHZhciB0eXBlcyA9IF9fcmV0LnR5cGVzO1xuICAgIGlmICh0eXBlcykge1xuICAgICAgICB0eXBlcyA9IFtcIlwiXS5jb25jYXQodHlwZXMpO1xuICAgICAgICB0eXBlT2ZWYWx1ZS5nZXRBY3R1YWxGaWVsZCgpLnNldE9wdGlvbnModHlwZXMpO1xuICAgIH1cbiAgICB2YXIgYm9keVR5cGVPZlZhbHVlID0gbmV3IFVJLlNlbGVjdEZpZWxkKFwiR2VuZXJhdGUgZGVmYXVsdCBib2R5IHdpdGggdHlwZTpcIiwgKGUsIHYpID0+IHtcbiAgICAgICAgaWYgKHYgPT0gTk9fUkVTUE9OQ0VfQlQpIHYgPSBudWxsO1xuICAgICAgICBib2R5VHlwZVN0cmluZyA9IHY7XG4gICAgfSwgbnVsbCk7XG4gICAgYm9keVR5cGVPZlZhbHVlLnNldERpc2FibGVkKHRydWUpO1xuICAgIGJvZHlUeXBlT2ZWYWx1ZS5tYXJnaW4oMCwgMCwgMCwgMTIpO1xuICAgIHZhciBpc1NjaGVtYSA9IF9fcmV0LmlzU2NoZW1hO1xuICAgIHZhciB0eXBlcyA9IF9fcmV0LnR5cGVzO1xuICAgIGlmICh0eXBlcykge1xuICAgICAgICB0eXBlcyA9IFtcIlwiXS5jb25jYXQodHlwZXMpO1xuICAgICAgICBib2R5VHlwZU9mVmFsdWUuZ2V0QWN0dWFsRmllbGQoKS5zZXRPcHRpb25zKHR5cGVzKTtcbiAgICB9XG4gICAgdmFyIHJlc3BvbnNlU2VjdGlvbiA9IFVJLnNlY3Rpb24oXCJcIik7XG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKFVJLmgzKFwiQm9keVwiKSlcbiAgICByZXNwb25zZVNlY3Rpb24uYWRkQ2hpbGQoYm9keVR5cGVTZWxlY3QpO1xuICAgIHJlc3BvbnNlU2VjdGlvbi5hZGRDaGlsZChib2R5VHlwZU9mVmFsdWUpXG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKFVJLmgzKFwiUmVzcG9uc2VcIikpXG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKHJlc3BvbnNlU2VsZWN0KTtcbiAgICByZXNwb25zZVNlY3Rpb24uYWRkQ2hpbGQoY2Rlc2NMYWJlbCk7XG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKHJlc3BvbnNlVHlwZVNlbGVjdCk7XG4gICAgcmVzcG9uc2VTZWN0aW9uLmFkZENoaWxkKHR5cGVPZlZhbHVlKTtcbiAgICByZXNwb25zZVNlY3Rpb24udWkoKTtcbiAgICB2YXIgcGFuZWwgPSBVSS5zZWN0aW9uKFwiQ3JlYXRpbmcgYSBuZXcgbWV0aG9kXCIsIFVJLkljb24uQ09ERSwgZmFsc2UsIGZhbHNlLFxuICAgICAgICBtZXRob2RTZWxlY3QsIG1kZXNjTGFiZWwsIHJlc3BvbnNlU2VjdGlvblxuICAgICk7XG5cblxuICAgIHZhciBfX3JldCA9IGlucHV0U3RhdGUudHlwZVZhbHVlcztcblxuICAgIC8vcGFuZWwuYWRkQ2hpbGQodHlwZU9mVmFsdWUpXG5cbiAgICB2YXIgc2F2ZWRSZXNvbHZlO1xuICAgIHZhciBzYXZlZFJlamVjdDtcblxuICAgIGNvbnN0IHJlc3VsdFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZTogKHZhbHVlPzogSU5ld01ldGhvZE91dHB1dFVJU3RhdGUpID0+IHZvaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdDogKGVycm9yPzogYW55KSA9PiB2b2lkKSA9PiB7XG5cbiAgICAgICAgc2F2ZWRSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgc2F2ZWRSZWplY3QgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICBfZGlhbG9nKHBhbmVsLCAoKT0+IHtcbiAgICAgICAgc2F2ZWRSZXNvbHZlKHtcbiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgcmVhbEJvZHlUeXBlOiByZWFsQm9keVR5cGUsXG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgYm9keVR5cGVTdHJpbmc6IGJvZHlUeXBlU3RyaW5nLFxuICAgICAgICAgICAgYm9keVR5cGU6IGJvZHlUeXBlLFxuICAgICAgICAgICAgYWN0dWFsVHlwZTogYWN0dWFsVHlwZSxcbiAgICAgICAgICAgIGlzU2NoZW1hOiBpc1NjaGVtYVxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pKHRoaXMpO1xuXG4gICAgcmV0dXJuIHJlc3VsdFByb21pc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBydW4oaW5wdXRTdGF0ZTogSU5ld01ldGhvZElucHV0VUlTdGF0ZSkgOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXdNZXRob2QoaW5wdXRTdGF0ZSk7XG59Il19\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/context-menu/actions/newMethod/ui.js\n// module id = 34\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction run(initialState) {\n    if (initialState.isParentNull) {\n        return Promise.resolve({\n            canceled: true\n        });\n    }\n    var changes = {};\n    var item = UIBuilder.buildItem(initialState.detailsTree, {\n        uri: \"localchanges\",\n        position: -1,\n        reconciler: {\n            schedule: function (runnable) { return runnable.run(); }\n        },\n        localModel: changes\n    });\n    item.setTitle(initialState.title);\n    var panel = item.render({\n        showDescription: true\n    });\n    panel.margin(8, 8, 8, 8);\n    return new Promise(function (resolve) {\n        UI.simpleModalDialog(panel, function () {\n            resolve(changes);\n            return true;\n        }, function () {\n            resolve({\n                canceled: true\n            });\n            return true;\n        });\n    });\n}\nexports.run = run;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hdG9tL2NvbnRleHQtbWVudS9hY3Rpb25zL3NpbXBsZUFjdGlvbi91aS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU1BLGFBQW9CLFlBQVk7SUFDNUIsRUFBRSxDQUFBLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDM0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7WUFDbkIsUUFBUSxFQUFFLElBQUk7U0FDakIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELElBQUksT0FBTyxHQUFRLEVBQUUsQ0FBQztJQUV0QixJQUFJLElBQUksR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUU7UUFDckQsR0FBRyxFQUFFLGNBQWM7UUFDbkIsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUNaLFVBQVUsRUFBRTtZQUNSLFFBQVEsRUFBRSxVQUFBLFFBQVEsSUFBSSxPQUFBLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBZCxDQUFjO1NBQ3ZDO1FBQ0QsVUFBVSxFQUFFLE9BQU87S0FDdEIsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFbEMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNwQixlQUFlLEVBQUUsSUFBSTtLQUN4QixDQUFDLENBQUM7SUFFSCxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXpCLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU87UUFDdkIsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRTtZQUN4QixPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFakIsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDLEVBQUU7WUFDQyxPQUFPLENBQUM7Z0JBQ0osUUFBUSxFQUFFLElBQUk7YUFDakIsQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQXZDRCxrQkF1Q0MiLCJmaWxlIjoic3JjL2F0b20vY29udGV4dC1tZW51L2FjdGlvbnMvc2ltcGxlQWN0aW9uL3VpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxpYlVJTW9kdWxlID0gcmVxdWlyZShcImF0b20tdWktbGliXCIpXG5cbmRlY2xhcmUgbGV0IFVJOiBhbnk7XG5kZWNsYXJlIGxldCBJREU6IGFueTtcbmRlY2xhcmUgbGV0IFVJQnVpbGRlcjogYW55O1xuXG5leHBvcnQgZnVuY3Rpb24gcnVuKGluaXRpYWxTdGF0ZSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYoaW5pdGlhbFN0YXRlLmlzUGFyZW50TnVsbCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGNhbmNlbGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB2YXIgY2hhbmdlczogYW55ID0ge307XG5cbiAgICB2YXIgaXRlbSA9IFVJQnVpbGRlci5idWlsZEl0ZW0oaW5pdGlhbFN0YXRlLmRldGFpbHNUcmVlLCB7XG4gICAgICAgIHVyaTogXCJsb2NhbGNoYW5nZXNcIixcbiAgICAgICAgcG9zaXRpb246IC0xLFxuICAgICAgICByZWNvbmNpbGVyOiB7XG4gICAgICAgICAgICBzY2hlZHVsZTogcnVubmFibGUgPT4gcnVubmFibGUucnVuKClcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYWxNb2RlbDogY2hhbmdlc1xuICAgIH0pO1xuXG4gICAgaXRlbS5zZXRUaXRsZShpbml0aWFsU3RhdGUudGl0bGUpO1xuXG4gICAgdmFyIHBhbmVsID0gaXRlbS5yZW5kZXIoe1xuICAgICAgICBzaG93RGVzY3JpcHRpb246IHRydWVcbiAgICB9KTtcblxuICAgIHBhbmVsLm1hcmdpbig4LCA4LCA4LCA4KTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBVSS5zaW1wbGVNb2RhbERpYWxvZyhwYW5lbCwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShjaGFuZ2VzKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGNhbmNlbGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/atom/context-menu/actions/simpleAction/ui.js\n// module id = 35\n// module chunks = 0","module.exports = require(\"atom-package-deps\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"atom-package-deps\"\n// module id = 36\n// module chunks = 0"],"sourceRoot":""}